/*! UTC: 2020-09-13T08:24:06.873Z | ab75204 | 2.10.1445 */!function(t){var e={};function __webpack_require__(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=688)}([,,,function(t,e,n){"use strict";e.a=function __extends(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};Object.assign},function(t,e){var n,r,o=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(n===setTimeout)return setTimeout(t,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){n=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){r=defaultClearTimeout}}();var i,s=[],a=!1,c=-1;function cleanUpNextTick(){a&&i&&(a=!1,i.length?s=i.concat(s):c=-1,s.length&&drainQueue())}function drainQueue(){if(!a){var t=runTimeout(cleanUpNextTick);a=!0;for(var e=s.length;e;){for(i=s,s=[];++c<e;)i&&i[c].run();c=-1,e=s.length}i=null,a=!1,function runClearTimeout(t){if(r===clearTimeout)return clearTimeout(t);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new Item(t,e)),1!==s.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(3),o=n(50),i=n(106),s=n(14),a=n(78),c=n(55),u=n(76),l=function(t){function Subscriber(e,n,r){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=i.a;break;case 1:if(!e){o.destination=i.a;break}if("object"==typeof e){e instanceof Subscriber?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new f(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new f(o,e,n,r)}return o}return r.a(Subscriber,t),Subscriber.prototype[a.a]=function(){return this},Subscriber.create=function(t,e,n){var r=new Subscriber(t,e,n);return r.syncErrorThrowable=!1,r},Subscriber.prototype.next=function(t){this.isStopped||this._next(t)},Subscriber.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(t){this.destination.next(t)},Subscriber.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},Subscriber}(s.a),f=function(t){function SafeSubscriber(e,n,r,s){var a,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return Object(o.a)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==i.a&&(u=Object.create(n),Object(o.a)(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=r,c._complete=s,c}return r.a(SafeSubscriber,t),SafeSubscriber.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},SafeSubscriber.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}},SafeSubscriber.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.a.useDeprecatedSynchronousErrorHandling)throw t;Object(u.a)(t)}},SafeSubscriber.prototype.__tryOrSetError=function(t,e,n){if(!c.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return c.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(u.a)(e),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},SafeSubscriber}(l)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(75),o=n(188),i=n(39),s=n(89),a=n(55),c=function(){function Observable(t){this._isScalar=!1,t&&(this._subscribe=t)}return Observable.prototype.lift=function(t){var e=new Observable;return e.source=this,e.operator=t,e},Observable.prototype.subscribe=function(t,e,n){var r=this.operator,i=Object(o.a)(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||a.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},Observable.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}},Observable.prototype.forEach=function(t,e){var n=this;return new(e=getPromiseCtor(e))(function(e,r){var o;o=n.subscribe(function(e){try{t(e)}catch(t){r(t),o&&o.unsubscribe()}},r,e)})},Observable.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},Observable.prototype[i.a]=function(){return this},Observable.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(s.b)(t)(this)},Observable.prototype.toPromise=function(t){var e=this;return new(t=getPromiseCtor(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},Observable.create=function(t){return new Observable(t)},Observable}();function getPromiseCtor(t){if(t||(t=a.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},,,,function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function OuterSubscriber(){return null!==t&&t.apply(this,arguments)||this}return r.a(OuterSubscriber,t),OuterSubscriber.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},OuterSubscriber.prototype.notifyError=function(t,e){this.destination.error(t)},OuterSubscriber.prototype.notifyComplete=function(t){this.destination.complete()},OuterSubscriber}(n(5).a)},function(t,e,n){"use strict";e.a=function subscribeToResult(t,e,n,s,a){void 0===a&&(a=new r.a(t,n,s));if(a.closed)return;if(e instanceof i.a)return e.subscribe(a);return Object(o.a)(e)(a)};var r=n(35),o=n(80),i=n(6)},,,function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(17),o=n(77),i=n(50),s=n(107),a=function(){function Subscription(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return Subscription.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._unsubscribe,a=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof Subscription)e.remove(this);else if(null!==e)for(var c=0;c<e.length;++c){e[c].remove(this)}if(Object(i.a)(n))try{n.call(this)}catch(e){t=e instanceof s.a?flattenUnsubscriptionErrors(e.errors):[e]}if(Object(r.a)(a)){c=-1;for(var u=a.length;++c<u;){var l=a[c];if(Object(o.a)(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof s.a?t=t.concat(flattenUnsubscriptionErrors(e.errors)):t.push(e)}}}if(t)throw new s.a(t)}},Subscription.prototype.add=function(t){var e=t;if(!t)return Subscription.EMPTY;switch(typeof t){case"function":e=new Subscription(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof Subscription)){var n=e;(e=new Subscription)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=e._parentOrParents;if(null===r)e._parentOrParents=this;else if(r instanceof Subscription){if(r===this)return e;e._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return e;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e},Subscription.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},Subscription.EMPTY=((t=new Subscription).closed=!0,t),Subscription}();function flattenUnsubscriptionErrors(t){return t.reduce(function(t,e){return t.concat(e instanceof s.a?e.errors:e)},[])}},,function(t,e,n){"use strict";e.g=function captureGlobalErrors(t,e,n){t.addEventListener("error",function(t){e&&t.preventDefault(),n(t)}),t.addEventListener("unhandledrejection",function(t){e&&t.preventDefault(),n(t)})},n.d(e,"z",function(){return f}),e.y=function safeSetInterval(t,e){var n=function(){r=f(n,e),t()},r=f(n,e);return function(){r()}},e.r=function makeDistincter(){var t=new Set;return function(e){return!t.has(e)&&(t.add(e),!0)}},e.s=function makeWeakDistincter(){var t=new WeakSet;return function(e){return!t.has(e)&&(t.add(e),!0)}},e.A=function sleep(t){return new Promise(function(e){return setTimeout(e,t)})},e.l=function fetchJson(t){return fetchText(t).then(function(t){if(!t)throw new Error("fetchJson - JSON empty");return JSON.parse(t)})},n.d(e,"c",function(){return d}),n.d(e,"d",function(){return p}),e.m=fetchText,e.w=function removeSrcFromImgs(t){for(var e=t.querySelectorAll("img"),n=0;n<e.length;n++)e[n].removeAttribute("src");return!0},e.x=function requestIdleCallbackPromise(t){void 0===t&&(t={timeout:50});return new Promise(function(e,n){!function requestIdleCallback(t,e){void 0===e&&(e={timeout:50});if("requestIdleCallback"in window)return window.requestIdleCallback(t,e);return setTimeout(function(){t({didTimeout:!0,timeRemaining:function(){return 0}})},e.timeout)}(e,t)})},e.a=function ChangeDomainInRavenReports(t,e,n){t.setDataCallback(function(t){if(t.stacktrace)changeFramesInRavenException(t,e,n);else if(t.exception)for(var r=t.exception.values,o=0,i=r;o<i.length;o++){var s=i[o];changeFramesInRavenException(s,e,n)}})},e.b=function ChangeDomainInRavenReportsAndSanetizeRavenEvent(t,e,n){t.setDataCallback(function(t){if(t.stacktrace)changeFramesInRavenException(t,e,n);else if(t.exception)for(var r=t.exception.values,o=0,i=r;o<i.length;o++){var s=i[o];changeFramesInRavenException(s,e,n)}if(t.request){if(t.request.url){var a=new URL(t.request.url);a.pathname="",a.search="",a.hash="",t.request.url=a.toString()}t.request.headers&&delete t.request.headers.Referer}})},e.h=function checkIfFirefox(){return navigator.userAgent.toLowerCase().search("firefox")>-1};var r=n(221);n.d(e,"o",function(){return r.a});var o=n(222);n.d(e,"v",function(){return o.a});var i=n(223);n.d(e,"e",function(){return i.a});var s=n(27);n.d(e,"f",function(){return s.a}),n.d(e,"i",function(){return s.b}),n.d(e,"j",function(){return s.c}),n.d(e,"k",function(){return s.d}),n.d(e,"n",function(){return s.e}),n.d(e,"p",function(){return s.g}),n.d(e,"q",function(){return s.i}),n.d(e,"t",function(){return s.j}),n.d(e,"u",function(){return s.k}),n.d(e,"B",function(){return s.l});var a,c=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=setTimeout;"undefined"!=typeof window&&window.setTimeout.nativeBackup&&(u=window.setTimeout.nativeBackup.bind(window));var l=clearTimeout;"undefined"!=typeof window&&window.clearTimeout.nativeBackup&&(l=window.clearTimeout.nativeBackup.bind(window));var f=function(t,e){var n=Math.pow(2,31)-1,r=e%n,o=Math.floor(e/n),i=0,s=null,a=function(){i===o?t():(i++,s=u(a,n))};return 0===r&&0!==e?a():s=u(a,r),function(){null!==s&&l(s)}};var d=function(t){function HTTPError(e,n,r,o,i){var s=t.call(this,e)||this;return s.httpCode=n,s.shortMessage=r,s.requestUrl=o,s.responseUrl=i,s.name="HTTPError",Object.setPrototypeOf(s,HTTPError.prototype),s}return c(HTTPError,t),HTTPError}(Error),p=function(t){function HTTPIOError(e,n,r,o,i){var s=t.call(this,e)||this;return s.shortMessage=n,s.requestUrl=r,s.type=o,s.responseURL=i,s.name="HTTPIOError",Object.setPrototypeOf(s,HTTPIOError.prototype),s}return c(HTTPIOError,t),HTTPIOError}(Error);function fetchText(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=1e4),new Promise(function(r,o){var i=new XMLHttpRequest;i.responseType="text",i.open("GET",t),i.timeout=n;for(var s=0,a=e;s<a.length;s++){var c=a[s],u=c[0],l=c[1];i.setRequestHeader(u,l)}i.addEventListener("load",function(){200!==i.status?o(new d("status: "+i.status+"-"+i.statusText+"|req url:"+t,i.status,i.statusText,t,i.responseURL)):r(i.responseText)}),i.addEventListener("error",function onXHRError(e){o(new p("xhr.error","error",t,e.type,i.responseURL))}),i.addEventListener("abort",function onXHRAbort(e){o(new p("xhr.abort","error",t,e.type,i.responseURL))}),i.addEventListener("timeout",function onXHRTimeout(e){o(new p("xhr.timeout","error",t,e.type,i.responseURL))}),i.send()})}function changeFramesInRavenException(t,e,n){if(t.stacktrace)for(var r=0,o=t.stacktrace.frames;r<o.length;r++){var i=o[r];i.filename=i.filename.replace(n,e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}()},,function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return f});var r=n(3),o=n(6),i=n(5),s=n(14),a=n(56),c=n(108),u=n(78),l=function(t){function SubjectSubscriber(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.a(SubjectSubscriber,t),SubjectSubscriber}(i.a),f=function(t){function Subject(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(Subject,t),Subject.prototype[u.a]=function(){return new l(this)},Subject.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},Subject.prototype.next=function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},Subject.prototype.error=function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(e){if(this.closed)throw new a.a;return t.prototype._trySubscribe.call(this,e)},Subject.prototype._subscribe=function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),s.a.EMPTY):this.isStopped?(t.complete(),s.a.EMPTY):(this.observers.push(t),new c.a(this,t))},Subject.prototype.asObservable=function(){var t=new o.a;return t.source=this,t},Subject.create=function(t,e){return new d(t,e)},Subject}(o.a),d=function(t){function AnonymousSubject(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.a(AnonymousSubject,t),AnonymousSubject.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},AnonymousSubject.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},AnonymousSubject.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.a.EMPTY},AnonymousSubject}(f)},function(t,e,n){"use strict";var r=n(6);n.d(e,"c",function(){return r.a});n(137),n(138),n(39);var o=n(19);n.d(e,"d",function(){return o.a});var i=n(139);n.d(e,"a",function(){return i.a});n(98),n(67),n(141);var s=n(21);n.d(e,"e",function(){return s.a});n(109),n(195),n(198),n(110),n(14),n(5),n(68),n(89),n(65),n(43),n(199),n(57),n(58),n(56),n(107),n(142);var a=n(200);n.d(e,"f",function(){return a.a});n(201),n(99),n(73);var c=n(92);n.d(e,"g",function(){return c.a});var u=n(29),l=(n(210),n(31));n.d(e,"h",function(){return l.a});var f=n(211);n.d(e,"i",function(){return f.a});var d=n(212);n.d(e,"j",function(){return d.a});n(213);var p=n(214);n.d(e,"k",function(){return p.a});n(215);var h=n(144);n.d(e,"l",function(){return h.a});n(115);var b=n(66);n.d(e,"m",function(){return b.a});n(216),n(217),n(218),n(146),n(219);var _=n(90);n.d(e,"n",function(){return _.a});var v=n(147);n.d(e,"o",function(){return v.a});n(220),n(100),n(114);n.d(e,"b",function(){return u.a});n(55)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(44),o=new(n(45).a)(r.a)},,,,,function(t,e,n){"use strict";e.a=function map(t,e){return function mapOperation(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function MapOperator(t,e){this.project=t,this.thisArg=e}return MapOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},MapOperator}(),s=function(t){function MapSubscriber(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return r.a(MapSubscriber,t),MapSubscriber.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},MapSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(224);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b}),n.d(e,"c",function(){return r.c}),n.d(e,"d",function(){return r.d}),n.d(e,"e",function(){return r.e}),n.d(e,"f",function(){return r.f}),n.d(e,"g",function(){return r.g}),n.d(e,"h",function(){return r.h}),n.d(e,"i",function(){return r.i}),n.d(e,"j",function(){return r.j}),n.d(e,"k",function(){return r.k}),n.d(e,"l",function(){return r.l}),n.d(e,"m",function(){return r.m})},,function(t,e,n){"use strict";n.d(e,"a",function(){return o}),e.b=function empty(t){return t?function emptyScheduled(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):o};var r=n(6),o=new r.a(function(t){return t.complete()})},function(t,e,n){"use strict";e.a=function isScheduler(t){return t&&"function"==typeof t.schedule}},function(t,e,n){"use strict";e.a=function from(t,e){return e?Object(i.a)(t,e):t instanceof r.a?t:new r.a(Object(o.a)(t))};var r=n(6),o=n(80),i=n(114)},function(t,e,n){"use strict";var r=n(170),o=n(383),i=Object.prototype.toString;function isArray(t){return"[object Array]"===i.call(t)}function isObject(t){return null!==t&&"object"==typeof t}function isFunction(t){return"[object Function]"===i.call(t)}function forEach(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),isArray(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:isArray,isArrayBuffer:function isArrayBuffer(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:o,isFormData:function isFormData(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function isArrayBufferView(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function isString(t){return"string"==typeof t},isNumber:function isNumber(t){return"number"==typeof t},isObject:isObject,isUndefined:function isUndefined(t){return void 0===t},isDate:function isDate(t){return"[object Date]"===i.call(t)},isFile:function isFile(t){return"[object File]"===i.call(t)},isBlob:function isBlob(t){return"[object Blob]"===i.call(t)},isFunction:isFunction,isStream:function isStream(t){return isObject(t)&&isFunction(t.pipe)},isURLSearchParams:function isURLSearchParams(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:forEach,merge:function merge(){var t={};function assignValue(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=merge(t[n],e):t[n]=e}for(var e=0,n=arguments.length;e<n;e++)forEach(arguments[e],assignValue);return t},extend:function extend(t,e,n){return forEach(e,function assignValue(e,o){t[o]=n&&"function"==typeof e?r(e,n):e}),t},trim:function trim(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},,function(t,e,n){"use strict";n(160),n(298),n(299);var r=n(300);n.d(e,"a",function(){return r.a});var o=n(301);n.d(e,"b",function(){return o.a});n(302),n(303);var i=n(304);n.d(e,"c",function(){return i.a});n(305),n(306),n(307),n(143);var s=n(161);n.d(e,"d",function(){return s.a});n(308),n(309),n(310);var a=n(311);n.d(e,"e",function(){return a.a});n(70),n(312),n(313),n(314),n(315);var c=n(163);n.d(e,"f",function(){return c.a});n(316),n(317),n(318),n(319),n(320),n(321);var u=n(322);n.d(e,"g",function(){return u.a});var l=n(51);n.d(e,"h",function(){return l.a});n(323),n(164),n(324),n(325),n(138),n(326),n(327),n(328);var f=n(26);n.d(e,"i",function(){return f.a});var d=n(329);n.d(e,"j",function(){return d.a});n(330),n(331),n(332);var p=n(91);n.d(e,"k",function(){return p.a});var h=n(59);n.d(e,"l",function(){return h.a});n(333),n(334),n(335),n(54),n(140),n(336);var b=n(337);n.d(e,"m",function(){return b.a});n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(94),n(345),n(346),n(347);var _=n(348);n.d(e,"n",function(){return _.a});n(97),n(349),n(350);var v=n(118);n.d(e,"o",function(){return v.a});n(351),n(352);var y=n(353);n.d(e,"p",function(){return y.a});n(354),n(355),n(356),n(357),n(358);var m=n(359);n.d(e,"q",function(){return m.a});n(360),n(362);var g=n(119);n.d(e,"r",function(){return g.a});var S=n(363);n.d(e,"s",function(){return S.a});var w=n(116);n.d(e,"t",function(){return w.a});n(117),n(364),n(365);var O=n(366);n.d(e,"u",function(){return O.a});n(165),n(367),n(93),n(368),n(369);var x=n(166);n.d(e,"v",function(){return x.a});n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function InnerSubscriber(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return r.a(InnerSubscriber,t),InnerSubscriber.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(n(5).a)},,,,function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},,,function(t,e,n){"use strict";var r=n(244);n.d(e,"i",function(){return r.a});var o=n(250);n.d(e,"a",function(){return o.a}),n.d(e,"b",function(){return o.b}),n.d(e,"c",function(){return o.c}),n.d(e,"d",function(){return o.d}),n.d(e,"e",function(){return o.e}),n.d(e,"f",function(){return o.f}),n.d(e,"g",function(){return o.g}),n.d(e,"h",function(){return o.h}),n.d(e,"j",function(){return o.i}),n.d(e,"k",function(){return o.j}),n.d(e,"l",function(){return o.k}),n.d(e,"m",function(){return o.l}),n.d(e,"n",function(){return o.m}),n.d(e,"o",function(){return o.n}),n.d(e,"p",function(){return o.o}),n.d(e,"q",function(){return o.p}),n.d(e,"r",function(){return o.q}),n.d(e,"s",function(){return o.r}),n.d(e,"t",function(){return o.s})},function(t,e,n){"use strict";e.a=function identity(t){return t}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AsyncAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(AsyncAction,t),AsyncAction.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},AsyncAction.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},AsyncAction.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},AsyncAction.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},AsyncAction.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},AsyncAction}(n(190).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(3),o=n(110),i=function(t){function AsyncScheduler(e,n){void 0===n&&(n=o.a.now);var r=t.call(this,e,function(){return AsyncScheduler.delegate&&AsyncScheduler.delegate!==r?AsyncScheduler.delegate.now():n()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return r.a(AsyncScheduler,t),AsyncScheduler.prototype.schedule=function(e,n,r){return void 0===n&&(n=0),AsyncScheduler.delegate&&AsyncScheduler.delegate!==this?AsyncScheduler.delegate.schedule(e,n,r):t.prototype.schedule.call(this,e,n,r)},AsyncScheduler.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},AsyncScheduler}(o.a)},function(t,e,n){"use strict";e.a=function fromArray(t,e){return e?Object(i.a)(t,e):new r.a(Object(o.a)(t))};var r=n(6),o=n(111),i=n(79)},function(t,e,n){"use strict";function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return r});var r=getSymbolIterator()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});var i=function(t){function FacebookIdFetchError(e,n){var r=t.call(this,function buildErrorMessage(t,e){return("logged-out"===t?"The user is probably not logged in to facebook":"failed getting facebook user id")+" (source: "+e+")"}(e,n))||this;return r.reason=e,r.source=n,Object.setPrototypeOf(r,FacebookIdFetchError.prototype),r}return o(FacebookIdFetchError,t),FacebookIdFetchError}(Error)},,function(t,e,n){"use strict";e.a=function isFunction(t){return"function"==typeof t}},function(t,e,n){"use strict";e.a=function filter(t,e){return function filterOperatorFunction(n){return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function FilterOperator(t,e){this.predicate=t,this.thisArg=e}return FilterOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},FilterOperator}(),s=function(t){function FilterSubscriber(e,n,r){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return r.a(FilterSubscriber,t),FilterSubscriber.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},FilterSubscriber}(o.a)},,,function(t,e,n){"use strict";e.a=function multicast(t,e){return function multicastOperatorFunction(n){var i;if(i="function"==typeof t?t:function subjectFactory(){return t},"function"==typeof e)return n.lift(new o(i,e));var s=Object.create(n,r.a);return s.source=n,s.subjectFactory=i,s}};var r=n(137);var o=function(){function MulticastOperator(t,e){this.subjectFactory=t,this.selector=e}return MulticastOperator.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},MulticastOperator}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype),ObjectUnsubscribedErrorImpl}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype),ArgumentOutOfRangeErrorImpl}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function EmptyErrorImpl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return EmptyErrorImpl.prototype=Object.create(Error.prototype),EmptyErrorImpl}()},function(t,e,n){"use strict";e.a=function mergeMap(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY);if("function"==typeof e)return function(r){return r.pipe(mergeMap(function(n,r){return Object(c.a)(t(n,r)).pipe(Object(a.a)(function(t,o){return e(n,t,r,o)}))},n))};"number"==typeof e&&(n=e);return function(e){return e.lift(new u(t,n))}};var r=n(3),o=n(11),i=n(10),s=n(35),a=n(26),c=n(31);var u=function(){function MergeMapOperator(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return MergeMapOperator.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent))},MergeMapOperator}(),l=function(t){function MergeMapSubscriber(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r.a(MergeMapSubscriber,t),MergeMapSubscriber.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},MergeMapSubscriber.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},MergeMapSubscriber.prototype._innerSub=function(t,e,n){var r=new s.a(this,void 0,void 0);this.destination.add(r),Object(o.a)(this,t,e,n,r)},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},MergeMapSubscriber.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},MergeMapSubscriber.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(i.a)},function(t,e,n){"use strict";n.d(e,"e",function(){return s}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return c});var r=n(236);n.d(e,"d",function(){return r.a});var o,i,s=["LIKE","LOVE","HAHA","WOW","ANGER","SORRY"];!function(t){t[t.pageview=0]="pageview",t[t.screenview=1]="screenview",t[t.event=2]="event",t[t.transaction=3]="transaction",t[t.item=4]="item",t[t.social=5]="social",t[t.exception=6]="exception",t[t.timing=7]="timing"}(o||(o={})),function(t){t[t.Headline=0]="Headline",t[t.Banner=1]="Banner",t[t.Product=2]="Product"}(i||(i={}));var a="(*&Y(UHsx#4",c="1q2w3e4r"},function(t,e,n){"use strict";e.a=function extractLinkFromFbRedirector(t){if(!function isFacebookRedirectorUrl(t){return t.startsWith("https://l.facebook.com/")||t.startsWith("http://l.facebook.com/")||t.startsWith("https://lm.facebook.com/")||t.startsWith("http://lm.facebook.com/")}(t))return t;var e=r.parse(r.extract(t)).u;if("string"==typeof e&&e.startsWith("http"))return e;return t};var r=n(125);n.n(r)},,,,function(t,e,n){"use strict";e.a=function noop(){}},function(t,e,n){"use strict";e.a=function of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(r.a)(n)?(t.pop(),Object(i.a)(t,n)):Object(o.a)(t)};var r=n(30),o=n(46),i=n(79)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(3),o=n(19),i=n(14),s=function(t){function AsyncSubject(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.a(AsyncSubject,t),AsyncSubject.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),i.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),i.a.EMPTY):t.prototype._subscribe.call(this,e)},AsyncSubject.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},AsyncSubject.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},AsyncSubject.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},AsyncSubject}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(29),i=n(66),s=n(90);r||(r={});var a=function(){function Notification(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return Notification.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},Notification.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},Notification.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},Notification.prototype.toObservable=function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(o.b)()}throw new Error("unexpected notification kind value")},Notification.createNext=function(t){return void 0!==t?new Notification("N",t):Notification.undefinedValueNotification},Notification.createError=function(t){return new Notification("E",void 0,t)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}()},function(t,e,n){"use strict";e.a=function isNumeric(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0};var r=n(17)},function(t,e,n){"use strict";e.a=function defaultIfEmpty(t){void 0===t&&(t=null);return function(e){return e.lift(new i(t))}};var r=n(3),o=n(5);var i=function(){function DefaultIfEmptyOperator(t){this.defaultValue=t}return DefaultIfEmptyOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.defaultValue))},DefaultIfEmptyOperator}(),s=function(t){function DefaultIfEmptySubscriber(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.a(DefaultIfEmptySubscriber,t),DefaultIfEmptySubscriber.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(o.a)},,,function(t,e,n){"use strict";e.a=function concat(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(o.a)()(r.a.apply(void 0,t))};var r=n(66),o=n(143)},function(t,e,n){"use strict";e.f=function documentReady(t){return new Promise(function(e,n){var r=function(){t.removeEventListener("DOMContentLoaded",r),e()};"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?e():t.addEventListener("DOMContentLoaded",r)})},e.b=function addStyleString(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},e.j=function processStory(t,e,n,i,s,a){return l(this,void 0,void 0,function(){var c,l,p,h,b,_;return f(this,function(f){switch(f.label){case 0:return[4,Object(o.x)({timeout:50})];case 1:f.sent(),c=!1,l=5,f.label=2;case 2:return(p=l>0)?[4,ensureStoryLoaded(t,e)]:[3,4];case 3:p=!(c=f.sent()),f.label=4;case 4:return p?[4,Object(o.A)(1e3)]:[3,7];case 5:f.sent(),f.label=6;case 6:return l--,[3,2];case 7:return c||a.warn("Story isn't loaded!",t),h=e.isStorySponsored(t),b=r.m.tryExtractStoryEntityId(t),h||!b?[3,10]:[4,n];case 8:return[4,f.sent()(b)];case 9:(_=f.sent())&&_.isSponsored&&(a.error("This story is sponsored, but DOM detection thought it wasnt.... try again",t),h=!0),f.label=10;case 10:return h?[2,processSponsoredStory(e,t,i,s,n).then(function(t){return u(u({},t),{wasLoaded:c,isSponsered:!0})})]:[2,processRegularStory(e,t,i).then(function(t){t.diag;var e=d(t,["diag"]);return u(u({},e),{isSponsered:!1})})]}})})},e.k=selectorObserver,e.d=function desktopTryGetFbId(t){if("new"===Object(r.n)(t.documentElement)){var e=Object(r.p)(t.documentElement).id;if(!e)throw new Error("Failed to parse user id for new Facebook UI");return e}var n=t.querySelector("img[id*='profile_pic_header']");if(null!==n){if(!(n instanceof HTMLImageElement))throw new RangeError("profile image selector has no results");var o=(n.getAttribute("id")||"").match("profile_pic_header_([0-9]*)");if(null===o||2!==o.length)throw new RangeError("failed to parse profile image id: "+n.getAttribute("id"));return o[1]}throw new Error("Failed to parse user id for old Facebook UI")},e.c=function desktopNewsfeedObserver(t,e){return newsfeedObserverBase(t,e,"div#stream_pagelet")},e.e=function desktopTwitterFeedObserver(t){return selectorObserver(t.body,"#stream-items-id",!0)},e.h=function highlightPost(t,e,n,r){var o=t.createElement("pre");o.textContent=r;var i=t.createElement("span");i.textContent="Ï€";var s=t.createElement("span");s.classList.add("tooltiptext"),s.appendChild(o);var a=t.createElement("div");a.classList.add("tooltip"),a.appendChild(i),a.appendChild(s),e.appendChild(a),e.style.boxShadow="0px 0px 10px "+(n?"red":"green")},e.g=function getLocaleDesktop(t){if("new"===Object(r.n)(t.documentElement)){var e=Object(r.p)(t.documentElement).locale;if(!e)throw new Error("failed get locale for new UI");return e}var n=Array.from(t.body.classList).find(function(t){return t.startsWith("Locale")});if(null==n){var o=t.body.innerHTML.match(/"locale":"(\w+)"/);if(o&&o[1])return o[1]}var i=null;"string"==typeof n&&(i=n.replace("Locale_",""));if(null===i)throw new Error("failed get local");return i},n.d(e,"a",function(){return h});var r=n(42),o=n(16),i=n(60),s=n(20),a=n(34),c=n(403);n.d(e,"i",function(){return c.a});var u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},f=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},d=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};function processRegularStory(t,e,n){return Promise.resolve().then(function(){var r=[],o=u(u({},t.parseRegularStory(e,r)),{fb_user_id:n});if(null===o.fb_post_entity_id)throw new Error("fb_post_entity_id is null");return{diag:r,dataToSend:o}})}function processSponsoredStory(t,e,n,r,o){if(null!==e.querySelector(".fbInternPreview"))throw new Error(".fbInternPreview");var i=[],s=t.parseSponsoredFeedStory(e,i);if(null===s.fb_post_entity_id)throw new Error("fb_post_entity_id is null");var a=window.getComputedStyle(e),c=null!==a.width?parseInt(a.width.replace("px",""),10):null,l=null!==a.height?parseInt(a.height.replace("px",""),10):null;null===c||isFinite(c)||(c=null),null===l||isFinite(l)||(l=null);var f=u(u({},s),{fb_post_width:c,fb_post_height:l,fb_user_id:n}),d=f.fb_post_entity_id;if(null===d)throw new RangeError("Unexpected branch");return Promise.resolve().then(function(){return o(d)}).then(function(e){return null!==e&&(f=function addReactData(t,e,n,r){var o=function createReactionMap(t,e){if(!t)return p;var n=t.edges.reduce(function(t,n){var r=null!=n.reaction_count?n.reaction_count:e(n.i18n_reaction_count);return t[n.node.reaction_type]=r,t},{});return u(u({},p),n)}(t.reactions,function(t){return n.parseStringedNumber(t,r)});return u(u({},e),{fb_post_engage_like:o.LIKE,fb_post_engage_love:o.LOVE,fb_post_engage_wow:o.WOW,fb_post_engage_angry:o.ANGER,fb_post_engage_haha:o.HAHA,fb_post_engage_sad:o.SORRY,fb_post_engage_comments:t.commentsReduced?t.commentsReduced:null,fb_post_engage_shares:t.shareCount,fb_post_video_views:t.viewCount&&Number.isFinite(t.viewCount)?t.viewCount:null,fb_post_this_video_views:t.postViewCount&&Number.isFinite(t.postViewCount)?t.postViewCount:null,fb_post_width:t.width})}(e,f,t,r)),{diag:i,dataToSend:f}})}function ensureStoryLoaded(t,e){return l(this,void 0,void 0,function(){var n,r;return f(this,function(o){switch(o.label){case 0:if(n=5,e.isStoryLoaded(t))return[2,!0];r=0,o.label=1;case 1:return r<n?[4,childListChangedOnce(t,500)]:[3,4];case 2:if(o.sent(),e.isStoryLoaded(t))return[2,!0];o.label=3;case 3:return r++,[3,1];case 4:return[2,!1]}})})}function childListChangedOnce(t,e){return l(this,void 0,void 0,function(){return f(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,new Promise(function(n,r){var i=new MutationObserver(function(t){i.disconnect(),s(),n()}),s=Object(o.z)(function(){i.disconnect(),r()},e);i.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!1})})];case 1:return n.sent(),[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})}function selectorObserver(t,e,n){return void 0===n&&(n=!0),new s.c(function(r){if(n)for(var o=0,i=Array.from(t.querySelectorAll(e));o<i.length;o++){var s=i[o];if(!(s instanceof HTMLElement))return;r.next(s)}var a=new MutationObserver(function(t){for(var n=0,o=t;n<o.length;n++)for(var i=o[n],s=0,a=Array.from(i.addedNodes);s<a.length;s++){var c=a[s];if(!(c instanceof HTMLElement))return;c.matches(e)&&r.next(c);for(var u=0,l=Array.from(c.querySelectorAll(e));u<l.length;u++){var f=l[u];if(!(f instanceof HTMLElement))return;r.next(f)}}});return a.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),function(){a.disconnect()}}).pipe(Object(a.h)(Object(o.s)()))}function newsfeedObserverBase(t,e,n){var r=!1;return selectorObserver(t.body,n,!0).pipe(Object(a.h)(function(t){return"hidden"!==getComputedStyle(t).visibility&&r!==t}),Object(a.d)(function(t){return t&&r?Object(s.m)(!1,t):Object(s.m)(t)}),Object(a.u)(function(t){r=t}))}var p=i.e.reduce(function(t,e){return t[e]=null,t},{});var h=function(){function AmazonFrameHandler(t){this.chromeRuntimeId=t,this.selectorMap=new Map([["ape_Detail_ams-detail-right-v2_Desktop_iframe","AMS"],["ape_Detail_hero-quick-promo_Desktop_iframe","Hero"]])}return AmazonFrameHandler.prototype.GetFrameType=function(t){return this.selectorMap.has(t)?this.selectorMap.get(t):null},AmazonFrameHandler.prototype.GetFrameSelectors=function(){return Array.from(this.selectorMap.keys())},AmazonFrameHandler.prototype.CreateMessageId=function(t){return o.e.salted_hash(t+"_"+this.chromeRuntimeId,i.b)},AmazonFrameHandler}()},function(t,e,n){"use strict";e.a=function canReportError(t){for(;t;){var e=t,n=e.closed,o=e.destination,i=e.isStopped;if(n||i)return!1;t=o&&o instanceof r.a?o:null}return!0};var r=n(5)},function(t,e,n){"use strict";e.a=function hostReportError(t){setTimeout(function(){throw t},0)}},function(t,e,n){"use strict";e.a=function isObject(t){return null!==t&&"object"==typeof t}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(t,e,n){"use strict";e.a=function scheduleArray(t,e){return new r.a(function(n){var r=new o.a,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})};var r=n(6),o=n(14)},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(111),o=n(202),i=n(203),s=n(204),a=n(112),c=n(113),u=n(77),l=n(47),f=n(39),d=function(t){if(t&&"function"==typeof t[f.a])return Object(s.a)(t);if(Object(a.a)(t))return Object(r.a)(t);if(Object(c.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[l.a])return Object(i.a)(t);var e=Object(u.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";e.a=function extractStateOrCountry(t){var e,n=t.split(",");return(null===(e=n[n.length-1])||void 0===e?void 0:e.trim())||null},e.b=function fetchDocument(t){var e=t.fetchText,n=t.urlString,s=t.addId,a=void 0===s?"r":s,c=t.headers;return o(this,void 0,void 0,function(){var t,o,s;return i(this,function(i){switch(i.label){case 0:return t=new URL(n),!1!==a&&t.searchParams.append(a,Date.now().toString()),[4,e(t.toString(),c)];case 1:return o=i.sent(),s=Object(r.j)(o),Object(r.w)(s),[2,s]}})})};var r=n(16),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}},function(t,e,n){"use strict";var r=n(126);n.d(e,"j",function(){return r.a});var o=n(127);n.d(e,"i",function(){return o.a});var i=n(83);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return i.b}),n.d(e,"c",function(){return i.c}),n.d(e,"d",function(){return i.d}),n.d(e,"e",function(){return i.e}),n.d(e,"f",function(){return i.f}),n.d(e,"g",function(){return i.g}),n.d(e,"h",function(){return i.h})},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return c}),n.d(e,"a",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"i",function(){return f});var r="div[data-testid=fbfeed_story][id^='hyperfeed_story_id']",o="form.commentable_item",i="input[name=ft_ent_identifier]",s="[data-testid='fb-ufi-likelink']",a="[data-testid='ufi_share_link_loaded']",c="[data-reaction]",u='a[data-hovercard]:not([href="#"])',l=".PageLikeButton",f="ArticleCacheKey"},function(t,e,n){"use strict";e.b=function isCometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed(t){return"label"in t&&"CometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed"===t.label},e.h=function isInitialData(t){return"viewer"in t.data&&t.data.viewer.news_feed&&Array.isArray(t.data.viewer.news_feed.edges)},e.j=function isSponsored(t){return"SPONSORED"===t.category},e.i=function isOrganic(t){return"ORGANIC"===t.category},e.f=function isFbRawInteractionResponse(t){var e=t;return Object(r.g)(function(){return!!e.data.feedback_react.feedback.viewer_feedback_reaction_info},!1)},n.d(e,"q",function(){return o}),n.d(e,"n",function(){return i}),n.d(e,"l",function(){return s}),n.d(e,"p",function(){return a}),n.d(e,"m",function(){return c}),n.d(e,"o",function(){return u}),n.d(e,"k",function(){return l}),n.d(e,"e",function(){return f}),n.d(e,"r",function(){return d}),n.d(e,"g",function(){return p}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return b}),n.d(e,"a",function(){return _});var r=n(27);function isGqlTypeGuardFactory(t){return function(e){if(!e||"object"!=typeof e)return!1;return"__typename"in e&&e.__typename===t}}var o=isGqlTypeGuardFactory("StoryAttachmentVideoStyleRenderer"),i=isGqlTypeGuardFactory("StoryAttachmentMultiShareStyleRenderer"),s=isGqlTypeGuardFactory("StoryAttachmentEventStyleRenderer"),a=isGqlTypeGuardFactory("StoryAttachmentShareStyleRenderer"),c=isGqlTypeGuardFactory("StoryAttachmentLeadGenLinkRenderer"),u=isGqlTypeGuardFactory("StoryAttachmentPhotoStyleRenderer"),l=isGqlTypeGuardFactory("StoryAttachmentAlbumStyleRenderer"),f=isGqlTypeGuardFactory("ExternalUrl"),d=isGqlTypeGuardFactory("Video"),p=isGqlTypeGuardFactory("GenericAttachmentMedia"),h=isGqlTypeGuardFactory("CometStoryAttachmentFooterGenericShareStrategy"),b=isGqlTypeGuardFactory("CometStoryAttachmentFooterGenericVideoStrategy"),_=(isGqlTypeGuardFactory("CometStoryAttachedStoryStrategy"),isGqlTypeGuardFactory("CometFeedStoryAudienceStrategy"))},,,,,function(t,e,n){"use strict";e.a=function pipe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pipeFromArray(t)},e.b=pipeFromArray;var r=n(65);function pipeFromArray(t){return t?1===t.length?t[0]:function piped(e){return t.reduce(function(t,e){return e(t)},e)}:r.a}},function(t,e,n){"use strict";e.a=function throwError(t,e){return e?new r.a(function(n){return e.schedule(dispatch,0,{error:t,subscriber:n})}):new r.a(function(e){return e.error(t)})};var r=n(6);function dispatch(t){var e=t.error;t.subscriber.error(e)}},function(t,e,n){"use strict";e.a=function mergeAll(t){void 0===t&&(t=Number.POSITIVE_INFINITY);return Object(r.a)(o.a,t)};var r=n(59),o=n(43)},function(t,e,n){"use strict";e.a=function defer(t){return new r.a(function(e){var n;try{n=t()}catch(t){return void e.error(t)}var r=n?Object(o.a)(n):Object(i.b)();return r.subscribe(e)})};var r=n(6),o=n(31),i=n(29)},function(t,e,n){"use strict";e.a=function throwIfEmpty(t){void 0===t&&(t=defaultErrorFactory);return function(e){return e.lift(new s(t))}};var r=n(3),o=n(58),i=n(5);var s=function(){function ThrowIfEmptyOperator(t){this.errorFactory=t}return ThrowIfEmptyOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.errorFactory))},ThrowIfEmptyOperator}(),a=function(t){function ThrowIfEmptySubscriber(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.a(ThrowIfEmptySubscriber,t),ThrowIfEmptySubscriber.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},ThrowIfEmptySubscriber.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},ThrowIfEmptySubscriber}(i.a);function defaultErrorFactory(){return new o.a}},function(t,e,n){"use strict";e.a=function reduce(t,e){if(arguments.length>=2)return function reduceOperatorFunctionWithSeed(n){return Object(s.a)(Object(r.a)(t,e),Object(o.a)(1),Object(i.a)(e))(n)};return function reduceOperatorFunction(e){return Object(s.a)(Object(r.a)(function(e,n,r){return t(e,n,r+1)}),Object(o.a)(1))(e)}};var r=n(118),o=n(117),i=n(70),s=n(89)},,,function(t,e,n){"use strict";e.a=function refCount(){return function refCountOperatorFunction(t){return t.lift(new i(t))}};var r=n(3),o=n(5);var i=function(){function RefCountOperator(t){this.connectable=t}return RefCountOperator.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},RefCountOperator}(),s=function(t){function RefCountSubscriber(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(RefCountSubscriber,t),RefCountSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},RefCountSubscriber}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(3),o=n(19),i=n(109),s=n(14),a=n(140),c=n(56),u=n(108),l=function(t){function ReplaySubject(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var o=t.call(this)||this;return o.scheduler=r,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return r.a(ReplaySubject,t),ReplaySubject.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},ReplaySubject.prototype.nextTimeWindow=function(e){this._events.push(new f(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},ReplaySubject.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new c.a;if(this.isStopped||this.hasError?e=s.a.EMPTY:(this.observers.push(t),e=new u.a(this,t)),o&&t.add(t=new a.a(t,o)),n)for(var l=0;l<i&&!t.closed;l++)t.next(r[l]);else for(l=0;l<i&&!t.closed;l++)t.next(r[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},ReplaySubject.prototype._getNow=function(){return(this.scheduler||i.a).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return o>e&&(i=Math.max(i,o-e)),i>0&&r.splice(0,i),r},ReplaySubject}(o.a),f=function(){return function ReplayEvent(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=(n(30),n(17),n(10)),i=n(11),s=(n(46),{});var a=function(){function CombineLatestOperator(t){this.resultSelector=t}return CombineLatestOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.resultSelector))},CombineLatestOperator}(),c=function(t){function CombineLatestSubscriber(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(CombineLatestSubscriber,t),CombineLatestSubscriber.prototype._next=function(t){this.values.push(s),this.observables.push(t)},CombineLatestSubscriber.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(i.a)(this,r,r,n))}}},CombineLatestSubscriber.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(t,e,n,r,o){var i=this.values,a=i[n],c=this.toRespond?a===s?--this.toRespond:this.toRespond:0;i[n]=e,0===c&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},CombineLatestSubscriber.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},CombineLatestSubscriber}(o.a)},function(t,e,n){"use strict";e.b=function zip(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];"function"==typeof n&&t.pop();return Object(o.a)(t,void 0).lift(new l(n))},n.d(e,"a",function(){return l});var r=n(3),o=n(46),i=n(17),s=n(5),a=n(10),c=n(11),u=n(47);var l=function(){function ZipOperator(t){this.resultSelector=t}return ZipOperator.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},ZipOperator}(),f=function(t){function ZipSubscriber(e,n,r){void 0===r&&(r=Object.create(null));var o=t.call(this,e)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof n?n:null,o.values=r,o}return r.a(ZipSubscriber,t),ZipSubscriber.prototype._next=function(t){var e=this.iterators;Object(i.a)(t)?e.push(new p(t)):"function"==typeof t[u.a]?e.push(new d(t[u.a]())):e.push(new h(this.destination,this,t))},ZipSubscriber.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}var o=!1,i=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(o=!0),a.done)return void n.complete();i.push(a.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),o&&n.complete()},ZipSubscriber.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},ZipSubscriber}(s.a),d=function(){function StaticIterator(t){this.iterator=t,this.nextResult=t.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},StaticIterator.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},StaticIterator}(),p=function(){function StaticArrayIterator(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return StaticArrayIterator.prototype[u.a]=function(){return this},StaticArrayIterator.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),h=function(t){function ZipBufferIterator(e,n,r){var o=t.call(this,e)||this;return o.parent=n,o.observable=r,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return r.a(ZipBufferIterator,t),ZipBufferIterator.prototype[u.a]=function(){return this},ZipBufferIterator.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(t,e,n,r,o){this.buffer.push(e),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(t,e){return Object(c.a)(this,this.observable,this,e)},ZipBufferIterator}(a.a)},,,,,,function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(55),o=n(76),i={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(o.a)(t)},complete:function(){}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function UnsubscriptionErrorImpl(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),UnsubscriptionErrorImpl}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function SubjectSubscription(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.a(SubjectSubscription,t),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},SubjectSubscription}(n(14).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(189),o=new(n(191).a)(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function Scheduler(t,e){void 0===e&&(e=Scheduler.now),this.SchedulerAction=t,this.now=e}return Scheduler.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},Scheduler.now=function(){return Date.now()},Scheduler}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";e.a=function isPromise(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,n){"use strict";e.a=function scheduled(t,e){if(null!=t){if(Object(a.a)(t))return Object(r.a)(t,e);if(Object(c.a)(t))return Object(o.a)(t,e);if(Object(u.a)(t))return Object(i.a)(t,e);if(Object(l.a)(t)||"string"==typeof t)return Object(s.a)(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")};var r=n(205),o=n(206),i=n(79),s=n(207),a=n(208),c=n(113),u=n(112),l=n(209)},function(t,e,n){"use strict";var r=n(6),o=n(65);o.a},function(t,e,n){"use strict";e.a=function take(t){return function(e){return 0===t?Object(s.b)():e.lift(new a(t))}};var r=n(3),o=n(5),i=n(57),s=n(29);var a=function(){function TakeOperator(t){if(this.total=t,this.total<0)throw new i.a}return TakeOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},TakeOperator}(),c=function(t){function TakeSubscriber(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(TakeSubscriber,t),TakeSubscriber.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function takeLast(t){return function takeLastOperatorFunction(e){return 0===t?Object(s.b)():e.lift(new a(t))}};var r=n(3),o=n(5),i=n(57),s=n(29);var a=function(){function TakeLastOperator(t){if(this.total=t,this.total<0)throw new i.a}return TakeLastOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},TakeLastOperator}(),c=function(t){function TakeLastSubscriber(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.a(TakeLastSubscriber,t),TakeLastSubscriber.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},TakeLastSubscriber.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,o=0;o<n;o++){var i=e++%n;t.next(r[i])}t.complete()},TakeLastSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function scan(t,e){var n=!1;arguments.length>=2&&(n=!0);return function scanOperatorFunction(r){return r.lift(new i(t,e,n))}};var r=n(3),o=n(5);var i=function(){function ScanOperator(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return ScanOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))},ScanOperator}(),s=function(t){function ScanSubscriber(e,n,r,o){var i=t.call(this,e)||this;return i.accumulator=n,i._seed=r,i.hasSeed=o,i.index=0,i}return r.a(ScanSubscriber,t),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},ScanSubscriber.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},ScanSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function switchMap(t,e){if("function"==typeof e)return function(n){return n.pipe(switchMap(function(n,r){return Object(c.a)(t(n,r)).pipe(Object(a.a)(function(t,o){return e(n,t,r,o)}))}))};return function(e){return e.lift(new u(t))}};var r=n(3),o=n(10),i=n(35),s=n(11),a=n(26),c=n(31);var u=function(){function SwitchMapOperator(t){this.project=t}return SwitchMapOperator.prototype.call=function(t,e){return e.subscribe(new l(t,this.project))},SwitchMapOperator}(),l=function(t){function SwitchMapSubscriber(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.a(SwitchMapSubscriber,t),SwitchMapSubscriber.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},SwitchMapSubscriber.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new i.a(this,void 0,void 0);this.destination.add(o),this.innerSubscription=Object(s.a)(this,t,e,n,o)},SwitchMapSubscriber.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},SwitchMapSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function findClosingBracketMatchIndex(t,e){if("{"!==t[e])throw new Error("No '{' at index "+e);for(var n=1,r=e+1;r<t.length;r++)switch(t[r]){case"{":n++;break;case"}":if(0==--n)return r}return-1}},function(t,e,n){"use strict";e.a=function objectFromEntries(t){return Array.from(t).reduce(function(t,e){var n=e[0],r=e[1];return t[n]=r,t},{})}},function(t,e,n){"use strict";e.a=function createFbqProvider(t,e){return new Promise(function(n,r){!function(t,e,r,o){if(!t.fbq){var i=t.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)};t._fbq||(t._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[];var s=e.createElement(r);s.async=!0,s.src="https://connect.facebook.net/en_US/fbevents.js";var a=e.getElementsByTagName(r)[0];s.addEventListener("load",function(){n(t.fbq)}),a.parentNode.insertBefore(s,a)}}(t,e,"script")})}},function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return c});var r=n(16),o=n(239),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a={id:"",birthday:{month:null,year:null},gender:null,relationshipStatus:null,userNameOnlyForAnonymizingTheHTMLDoNotSend:null,locale:null,stateOrCountry:null},c=function(){function FacebookMetadataProvider(t,e,n){var r=this;this.fetchText=t,this.log=e,this.trafficRegisterFunction=n,this._currentRequestPromise=null,this.metadataFetched=function(t){return r.available.set(t.id,t),r._currentRequestPromise=null,t},this.metadataFetchFailed=function(t){r._currentRequestPromise=null,r.log.error(t)},this.available=new Map,this.currentRequestPromise.then()}return FacebookMetadataProvider.prototype.getInterests=function(){return i(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return[4,this.getCurrentUserId()];case 1:return t=n.sent(),[4,Object(o.b)(this.fetchText)];case 2:return e=n.sent(),[2,{id:t,interests:e}]}})})},Object.defineProperty(FacebookMetadataProvider.prototype,"currentRequestPromise",{get:function(){var t=this;return this._currentRequestPromise instanceof Promise||(this._currentRequestPromise=Object(o.a)(this.fetchText,this.trafficRegisterFunction).catch(function(e){return Object(r.A)(500).then(function(){return Object(o.a)(t.fetchText,t.trafficRegisterFunction)})}),this._currentRequestPromise.then(this.metadataFetched,this.metadataFetchFailed)),this._currentRequestPromise},enumerable:!0,configurable:!0}),FacebookMetadataProvider.prototype.getCurrentUserId=function(){for(var t=this.available.values(),e=t.next();!e.done;)e=t.next();return void 0!==e.value?Promise.resolve(e.value.id):this.currentRequestPromise.then(function(t){return t.id})},FacebookMetadataProvider.prototype.getForUser=function(t){return this.available.has(t)?Promise.resolve(this.available.get(t)):this.currentRequestPromise.then(function(e){if(e.id===t)return e;throw new Error("The loggedin user is not the one that the metadata asked for. cant provide metadata")})},FacebookMetadataProvider}()},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,o=n(125),i=(n.n(o),n(61)),s=n(82),a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=function(t){function MobileParsedStory(e,n,r){var o=t.call(this,e,n,r)||this;o.log=n,o._dataStore=null,o._dataFt=null;for(var i=e,s=e;s&&!s.hasAttribute("data-store")&&s.parentElement;)s=s.parentElement;o._article=s,o._innerStory=i;var a=i.querySelector("div.story_body_container");return a&&(o._innerStory=a),o.parseInnerStory(),o}return a(MobileParsedStory,t),MobileParsedStory.prototype.init=function(){},MobileParsedStory.countOccurrencesInString=function(t,e){var n=t.match(new RegExp(e,"g"));return n?n.length:0},Object.defineProperty(MobileParsedStory.prototype,"entId",{get:function(){var t,e,n;if(!this._entId){var r=this.dataStore,o=this.dataFt;if((null===(t=o)||void 0===t?void 0:t.page_insights)&&o.top_level_post_id)this._isNestingStory=!0,this._entId=o.top_level_post_id;else if((null===(e=r)||void 0===e?void 0:e.share_id)&&r.share_id!=this.fb_post_advertiser_page_entity_id){var i=r.share_id.toString(),s=i.match("([0-9]*)");if(null!==s&&s[0]===i)this._entId=i;else{var a=i.match(".*:([0-9]*)");if(!a||1!=MobileParsedStory.countOccurrencesInString(i,":"))throw new RangeError("_entId can't be null");this._entId=a[1]}}else{if(null===(n=r)||void 0===n||!n.feedback_target)throw new RangeError("_entId can't be null");this._entId=""+r.feedback_target}}return this._entId},enumerable:!0,configurable:!0}),MobileParsedStory.extractDataStoreFromElement=function(t,e){var n=t.getAttribute(e);if(!n)return null;try{return JSON.parse(n)}catch(t){return null}},Object.defineProperty(MobileParsedStory.prototype,"dataStore",{get:function(){return this._dataStore||(this._dataStore=MobileParsedStory.extractDataStoreFromElement(this._article,"data-store")),this._dataStore},enumerable:!0,configurable:!0}),Object.defineProperty(MobileParsedStory.prototype,"dataFt",{get:function(){return this._dataFt||(this._dataFt=MobileParsedStory.extractDataStoreFromElement(this._article,"data-ft")),this._dataFt},enumerable:!0,configurable:!0}),MobileParsedStory.prototype.parseInnerStory=function(){if(void 0===this._header){this._header=null,this._footer=null,this._divs=[];for(var t=0,e=Array.from(this._innerStory.childNodes);t<e.length;t++){var n=e[t];n instanceof HTMLElement&&("header"===n.tagName.toLowerCase()?this._header=n:"footer"===n.tagName.toLowerCase()?this._footer=n:"div"===n.tagName.toLowerCase()&&this._divs.push(n))}}},Object.defineProperty(MobileParsedStory.prototype,"storyType",{get:function(){return this._postType||(this._postType="unknown",this._innerStory.querySelector("[data-sigil*='m-video-play-button']")?this._postType="video":this._divs.length>1&&(this._divs[1].querySelector(".scrollArea-horizontal")?this._postType="carousel":this._divs[1].querySelector("button")?this._postType="link":this._divs[1].querySelector("a >div > div >i")&&(this._postType="photo"))),this._postType},enumerable:!0,configurable:!0}),Object.defineProperty(MobileParsedStory.prototype,"fb_post_carousel_info",{get:function(){var t=this;if("carousel"===this.storyType){var e=this._innerStory.querySelector(".scrollAreaBody");if(null===e)throw new RangeError("missing scrollAreaBody inside carousel");return Array.from(e.children).map(function(e){var n=e.querySelector("i.img");if(null===n)throw new RangeError("Unexpected post structure. fb_post_carousel_info. id:"+t._entId);var r=n.style.backgroundImage&&n.style.backgroundImage.replace(/^url\(/,"").replace(/\)$/,"")||null,o=e.querySelector("header")&&e.querySelector("header").textContent||null,s=e.querySelector("a"),a=null;return null!==s&&(a=Object(i.a)(s.href)),{fb_post_carousel_actionlink_url:a,fb_post_carousel_text:o,fb_post_carousel_img_url:r}})}return null},enumerable:!0,configurable:!0}),MobileParsedStory.prototype.parseAdvertiserFields=function(){var t,e,n,r,i,s,a;this._fb_post_advertiser_page_pretty_name=null;var c=this.dataFt,u=null===(e=null===(t=this._divs[0])||void 0===t?void 0:t.querySelector("a"))||void 0===e?void 0:e.href,l=u&&o.parse(u)||{},f=null,d=l.id;if(d)f=d instanceof Array?d[0]:l.id;else{var p=null===(n=this._header)||void 0===n?void 0:n.querySelector("[class*='like_thumb_conta']");if(p){var h=MobileParsedStory.extractDataStoreFromElement(p,"data-store");h&&(f=h.pageID.toString())}else{var b=this._article.querySelector("[data-sigil='ufi-inline-actions'] > div:nth-child(2) > a");b instanceof HTMLAnchorElement&&(f=(b.href.match("/([0-9]*)/posts")||[null,null])[1])}}if(f&&(f.match(/^[0-9]*$/)?this._fb_post_advertiser_page_entity_id=f:this._fb_post_advertiser_page_id=f),this._fb_post_advertiser_page_entity_id||c&&c.page_id&&(this._fb_post_advertiser_page_entity_id=c.page_id),this._header&&!this._fb_post_advertiser_page_id){var _=this._header.querySelector("a[href]:not([href^='/story'])");if(_ instanceof HTMLAnchorElement){var v=_.href,y=void 0;(y=v.startsWith("http")?v.match("https?://"+document.location.host+"/(.*)/"):v.match("^/?(.*)/"))&&(this._fb_post_advertiser_page_id=y[1])}}var m=null===(i=null===(r=this._header)||void 0===r?void 0:r.querySelector("i"))||void 0===i?void 0:i.style.backgroundImage,g=null===(s=m)||void 0===s?void 0:s.match(/url\("(.*)"\)/);g||(g=null===(a=m)||void 0===a?void 0:a.match(/url\((.*)\)/)),g&&g[1]?this._fb_post_advertiser_thumbnail_url=g[1]:this._fb_post_advertiser_thumbnail_url=null},MobileParsedStory.prototype.initActionLink=function(){var t=this._divs[1].querySelector("button");if(t){var e=MobileParsedStory.extractDataStoreFromElement(t.parentElement,"data-store");e&&(this._fb_post_call_to_action_url=e.dest_uri||null),this._fb_post_call_to_action_text=t.textContent}else this._fb_post_call_to_action_url=null,this._fb_post_call_to_action_text=null},Object.defineProperty(MobileParsedStory.prototype,"fb_post_actionlink_url",{get:function(){if(void 0===!this._fb_post_actionlink_url){var t=this._divs[1].querySelector("a");if(t){var e=MobileParsedStory.extractDataStoreFromElement(t,"data-store");e&&(this._fb_post_actionlink_url=e.dest_uri||null)}else this._fb_post_actionlink_url=null}return this._fb_post_actionlink_url},enumerable:!0,configurable:!0}),Object.defineProperty(MobileParsedStory.prototype,"fb_post_img_url",{get:function(){if(!this._fb_post_img_url)if(this._fb_post_img_url=null,"album"===this.storyType||"photo"===this.storyType){var t=this._innerStory.querySelector("a[rel=theater] img");t instanceof HTMLImageElement&&(this._fb_post_img_url=t.src)}else{var e=this._innerStory.querySelector("div.fbStoryAttachmentImage > img");e instanceof HTMLImageElement?this._fb_post_img_url=e.src:this._diagnostics.push("can't parse, fb_post_img_url. expected selector not found")}return this._fb_post_img_url},enumerable:!0,configurable:!0}),MobileParsedStory}(s.i)},function(t,e,n){"use strict";const r=n(245),o=n(246),i=n(247);function validateArrayFormatSeparator(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function decode(t,e){return e.decode?o(t):t}function removeHash(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function extract(t){const e=(t=removeHash(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function parseValue(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function parse(t,e){validateArrayFormatSeparator((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function parserForArrayFormat(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const o="string"==typeof n&&n.split("").indexOf(t.arrayFormatSeparator)>-1?n.split(t.arrayFormatSeparator).map(e=>decode(e,t)):null===n?n:decode(n,t);r[e]=o};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const o of t.split("&")){let[t,s]=i(e.decode?o.replace(/\+/g," "):o,"=");s=void 0===s?null:["comma","separator"].includes(e.arrayFormat)?s:decode(s,e),n(decode(t,e),s,r)}for(const t of Object.keys(r)){const n=r[t];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=parseValue(n[t],e);else r[t]=parseValue(n,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function keysSorter(t){return Array.isArray(t)?t.sort():"object"==typeof t?keysSorter(Object.keys(t)).sort((t,e)=>Number(t)-Number(e)).map(e=>t[e]):t}(n):t[e]=n,t},Object.create(null))}e.extract=extract,e.parse=parse,e.stringify=((t,e)=>{if(!t)return"";validateArrayFormatSeparator((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>e.skipNull&&(t=>null==t)(t[n])||e.skipEmptyString&&""===t[n],r=function encoderForArrayFormat(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const o=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[encode(e,t),"[",o,"]"].join("")]:[...n,[encode(e,t),"[",encode(o,t),"]=",encode(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[encode(e,t),"[]"].join("")]:[...n,[encode(e,t),"[]=",encode(r,t)].join("")];case"comma":case"separator":return e=>(n,r)=>null==r||0===r.length?n:0===n.length?[[encode(e,t),"=",encode(r,t)].join("")]:[[n,encode(r,t)].join(t.arrayFormatSeparator)];default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,encode(e,t)]:[...n,[encode(e,t),"=",encode(r,t)].join("")]}}(e),o={};for(const e of Object.keys(t))n(e)||(o[e]=t[e]);const i=Object.keys(o);return!1!==e.sort&&i.sort(e.sort),i.map(n=>{const o=t[n];return void 0===o?"":null===o?encode(n,e):Array.isArray(o)?o.reduce(r(n),[]).join("&"):encode(n,e)+"="+encode(o,e)}).filter(t=>t.length>0).join("&")}),e.parseUrl=((t,e)=>{e=Object.assign({decode:!0},e);const[n,r]=i(t,"#");return Object.assign({url:n.split("?")[0]||"",query:parse(extract(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:decode(r,e)}:{})}),e.stringifyUrl=((t,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=removeHash(t.url).split("?")[0]||"",o=e.extract(t.url),i=e.parse(o,{sort:!1}),s=Object.assign(i,t.query);let a=e.stringify(s,n);a&&(a=`?${a}`);let c=function getHash(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(c=`#${encode(t.fragmentIdentifier,n)}`),`${r}${a}${c}`})},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(27),i=n(61),s=n(83),a=n(127),c=n(248),u=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=function(){function Parser(t,e){if(this.log=t,this.extensionVersion=e,!t)throw new Error("You can't start a parser without a logger!")}return Parser.prototype.getNewCache=function(t,e){return new a.a(t,this.log,e)},Parser.prototype.getCache=function(t,e){return t[s.i]||(t[s.i]=this.getNewCache(t,e)),t[s.i]},Parser.prototype.storyTypeClassifier=function(t){return this.getCache(t,[]).storyType},Parser.prototype.getLocale=function(){var t=Array.from(document.body.classList).find(function(t){return t.startsWith("Locale")}),e=null;return"string"==typeof t&&(e=t.replace("Locale_","")),e},Parser.prototype.extractFirstPostInStoryText=function(t){var e=t.querySelector("p");return e instanceof HTMLParagraphElement&&e.parentElement?e.parentElement.textContent:""},Parser.prototype.isChildOf=function(t,e){return t instanceof Element&&t.contains(e)},Parser.prototype.parseRegularStory=function(t,e){var n=null,r=null!==t.querySelector("div[data-hover='tooltip'][data-tooltip-content='Shared with: Public']"),o=this.extractFirstPostInStoryText(t),i=["posts","videos","notes","permalink"],s=["comment_id"],a=i.map(function(t){return"[href*='/"+t+"/']:not("+s.map(function(t){return"[href*='"+t+"']"}).join(",")+")"});a.push("[href*='photo.php?fbid=']"),a.push("[href*='permalink.php?story_fbid=']"),a.push("[href*='/photos/a.']");var c=t.querySelector("form.commentable_item > input[name='ft_ent_identifier']");if(c instanceof HTMLInputElement&&(n=c.value,this.log.info("Found the entity id using the commentable_item "+n,t)),!n){var u=t.querySelector(a.join(","));if(!(u instanceof HTMLAnchorElement))throw new RangeError("can't parse fb_post_entity_id, expected selector not found");if(u.href.indexOf("/photos/a.")>-1)null===(l=u.href.match(/photos\/a[^\/]+\/([0-9]+)/))||2!==l.length?e.push("can't extract fb_post_entity_id from href, post type '/photos/a. ?type=3&theater':"+u.href):n=l[1];else if(u.href.indexOf("permalink.php?story_fbid=")>-1){null===(l=u.href.match(/permalink\.php\?story_fbid=([0-9]+)/))||2!==l.length?e.push("can't extract fb_post_entity_id from href, post type 'permalink and the publishing user dosn't have String handle':"+u.href):n=l[1]}else if(u.href.indexOf("photo.php?fbid=")>-1){null===(l=u.href.match(/photo\.php\?fbid=([0-9]+)/))||2!==l.length?e.push("can't extract fb_post_entity_id from href, post type photo:"+u.href):n=l[1]}else{var l;null===(l=u.href.match(new RegExp("("+i.join("|")+")/([0-9]+)/?")))||3!==l.length?e.push("can't extract fb_post_entity_id from href:"+u.href):n=l[2]}}if(null===n)throw new RangeError("can't parse fb_post_entity_id!!!");return{fb_post_entity_id:n,fb_post_text:o,fb_post_is_public:r,parser_type:"desktop",parser_version:this.extensionVersion}},Parser.prototype.isFeedbackTarget=function(t){return null!==t.querySelector(s.d)},Parser.prototype.parseSponsoredFeedStory=function(t,e){var n,r,o,i=this.getCache(t,e),a=this.sanityzePIIPostHtml(t.cloneNode(!0)).outerHTML,c=t.querySelector(s.d);if(!(c instanceof HTMLFormElement&&c.parentElement&&c.parentElement.previousElementSibling))throw new RangeError("The given element is not a feedback target:"+t.id);o=c.parentElement.previousElementSibling;var u=i.storyType,l=i.fb_post_carousel_info,f=i.fb_post_app_pretty_name,d=i.fb_post_app_id,p=i.fb_post_app_thumbnail_url,h=i.fb_post_advertiser_page_id,b=i.fb_post_advertiser_page_entity_id,_=i.fb_post_advertiser_page_pretty_name,v=i.fb_post_advertiser_thumbnail_url,y=i.fb_post_actionlink_url,m=i.fb_post_img_url,g=i.fb_post_call_to_action_url,S=i.fb_post_call_to_action_text,w=i.entId,O=null;"gif"===u?(O=(n=this.parseGifFields(o)).videoUrl,m=n.previewImageUrl):"video"===u&&(O=(r=this.parseVideoFields(o)).videoUrl,m=r.previewImageUrl);var x=(this.getLocale()||"").startsWith("en")?this.getEngagementScoreFromStory(c):null,E=x&&x.has("Angry")?x.get("Angry"):null,k=x&&x.has("Comments")?x.get("Comments"):null,j=x&&x.has("Haha")?x.get("Haha"):null,T=x&&x.has("Like")?x.get("Like"):null,I=x&&x.has("Love")?x.get("Love"):null,A=x&&x.has("Sad")?x.get("Sad"):null,C=x&&x.has("Shares")?x.get("Shares"):null,P=x&&x.has("Wow")?x.get("Wow"):null;return{fb_post_actionlink_url:y,fb_post_src:a,fb_post_text:this.extractFirstPostInStoryText(o),fb_post_type:u,fb_post_img_url:m,fb_post_video_url:O,fb_post_engage_sad:A,fb_post_engage_wow:P,fb_post_entity_id:w,fb_post_engage_haha:j,fb_post_engage_like:T,fb_post_engage_love:I,fb_post_video_views:null,fb_post_this_video_views:null,fb_post_engage_angry:E,fb_post_engage_shares:C,fb_post_engage_comments:k,fb_post_advertiser_page_id:h,fb_post_advertiser_page_entity_id:b,fb_post_call_to_action_url:g,fb_post_call_to_action_text:S,fb_post_advertiser_thumbnail_url:v,fb_post_advertiser_page_pretty_name:_,fb_post_app_pretty_name:f,fb_post_app_id:d,fb_post_app_thumbnail_url:p,fb_post_carousel_info:l,fb_post_caption:i.fb_post_caption,fb_post_attachment_description:i.fb_post_attachment_description,fb_post_attachment_title:i.fb_post_attachment_title,parser_type:"desktop",parser_version:this.extensionVersion,fb_post_ad_placement:"feed"}},Parser.prototype.parseVideoFields=function(t){var e=null,n=null,r=t.querySelectorAll("img.img:not([src*='emoji.php'])")[1];r instanceof HTMLImageElement&&""===(e=(r.style.backgroundImage||"").replace(/^url\(("|')?/,"").replace(/("|')?\)$/,""))&&(e=r.src);var o=t.querySelector("video");return o instanceof HTMLVideoElement&&o.hasAttribute("src")&&!o.src.startsWith("blob:")&&(n=o.src),{previewImageUrl:e,videoUrl:n}},Parser.prototype.parseGifFields=function(t){var e=null,n=null,r=null,o=t.querySelectorAll("img.img:not([src*='emoji.php'])")[1];o instanceof HTMLImageElement&&(e=o.src);var i=t.querySelector("video");i instanceof HTMLVideoElement&&(n=i.src);var s=t.querySelector("span > [target='_blank']");return s instanceof HTMLAnchorElement&&(r=s.href),{previewImageUrl:e,videoUrl:n,originalUrl:r}},Parser.prototype.getStorySelector=function(){return["×¡×™×¤×•×¨","Story","ActualitÃ©"].map(function(t){return"div[aria-label="+t+"]"}).join(", ")},Parser.prototype.removeZeroSizedFont=function(t){var e=window.getComputedStyle(t).fontSize;if(!e||0===e.length||"0px"===e||function hiddenFromSightHeuristics(t,e){var n=e.getComputedStyle(t);if("none"===n.display)return!0;if("0"===n.opacity&&"absolute"===n.position)return!0;return!1}(t,window))return null;if(!t.childElementCount)return t;for(var n=document.createElement(t.tagName),r=0;r<t.childElementCount;r++){var o=this.removeZeroSizedFont(t.children[r]);if(o){var i=o.cloneNode(!0);i.textContent=o.textContent,n.appendChild(i)}}return n},Parser.prototype.isStorySponsoredImpl=function(t,e){var n=this;return Array.from(t.querySelectorAll("s, [data-testid='story-subtilte'] > span, a, div[data-testid=story-subtitle], div[data-testid*=story-label] a")).map(function(r){var o,i,s=window.getComputedStyle(r);if(s.display&&s.display.match("none"))return{story:t,a:r,ok:!1,reason:"self-none",context:{}};if(null===(o=r.firstElementChild)||void 0===o?void 0:o.childElementCount){var a=Array.from(r.firstElementChild.children).filter(function(t){var e=t.getBoundingClientRect();return 0!==e.width&&0!==e.height}).map(function(t){return t.textContent}).join("").replace(new RegExp('"',"g"),"");if(a&&e.indexOf(trimTextContent(a))>-1)return{story:t,a:r,ok:!0,reason:"within rect overflow",context:a};var c=r.querySelector("span");if((null===(i=c)||void 0===i?void 0:i.children)&&(a=Array.from(c.children).flatMap(function(t){return function getLeaves(t){if(t.children.length)return Array.from(t.children).flatMap(function(t){return getLeaves(t)});return[t]}(t)}).filter(function(t){return["0px","auto"].includes(window.getComputedStyle(t).top)}).map(function(t){return t.textContent}).join("").replace(new RegExp('"',"g"),""))&&e.indexOf(trimTextContent(a))>-1)return{story:t,a:r,ok:!0,reason:"within rect overflow - using top attribute",context:a}}var u=Array.from(r.querySelectorAll("[data-content]")).filter(function(t){return"none"!==window.getComputedStyle(t).getPropertyValue("display")}).map(function(t){return window.getComputedStyle(t,"::after").getPropertyValue("content")}).join("").replace(new RegExp('"',"g"),"");if(u&&e.indexOf(trimTextContent(u))>-1)return{story:t,a:r,ok:!0,reason:"after-content",context:u};var l=window.getComputedStyle(r,":after").content;if(l){var f=l.match(/\"(.*)\"/);f&&(l=f[1])}var d=n.removeZeroSizedFont(r);return getParentsUpTo(r,t).some(function(t){return"none"===window.getComputedStyle(t).display})?{story:t,a:r,ok:!1,reason:"parent-none",context:getParentsUpTo(r,t).find(function(t){return"none"===window.getComputedStyle(t).display})}:d&&d.textContent&&e.indexOf(trimTextContent(d.textContent))>-1?{story:t,a:r,ok:!0,reason:"element && anchorPossibleText",context:{elementWithoutZeroSize:d}}:l&&e.indexOf(l)>-1?{story:t,a:r,ok:!0,reason:"cssAfterContent && anchorPossibleText",context:{cssAfterContent:l,elementWithoutZeroSize:d}}:{story:t,a:r,ok:r.textContent&&e.indexOf(trimTextContent(r.textContent))>-1||!1,reason:"legacy",context:{cssAfterContent:l,elementWithoutZeroSize:d}}}).some(function(t){return t.ok})},Parser.prototype.isStorySponsored=function(t){return this.isStorySponsoredImpl(t,["Sponsored","×ž×ž×•×ž×Ÿ","SponsorisÃ©","Sponsorizzata","Ø¥Ø¹Ù„Ø§Ù† Ù…ÙÙ…ÙˆÙ‘ÙŽÙ„","Publicidad","Patrocinado","Gesponsert","RÄ—mÄ—jai","5p4m","Ð ÐµÐºÐ»Ð°Ð¼Ð°","Sponsorowane"])},Parser.prototype.parseStringedNumber=function(t,e){var n=new Set(["en_US","en_GB","en_CA","he_IL","fr_FR","fr_CA","it_IT","de_DE","es_ES","es_LA"]),r=new Map([["k",1e3],["mil",1e3],["m",1e6],["mill.",1e6],["mln",1e6],["mio.",1e6],["b",1e9],["g",1e9]]);if(!n.has(e)&&/[^0-9]/.test(t))return null;var i=t.toLowerCase().replace(",",".").match(new RegExp("^([0-9]+\\.?[0-9]*)( ?("+Array.from(r.keys()).map(function(t){return Object(o.d)(t)}).join("|")+"))?$"));return null!==i&&function isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}(i[1])?parseFloat(i[1])*(r.has(i[3])?r.get(i[3]):-1!==["de_DE","it_IT"].indexOf(e)?1e3:1):null},Parser.prototype.parseVerbAndNumber=function(t,e){var n=t.match(/([0-9]*(\.|,)?[0-9]*)(.*)\ (.*)/),r=-1,o="";this.log.captureBreadcrumb({message:"parseVerbAndNumber",data:{splitText:n}}),n&&("m"===n[3].toLowerCase()||"k"===n[3].toLowerCase()?r=parseFloat(n[1])*("k"==n[3].toLowerCase()?1e3:1e6):","===n[2]?r=parseInt(n[1].replace(",","")):n[2]?this.log.error("Found an unknown multiplier"):r=parseInt(n[1]),o=n[4]),-1!=r?(e.set(o,r),this.log.debug("Found new verb: "+o+" with a number of: "+r)):(this.log.captureBreadcrumb({message:"content-parsing-error",level:"error",data:{verb:o,splitText:n}}),this.log.error("content-parsing-error"))},Parser.prototype.getEngagementScoreFromStory=function(t){var e=new Map;try{this.log.debug("Start getting engage scores....");var n=t.querySelectorAll("span[role*='toolbar'] a");this.log.info("Found "+n.length+" feelings...");for(var r=0;r<n.length;r++)try{var o=n[r].getAttribute("aria-label")||"";this.parseVerbAndNumber(o,e)}catch(t){this.log.error("Error while parsing a verb from feelings!"+t)}var i=t.querySelectorAll("a[aria-live='polite'], span[aria-live='polite']");this.log.info("Found "+i.length+" in comment and share section.");for(var s=0;s<i.length;s++)try{this.parseVerbAndNumber(i[s].textContent||"",e)}catch(t){this.log.error("Error while parsing a verb from comments and shares!"+t)}}catch(t){}return e},Parser.prototype.isStoryLoaded=function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;return null!==t.querySelector(".fbUserContent, input[name=ft_ent_identifier], .userContentWrapper, i.profpic")&&0!==n&&0!==r},Parser.prototype.isSuggestedPageStory=function(t,e){t.innerHTML},Parser.prototype.getNestingType=function(t,e){return"unknown"},Parser.prototype.parseInstreamAd=function(t){var e;if(!0===t.isEmpty)return null;var n=t.instreamVideoAdBreakVideoID;if(!n)throw new f("Unable to find ad entity id for instream video. Raw response:",t);var r=document.createElement("div");r.innerHTML=t.videoAdStory.__html;var i=r.firstElementChild.dataset.xt;if(!i)return null;var s=Object(o.h)(i)[0],a=Object.values(s)[0];return{fb_post_entity_id:Object(o.g)(function(){return a.post_context.story_fbid[0]},n).toString(),fb_post_advertiser_page_entity_id:(e=a.page_id,null!=e?e:a.actor_id).toString()}},Parser.tryExtractStoryEntityId=function(t){var e,n=t.querySelector(s.e);return n instanceof HTMLInputElement?n.value:null!=(e=Object(o.g)(function(){return JSON.parse(t.dataset.store).feedback_target},null))?e:Object(o.g)(function(){return JSON.parse(t.querySelector("article[data-store]").dataset.store).share_id},null)},Parser.prototype.sanityzePIIPostHtml=function(t){if(t.parentElement)throw new Error("don't pass elements from living document! it hurt the page. you must pass only clones");for(var e=0,n=Array.from(t.querySelectorAll(c.a.join(",")));e<n.length;e++){var r=n[e];this.log.info("will remove",[r]),r.remove()}return t},Parser.extractLinkFromFbRedirector=i.a,Parser}();function getParentsUpTo(t,e){if(!e.contains(t))throw new Error("el is not decendent of upto");for(var n=[],r=t;r.parentElement!==e&&null!==r.parentElement;)n.push(r.parentElement),r=r.parentElement;return n}function trimTextContent(t){return t.replace(" Â· ","")}var f=function(t){function InsteamAdParseError(e,n){var r=t.call(this,e)||this;return r.rawResponse=n,Object.setPrototypeOf(r,InsteamAdParseError.prototype),r}return u(InsteamAdParseError,t),InsteamAdParseError}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(27),o=n(61),i=n(83),s=n(126),a=function(){function ParsedStory(t,e,n){this.log=e,this._fb_post_actionlink_url=null,this._fb_post_img_url=null,this._fb_post_call_to_action_url=null,this._fb_post_call_to_action_text=null,this._fb_post_carousel_info=null,this._fb_post_advertiser_page_pretty_name=null,this._fb_post_advertiser_page_id=null,this._fb_post_advertiser_page_entity_id=null,this._fb_post_advertiser_thumbnail_url=null,this._fb_post_app_id=null,this._fb_post_app_pretty_name=null,this._fb_post_app_thumbnail_url=null,this._diagnostics=n||[],this._article=t,this.init()}return ParsedStory.prototype.init=function(){var t=this._article.querySelector(i.d);if(!(t instanceof HTMLFormElement))throw new RangeError("The given element is not a feedback target:"+this._article.id);this._commentsForm=t,null!==this._commentsForm.parentElement&&null!==this._commentsForm.parentElement.previousElementSibling?this._innerStory=this._commentsForm.parentElement.previousElementSibling:this._innerStory=this._article,this.is_app_post=null!==this._innerStory.querySelector("a[data-hovercard*='application.php'][href*='apps.facebook.com']")},Object.defineProperty(ParsedStory.prototype,"entId",{get:function(){if(!this._entId){var t=s.a.tryExtractStoryEntityId(this._commentsForm);if(!t)throw new Error("can't parse fb_post_entity_id, expected selector not found");this._entId=t}return this._entId},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"nestType",{get:function(){return this._nestType||(this._nestType="unknown"),this._nestType},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"isNestingStory",{get:function(){return this._isNestingStory||(this._isNestingStory=!1),this._isNestingStory},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_caption",{get:function(){if(void 0===this._fb_post_caption){var t=this._innerStory.querySelector("div._6lz._6mb.ellipsis");t&&""!==t.textContent?this._fb_post_caption=t.textContent:this._fb_post_caption=null}return this._fb_post_caption},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_attachment_title",{get:function(){if(void 0===this._fb_post_attachment_title){var t=this._innerStory.querySelector(".mbs._6m6._2cnj._5s6c > a");t&&""!==t.textContent?this._fb_post_attachment_title=t.textContent:this._fb_post_attachment_title=null}return this._fb_post_attachment_title},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_attachment_description",{get:function(){if(void 0===this._fb_post_attachment_description){var t=this._innerStory.querySelector("._6m7._3bt9");t&&""!==t.textContent?this._fb_post_attachment_description=t.textContent:this._fb_post_attachment_description=null}return this._fb_post_attachment_description},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_carousel_info",{get:function(){var t=this;if("carousel"===this.storyType){var e=this._innerStory.querySelector("ul.uiList");if(null===e)throw new RangeError("missing ul inside carousel");var n=Array.from(e.children).map(function(e){var n=e.querySelector("img:nth-of-type(1)");if(null===n)throw new RangeError("Unexpected post structure. missing img in li. fb_post_carousel_info. id:"+t._entId);var r=n.style.backgroundImage&&n.style.backgroundImage.replace(/^url\(\"/,"").replace(/\"\)$/,"")||n.src,i=e.children[0],s=e.children[1],a=i instanceof HTMLAnchorElement?i:s instanceof HTMLAnchorElement?s:null;if(a instanceof HTMLAnchorElement){var c=Object(o.a)(a.href),u=a.cloneNode(!0);Array.from(u.querySelectorAll("button")).forEach(function(t){t.remove()});var l=e.querySelector("div._1032"),f=e.querySelector("div._1m-h"),d=l?l.textContent:u.textContent;return f&&(d+=" "+f.textContent),{fb_post_carousel_actionlink_url:c,fb_post_carousel_text:d,fb_post_carousel_img_url:r}}throw new RangeError("Unexpected post structure. fb_post_carousel_info. id:"+t._entId)});return""===n[n.length-1].fb_post_carousel_text&&(n[n.length-1].fb_post_carousel_text=e.children[e.children.length-1].textContent),n}return null},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"storyType",{get:function(){if(!this._postType){this._postType="unknown";var t=this._innerStory.querySelectorAll("a[rel=theater] img");if(t.length>0)1===t.length?this._postType="photo":this._postType="album";else if(null!==this._innerStory.querySelector("a[href*='/offers/url/?offer_id']"))this._postType="offer";else if(null!==this._innerStory.querySelector('a[href*="/events/"][data-hover=tooltip]'))this._postType="event";else{var e=this._innerStory.querySelector("ul.uiList");if(this._innerStory.querySelector('[data-testid="multishare_pager_next"]')||e instanceof HTMLUListElement&&e.nextElementSibling&&e.nextElementSibling.querySelector("div > a > div > i"))this._postType="carousel";else if(this._innerStory.querySelector("video")instanceof HTMLVideoElement)this._innerStory.querySelector("[role=progressbar]")instanceof HTMLSpanElement?this._postType="video":this._postType="gif";else if(null!==this._innerStory.querySelector(".fbStoryAttachmentImage.uiScaledImageContainer"))null!==this._innerStory.querySelector("button[type='submit']:not(.PageLikeButton)")?this._postType="lead":this._postType="link";else{var n=this._innerStory.querySelector("div.userContent"),r=!!n&&n.nextElementSibling instanceof HTMLDivElement&&n.nextElementSibling;r&&null===r.querySelector("img")&&(this._postType="text")}}}return this._postType},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_actionlink_url",{get:function(){if(!this._fb_post_actionlink_url){this._fb_post_actionlink_url=null;var t=this._innerStory.querySelector("a[rel*=nofollow][target=_blank],a[rel*=noopener][target=_blank]");t instanceof HTMLAnchorElement?this._fb_post_actionlink_url=Object(o.a)(t.href):this._diagnostics.push("can't parse fb_post_actionlink_url, the expected selector not found")}return this._fb_post_actionlink_url},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_img_url",{get:function(){if(!this._fb_post_img_url)if(this._fb_post_img_url=null,"album"===this.storyType||"photo"===this.storyType){var t=this._innerStory.querySelector("a[rel=theater] img");t instanceof HTMLImageElement&&(this._fb_post_img_url=t.src)}else{var e=this._innerStory.querySelector("div.fbStoryAttachmentImage > img");e instanceof HTMLImageElement?this._fb_post_img_url=e.src:this._diagnostics.push("can't parse, fb_post_img_url. expected selector not found")}return this._fb_post_img_url},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_call_to_action_url",{get:function(){return this._fb_post_call_to_action_url||this.initActionLink(),this._fb_post_call_to_action_url},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_call_to_action_text",{get:function(){return this._fb_post_call_to_action_text||this.initActionLink(),this._fb_post_call_to_action_text},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_page_pretty_name",{get:function(){return this._fb_post_advertiser_page_pretty_name||this.parseAdvertiserFields(),this._fb_post_advertiser_page_pretty_name},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_page_entity_id",{get:function(){return this._fb_post_advertiser_page_entity_id||this.parseAdvertiserFields(),this._fb_post_advertiser_page_entity_id},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_page_id",{get:function(){return this._fb_post_advertiser_page_id||this.parseAdvertiserFields(),this._fb_post_advertiser_page_id},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_thumbnail_url",{get:function(){return this._fb_post_advertiser_thumbnail_url||this.parseAdvertiserFields(),this._fb_post_advertiser_thumbnail_url},enumerable:!0,configurable:!0}),ParsedStory.prototype.parseAdvertiserFields=function(){var t;if(this._fb_post_advertiser_page_pretty_name=null,this._fb_post_advertiser_page_id=null,this._fb_post_advertiser_thumbnail_url=null,!this.is_app_post){var e=this._innerStory.querySelectorAll(i.a),n=null!=(t=e[1])?t:e[0];if(n instanceof HTMLAnchorElement){this._fb_post_advertiser_page_pretty_name=n.textContent;var r=Object(o.a)(n.href);if(-1===r.indexOf("profile.php?id=")){var s=document.createElement("a");s.href=r,this._fb_post_advertiser_page_id=decodeURIComponent(s.pathname.substr(1).replace(/\/$/,""))}else{var a=r.match(/profile\.php\?id\=([0-9]+)/);a instanceof Array?this._fb_post_advertiser_page_id=a[1]:this._diagnostics.push("Couldn't parse fb_post_advertiser_page_id from the a element")}}else this._diagnostics.push("Couldn't parse fb_post_advertiser_page_id, fb_post_advertiser_page_pretty_name. the expected selector not found");var c=e[0];if(c instanceof HTMLAnchorElement){var u=c.querySelector("img");u instanceof HTMLImageElement?this._fb_post_advertiser_thumbnail_url=u.src:this._diagnostics.push("can't parse fb_post_advertiser_thumbnail_url, expected selector not found")}else this._diagnostics.push("can't parse fb_post_advertiser_thumbnail_url, expected selector not found")}},Object.defineProperty(ParsedStory.prototype,"fb_post_app_id",{get:function(){return this._fb_post_app_id||this.parseFbAppStoryFields(),this._fb_post_app_id},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_app_pretty_name",{get:function(){return this._fb_post_app_pretty_name||this.parseFbAppStoryFields(),this._fb_post_app_pretty_name},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_app_thumbnail_url",{get:function(){return this._fb_post_app_thumbnail_url||this.parseFbAppStoryFields(),this._fb_post_app_thumbnail_url},enumerable:!0,configurable:!0}),ParsedStory.prototype.parseFbAppStoryFields=function(){if(this._fb_post_app_id=null,this._fb_post_app_pretty_name=null,this._fb_post_app_thumbnail_url=null,this.is_app_post){var t=this._innerStory.querySelectorAll(i.a),e=t[0];if(e instanceof HTMLAnchorElement){var n=e.querySelector("img");n instanceof HTMLImageElement?this._fb_post_app_thumbnail_url=n.src:this._diagnostics.push("failed with fb_post_app_thumbnail_url. expected selector not found")}else this._diagnostics.push("failed with fb_post_app_thumbnail_url. expected selector not found");var r=t[1];if(r instanceof HTMLAnchorElement){this._fb_post_app_pretty_name=r.textContent;var s=Object(o.a)(r.href).match(/apps\.facebook\.com\/([^\/]+)\//);null!==s&&2===s.length?this._fb_post_app_id=s[1]:this._diagnostics.push("failed with fb_post_app_id. failed extract id from href")}else this._diagnostics.push("failed with fb_post_app_pretty_name. expected selector not found")}},ParsedStory.prototype.initActionLink=function(){if("lead"===this.storyType){var t=this._innerStory.querySelector('button[type="submit"]:not([class*="Like"])');this._fb_post_call_to_action_url=null,t instanceof HTMLButtonElement?this._fb_post_call_to_action_text=t.textContent:(this._diagnostics.push("cant parse fb_post_call_to_action_url, expected selector not found"),this._fb_post_call_to_action_text=null)}else if("offer"===this.storyType){var e=this._innerStory.querySelector("a[href*='/offers/url/?offer_id'][role=button]");e instanceof HTMLAnchorElement&&(this._fb_post_call_to_action_text=e.text,this._fb_post_call_to_action_url=e.href.replace("http://localhost",""))}else if("carousel"===this.storyType){var n=this._innerStory.querySelector("button[type=submit]:not(.PageLikeButton)");if(n instanceof HTMLButtonElement||(n=this._innerStory.querySelector("a[role='button'][rel*='nofollow'],a[role='button'][rel*='noopener']")),n instanceof HTMLElement&&this._innerStory instanceof HTMLElement){this._fb_post_call_to_action_text=n.textContent;var i=Object(r.b)(n,"a",this._innerStory);i instanceof HTMLAnchorElement&&(this._fb_post_call_to_action_url=Object(o.a)(i.href))}}else{var s=this._innerStory.querySelector("a[role=button][rel*=nofollow],a[role=button][rel*=noopener]");s instanceof HTMLAnchorElement?(this._fb_post_call_to_action_url=Object(o.a)(s.href),this._fb_post_call_to_action_text=s.textContent):(this._diagnostics.push("cant parse fb_post_call_to_action_url, expected selector not found"),this._fb_post_call_to_action_url=null,this._fb_post_call_to_action_text=null)}},ParsedStory}()},function(t,e){var n=t.exports=function(t){return new Traverse(t)};function Traverse(t){this.value=t}function walk(t,e,n){var a=[],c=[],u=!0;return function walker(t){var l=n?copy(t):t,f={},d=!0,p={node:l,node_:t,path:[].concat(a),parent:c[c.length-1],parents:c,key:a.slice(-1)[0],isRoot:0===a.length,level:a.length,circular:null,update:function(t,e){p.isRoot||(p.parent.node[p.key]=t),p.node=t,e&&(d=!1)},delete:function(t){delete p.parent.node[p.key],t&&(d=!1)},remove:function(t){o(p.parent.node)?p.parent.node.splice(p.key,1):delete p.parent.node[p.key],t&&(d=!1)},keys:null,before:function(t){f.before=t},after:function(t){f.after=t},pre:function(t){f.pre=t},post:function(t){f.post=t},stop:function(){u=!1},block:function(){d=!1}};if(!u)return p;function updateState(){if("object"==typeof p.node&&null!==p.node){p.keys&&p.node_===p.node||(p.keys=r(p.node)),p.isLeaf=0==p.keys.length;for(var e=0;e<c.length;e++)if(c[e].node_===t){p.circular=c[e];break}}else p.isLeaf=!0,p.keys=null;p.notLeaf=!p.isLeaf,p.notRoot=!p.isRoot}updateState();var h=e.call(p,p.node);return void 0!==h&&p.update&&p.update(h),f.before&&f.before.call(p,p.node),d?("object"!=typeof p.node||null===p.node||p.circular||(c.push(p),updateState(),i(p.keys,function(t,e){a.push(t),f.pre&&f.pre.call(p,p.node[t],t);var r=walker(p.node[t]);n&&s.call(p.node,t)&&(p.node[t]=r.node),r.isLast=e==p.keys.length-1,r.isFirst=0==e,f.post&&f.post.call(p,r),a.pop()}),c.pop()),f.after&&f.after.call(p,p.node),p):p}(t).node}function copy(t){if("object"==typeof t&&null!==t){var e;if(o(t))e=[];else if(function isDate(t){return"[object Date]"===toS(t)}(t))e=new Date(t.getTime?t.getTime():t);else if(function isRegExp(t){return"[object RegExp]"===toS(t)}(t))e=new RegExp(t);else if(function isError(t){return"[object Error]"===toS(t)}(t))e={message:t.message};else if(function isBoolean(t){return"[object Boolean]"===toS(t)}(t))e=new Boolean(t);else if(function isNumber(t){return"[object Number]"===toS(t)}(t))e=new Number(t);else if(function isString(t){return"[object String]"===toS(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},s=function(){};s.prototype=n,e=new s}return i(r(t),function(n){e[n]=t[n]}),e}return t}Traverse.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!s.call(e,r)){e=void 0;break}e=e[r]}return e},Traverse.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!s.call(e,r))return!1;e=e[r]}return!0},Traverse.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var o=t[r];s.call(n,o)||(n[o]={}),n=n[o]}return n[t[r]]=e,e},Traverse.prototype.map=function(t){return walk(this.value,t,!0)},Traverse.prototype.forEach=function(t){return this.value=walk(this.value,t,!1),this.value},Traverse.prototype.reduce=function(t,e){var n=1===arguments.length,r=n?this.value:e;return this.forEach(function(e){this.isRoot&&n||(r=t.call(this,r,e))}),r},Traverse.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},Traverse.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},Traverse.prototype.clone=function(){var t=[],e=[];return function clone(n){for(var o=0;o<t.length;o++)if(t[o]===n)return e[o];if("object"==typeof n&&null!==n){var s=copy(n);return t.push(n),e.push(s),i(r(n),function(t){s[t]=clone(n[t])}),t.pop(),e.pop(),s}return n}(this.value)};var r=Object.keys||function keys(t){var e=[];for(var n in t)e.push(n);return e};function toS(t){return Object.prototype.toString.call(t)}var o=Array.isArray||function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)},i=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};i(r(Traverse.prototype),function(t){n[t]=function(e){var n=[].slice.call(arguments,1),r=new Traverse(e);return r[t].apply(r,n)}});var s=Object.hasOwnProperty||function(t,e){return e in t}},function(t,e,n){"use strict";(function(e){var r=n(32),o=n(385),i={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function getDefaultAdapter(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(171):void 0!==e&&(t=n(171)),t}(),transformRequest:[function transformRequest(t,e){return o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(setContentTypeIfUnset(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(setContentTypeIfUnset(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function transformResponse(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function validateStatus(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function forEachMethodNoData(t){s.headers[t]={}}),r.forEach(["post","put","patch"],function forEachMethodWithData(t){s.headers[t]=r.merge(i)}),t.exports=s}).call(e,n(4))},,,,,,,,function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(3),o=n(19),i=n(6),s=n(5),a=n(14),c=n(97),u=function(t){function ConnectableObservable(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(ConnectableObservable,t),ConnectableObservable.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},ConnectableObservable.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t},ConnectableObservable.prototype.refCount=function(){return Object(c.a)()(this)},ConnectableObservable}(i.a),l=function(){var t=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),f=function(t){function ConnectableSubscriber(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(ConnectableSubscriber,t),ConnectableSubscriber.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},ConnectableSubscriber}(o.b);s.a},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(14),s=n(6),a=n(19);o.a;var c=function(t){function GroupDurationSubscriber(e,n,r){var o=t.call(this,n)||this;return o.key=e,o.group=n,o.parent=r,o}return r.a(GroupDurationSubscriber,t),GroupDurationSubscriber.prototype._next=function(t){this.complete()},GroupDurationSubscriber.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},GroupDurationSubscriber}(o.a),u=function(t){function GroupedObservable(e,n,r){var o=t.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=r,o}return r.a(GroupedObservable,t),GroupedObservable.prototype._subscribe=function(t){var e=new i.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new l(n)),e.add(r.subscribe(t)),e},GroupedObservable}(s.a),l=function(t){function InnerRefCountSubscription(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.a(InnerRefCountSubscription,t),InnerRefCountSubscription.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},InnerRefCountSubscription}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(3),o=n(19),i=n(56),s=function(t){function BehaviorSubject(e){var n=t.call(this)||this;return n._value=e,n}return r.a(BehaviorSubject,t),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value},BehaviorSubject.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},BehaviorSubject}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(3),o=n(5),i=n(68);var s=function(t){function ObserveOnSubscriber(e,n,r){void 0===r&&(r=0);var o=t.call(this,e)||this;return o.scheduler=n,o.delay=r,o}return r.a(ObserveOnSubscriber,t),ObserveOnSubscriber.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},ObserveOnSubscriber.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new a(t,this.destination)))},ObserveOnSubscriber.prototype._next=function(t){this.scheduleMessage(i.a.createNext(t))},ObserveOnSubscriber.prototype._error=function(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()},ObserveOnSubscriber}(o.a),a=function(){return function ObserveOnMessage(t,e){this.notification=t,this.destination=e}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(192),o=new(n(194).a)(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function TimeoutErrorImpl(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return TimeoutErrorImpl.prototype=Object.create(Error.prototype),TimeoutErrorImpl}()},function(t,e,n){"use strict";e.a=function concatAll(){return Object(r.a)(1)};var r=n(91)},function(t,e,n){"use strict";e.a=function merge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,a=null,c=t[t.length-1];Object(o.a)(c)?(a=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof c&&(n=t.pop());if(null===a&&1===t.length&&t[0]instanceof r.a)return t[0];return Object(i.a)(n)(Object(s.a)(t,a))};var r=n(6),o=n(30),i=n(91),s=n(46)},function(t,e,n){"use strict";e.a=function not(t,e){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=t,notPred.thisArg=e,notPred}},function(t,e,n){"use strict";e.a=function race(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(o.a)(t[0]))return t[0];t=t[0]}return Object(i.a)(t,void 0).lift(new c)};var r=n(3),o=n(17),i=n(46),s=n(10),a=n(11);var c=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(t,e){return e.subscribe(new u(t))},RaceOperator}(),u=function(t){function RaceSubscriber(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(RaceSubscriber,t),RaceSubscriber.prototype._next=function(t){this.observables.push(t)},RaceSubscriber.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],o=Object(a.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(t,e,n,r,o){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var s=this.subscriptions[i];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},RaceSubscriber}(s.a)},function(t,e,n){"use strict";e.a=function timer(t,e,n){void 0===t&&(t=0);var a=-1;Object(i.a)(e)?a=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e);Object(s.a)(n)||(n=o.a);return new r.a(function(e){var r=Object(i.a)(t)?t:+t-n.now();return n.schedule(dispatch,r,{index:0,period:a,subscriber:e})})};var r=n(6),o=n(21),i=n(69),s=n(30);function dispatch(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},function(t,e,n){"use strict";n(122);var r=n(237);n.d(e,"j",function(){return r.a});var o=n(238);n.d(e,"b",function(){return o.a});var i=n(123);n.d(e,"c",function(){return i.a});var s=n(260);n.d(e,"d",function(){return s.a});var a=n(261);n.d(e,"e",function(){return a.a});var c=n(262);n.d(e,"f",function(){return c.a});var u=n(263);n.d(e,"g",function(){return u.a});var l=n(264);n.d(e,"h",function(){return l.a});n(265);var f=n(266);n.d(e,"a",function(){return f.a}),n.d(e,"i",function(){return f.b});var d=n(267);n.d(e,"k",function(){return d.a})},,,,,,,,,,,,function(t,e,n){"use strict";e.a=function audit(t){return function auditOperatorFunction(e){return e.lift(new s(t))}};var r=n(3),o=n(10),i=n(11);var s=function(){function AuditOperator(t){this.durationSelector=t}return AuditOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},AuditOperator}(),a=function(t){function AuditSubscriber(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(AuditSubscriber,t),AuditSubscriber.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}var n=Object(i.a)(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},AuditSubscriber.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},AuditSubscriber.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function concatMap(t,e){return Object(r.a)(t,e,1)};var r=n(59)},function(t,e,n){"use strict";e.a=function isDate(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,n){"use strict";e.a=function distinctUntilChanged(t,e){return function(n){return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function DistinctUntilChangedOperator(t,e){this.compare=t,this.keySelector=e}return DistinctUntilChangedOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),s=function(t){function DistinctUntilChangedSubscriber(e,n,r){var o=t.call(this,e)||this;return o.keySelector=r,o.hasKey=!1,"function"==typeof n&&(o.compare=n),o}return r.a(DistinctUntilChangedSubscriber,t),DistinctUntilChangedSubscriber.prototype.compare=function(t,e){return t===e},DistinctUntilChangedSubscriber.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},DistinctUntilChangedSubscriber}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(3),o=n(5);var i=function(){function FindValueOperator(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return FindValueOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},FindValueOperator}(),s=function(t){function FindValueSubscriber(e,n,r,o,i){var s=t.call(this,e)||this;return s.predicate=n,s.source=r,s.yieldIndex=o,s.thisArg=i,s.index=0,s}return r.a(FindValueSubscriber,t),FindValueSubscriber.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},FindValueSubscriber.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},FindValueSubscriber.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},FindValueSubscriber}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(3),o=n(10),i=n(11),s={leading:!0,trailing:!1};o.a},function(t,e,n){"use strict";e.a=function timeoutWith(t,e,n){void 0===n&&(n=o.a);return function(r){var o=Object(i.a)(t),s=o?+t-n.now():Math.abs(t);return r.lift(new c(s,o,e,n))}};var r=n(3),o=n(21),i=n(162),s=n(10),a=n(11);var c=function(){function TimeoutWithOperator(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return TimeoutWithOperator.prototype.call=function(t,e){return e.subscribe(new u(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),u=function(t){function TimeoutWithSubscriber(e,n,r,o,i){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=o,s.scheduler=i,s.action=null,s.scheduleTimeout(),s}return r.a(TimeoutWithSubscriber,t),TimeoutWithSubscriber.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(a.a)(t,e))},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,this))},TimeoutWithSubscriber.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},TimeoutWithSubscriber.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},TimeoutWithSubscriber}(s.a)},function(t,e,n){"use strict";e.b=function getDelay(t,e){return Math.min(t,e)},e.a=function exponentialBackoffDelay(t,e){return Math.pow(2,t)*e}},function(t,e,n){"use strict";var r=n(381);n.d(e,"c",function(){return r.a});var o=n(400);n.d(e,"e",function(){return o.a});var i=n(401);n.d(e,"h",function(){return i.a});var s=n(402);n.d(e,"a",function(){return s.a});var a=n(406);n.d(e,"b",function(){return a.a});var c=n(407);n.d(e,"f",function(){return c.a});var u=n(169);n.d(e,"m",function(){return u.a});var l=n(408);n.d(e,"n",function(){return l.a});var f=n(175);n.d(e,"d",function(){return f.a}),n.d(e,"k",function(){return f.b});var d=n(409);n.d(e,"j",function(){return d.a});var p=n(412);n.d(e,"g",function(){return p.a});n(176);var h=n(413);n.d(e,"l",function(){return h.a});n(177);var b=n(414);n.d(e,"i",function(){return b.a});n(415)},function(t,e,n){"use strict";e.a=function setupAnalyticsVars(t,e,n,r,o,i,s,a){t("set","dimension1",r),t("set","dimension2",""),t("set","dimension3",i),t("set","dimension4",e),s&&t("set","dimension5",s);t("set","dimension6",o),a&&t("set","dimension7",a);t("set","dimension8",n)}},function(t,e,n){"use strict";t.exports=function bind(t,e){return function wrap(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";(function(e){var r=n(32),o=n(386),i=n(388),s=n(389),a=n(390),c=n(172),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(391);t.exports=function xhrAdapter(t){return new Promise(function dispatchXhrRequest(l,f){var d=t.data,p=t.headers;r.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest,b="onreadystatechange",_=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||a(t.url)||(h=new window.XDomainRequest,b="onload",_=!0,h.onprogress=function handleProgress(){},h.ontimeout=function handleTimeout(){}),t.auth){var v=t.auth.username||"",y=t.auth.password||"";p.Authorization="Basic "+u(v+":"+y)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[b]=function handleLoad(){if(h&&(4===h.readyState||_)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:e,config:t,request:h};o(l,f,n),h=null}},h.onerror=function handleError(){f(c("Network Error",t,null,h)),h=null},h.ontimeout=function handleTimeout(){f(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var m=n(392),g=(t.withCredentials||a(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;g&&(p[t.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(p,function setRequestHeader(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete p[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function onCanceled(t){h&&(h.abort(),f(t),h=null)}),void 0===d&&(d=null),h.send(d)})}}).call(e,n(4))},function(t,e,n){"use strict";var r=n(387);t.exports=function createError(t,e,n,o,i){var s=new Error(t);return r(s,e,n,o,i)}},function(t,e,n){"use strict";t.exports=function isCancel(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function Cancel(t){this.message=t}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,t.exports=Cancel},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),e.b=onBeforeSendHeaders;var r=n(16),o=n(20),i=n(176),s=function(){function ChromeExtensionEnvironmentServicesImpl(t,e,n,r,i){this.chromeEnv=t,this.storage=e,this.iconPath=n,this.updateEventHandler=r,this.log=i,this.auditEvents=new o.d,this.envEvents=function envEventsProvider(t){return new o.c(function(e){var n=function(t){"install"===t.reason?e.next("install"):"update"===t.reason?e.next("update"):e.next("env_update")};return t.addListener(n),function unsubscribe(){t.removeListener(n)}})}(r),this.crossMessage=function crossMessageProvider(t){var e=["NewSponsoredPost","Post","Analytics","Interaction","Config","IsBackgroundReady","NewPromotedTweet","AmazonProduct","AmazonSponsored","LinkedInSponsored","FacebookNewFeedUi","AdBlockerStatus","Navigation"];return new o.c(function(n){var r=function(t,r,o){return-1!==e.indexOf(t.type)&&(n.next(t),!1)};return t.runtime.onMessage.addListener(r),function unsubscribe(){t.runtime.onMessage.removeListener(r)}})}(this.chromeEnv)}return ChromeExtensionEnvironmentServicesImpl.prototype.hideOrigin=function(t,e){var n=this;onBeforeSendHeaders(function(t){if(t.requestHeaders){for(var r=0,o=t.requestHeaders;r<o.length;r++){var i=o[r];i.value&&"Origin"===i.name&&i.value.match(n.chromeEnv.extension.getURL("/"))&&(n.log.info("Request to "+t.url+" Change origin from "+i.value+" to https://www.facebook.com"),i.value=e,!0)}t.requestHeaders.push({name:"Origin",value:e})}return{requestHeaders:t.requestHeaders}},{urls:[t]},["blocking","requestHeaders","extraHeaders"])},ChromeExtensionEnvironmentServicesImpl.prototype.sendMessageToContent=function(t){var e=this;this.chromeEnv.tabs.query({},function(n){for(var r=0,o=n;r<o.length;r++){var i=o[r].id;i&&e.chromeEnv.tabs.sendMessage(i,t)}})},ChromeExtensionEnvironmentServicesImpl.prototype.getAllCookies=function(t){return Object(i.a)(this.chromeEnv,t)},ChromeExtensionEnvironmentServicesImpl.prototype.onConfigRequest=function(t){var e=this,n=function(e,n,r){return"Config"===e.type&&r(t()),!1};return this.chromeEnv.runtime.onMessage.addListener(n),function(){e.chromeEnv.runtime.onMessage.removeListener(n)}},ChromeExtensionEnvironmentServicesImpl}();function onBeforeSendHeaders(t,e,n){var o,i,s,a,c=Object(r.o)(),u=new Set(c&&c<72?["extraHeaders"]:[]);return null===(s=null===(i=null===(o=chrome)||void 0===o?void 0:o.webRequest)||void 0===i?void 0:i.onBeforeSendHeaders)||void 0===s||s.addListener(t,e,null===(a=n)||void 0===a?void 0:a.filter(function(t){return!u.has(t)})),function(){var e,n,r;null===(r=null===(n=null===(e=chrome)||void 0===e?void 0:e.webRequest)||void 0===n?void 0:n.onBeforeSendHeaders)||void 0===r||r.removeListener(t)}}},function(t,e,n){"use strict";e.a=function chromeCookiesGetAll(t,e){return new Promise(function(n,r){t.cookies.getAll(e,n)})}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(20),o=n(34);var i="undefined"!=typeof chrome&&chrome?{tabs:chrome.tabs&&{query:chrome.tabs.query&&Object(r.f)(chrome.tabs.query),onCreated:chrome.tabs.onCreated&&Object(r.j)(function(t){return chrome.tabs.onCreated.addListener(t)},function(t){return chrome.tabs.onCreated.removeListener(t)}).pipe(Object(o.i)(function(t){return{tab:t[0]}})),onUpdated:chrome.tabs.onUpdated&&Object(r.j)(function(t){return chrome.tabs.onUpdated.addListener(t)},function(t){return chrome.tabs.onUpdated.removeListener(t)}).pipe(Object(o.i)(function(t){return{tabId:t[0],changeInfo:t[1],tab:t[2]}}))},browserAction:chrome.browserAction&&{onClicked:chrome.browserAction.onClicked&&Object(r.j)(function(t){return chrome.browserAction.onClicked.addListener(t)},function(t){return chrome.browserAction.onClicked.removeListener(t)}).pipe(Object(o.i)(function(t){return{tab:t[0]}}))}}:null},,,,,,,,,,,function(t,e,n){"use strict";e.a=function toSubscriber(t,e,n){if(t){if(t instanceof r.a)return t;if(t[o.a])return t[o.a]()}if(!t&&!e&&!n)return new r.a(i.a);return new r.a(t,e,n)};var r=n(5),o=n(78),i=n(106)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function QueueAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(QueueAction,t),QueueAction.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},QueueAction.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},QueueAction}(n(44).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function Action(e,n){return t.call(this)||this}return r.a(Action,t),Action.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},Action}(n(14).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function QueueScheduler(){return null!==t&&t.apply(this,arguments)||this}return r.a(QueueScheduler,t),QueueScheduler}(n(45).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(3),o=n(193),i=function(t){function AsapAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(AsapAction,t),AsapAction.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.a.setImmediate(e.flush.bind(e,null))))},AsapAction.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(o.a.clearImmediate(n),e.scheduled=void 0)},AsapAction}(n(44).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=1,o={};var i={setImmediate:function(t){var e=r++;return o[e]=t,Promise.resolve().then(function(){return function runIfPresent(t){var e=o[t];e&&e()}(e)}),e},clearImmediate:function(t){delete o[t]}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AsapScheduler(){return null!==t&&t.apply(this,arguments)||this}return r.a(AsapScheduler,t),AsapScheduler.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},AsapScheduler}(n(45).a)},function(t,e,n){"use strict";var r=n(196);r.a},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AnimationFrameAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(AnimationFrameAction,t),AnimationFrameAction.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},AnimationFrameAction.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},AnimationFrameAction}(n(44).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AnimationFrameScheduler(){return null!==t&&t.apply(this,arguments)||this}return r.a(AnimationFrameScheduler,t),AnimationFrameScheduler.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},AnimationFrameScheduler}(n(45).a)},function(t,e,n){"use strict";var r=n(3),o=n(44),i=(n(45).a,function(t){function VirtualAction(e,n,r){void 0===r&&(r=e.index+=1);var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=r,o.active=!0,o.index=e.index=r,o}return r.a(VirtualAction,t),VirtualAction.prototype.schedule=function(e,n){if(void 0===n&&(n=0),!this.id)return t.prototype.schedule.call(this,e,n);this.active=!1;var r=new VirtualAction(this.scheduler,this.work);return this.add(r),r.schedule(e,n)},VirtualAction.prototype.requestAsyncId=function(t,e,n){void 0===n&&(n=0),this.delay=t.frame+n;var r=t.actions;return r.push(this),r.sort(VirtualAction.sortActions),!0},VirtualAction.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},VirtualAction.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},VirtualAction.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},VirtualAction}(o.a))},function(t,e,n){"use strict";n(6)},function(t,e,n){"use strict";e.a=function bindCallback(t,e,n){if(e){if(!Object(c.a)(e))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return bindCallback(t,n).apply(void 0,r).pipe(Object(i.a)(function(t){return Object(a.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a,c=this,u={context:c,subject:a,callbackFunc:t,scheduler:n};return new r.a(function(r){if(n){var i={args:e,subscriber:r,params:u};return n.schedule(dispatch,0,i)}if(!a){a=new o.a;try{t.apply(c,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.next(t.length<=1?t[0]:t),a.complete()}]))}catch(t){Object(s.a)(a)?a.error(t):console.warn(t)}}return a.subscribe(r)})}};var r=n(6),o=n(67),i=n(26),s=n(75),a=n(17),c=n(30);function dispatch(t){var e=this,n=t.args,r=t.subscriber,i=t.params,s=i.callbackFunc,a=i.context,c=i.scheduler,u=i.subject;if(!u){u=i.subject=new o.a;try{s.apply(a,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(c.schedule(dispatchNext,0,{value:r,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(r))}function dispatchNext(t){var e=t.value,n=t.subject;n.next(e),n.complete()}},function(t,e,n){"use strict";n(6),n(67),n(26),n(75),n(30),n(17)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(76),o=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.a),e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(47),o=function(t){return function(e){for(var n=t[r.a]();;){var o=n.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(39),o=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},function(t,e,n){"use strict";e.a=function scheduleObservable(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){var o=t[i.a]();r.add(o.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})};var r=n(6),o=n(14),i=n(39)},function(t,e,n){"use strict";e.a=function schedulePromise(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})};var r=n(6),o=n(14)},function(t,e,n){"use strict";e.a=function scheduleIterable(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(function(n){var r,s=new o.a;return s.add(function(){r&&"function"==typeof r.return&&r.return()}),s.add(e.schedule(function(){r=t[i.a](),s.add(e.schedule(function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),s})};var r=n(6),o=n(14),i=n(47)},function(t,e,n){"use strict";e.a=function isInteropObservable(t){return t&&"function"==typeof t[r.a]};var r=n(39)},function(t,e,n){"use strict";e.a=function isIterable(t){return t&&"function"==typeof t[r.a]};var r=n(47)},function(t,e,n){"use strict";n(6),n(17),n(26),n(77),n(31)},function(t,e,n){"use strict";e.a=function fromEvent(t,e,n,a){Object(i.a)(n)&&(a=n,n=void 0);if(a)return fromEvent(t,e,n).pipe(Object(s.a)(function(t){return Object(o.a)(t)?a.apply(void 0,t):a(t)}));return new r.a(function(r){!function setupSubscription(t,e,n,r,o){var i;if(function isEventTarget(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var s=t;t.addEventListener(e,n,o),i=function(){return s.removeEventListener(e,n,o)}}else if(function isJQueryStyleEventEmitter(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var a=t;t.on(e,n),i=function(){return a.off(e,n)}}else if(function isNodeStyleEventEmitter(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var c=t;t.addListener(e,n),i=function(){return c.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,l=t.length;u<l;u++)setupSubscription(t[u],e,n,r,o)}r.add(i)}(t,e,function handler(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,n)})};var r=n(6),o=n(17),i=n(50),s=n(26)},function(t,e,n){"use strict";e.a=function fromEventPattern(t,e,n){if(n)return fromEventPattern(t,e).pipe(Object(s.a)(function(t){return Object(o.a)(t)?n.apply(void 0,t):n(t)}));return new r.a(function(n){var r,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(o)}catch(t){return void n.error(t)}if(Object(i.a)(e))return function(){return e(o,r)}})};var r=n(6),o=n(17),i=n(50),s=n(26)},function(t,e,n){"use strict";n(6),n(43),n(30)},function(t,e,n){"use strict";e.a=function iif(t,e,n){void 0===e&&(e=o.a);void 0===n&&(n=o.a);return Object(r.a)(function(){return t()?e:n})};var r=n(92),o=n(29)},function(t,e,n){"use strict";n(6),n(21),n(69)},function(t,e,n){"use strict";n(6),n(31),n(17),n(29)},function(t,e,n){"use strict";n(6),n(14)},function(t,e,n){"use strict";n(145),n(80),n(51),n(6)},function(t,e,n){"use strict";n(6)},function(t,e,n){"use strict";n(6),n(31),n(29)},function(t,e,n){"use strict";e.a=function getChromeMajorVersion(t){void 0===t&&(t=navigator.userAgent);var e=t.match(/Chrome\/(\d+)/);return e&&parseInt(e[1],10)||null}},function(t,e,n){"use strict";e.a=function randomString(){return Math.random().toString(16)}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function Sha1(){}return Sha1.salted_hash=function(t,e){return Sha1.hash(e+t)},Sha1.hash=function(t){t=this.utf8Encode(t);var e,n=[1518500249,1859775393,2400959708,3395469782],r=(t+=String.fromCharCode(128)).length/4+2,o=Math.ceil(r/16),i=new Array(o);for(e=0;e<o;e++){i[e]=new Array(16);for(var s=0;s<16;s++)i[e][s]=t.charCodeAt(64*e+4*s)<<24|t.charCodeAt(64*e+4*s+1)<<16|t.charCodeAt(64*e+4*s+2)<<8|t.charCodeAt(64*e+4*s+3)}i[o-1][14]=8*(t.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(t.length-1)&4294967295;var a,c,u,l,f,d=1732584193,p=4023233417,h=2562383102,b=271733878,_=3285377520,v=new Array(80);for(e=0;e<o;e++){var y;for(y=0;y<16;y++)v[y]=i[e][y];for(y=16;y<80;y++)v[y]=Sha1.rotl(v[y-3]^v[y-8]^v[y-14]^v[y-16],1);for(a=d,c=p,u=h,l=b,f=_,y=0;y<80;y++){var m=Math.floor(y/20),g=Sha1.rotl(a,5)+Sha1.f(m,c,u,l)+f+n[m]+v[y]&4294967295;f=l,l=u,u=Sha1.rotl(c,30),c=a,a=g}d=d+a&4294967295,p=p+c&4294967295,h=h+u&4294967295,b=b+l&4294967295,_=_+f&4294967295}return Sha1.toHexStr(d)+Sha1.toHexStr(p)+Sha1.toHexStr(h)+Sha1.toHexStr(b)+Sha1.toHexStr(_)},Sha1.f=function(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}throw new TypeError("Something was wrong with the input")},Sha1.rotl=function(t,e){return t<<e|t>>>32-e},Sha1.toHexStr=function(t){for(var e="",n=7;n>=0;n--)e+=(t>>>4*n&15).toString(16);return e},Sha1.utf8Encode=function(t){return window.unescape(encodeURIComponent(t))},Sha1.utf8Decode=function(t){return window.decodeURIComponent(window.escape(t))},Sha1}()},function(t,e,n){"use strict";var r=n(225);n.d(e,"a",function(){return r.a});var o=n(226);n.d(e,"b",function(){return o.a});var i=n(227);n.d(e,"c",function(){return i.a});var s=n(228);n.d(e,"d",function(){return s.a});var a=n(120);n.d(e,"e",function(){return a.a});var c=n(229);n.d(e,"f",function(){return c.a});var u=n(230);n.d(e,"g",function(){return u.a});var l=n(231);n.d(e,"h",function(){return l.a});var f=n(232);n.d(e,"i",function(){return f.a});var d=n(121);n.d(e,"j",function(){return d.a});var p=n(233);n.d(e,"k",function(){return p.a});var h=n(234);n.d(e,"l",function(){return h.a});var b=n(235);n.d(e,"m",function(){return b.a})},function(t,e,n){"use strict";e.a=function assertNever(t,e){if(e)return t;throw new Error("Unhandled discriminated union member: "+JSON.stringify(t))}},function(t,e,n){"use strict";e.a=function closestUpTo(t,e,n){if(!n.contains(t))throw new RangeError("startFrom is not descendant of upTo");if(t.matches(e))return t;var r=t;for(;r!==n&&!r.matches(e)&&null!==r.parentElement;)r=r.parentElement;return r.matches(e)?r:null}},function(t,e,n){"use strict";e.a=function domStringToDomTree(t){var e=document.createElement("html");return t=t.replace(/\<\!\-\-/g,""),e.innerHTML=t,e}},function(t,e,n){"use strict";e.a=function escapeRegexChars(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(r,"\\$&")};var r=/[|\\{}()[\]^$+*?.]/g},function(t,e,n){"use strict";e.a=function firstResult(t,e,n){for(var r=0,o=t;r<o.length;r++){var i=o[r],s=e(i);if(void 0!==s)return s}return n}},function(t,e,n){"use strict";e.a=function getOrDefault(t,e){try{return t()}catch(t){return e}}},function(t,e,n){"use strict";e.a=function getTopLevelObjectsFromString(t){var e=[],n=t;for(;n.length>0;){var o=n.indexOf("{");if(-1===o)break;var i=Object(r.a)(n,o),s=n.slice(o,i+1);e.push(JSON.parse(s)),n=n.slice(i+1)}return e};var r=n(120)},function(t,e,n){"use strict";e.a=function isNonNullable(t){return null!=t}},function(t,e,n){"use strict";e.a=function omit(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Object(r.a)(Object.entries(t).filter(function(t){var n=t[0];t[1];return!e.includes(n)}))};var r=n(121)},function(t,e,n){"use strict";e.a=function typedObjectEntries(t){return Object.entries(t)}},function(t,e,n){"use strict";e.a=function uniqBy(t,e){var n=new Set(t.map(e));return Array.from(n).map(function(n){return t.find(function(t){return e(t)===n})})}},function(t,e,n){"use strict";e.a=function isKnownChannel(t){return"string"==typeof t&&r.includes(t)};var r=["facebook","twitter","youtube","linkedin","amazon"]},function(t,e,n){"use strict";e.a=function createGaProvider(t,e,n){void 0===n&&(n=!1);return new Promise(function(n){t.GoogleAnalyticsObject="_____private_ga____";var r=e.createElement("script");r.src="https://www.google-analytics.com/analytics.js",r.async=!0,r.addEventListener("load",function(){n(t._____private_ga____)}),e.head.appendChild(r)})}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(60),o=n(123),i=n(16),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},u=function(){function EventsEnricher(t,e,n,r,o,i,s,a,c,u,l){this.locationService=t,this.facebookMetadataProvider=e,this.deviceId=n,this.extensionId=r,this.extensionVersion=o,this.userAgent=i,this.thirdPartyId=s,this.thirdPartyCookie=a,this.errorReporter=c,this.secret_local_salt=u,this.extensionPlatform=l}return EventsEnricher.prototype.getFacebookMetadataForUserOrNulls=function(t){var e=this;return this.facebookMetadataProvider.getForUser(t).catch(function(n){return e.errorReporter(n),s(s({},o.b),{id:t})})},EventsEnricher.prototype.updateThirdPartyInfo=function(t,e){this.thirdPartyId=t,this.thirdPartyCookie=e},EventsEnricher.prototype.enrichAuditEvent=function(t,e){return a(this,void 0,void 0,function(){var n,r,o,i;return c(this,function(a){switch(a.label){case 0:return n=new Date,[4,Promise.all([this.locationService.getLocation(),this.getFinalUserId()])];case 1:return r=a.sent(),o=r[0],i=r[1],[2,s(s({event_time:n},EventsEnricher.geoData(o)),{fb_user_hashed_id:i,third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion,browser_time_zone:n.getTimezoneOffset()/60*-1,navigated_to:t,adblocker_enabled:e,platform:this.extensionPlatform})]}})})},EventsEnricher.prototype.enrichInteraction=function(t){return a(this,void 0,void 0,function(){var e,n,o,i,a,u,l,f,d,p,h,b,_,v;return c(this,function(c){switch(c.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=c.sent(),o=n[0],i=n[1],t.fb_post_src=this.annonimizeSponsoredPostHTML(t.fb_post_src,t.fb_user_id,o.userNameOnlyForAnonymizingTheHTMLDoNotSend),a=t.fb_post_interaction_type,u=t.fb_post_entity_id,l=t.fb_post_interaction_text,f=t.fb_post_interaction_url,d=t.fb_post_interaction_click_origin,p=t.fb_post_src,h=t.original_event_time,b=t.fb_post_advertiser_page_entity_id,_=t.fb_post_advertiser_page_id,v=t.fb_user_id,[2,s(s(s(s(s({event_time:e,fb_post_interaction_type:a,fb_post_interaction_text:l,fb_post_interaction_url:f,fb_post_interaction_click_origin:d,fb_post_entity_id:u,fb_post_src:p,browser_time_zone:e.getTimezoneOffset()/60*-1},this.interactionHash({fb_user_id:v,fb_post_entity_id:u},r.c)),EventsEnricher.facebookMetadata(o)),EventsEnricher.geoData(i)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion,original_event_time:h,fb_post_advertiser_page_entity_id:b,fb_post_advertiser_page_id:_})]}})})},EventsEnricher.prototype.enrichInterestsEvent=function(t){return a(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(i){switch(i.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=i.sent(),r=n[0],o=n[1],[2,s(s(s(s(s({fb_user_interests:t.fb_user_interests,event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1},EventsEnricher.facebookMetadata(r)),EventsEnricher.geoData(o)),this.getUserHashes(t.fb_user_id)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion})]}})})},EventsEnricher.prototype.enrichYTAdVideo=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(a){switch(a.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=a.sent(),r=n[0],o=n[1],i=n[2],[2,s(s(s(s({yt_video_id:t.id,yt_host_type:t.host_type,event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r},o),EventsEnricher.geoData(i)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion})]}})})},EventsEnricher.prototype.enrichAmazonSponsored=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(a){switch(a.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=a.sent(),r=n[0],o=n[1],i=n[2],[2,s(s(s(s(s({},t),{event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r,third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion}),EventsEnricher.geoData(i)),EventsEnricher.googleData()),o)]}})})},EventsEnricher.prototype.enrichLinkedInSponsored=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(a){switch(a.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=a.sent(),r=n[0],o=n[1],i=n[2],[2,s(s(s(s(s({},t),{event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r,third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion}),EventsEnricher.geoData(i)),EventsEnricher.googleData()),o)]}})})},EventsEnricher.prototype.enrichTweet=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(a){switch(a.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=a.sent(),r=n[0],o=n[1],i=n[2],[2,s(s(s(s(s({event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r},o),EventsEnricher.geoData(i)),EventsEnricher.googleData()),t),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion})]}})})},EventsEnricher.prototype.enrichRegularStory=function(t){return a(this,void 0,void 0,function(){var e,n,o,i;return c(this,function(a){switch(a.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=a.sent(),o=n[0],i=n[1],[2,s(s(s(s(s({event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1},EventsEnricher.facebookMetadata(o)),EventsEnricher.geoData(i)),this.getRegularStoryHashes(t,r.c)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:t.parser_version,fb_post_is_sponsored:!1,parser_version:t.parser_version})]}})})},EventsEnricher.prototype.enrichSponsoredStory=function(t){return a(this,void 0,void 0,function(){var e,n,o,i;return c(this,function(a){switch(a.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=a.sent(),o=n[0],i=n[1],t.fb_post_src=this.annonimizeSponsoredPostHTML(t.fb_post_src,t.fb_user_id,o.userNameOnlyForAnonymizingTheHTMLDoNotSend),[2,s(s(s(s(s(s({browser_time_zone:e.getTimezoneOffset()/60*-1},EventsEnricher.pickFieldsToSendSponsored(t)),EventsEnricher.facebookMetadata(o)),EventsEnricher.geoData(i)),this.getStoryHashes(t,r.c)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,event_time:e,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:t.parser_version,fb_post_is_sponsored:!0,parser_version:t.parser_version,parser_type:t.parser_type})]}})})},EventsEnricher.prototype.getFacebookDataOrNulls=function(){return a(this,void 0,void 0,function(){var t,e,n,r;return c(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t=[{}],n=(e=EventsEnricher).facebookMetadata,r=this.getFacebookMetadataForUserOrNulls,[4,this.facebookMetadataProvider.getCurrentUserId()];case 1:return[4,r.apply(this,[o.sent()])];case 2:return[2,s.apply(void 0,t.concat([n.apply(e,[o.sent()])]))];case 3:return o.sent(),[2,{fb_meta_gender:null,fb_meta_dob_month:null,fb_meta_dob_year:null,fb_meta_relationship_status:null,fb_meta_user_locale:null,fb_meta_current_state_or_country:null}];case 4:return[2]}})})},EventsEnricher.prototype.getFinalUserId=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.facebookMetadataProvider.getCurrentUserId()];case 1:return t=e.sent(),[2,this.getUserHashes(t).fb_user_hashed_id];case 2:return e.sent(),[2,("unkn_"+this.deviceId).substring(0,45)];case 3:return[2]}})})},EventsEnricher.prototype.enrichNewFacebookUiEvent=function(t){return a(this,void 0,void 0,function(){var e,n,r;return c(this,function(o){switch(o.label){case 0:return[4,Promise.all([this.getFinalUserId(),this.locationService.getLocation()])];case 1:return e=o.sent(),n=e[0],r=e[1],[2,{event_type:"fb_new_feed_ui",event_content:{fb_user_hashed_id:n,device_id:this.deviceId,fb_is_beta_member:"new"===t,geo_current_country_iso:EventsEnricher.geoData(r).geo_current_location_country_iso,extension_id:this.extensionId,extension_version:this.extensionVersion}}]}})})},EventsEnricher.prototype.annonimizeSponsoredPostHTML=function(t,e,n){if(null===t)return null;if(null===n){var r=new Error("Cloudn't get user name");this.errorReporter(r)}else t.match(new RegExp(Object(i.k)(n),"ig"))&&(t=t.replace(new RegExp(Object(i.k)(n),"ig"),"--annonimized-un--"));return t.replace(new RegExp(e,"g"),"--annonimized--")},EventsEnricher.pickFieldsToSendSponsored=function(t){var e=t.fb_post_actionlink_url,n=t.fb_post_advertiser_page_pretty_name,r=t.fb_post_advertiser_page_id,o=t.fb_post_advertiser_thumbnail_url,i=t.fb_post_call_to_action_text,a=t.fb_post_call_to_action_url,c=t.fb_post_img_url,u=t.fb_post_src,l=t.fb_post_text,f=t.fb_post_type,d=t.fb_post_video_url,p=t.fb_post_video_views,h=t.fb_post_this_video_views,b=t.fb_post_entity_id,_=t.fb_post_engage_angry,v=t.fb_post_engage_comments,y=t.fb_post_engage_haha,m=t.fb_post_engage_like,g=t.fb_post_engage_love,S=t.fb_post_engage_sad,w=t.fb_post_engage_shares,O=t.fb_post_engage_wow,x=t.fb_post_width,E=t.fb_post_height,k=t.fb_post_app_id,j=t.fb_post_app_pretty_name,T=t.fb_post_app_thumbnail_url,I=t.fb_post_carousel_info,A=t.fb_post_attachment_description,C=t.fb_post_attachment_title,P=t.fb_post_caption,F=t.fb_post_advertiser_page_entity_id,M=t.fb_post_ad_placement,L="fb_post_anonymized_edge"in t?t.fb_post_anonymized_edge:void 0;return s({fb_post_actionlink_url:e,fb_post_advertiser_page_pretty_name:n,fb_post_advertiser_page_id:r,fb_post_advertiser_thumbnail_url:o,fb_post_call_to_action_text:i,fb_post_call_to_action_url:a,fb_post_img_url:c,fb_post_src:u,fb_post_text:l,fb_post_type:f,fb_post_video_url:d,fb_post_video_views:p,fb_post_this_video_views:h,fb_post_entity_id:b,fb_post_engage_angry:_,fb_post_engage_comments:v,fb_post_engage_haha:y,fb_post_engage_like:m,fb_post_engage_love:g,fb_post_engage_sad:S,fb_post_engage_shares:w,fb_post_engage_wow:O,fb_post_width:x,fb_post_height:E,fb_post_app_id:k,fb_post_app_pretty_name:j,fb_post_app_thumbnail_url:T,fb_post_carousel_info:I,fb_post_attachment_description:A,fb_post_attachment_title:C,fb_post_caption:P,fb_post_advertiser_page_entity_id:F,fb_post_ad_placement:M},L&&{fb_post_anonymized_edge:L})},EventsEnricher.googleData=function(){return{google_meta_dob:null,google_meta_gender:null}},EventsEnricher.isFacebookRedirectorUrl=function(t){return t.startsWith("https://l.facebook.com/")||t.startsWith("http://l.facebook.com/")},EventsEnricher.getUrlPartAfterDomain=function(t){var e=document.createElement("a");return e.href=t,e.pathname+e.search+e.hash},EventsEnricher.prototype.getStoryHashes=function(t,e){var n=new Set(["fb_post_advertiser_page_id","fb_post_app_id","fb_post_call_to_action_text","fb_post_text","fb_post_type"]),r=Array.from(n.keys()).filter(function(e){return null!==t[e]}).map(function(e){return t[e]});return{fb_post_hashed_content:i.e.hash(""+r.join(",")),fb_post_hashed_entity_id:i.e.salted_hash(t.fb_post_entity_id,e),fb_user_hashed_id:i.e.salted_hash(t.fb_user_id,this.secret_local_salt)}},EventsEnricher.prototype.getUserHashes=function(t){return{fb_user_hashed_id:i.e.salted_hash(t,this.secret_local_salt)}},EventsEnricher.prototype.getRegularStoryHashes=function(t,e){return{fb_post_hashed_entity_id:i.e.salted_hash(t.fb_post_entity_id,e),fb_post_hashed_content:i.e.hash(t.fb_post_text||""),fb_user_hashed_id:i.e.salted_hash(t.fb_user_id,this.secret_local_salt)}},EventsEnricher.prototype.interactionHash=function(t,e){return{fb_post_hashed_entity_id:i.e.salted_hash(t.fb_post_entity_id,e),fb_user_hashed_id:this.getUserHashes(t.fb_user_id).fb_user_hashed_id}},EventsEnricher.facebookMetadata=function(t){return{fb_meta_gender:t.gender,fb_meta_dob_month:t.birthday.month,fb_meta_dob_year:t.birthday.year,fb_meta_relationship_status:t.relationshipStatus,fb_meta_user_locale:t.locale,fb_meta_current_state_or_country:t.stateOrCountry}},EventsEnricher.geoData=function(t){var e=t.countryIso2,n=t.state;return{geo_current_location_country:t.country,geo_current_location_country_iso:e,geo_current_location_state:n,geo_current_location_region:t.region,geo_current_location_metro_code:t.metro_code}},EventsEnricher}()},function(t,e,n){"use strict";e.a=function facebookMetadataFetcher(t,e){return a(this,void 0,void 0,function(){var n,r,o,i,s,a,u,l,f;return c(this,function(c){switch(c.label){case 0:return[4,getMetadata(t,e)];case 1:if(n=c.sent(),r=n.id,o=n.userNameOnlyForAnonymizingTheHTMLDoNotSend,i=n.locale,!r)throw new Error("Failed to get facebook user id");return[4,getBasicInfo(t)];case 2:return s=c.sent(),a=s.birthday,u=s.gender,l=s.stateOrCountry,[4,getRelationship(t)];case 3:return f=c.sent(),[2,{id:r,birthday:a,gender:u,locale:i,relationshipStatus:f,userNameOnlyForAnonymizingTheHTMLDoNotSend:o,stateOrCountry:l}]}})})},e.b=function getInterests(t){return s.b(t)};var r=n(48),o=n(240),i=n(241),s=n(242),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function getMetadata(t,e){return a(this,void 0,void 0,function(){var n,a,u,l,f;return c(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,8]),function isMobile(){return"m.facebook.com"===window.location.hostname}()?[4,i.a(t)]:[3,2];case 1:return n=c.sent(),[3,4];case 2:return[4,s.a(t,e)];case 3:n=c.sent(),c.label=4;case 4:return[2,n];case 5:return(a=c.sent())instanceof r.a&&"logged-out"!==a.reason?[4,o.b(t)]:[3,7];case 6:return u=c.sent(),l=u.id,f=u.userNameOnlyForAnonymizingTheHTMLDoNotSend,[2,{id:l,userNameOnlyForAnonymizingTheHTMLDoNotSend:f,locale:null}];case 7:throw a;case 8:return[2]}})})}function getBasicInfo(t){var e,n;return a(this,void 0,void 0,function(){var r,s,a,u,l,f,d,p;return c(this,function(c){switch(c.label){case 0:return[4,o.a(t)];case 1:return r=c.sent(),s=r.birthday,a=r.gender,u=r.stateOrCountry,null!==a&&null!==s.month&&null!==s.year&&null!==u?[3,3]:[4,i.b(t)];case 2:return l=c.sent(),f=l.birthday,d=l.gender,p=l.stateOrCountry,[2,{gender:a||d,birthday:{year:s.year||(null===(e=f)||void 0===e?void 0:e.year)||null,month:s.month||(null===(n=f)||void 0===n?void 0:n.month)||null},stateOrCountry:u||p}];case 3:return[2,{birthday:s,gender:a,stateOrCountry:u}]}})})}function getRelationship(t){return i.c(t)}},function(t,e,n){"use strict";e.a=function getMetadata(t){return s(this,void 0,void 0,function(){var e,n,r,i,s,c;return a(this,function(a){switch(a.label){case 0:return[4,getAboutPage(t)];case 1:return e=a.sent(),(r=function getGender(t){var e=getTextValueByEdit(t,"gender");if(!e)return null;var n=e.toLowerCase();if("male"===n)return"Male";if("female"===n)return"Female";return null}(e))?[3,3]:[4,getGenderFromEditProfile(t)];case 2:r=a.sent(),a.label=3;case 3:return n=r,(s=function getBirthday(t){var e=getTextValueByEdit(t,"birthday");if(!e||isNaN(Date.parse(e)))return null;var n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1}}(e))?[3,5]:[4,getBirthdayFromEditProfile(t)];case 4:s=a.sent(),a.label=5;case 5:return i=s,(c=function getStateOrCountry(t){var e=getTextValueByEdit(t,"current_city");if(!e)return null;return Object(o.a)(e)}(e))?[3,7]:[4,getStateOrCountryFromEditProfile(t)];case 6:c=a.sent(),a.label=7;case 7:return[2,{gender:n,birthday:i,stateOrCountry:c}]}})})},e.b=function getUserIdAndName(t){return s(this,void 0,void 0,function(){var e,n,o;return a(this,function(s){switch(s.label){case 0:return[4,getAboutPage(t)];case 1:if(e=s.sent(),!(n=function getId(t){var e,n;return null!==(n=null!==(e=function getIdFromPhoto(){var e=t.querySelector("a[href^='/photo.php']");return Object(r.p)(function(){return new URL(e.href).searchParams.get("id")},void 0)}())&&void 0!==e?e:function getIdFromEditCoverPhotoLink(){var e=t.querySelector("a[href^='/cover_photo/']");return Object(r.p)(function(){return new URL(e.href).searchParams.get("profile_id")},void 0)}())&&void 0!==n?n:function getIdFromActivityLogLink(){var e,n=t.querySelector("a[href$='/allactivity']"),r=null===(e=n)||void 0===e?void 0:e.href.match(/(\d+)\/allactivity/);if(r&&r[1])return r[1]}()}(e))){if(e.querySelector("#login_top_banner"))throw new i.a("logged-out","mbasic");throw new i.a("other","mbasic")}return o=function getName(t){var e,n;return null!==(n=null!==(e=function getNameFromProfilePictureAlt(){var e=t.querySelector("a[href^='/photo.php'] > img[alt]");if(e instanceof HTMLImageElement&&e.alt)return e.alt}())&&void 0!==e?e:function getNameFromLogoutButton(){var e,n=t.querySelector("#mbasic_logout_button");if(n instanceof HTMLAnchorElement){var r=null===(e=n.textContent)||void 0===e?void 0:e.match(/\(([^)]+)\)/);if(r&&r[1])return r[1]}}())&&void 0!==n?n:function getNameFromTitle(){return t.title}()}(e),[2,{id:n,userNameOnlyForAnonymizingTheHTMLDoNotSend:o}]}})})};var r=n(16),o=n(81),i=n(48),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function getAboutPage(t){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/me/about"})]})})}function getTextValueByEdit(t,e){var n=Array.from(t.querySelectorAll("tr")).filter(function(t){return t.querySelector('a[href="/editprofile.php?type=basic&edit='+e+'"]')}).flatMap(function(t){return Array.from(t.querySelectorAll("td"))});return 2!==n.length?null:n[1].textContent}function getBirthdayFromEditProfile(t){return s(this,void 0,void 0,function(){var e,n,r;return a(this,function(i){switch(i.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/editprofile.php?type=basic&edit=birthday"})];case 1:return e=i.sent(),n=function(){var t=e.querySelector("select[name=year]");if(!t)return null;if(!t.value)return null;var n=Number.parseInt(t.value,10);return Number.isNaN(n)?null:n}(),r=function(){var t=e.querySelector("select[name=month]");if(!t)return null;if(!t.value)return null;var n=Number.parseInt(t.value,10);return Number.isNaN(n)?null:n}(),[2,{year:n,month:r}]}})})}function getStateOrCountryFromEditProfile(t){return s(this,void 0,void 0,function(){var e,n;return a(this,function(r){switch(r.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/editprofile.php?type=basic&edit=current_city"})];case 1:return e=r.sent(),(n=e.querySelector('input[name="current_city[]"]'))?[2,Object(o.a)(n.value)]:[2,null]}})})}function getGenderFromEditProfile(t){var e;return s(this,void 0,void 0,function(){var n,r;return a(this,function(i){switch(i.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/editprofile.php?type=basic&edit=gender"})];case 1:return n=i.sent(),!!n.querySelector('select[name="preferred_pronoun"]')?[2,"Other"]:(r=(null===(e=n.querySelector('input[name="new_info"][checked]'))||void 0===e?void 0:e.value)||null)?"1"===r?[2,"Female"]:"2"===r?[2,"Male"]:[2,"Other"]:[2,null]}})})}},function(t,e,n){"use strict";e.a=function getIdAndLocaleAndName(t){return i(this,void 0,void 0,function(){var e,n,i,a,c,u,l,f;return s(this,function(s){switch(s.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/me?_rdr",addId:"b"})];case 1:if(e=s.sent(),n=e.outerHTML.match('"USER_ID"..([0-9]*)'),i=null,!n)throw new r.a("other","mobile");return i=n[1],a=null,(c=e.querySelector("#cover-name-root"))&&((u=c.querySelector(".alternate_name"))&&u.remove(),a=c.textContent&&c.textContent.replace(/(^\W+)|(\W+$)/,"")),[4,getLocaleMobile(t)];case 2:return null===(l=s.sent())&&(f=e.childNodes[1].outerHTML.match("LOCALE...([a-z,_,A-Z]*)"),l=f?f[1]:null),[2,{id:i,locale:l,userNameOnlyForAnonymizingTheHTMLDoNotSend:a}]}})})},e.b=function getMetadata(t){return i(this,void 0,void 0,function(){var e,n,r,o;return s(this,function(i){switch(i.label){case 0:return[4,getEditBasicInfoDocument(t)];case 1:return e=i.sent(),n=function getGenderViaEditBasicInfo(t){var e=t.querySelector("input[name=gender][type=radio][checked]");if(e instanceof HTMLInputElement)return"1"===e.value?"Female":"2"===e.value?"Male":"Other";return null}(e),r=function getBirthdayViaEditBasicInfo(t){var e=t.querySelector('select[name="birthday_month"]'),n=t.querySelector('select[name="birthday_year"]');if(!e||!n)return null;return{year:parseInt(n.value,10),month:parseInt(e.value,10)}}(e),[4,getStateOrCountry(t)];case 2:return o=i.sent(),[2,{gender:n,birthday:r,stateOrCountry:o}]}})})},e.c=function getRelationship(t){return function getRelationshipViaEdit(t){return i(this,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/profile/edit/infotab/section/forms/?info_surface=info&section=relationship",headers:[],addId:!1})];case 1:return e=r.sent(),(n=e.querySelector("select[name=relationship_status]"))instanceof HTMLSelectElement?a.has(n.value)?[2,a.get(n.value)]:[2,n.value]:[2,null]}})})}(t)};var r=n(48),o=n(81),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=new Map([["0","Unspecified"],["1","Single"],["2","In a relationship"],["5","Engaged"],["4","Married"],["10","In a civil union"],["11","In a domestic partnership"],["3","In an open relationship"],["6","It's complicated"],["8","Separated"],["9","Divorced"],["7","Widowed"]]);function getStateOrCountry(t){return function getStateOrCountryViaEdit(t){return i(this,void 0,void 0,function(){var e,n,r;return s(this,function(i){switch(i.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/profile/edit/infotab/section/forms/?info_surface=info&section=living",headers:[],addId:!1})];case 1:return e=i.sent(),(n=e.querySelector('input[name="current_city_text"]'))instanceof HTMLInputElement&&(r=n.value)?[2,Object(o.a)(r)]:[2,null]}})})}(t)}function getLocaleMobile(t){return i(this,void 0,void 0,function(){var e,n,r;return s(this,function(o){switch(o.label){case 0:return[4,t("https://m.facebook.com/language.php?r="+Date.now())];case 1:return e=o.sent(),(n=e.match(/"?currentLocale"?: ?(\{[^}]+?\})/))&&n[1]&&(r=n[1].match(/"?locale_code"?: ?"([^"]+?)"/))&&r[1]?[2,r[1]]:[2,null]}})})}function getEditBasicInfoDocument(t){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/profile/edit/infotab/section/forms/?section=basic-info",addId:!1})];case 1:return[2,e.sent()]}})})}},function(t,e,n){"use strict";var r=n(243);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b})},function(t,e,n){"use strict";e.a=function getIdAndLocaleAndName(t,e){return c(this,void 0,void 0,function(){var n,c;return u(this,function(u){switch(u.label){case 0:return[4,Object(a.a)(t,e)()];case 1:return n=u.sent(),"new"!==Object(r.n)(n)?[3,3]:[4,o.a(n)];case 2:if(!(c=u.sent()).id)throw new s.a("other","web-ui");return[2,c];case 3:return[2,i.a(n)]}})})},e.b=function getInterests(t){return i.b(t)};var r=n(42),o=n(257),i=n(258),s=n(48),a=n(259),c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}},function(t,e,n){"use strict";n(124);var r=n(249);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";t.exports=(t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},function(t,e,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],decodeComponents(n),decodeComponents(r))}function decode(t){try{return decodeURIComponent(t)}catch(o){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=decodeComponents(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function customDecodeURIComponent(t){for(var e={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},n=o.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=decode(n[0]);r!==n[0]&&(e[n[0]]=r)}n=o.exec(t)}e["%C2"]="ï¿½";for(var i=Object.keys(e),s=0;s<i.length;s++){var a=i[s];t=t.replace(new RegExp(a,"g"),e[a])}return t}(t)}}},function(t,e,n){"use strict";t.exports=((t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["h5._1qbu._14f3._14f5._5pbw._5vra","input[name=fb_dtsg]"]},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,o=n(27),i=n(82),s=n(124),a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=function(t){function MobileParser(){return null!==t&&t.apply(this,arguments)||this}return a(MobileParser,t),MobileParser.prototype.getCache=function(e,n){return t.prototype.getCache.call(this,e,n)},MobileParser.prototype.isStorySponsoredImpl=function(t,e){return Array.from(t.querySelectorAll("span")).some(function(t){return null!==t.textContent&&e.indexOf(t.textContent)>-1})},MobileParser.prototype.getNewCache=function(t,e){return new s.a(t,this.log,e)},MobileParser.prototype.getNestingType=function(t,e){return this.getCache(t,e).nestType},MobileParser.prototype.getEntId=function(t,e){return this.getCache(t,e).entId},MobileParser.prototype.parseRegularStory=function(t,e){return{fb_post_entity_id:this.getEntId(t,e),fb_post_text:this.extractFirstPostInStoryText(t),parser_type:"mobile",parser_version:this.extensionVersion}},MobileParser.prototype.sanitizePIIPostHtmlMobile=function(t){if(t.parentElement)throw new Error("don't pass elements from living document! it hurt the page. you must pass only clones");var e=Object(o.g)(function(){return JSON.parse(t.dataset.store)},null);e&&(t.dataset.store=JSON.stringify(Object(o.k)(e,"actor_id")));var n=t.querySelector("a[data-store]");if(n&&n.dataset.store){var r=Object(o.g)(function(){return JSON.parse(n.dataset.store)},null);r&&(n.dataset.store=JSON.stringify(Object(o.k)(r,"user_id")))}return t},MobileParser.prototype.parseSponsoredFeedStory=function(t,e){var n,r,o=this.getCache(t,e),i=this.sanitizePIIPostHtmlMobile(o._article.cloneNode(!0)).outerHTML,s=o.storyType,a=o.fb_post_img_url,c=null,u=o.entId,l=o.fb_post_app_pretty_name,f=o.fb_post_app_id,d=o.fb_post_app_thumbnail_url,p=o.fb_post_advertiser_page_id,h=o.fb_post_advertiser_page_entity_id,b=o.fb_post_advertiser_page_pretty_name,_=o.fb_post_advertiser_thumbnail_url,v=o.fb_post_actionlink_url,y=o.fb_post_call_to_action_url,m=o.fb_post_call_to_action_text,g=o.fb_post_carousel_info;"gif"===s?(c=(n=this.parseGifFields(o._article)).videoUrl,a=n.previewImageUrl):"video"===s&&(c=(r=this.parseVideoFields(o._article)).videoUrl,a=r.previewImageUrl);this.getLocale();return{fb_post_actionlink_url:v,fb_post_src:i,fb_post_text:this.extractFirstPostInStoryText(o._article),fb_post_type:s,fb_post_img_url:a,fb_post_video_url:c,fb_post_engage_sad:null,fb_post_engage_wow:null,fb_post_entity_id:u,fb_post_engage_haha:null,fb_post_engage_like:null,fb_post_engage_love:null,fb_post_video_views:null,fb_post_this_video_views:null,fb_post_engage_angry:null,fb_post_engage_shares:null,fb_post_engage_comments:null,fb_post_advertiser_page_id:p,fb_post_advertiser_page_entity_id:h,fb_post_call_to_action_url:y,fb_post_call_to_action_text:m,fb_post_advertiser_thumbnail_url:_,fb_post_advertiser_page_pretty_name:b,fb_post_app_pretty_name:l,fb_post_app_id:f,fb_post_app_thumbnail_url:d,fb_post_carousel_info:g,fb_post_caption:null,fb_post_attachment_description:null,fb_post_attachment_title:null,fb_post_ad_placement:"feed",parser_type:"mobile",parser_version:this.extensionVersion}},MobileParser}(i.j)},function(t,e,n){"use strict";var r=n(251);n.d(e,"i",function(){return r.a}),n.d(e,"j",function(){return r.b}),n.d(e,"k",function(){return r.c}),n.d(e,"m",function(){return r.d}),n.d(e,"n",function(){return r.e}),n.d(e,"o",function(){return r.f}),n.d(e,"p",function(){return r.g}),n.d(e,"q",function(){return r.h}),n.d(e,"r",function(){return r.i}),n.d(e,"s",function(){return r.j});var o=n(82);n.d(e,"a",function(){return o.a}),n.d(e,"b",function(){return o.b}),n.d(e,"c",function(){return o.c}),n.d(e,"d",function(){return o.d}),n.d(e,"e",function(){return o.e}),n.d(e,"f",function(){return o.f}),n.d(e,"g",function(){return o.g}),n.d(e,"h",function(){return o.h}),n.d(e,"l",function(){return o.j})},function(t,e,n){"use strict";var r=n(84);n.d(e,"g",function(){return r.b}),n.d(e,"h",function(){return r.h}),n.d(e,"i",function(){return r.i}),n.d(e,"j",function(){return r.j});var o=n(252);n.d(e,"a",function(){return o.a}),n.d(e,"c",function(){return o.b}),n.d(e,"d",function(){return o.c});var i=n(253);n.d(e,"b",function(){return i.a});var s=n(256);n.d(e,"e",function(){return s.a}),n.d(e,"f",function(){return s.b})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),e.c=function getFacebookUiKind(t){if(t.querySelector(o))return"old";if(t.querySelector(r))return"new";return null};var r="div#mount_0_0",o="#pagelet_bluebar"},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(27),i=n(84),s=n(254),a=n(255),c=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=function(){function NewFeedParser(t,e,n){if(this.log=t,this.options=n,!t)throw new Error("You can't start a parser without a logger!");this.parserVersion="4."+e.split(".").slice(1).join(".")}return NewFeedParser.prototype.anonymizeEdge=function(t){return Object(s.a)(t)},NewFeedParser.prototype.parseOrganicEdge=function(t){return u(u({},this.parseEdgeCommon(t)),{fb_post_is_public:Object(a.m)(t)})},NewFeedParser.prototype.parseSponsoredEdge=function(t){var e,n,r,o,i,s,c,l,f,d,p,h,b=this,_=this.parseEdgeCommon(t),v=this.createGetValueOrDefault(_.fb_post_entity_id),y=v(function(){return Object(a.r)(t)});return u(u({},_),{fb_post_call_to_action_text:v(function(){return Object(a.h)(t)}),fb_post_call_to_action_url:v(function(){return Object(a.i)(t)}),fb_post_actionlink_url:v(function(){return Object(a.a)(t)}),fb_post_engage_haha:(n=null===(e=y)||void 0===e?void 0:e.HAHA,null!=n?n:null),fb_post_engage_wow:(o=null===(r=y)||void 0===r?void 0:r.WOW,null!=o?o:null),fb_post_engage_angry:(s=null===(i=y)||void 0===i?void 0:i.ANGRY,null!=s?s:null),fb_post_engage_like:(l=null===(c=y)||void 0===c?void 0:c.LIKE,null!=l?l:null),fb_post_engage_love:(d=null===(f=y)||void 0===f?void 0:f.LOVE,null!=d?d:null),fb_post_engage_sad:(h=null===(p=y)||void 0===p?void 0:p.SAD,null!=h?h:null),fb_post_engage_comments:v(function(){return Object(a.k)(t)}),fb_post_attachment_description:v(function(){return Object(a.f)(t)}),fb_post_advertiser_page_pretty_name:v(function(){return Object(a.d)(t)}),fb_post_advertiser_page_id:v(function(){var e;return Object(a.c)(t,null===(e=b.options)||void 0===e?void 0:e.URLConstructor)}),fb_post_caption:v(function(){return Object(a.n)(t)}),fb_post_src:null,fb_post_engage_shares:v(function(){return Object(a.s)(t)}),fb_post_video_url:v(function(){return Object(a.v)(t)}),fb_post_video_url_hd:v(function(){return Object(a.u)(t)}),fb_post_carousel_info:v(function(){var e,n;return null!=(n=null===(e=Object(a.j)(t))||void 0===e?void 0:e.map(function(t){return{fb_post_carousel_text:t.text,fb_post_carousel_img_url:t.img_url,fb_post_carousel_actionlink_url:t.actionlink_url}}))?n:null}),fb_post_type:v(function(){return Object(a.q)(t)},"unknown"),fb_post_this_video_views:v(function(){return Object(a.t)(t)}),fb_post_video_views:v(function(){return Object(a.w)(t)}),fb_post_attachment_title:v(function(){return Object(a.g)(t)}),fb_post_img_url:v(function(){return Object(a.l)(t)}),fb_post_advertiser_page_entity_id:v(function(){return Object(a.b)(t)}),fb_post_advertiser_thumbnail_url:v(function(){return Object(a.e)(t)}),fb_post_app_id:null,fb_post_app_pretty_name:null,fb_post_app_thumbnail_url:null})},NewFeedParser.prototype.tryParseFeedPage=function(t){return"string"==typeof t&&(!!t.includes("$CometNewsFeed_viewer_news_feed")&&Object(o.h)(t))},NewFeedParser.prototype.tryParseEngagementInteractionResponse=function(t){if(!t)return!1;if("string"!=typeof t||"object"!=typeof t)return!1;try{var e="string"==typeof t?JSON.parse(t):t;if(Object(i.f)(e))return e}catch(t){return!1}return!1},NewFeedParser.prototype.parseEdgeCommon=function(t){var e=this.createGetValueOrDefault()(function(){return Object(a.o)(t)});if(!e)throw new f("Couldn't get post entity id for edge",t);var n=this.createGetValueOrDefault(e);try{return{parser_type:"desktop-v2",parser_version:this.parserVersion,fb_post_text:n(function(){return Object(a.p)(t)}),fb_post_entity_id:e}}catch(e){if(this.log.error("failed to parse common part of edge",t),e instanceof Error)throw new f(e.message,t);throw e}},NewFeedParser.prototype.createGetValueOrDefault=function(t){var e=this.log;return function getValueOrDefault(n,r){void 0===r&&(r=null);try{return n()}catch(n){return t&&e.captureBreadcrumb({message:"Failed to parse value in edge",data:{entityId:t}}),e.error("[New Facebook UI] Failed to parse value in edge",n),r}}},NewFeedParser}(),f=function(t){function ParseError(e,n){var r=t.call(this,e)||this;return r.edge=n,Object.setPrototypeOf(r,ParseError.prototype),r}return c(ParseError,t),ParseError}(Error)},function(t,e,n){"use strict";e.a=function anonymizeEdge(t){var e=o.map(t,function(){isUserObject(this.node)&&this.update(i,!0);var t=/"(viewer|context_id)":(\d+)/gi;"string"==typeof this.node&&this.node.match(t)&&this.update(this.node.replace(t,"$1"+i.id))}),n=Object(r.m)(o.nodes(t).filter(isUserObject),function(t){return t.id}).flatMap(function(t){return[{searchValue:t.id,replaceValue:i.id},{searchValue:t.name,replaceValue:i.name},{searchValue:t.url,replaceValue:i.url}].filter(function(t){return t.searchValue})});return JSON.parse(n.reduce(function(t,e){var n=e.searchValue,r=e.replaceValue;return t.replace(new RegExp(n,"g"),r)},JSON.stringify(e)))};var r=n(27),o=n(128);n.n(o);function isUserObject(t){return t&&"object"==typeof t&&"__typename"in t&&"User"===t.__typename}var i={__typename:"User",id:"123456789",name:"ANONYMIZED_NAME",url:"https://www.facebook.com/anonymized.name"}},function(t,e,n){"use strict";e.o=function getPostEntityId(t){var e=[function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.share_fbid},function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.subscription_target_id},function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.share_fbid},function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.subscription_target_id},function(t){if(t.comet_sections.feedback)try{var e=JSON.parse(t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.content_based_comment_list_renderer.feedback.mentions_datasource_js_constructor_args_json)[0];return e.queryData.post_fbid}catch(t){return}},function(t){var e;if(null===(e=t.comet_sections.content.story.comet_sections.aggregated_stories)||void 0===e?void 0:e.story.interesting_substories)return Object(r.f)(t.comet_sections.content.story.comet_sections.aggregated_stories.story.interesting_substories.edges,function(t){return getPostEntityId(t)||void 0})}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.p=function getPostText(t){var e,n,r;return null!==(r=null===(n=null===(e=t.node.comet_sections.content.story.comet_sections.message)||void 0===e?void 0:e.story)||void 0===n?void 0:n.message.text)&&void 0!==r?r:null},e.m=function getIsPublic(t){function getFromCometFeedStoryAudienceStrategy(t){return"everyone"===t.story.privacy_scope.icon_image.name}var e=[function(t){return function getFromCometFeedStoryDefaultContextLayoutStrategy(t){if(t.story.comet_sections.audience)return getFromCometFeedStoryAudienceStrategy(t.story.comet_sections.audience)}(t.comet_sections.context_layout)},function(t){var e=[];if(o.forEach(t,function(){Object(s.a)(this.node)&&e.push(this.node)}),e.length>0)return e.map(getFromCometFeedStoryAudienceStrategy).every(Boolean)}];try{return Object(r.f)(e,function(e){return e(t.node)})}catch(e){console.error("couldn't get isPublic for edge",t)}},e.r=function getReactions(t){var e,n,o,i,s,a,u,l=null===(e=t.node.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context,f=null!==(o=null===(n=l)||void 0===n?void 0:n.top_reactions)&&void 0!==o?o:null===(s=null===(i=l)||void 0===i?void 0:i.comet_ufi_summary_and_actions_renderer)||void 0===s?void 0:s.feedback.top_reactions;return function getReactionsFromEdges(t){var e=t.reduce(function(t,e){return t.set(e.node.key,e.reaction_count),t},new Map),n=Object(r.l)(c).map(function(t){var n,r=t[0],o=t[1];return[r,(n=e.get(o),null!=n?n:null)]});return Object(r.j)(n)}(null!==(u=null===(a=f)||void 0===a?void 0:a.edges)&&void 0!==u?u:[])},e.k=function getCommentsCount(t){var e;return(null===(e=t.node.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.comment_count.total_count)||0},e.d=function getAdvertiserPagePrettyName(t){var e;return(null===(e=t.node.comet_sections.context_layout.story.comet_sections.title.story.actors[0])||void 0===e?void 0:e.name)||null},e.c=function getAdvertiserPageId(t,e){void 0===e&&(e=URL);var n=Object(r.f)([function(t){var e;return null===(e=t.comet_sections.context_layout.story.comet_sections.title.story.actors[0])||void 0===e?void 0:e.url},function(t){var e;return null===(e=t.comet_sections.context_layout.story.actors[0])||void 0===e?void 0:e.url}],function(e){return e(t.node)});if(!n)return null;var o=new e(n).pathname.match(/\/?([^\/"]+)\/?/);if(!o)return null;return o[1]||null},e.b=function getAdvertiserPageEntityId(t){return Object(r.f)([function(t){var e;return null===(e=t.comet_sections.context_layout.story.actors[0])||void 0===e?void 0:e.id},function(t){var e;return null===(e=t.comet_sections.context_layout.story.comet_sections.actor_photo.story.actors[0])||void 0===e?void 0:e.id},function(t){var e;return null===(e=t.comet_sections.context_layout.story.comet_sections.title.story.actors[0])||void 0===e?void 0:e.id},function(t){if(t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.owning_profile.id},function(t){if(t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.content_based_comment_list_renderer.feedback.owning_profile.id}],function(e){return e(t.node)},null)},e.n=function getPostCaption(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.c)(o))return null===(r=o.attachment.source)||void 0===r?void 0:r.text},function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(o)&&(null===(r=o.attachment.cta_screen_renderer)||void 0===r?void 0:r.action_link)&&"link_display"in o.attachment.cta_screen_renderer.action_link)return o.attachment.cta_screen_renderer.action_link.link_display},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.n)(o))return Object(r.f)(o.attachment.subattachments,function(t){return t.cta_screen_renderer.action_link.link_display})},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.l)(r))return r.attachment.target.name},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.l)(r))return r.attachment.title}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.s=function getShareCount(t){var e,n,r,o,i,s,a,c=null===(e=t.node.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context;return null!==(a=null===(s=null!==(r=null===(n=c)||void 0===n?void 0:n.share_count)&&void 0!==r?r:null===(i=null===(o=c)||void 0===o?void 0:o.comet_ufi_summary_and_actions_renderer)||void 0===i?void 0:i.feedback.share_count)||void 0===s?void 0:s.count)&&void 0!==a?a:0},e.g=function getAttachmentTitle(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.p)(o))return null===(r=o.attachment.title_with_entities)||void 0===r?void 0:r.text},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.c)(r))return r.attachment.title_with_entities.text},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.d)(o))return Object(r.f)(o.attachment.action_links,getOpenActionLinkTitle)},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.l)(r))return r.attachment.target.name},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.l)(r))return r.attachment.title}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.f=function getAttachmentDescription(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.c)(o))return null===(r=o.attachment.description)||void 0===r?void 0:r.text},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.d)(o))return Object(r.f)(o.attachment.action_links,getOpenActionLinkDescription)},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.l)(r))return r.attachment.description.text}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.h=function getCallToActionText(t){var e=[function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.c)(r)&&r.attachment.call_to_action_renderer)return getOpenActionLinkTitle(r.attachment.call_to_action_renderer.action_link)},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(r)&&r.attachment.cta_screen_renderer)return getOpenActionLinkTitle(r.attachment.cta_screen_renderer.action_link)},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.n)(o))return Object(r.f)(o.attachment.subattachments,function(t){if(t.call_to_action_renderer)return getOpenActionLinkTitle(t.call_to_action_renderer.action_link)})},function(t){var e,n,o,i=null===(o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer)||void 0===o?void 0:o.attachment.story_attachment_link_renderer.attachment.action_links;if(i)return Object(r.f)(i,getOpenActionLinkTitle)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.i=function getCallToActionUrl(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.c)(o))return null===(r=o.attachment.target)||void 0===r?void 0:r.external_url},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(r)&&r.attachment.cta_screen_renderer){var o=getOpenActionLinkUrl(r.attachment.cta_screen_renderer.action_link);if(o)return Object(i.a)(o)}},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.n)(o))return Object(r.f)(o.attachment.subattachments,function(t){if(t.call_to_action_renderer){var e=getOpenActionLinkUrl(t.call_to_action_renderer.action_link);return e?Object(i.a)(e):void 0}})},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.l)(r))return r.attachment.url},function(t){var e,n,o,i=null===(o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer)||void 0===o?void 0:o.attachment.story_attachment_link_renderer.attachment.action_links;if(i)return Object(r.f)(i,getOpenActionLinkUrl)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.a=function getActionlinkUrl(t){var e=[function(t){var e,n,r,o=null===(r=null===(n=null===(e=t.comet_sections.content.story.comet_sections.message)||void 0===e?void 0:e.story)||void 0===n?void 0:n.message.ranges[0])||void 0===r?void 0:r.entity;if(Object(s.e)(o))return o.external_url},function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(s.c)(o))return null===(r=o.attachment.target)||void 0===r?void 0:r.external_url},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(r)&&r.attachment.cta_screen_renderer){var o=getOpenActionLinkUrl(r.attachment.cta_screen_renderer.action_link);if(o)return Object(i.a)(o)}}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.e=function getAdvertiserThumbnailUrl(t){return Object(r.f)([function(t){var e,n;return null===(n=null===(e=t.comet_sections.context_layout.story.comet_sections.actor_photo.story.actors[0])||void 0===e?void 0:e.profile_picture)||void 0===n?void 0:n.uri}],function(e){return e(t.node)},null)},e.v=function getVideoUrl(t){var e=[function(t){var e,n,r,o,i,a=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(a)&&Object(s.r)(a.attachment.media)||(a=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(s.q)(a)&&Object(s.r)(a.attachment.media))return a.attachment.media.playable_url}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.u=function getVideoHdUrl(t){var e=[function(t){var e,n,r,o,i,a=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(a)&&Object(s.r)(a.attachment.media)||(a=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(s.q)(a)&&Object(s.r)(a.attachment.media))return a.attachment.media.playable_url_quality_hd}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.w=function getVideoViewsCount(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(o)&&t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.video_view_count||(null===(r=t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.comet_ufi_summary_and_actions_renderer)||void 0===r?void 0:r.feedback.video_view_count)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.t=function getThisVideoViewsCount(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.q)(o)&&t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.video_post_view_count||(null===(r=t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.comet_ufi_summary_and_actions_renderer)||void 0===r?void 0:r.feedback.video_post_view_count)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.l=function getImageUrl(t){var e=[function(t){var e,n,o,i,a,c=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.n)(c)||(c=null===(a=null===(i=null===(o=t.comet_sections.content.story.attached_story)||void 0===o?void 0:o.attachments)||void 0===i?void 0:i[0])||void 0===a?void 0:a.style_type_renderer),Object(s.n)(c))return Object(r.f)(c.attachment.subattachments,function(t){return getImageUri(t.media)})},function(t){var e,n,r,o,i,a=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.p)(a)&&Object(s.g)(a.attachment.media)||(a=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(s.p)(a)&&Object(s.g)(a.attachment.media))return getImageUri(a.attachment.media)},function(t){var e,n,r,o,i,a=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer,c=null;if(!Object(s.q)(a)||Object(s.r)(a.attachment.media)){var u=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer;c=u||a}if(c&&Object(s.q)(c)&&Object(s.r)(c.attachment.media))return c.attachment.media.preferred_thumbnail.image.uri},function(t){var e,n,r,o,i,a=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.o)(a)||(a=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(s.o)(a))return getPhotoImageUri(a.attachment.media)},function(t){var e,n,r,o,i,a,c,u,l,f,d=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.l)(d)||(d=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(s.l)(d))return null!=(u=null===(c=null===(a=d.attachment.media)||void 0===a?void 0:a.fallback_image)||void 0===c?void 0:c.uri)?u:null===(f=null===(l=d.attachment.media)||void 0===l?void 0:l.image)||void 0===f?void 0:f.uri},function(t){var e,n,r,o,i,a=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(s.k)(a)||(a=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(s.k)(a))return getPhotoImageUri(a.attachment.all_subattachments.nodes[0].media)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.j=function getCarouselCardsInfos(t){var e,n,o,c,u;function getActionlinkUrl(t){var e=[function(t){if(t.call_to_action_renderer)return getOpenActionLinkUrl(t.call_to_action_renderer.action_link)},function(t){if(t.story_attachment_link_renderer.attachment.action_links[0])return getOpenActionLinkUrl(t.story_attachment_link_renderer.attachment.action_links[0])},function(t){return t.story_attachment_link_renderer.attachment.url},function(t){var e,n;return null===(n=null===(e=t.cta_screen_renderer)||void 0===e?void 0:e.action_link)||void 0===n?void 0:n.url}];return Object(r.f)(e,function(e){return e(t)},null)}var l=null===(n=null===(e=t.node.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;Object(s.n)(l)||(l=null===(u=null===(c=null===(o=t.node.comet_sections.content.story.attached_story)||void 0===o?void 0:o.attachments)||void 0===c?void 0:c[0])||void 0===u?void 0:u.style_type_renderer);if(Object(s.n)(l))return l.attachment.subattachments.map(function(t){var e;return{text:t.card_title.text,actionlink_url:getActionlinkUrl(t),img_url:(e=getImageUri(t.media),null!=e?e:null)}}).map(function(t){var e=t.actionlink_url?Object(i.a)(t.actionlink_url):t.actionlink_url;return a(a({},t),{actionlink_url:e})})},e.q=function getPostType(t){var e,n,r,o,i,a,c,u,l,f=t.node.comet_sections.content.story,d=f.attachments;if(!(null===(e=d)||void 0===e?void 0:e.length)&&!(null===(r=null===(n=f.attached_story)||void 0===n?void 0:n.attachments)||void 0===r?void 0:r.length))return"text";var p=null!==(a=null===(i=null===(o=d)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer)&&void 0!==a?a:null===(l=null===(u=null===(c=f.attached_story)||void 0===c?void 0:c.attachments)||void 0===u?void 0:u[0])||void 0===l?void 0:l.style_type_renderer;if(p){if(Object(s.q)(p))return"video";if(Object(s.l)(p))return"event";if(Object(s.n)(p))return"carousel";if(Object(s.k)(p))return"album";if(Object(s.o)(p))return"photo";if(Object(s.p)(p))return Object(s.m)(p.attachment.story_attachment_link_renderer)?"lead":"link"}return"unknown"};var r=n(27),o=n(128),i=(n.n(o),n(61)),s=n(84),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var c={LIKE:1,ANGRY:8,HAHA:4,LOVE:2,SAD:7,WOW:3};function getOpenActionLinkTitle(t){return"title"in t&&t.title||"link_title"in t&&t.link_title||void 0}function getOpenActionLinkDescription(t){return"link_description"in t&&t.link_description||void 0}function getOpenActionLinkUrl(t){return"url"in t?t.url:void 0}function getImageUri(t){var e,n,r,o,i,s,a;return null!=(s=null!=(o=null!=(n=null===(e=t.flexible_height_share_image)||void 0===e?void 0:e.uri)?n:null===(r=t.large_share_image)||void 0===r?void 0:r.uri)?o:null===(i=t.card_image)||void 0===i?void 0:i.uri)?s:null===(a=t.image)||void 0===a?void 0:a.uri}function getPhotoImageUri(t){return"photo_image"in t?t.photo_image.uri:"image"in t?t.image.uri:void 0}},function(t,e,n){"use strict";e.b=getUserIdAndLocaleAndNameSync,e.a=function getUserIdAndLocaleAndName(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return"function"!=typeof t?[3,2]:[4,getMe(t)];case 1:return e=n.sent(),[3,3];case 2:e=t,n.label=3;case 3:return[2,getUserIdAndLocaleAndNameSync(e)]}})})};var r=n(27),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function getFirstMatch(t,e,n){for(var r=0,o=e;r<o.length;r++){var i=o[r],s=t.match(i),a=s&&n(s);if(a)return a}return null}function getMe(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,t("https://www.facebook.com/me?b"+Date.now())];case 1:return e=n.sent(),[2,Object(r.c)(e)]}})})}function getUserIdFromMe(t){return getFirstMatch(t.outerHTML,[/"CurrentUserInitialData".*"USER_ID":"(\d+)"/,/"CurrentUserInitialData".*"ACCOUNT_ID":"(\d+)",/,/"userID":"(\d+)"/],function(t){return t&&t[1]})}function getLocaleFromMe(t){return getFirstMatch(t.outerHTML,[/"LocaleInitialData",\[\],{"locale":"(\w+)"/],function(t){return t&&t[1]})}function getNameFromMe(t){var e;return(null===(e=getFirstMatch(t.outerHTML,[/"NAME":"([^"]+)"/,/{"user":{"name":"([^"]+)"/,/"account_user":{"name":"([^"]+)"/,/{"__typename":"User",.*"name":"([^"]+)"/],function(t){return t&&t[1]}))||void 0===e?void 0:e.replace(/(^\W+)|(\W+$)/,""))||null}function getUserIdAndLocaleAndNameSync(t){return{id:getUserIdFromMe(t),locale:getLocaleFromMe(t),userNameOnlyForAnonymizingTheHTMLDoNotSend:getNameFromMe(t)}}},function(t,e,n){"use strict";var r=n(42);n.d(e,"a",function(){return r.o})},function(t,e,n){"use strict";e.a=function getIdAndLocaleAndName(t){var e,n,o=function getId(t){var e,n;return null!==(n=null!==(e=function getIdFromMeta(){var e=t.querySelector('[property="al:android:url"]');if(e instanceof HTMLMetaElement&&e.content.startsWith("fb://profile/")){var n=e.content.replace("fb://profile/","");return n}}())&&void 0!==e?e:function getIdFromProfileImg(){var e,n,r=t.querySelector("img[id^=profile_pic_header_]");return null===(n=null===(e=r)||void 0===e?void 0:e.id)||void 0===n?void 0:n.replace("profile_pic_header_","")}())&&void 0!==n?n:function getIdFromScript(){var e=t.innerHTML.match(/{"USER_ID":"(\d+)","ACCOUNT_ID":"(\d+)"/);if(e){var n=e[1]||e[2];if(n&&"0"!==n)return n}}()}(t);if(!o){if(t.querySelector("body.UIPage_LoggedOut"))throw new r.a("logged-out","web-old");throw new r.a("other","web-old")}var i=null!==(e=function getName(t){var e;var n=null!==(e=function getNameFromTimelineCoverName(){var e=t.querySelector("#fb-timeline-cover-name, [data-testid=profile_name_in_profile_page]");if(e){var n=e.querySelector(".alternate_name");return n&&n.remove(),e.textContent}}())&&void 0!==e?e:function getNameFromScript(){var e=t.innerHTML.match(/"ACCOUNT_ID":"(\d+)","NAME":"([^"]+)",/);if(e&&e[2])return e[2]}();if(n)return n.replace(/(^\W+)|(\W+$)/,"")}(t))&&void 0!==e?e:null,s=null!==(n=function getLocale(t){var e=t.querySelector("body");if(e instanceof HTMLElement){var n=Array.from(e.classList).find(function(t){return t.startsWith("Locale")});if("string"==typeof n){var r=n.replace("Locale_","");return r}}}(t))&&void 0!==n?n:null;return{id:o,locale:s,userNameOnlyForAnonymizingTheHTMLDoNotSend:i}},e.b=function getInterests(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,t("https://www.facebook.com/ads/profile/interests/?dpr=1",[["X-Requested-With","XMLHttpRequest"]],12e4)];case 1:return e=n.sent(),[2,JSON.parse(e.replace("for (;;);","")).payload.interests]}})})};var r=n(48),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}},function(t,e,n){"use strict";e.a=function createMeDocumentFetcher(t,e){var n=this;return function(){return i(n,void 0,void 0,function(){var n,i,l;return s(this,function(s){switch(s.label){case 0:return n=Object(o.v)(),i=e(function(t){var e,r,i,s,l,f=void 0!==(null===(e=t.requestHeaders)||void 0===e?void 0:e.find(function(t){return t.name===n}));if(f){var d=[];return"GET"===t.method&&function isRelevantChrome(t){var e=Object(o.o)(t);return e&&e>a}(null===(i=null===(r=t.requestHeaders)||void 0===r?void 0:r.find(function(t){return"user-agent"===t.name.toLowerCase()}))||void 0===i?void 0:i.value)&&void 0!==(null===(s=t.requestHeaders)||void 0===s?void 0:s.find(function(t){return t.name!==c}))&&d.push({name:c,value:u}),{requestHeaders:null===(l=t.requestHeaders)||void 0===l?void 0:l.filter(function(t){return t.name!==n}).concat(d)}}},{urls:["https://www.facebook.com/me*","https://www.facebook.com/profile.php*"]},{blocking:!0,requestHeaders:!0,extraHeaders:!0}),[4,Object(r.b)({fetchText:t,urlString:"https://www.facebook.com/me",addId:"b",headers:[[n,n]]})];case 1:return l=s.sent(),i(),[2,l]}})})}};var r=n(81),o=n(16),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};var a=76,c="sec-fetch-user",u="?1"},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(16),o=function(){function LocationService(t,e,n,r){this.log=t,this.fetchJson=e,this.lastRequest=null,this.locationUrl=n+"?seed="+r,this.lastRequest=this.sendRequest()}return LocationService.prototype.sendRequest=function(){var t=this,e=this.fetchJson(this.locationUrl).catch(function(){return Object(r.A)(500).then(function(){return t.fetchJson(t.locationUrl)})});return e.catch(function(e){t.log.error(e)}),e},LocationService.prototype.getLocation=function(){var t=this;return null===this.lastRequest&&(this.lastRequest=this.sendRequest()),this.lastRequest.catch(function(){t.lastRequest=null}),this.lastRequest},LocationService.prototype.start=function(){var t=this;this.log.info("Starting to get location..."),this.interval=window.setInterval(function(){t.log.info("Periodic refresh of location"),t.lastRequest=null,t.getLocation()},36e5)},LocationService.prototype.stop=function(){this.interval&&(window.clearInterval(this.interval),this.interval=void 0)},LocationService}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(16),i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=function(t){function LogReporter(e,n,r){var o=t.call(this,e)||this;return o.logger=e,o.ga=n,o.raven=r,o}return i(LogReporter,t),Object.defineProperty(LogReporter.prototype,"error",{get:function(){return this.errorImpl.bind(this)},enumerable:!0,configurable:!0}),LogReporter.prototype.errorImpl=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if("string"==typeof r)if(i instanceof Error){this.raven.captureBreadcrumb({message:r,level:"info",category:"console"});var s=[],a={};(i instanceof o.c||i instanceof o.d)&&(s.push(i.shortMessage),s.push(i.requestUrl.replace(/\?.*/g,"?querystringstripped")),i instanceof o.c&&s.push(i.httpCode.toString()),i instanceof o.d&&(a={requestUrl:i.requestUrl,responseURL:i.responseURL,type:i.type})),this.captureException(i,{fingerprint:s,extra:a});var c=exceptionToMessage(i);this.ga("send",{hitType:"event",eventCategory:"Log Reporter: "+r,eventAction:c.message,eventLabel:c.stack,nonInteraction:!0})}else r.startsWith("react data is missing for:")?this.ga("send",{hitType:"event",eventCategory:"react data is missing for",eventAction:r.split(":")[1],eventLabel:"placeholder",nonInteraction:!0}):(this.raven.captureMessage(r),this.ga("send",{hitType:"event",eventCategory:"Log Reporter: "+r,eventAction:"placeholder",eventLabel:"placeholder",nonInteraction:!0}));else if(r instanceof Error){s=[];(r instanceof o.c||r instanceof o.d)&&(s.push(r.shortMessage),s.push(r.requestUrl.replace(/\?.*/g,"?querystringstripped"))),this.captureException(r,{fingerprint:s});c=exceptionToMessage(r);this.ga("send",{hitType:"event",eventCategory:"Log Reporter: Exception",eventAction:c.message,eventLabel:c.stack,nonInteraction:!0})}else if(r instanceof ErrorEvent){c=function errorEventToMessage(t){if(t.error&&t.error instanceof Error)return exceptionToMessage(t.error);return{message:"ErrorEvent! "+t.message,stack:(new Error).stack}}(r);this.ga("send",{hitType:"event",eventCategory:"Log Reporter: ErrorEvent",eventAction:c.message,eventLabel:c.stack,nonInteraction:!0})}(t=this.logger).error.apply(t,e)},LogReporter.prototype.captureException=function(t,e){(function shouldSend(t){return!(t instanceof o.d)})(t)&&this.raven.captureException(t,e)},LogReporter.prototype.captureBreadcrumb=function(t){this.raven.captureBreadcrumb(t)},LogReporter}(function(){function LogConsole(t){this.logger=t}return LogConsole.prototype.captureBreadcrumb=function(t){},Object.defineProperty(LogConsole.prototype,"log",{get:function(){return this.logger.log},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"info",{get:function(){return this.logger.info},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"warn",{get:function(){return this.logger.warn},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"debug",{get:function(){return this.logger.debug},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"error",{get:function(){return this.logger.error},enumerable:!0,configurable:!0}),LogConsole}());function exceptionToMessage(t){return{message:"exception! name: "+t.name+"| message: "+t.message,stack:"stack: "+t.stack}}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(122),o=n(16),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=function(){function PixelService(t,e,n,r,o,i){this.httpClient=t,this.deviceId=e,this.clientId=n,this.log=r,this.storage=o,this.geo=i,this.getFacebookPixel()}return PixelService.prototype.fireAttributionPixelOnInstallIfNeeded=function(t){return i(this,void 0,void 0,function(){var t,e,n;return s(this,function(r){switch(r.label){case 0:return this.storage.attributionPixelOnInstalledEventFired?[3,3]:(this.storage.attributionPixelOnInstalledEventFired=!0,t=getCurrentExtensionHashFromID(this.clientId),(e=p.get(t))?[4,e(this.storage.thirdPartyCookie,this.deviceId,this.geo(this.deviceId))]:[3,2]);case 1:n=r.sent(),this.log.info("About to fire "+n),this.httpClient.get(n,{withCredentials:!0}),r.label=2;case 2:this.triggerFBQ("INSTALL"),r.label=3;case 3:return[2]}})})},PixelService.prototype.fireAttributionOnSponsoredEventIfneeded=function(t){var e=this.storage.sponsoredEventsFiredCount;if(e++,this.storage.sponsoredEventsFiredCount=e,t)switch(e){case 1:this.fireAttributionPixelOnFirstSponsoredEventIfNeeded(t)}var n,r=getCurrentExtensionHashFromID(this.clientId),o=d.get(r);if(o&&(n=o.get(e))){var i=n(this.storage.thirdPartyCookie,this.deviceId);this.log.info("Fire pixel upon "+e+" events "+i),this.httpClient.get(i)}switch(e){case 1:this.triggerFBQ("VIEW_ONE_AD");break;case 3:this.triggerFBQ("VIEW_THREE_ADS");break;case 5:this.triggerFBQ("VIEW_FIVE_ADS");break;case 10:this.triggerFBQ("VIEW_TEN_ADS");break;case 1e3:this.triggerFBQ("VIEW_1K_ADS")}},PixelService.prototype.triggerFBQ=function(t){return i(this,void 0,void 0,function(){var e,n,r;return s(this,function(o){switch(o.label){case 0:return[4,this.getFacebookPixel()];case 1:return(e=o.sent())?void 0===(n=l.get(t))?[2]:(r="function"==typeof n?n(getCurrentExtensionHashFromID(this.clientId)):n,e(r.is_custom?"trackCustom":"track",r.name,r.parameters),[2]):[2]}})})},PixelService.prototype.fireAttributionPixelOnFirstSponsoredEventIfNeeded=function(t){if(!this.storage.attributionPixelOnSponsoredEventFired){this.storage.attributionPixelOnSponsoredEventFired=!0;var e=getCurrentExtensionHashFromID(this.clientId),n=new Map([["4f8bd05394724861c15d6ae4c16e22193019b940","http://cnx.ziggyl.com/?psh="+t]]).get(e);n&&this.httpClient.get(n)}},PixelService.prototype.getFacebookPixel=function(){var t=this;if(null==this.local_fbq){var e=u.get(getCurrentExtensionHashFromID(this.clientId));return e?(this.log.info("Will create fbq with pixel "+e),Object(r.a)(window,document).then(function(n){return t.log.info("Success creating fbq!"),t.local_fbq=function(e,r,o){return t.log.debug("Fire fbq: '"+e+"' , event: '"+r+"', params:",o),n(e,r,o)},t.local_fbq("init",e),t.local_fbq})):(this.local_fbq=null,this.log.info("No need for Facebook pixel"),Promise.resolve(null))}return Promise.resolve(this.local_fbq)},PixelService.prototype.getCookieDomainAndKeyIfNeeded=function(t){var e=getCurrentExtensionHashFromID(t);return f.get(e)},PixelService}(),c="dfdsa@#$!@S4";function getCurrentExtensionHashFromID(t){return o.e.hash(c+t)}var u=new Map([["55d44272945989aeb22962d444aa75db155d4205","365402327179764"],["9990fcdc8ff467a78a4f394fb519e7ef3d8e5e13","633538343512506"],["8db321cfa45dd6beeec8cd618147c807c2688db4","794717750894645"],["d98e5e61822f6b0fd6890cf7542b2dc9649e6385","794717750894645"]]),l=new Map([["INSTALL",function(t){return"d98e5e61822f6b0fd6890cf7542b2dc9649e6385"===t?{name:"Purchase",is_custom:!1,parameters:{value:5,currency:"USD"}}:{name:"Lead",is_custom:!1}}],["VIEW_ONE_AD",{name:"View_one_ad",is_custom:!0}],["VIEW_THREE_ADS",{name:"View_three_ads",is_custom:!0}],["VIEW_FIVE_ADS",{name:"View_five_ads",is_custom:!0}],["VIEW_TEN_ADS",{name:"View_ten_ads",is_custom:!0}],["VIEW_1K_ADS",{name:"View_1000_ads",is_custom:!0}]]),f=new Map([["4f8bd05394724861c15d6ae4c16e22193019b940",{domain:"extisc.unimania.xyz",name:"successInstall"}],["81d0ef8120a54c5c2890df59b11fb9ec7871dc49",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["8db321cfa45dd6beeec8cd618147c807c2688db4",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["71633a5a8765f1dfee057f88bb7de7424674211c",{domain:"stream-it.online",name:"uid"}],["d203d383e012e69e63eb2946da40ef86fec4d400",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["d237ebec5b622f1911d10e8e293710295951aa49",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["f6392926fe4a51fe3c73a82192d95f6fa280df18",{domain:"luc.unimania.xyz",name:"rid"}],["e79da48c752d4e314118e82ac08348adbbf8db67",{domain:"cnt.unimania.xyz",name:"id"}],["3645fedc1644a6ea03ae095f996a20bfbc53fcf9",{domain:"d3qucy43qe5w9i.cloudfront.net",name:"rid"}],["b0d7a25a45d020d60c442b9207239411b5f0445b",{domain:"dd2gkcphvao99.cloudfront.net",name:"id"}],["46da80faf6f55dcfa412f66f34e1f367e81e7d6c",{domain:"d1uw8ix1k8t8cw.cloudfront.net",name:"tk"}]]),d=new Map([["9990fcdc8ff467a78a4f394fb519e7ef3d8e5e13",new Map([[1,function(t,e){return"https://s.mb4a.com/cb/8-95332610_10-2_i7s?ifcontext="+t+"&order_id="+e}],[3,function(t,e){return"https://s.mb4a.com/cb/8-95332646_10-2_bgs?ifcontext="+t+"&order_id="+e}],[5,function(t,e){return"https://s.mb4a.com/cb/8-95332648_10-2_5sj?ifcontext="+t+"&order_id="+e}],[10,function(t,e){return"https://s.mb4a.com/cb/8-95332650_10-2_7op?ifcontext="+t+"&order_id="+e}]])]]),p=new Map([["81d0ef8120a54c5c2890df59b11fb9ec7871dc49",function(t,e,n){return Promise.resolve("http://redirect.topoffer.pw/aff_lsr?transaction_id="+t)}],["9990fcdc8ff467a78a4f394fb519e7ef3d8e5e13",function(t,e,n){return Promise.resolve("https://s.mb4a.com/cb/8-95332058_10-2_nip?ifcontext="+t+"&order_id="+e)}],["8db321cfa45dd6beeec8cd618147c807c2688db4",function(t,e,n){return Promise.resolve("https://s.mb4a.com/cb/8-95332058_10-2_nip?cookie="+t+"&uid="+e)}],["71633a5a8765f1dfee057f88bb7de7424674211c",function(t,e,n){return n.then(function(n){return"http://sendmepixel.com/pixel.aspx?name=stream-it-ff&type=bt_install&entity=26&data1="+e+"&data2="+n+"&barcode=22&userid="+t})}],["3645fedc1644a6ea03ae095f996a20bfbc53fcf9",function(t,e,n){return n.then(function(e){return"https://notch.insights.supply/cb?token=a7efc84f-b7d7-4b29-9a7e-ec913e635a49&RID="+t})}],["f6392926fe4a51fe3c73a82192d95f6fa280df18",function(t,e,n){return n.then(function(e){return"https://notch.insights.supply/cb?token=a7efc84f-b7d7-4b29-9a7e-ec913e635a49&RID="+t})}],["d98e5e61822f6b0fd6890cf7542b2dc9649e6385",function(t,e,n){return n.then(function(t){return"https://action.media6degrees.com/orbserv/nspix?adv=cl1026859&ns=3916&nc=btsync&ncv=47&ptid=122&tpuv=01&tpu="+e.substring(0,40)})}],["82272ed51534e9cfacd2f9fe6da7ad6053197aec",function(t,e,n){return n.then(function(t){return"https://action.media6degrees.com/orbserv/nspix?adv=cl1026859&ns=3916&nc=btsync&ncv=47&ptid=122&tpuv=01&tpu="+e.substring(0,40)})}]])},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function SmartStorage(t,e,n){this.storage=t,this.cryptoObject=e,this.builtInDeviceId=n}return Object.defineProperty(SmartStorage.prototype,"user_opted_out",{get:function(){return this.getFlag("user_opted_out")},set:function(t){this.setFlag("user_opted_out",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"secret_random_salt",{get:function(){var t=this.getString("secret_random_salt");if(t)return t;var e=getRandomToken(this.cryptoObject);return this.setString("secret_random_salt",e),e},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"attributionPixelOnInstalledEventFired",{get:function(){return this.getFlag("shouldFireAttributionPixelOnInstalledEventLocalStorage")},set:function(t){this.setFlag("shouldFireAttributionPixelOnInstalledEventLocalStorage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"attributionPixelOnSponsoredEventFired",{get:function(){return this.getFlag("shouldFireAttributionPixelOnSponsoredEventLocalStorage")},set:function(t){this.setFlag("shouldFireAttributionPixelOnSponsoredEventLocalStorage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"sponsoredEventsFiredCount",{get:function(){return this.getNumber("sponsoredEventCountLocalStorage")},set:function(t){this.setNumber("sponsoredEventCountLocalStorage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"thirdPartyIdIS",{get:function(){return this.getString("thirdPartyIdIS")},set:function(t){this.setString("thirdPartyIdIS",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"thirdPartyCookie",{get:function(){return this.getString("thirdPartyCookie")},set:function(t){this.setString("thirdPartyCookie",t)},enumerable:!0,configurable:!0}),SmartStorage.prototype.GetLastAdActivityTime=function(t){return this.getDate("lastSeenAdActivityDateForUserPrefixV3__"+t)},SmartStorage.prototype.SetLastAdActivityTime=function(t,e){this.setDate("lastSeenAdActivityDateForUserPrefixV3__"+t,e)},Object.defineProperty(SmartStorage.prototype,"isNewInstall",{get:function(){var t=this.getFlag("HasThisExtensionRunBeforeLocalStorageKey_v1");return this.setFlag("HasThisExtensionRunBeforeLocalStorageKey_v1",!0),!t},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"lastInstallVersion",{get:function(){var t=this.getString("IsUpdateVersion_v1");return t||""},set:function(t){this.setString("IsUpdateVersion_v1",t)},enumerable:!0,configurable:!0}),SmartStorage.prototype.getDeviceId=function(){if(this.builtInDeviceId)return this.builtInDeviceId;var t=this.storage.getItem("uniqueIdLocalStorageStr"),e=this.getString("uniqueIdLocalStorageStrJSON");return null!==t&&null===e&&(e=t,this.setString("uniqueIdLocalStorageStrJSON",t)),null===e&&(e=getRandomToken(this.cryptoObject),this.setString("uniqueIdLocalStorageStrJSON",e)),e},Object.defineProperty(SmartStorage.prototype,"deviceId",{get:function(){return this.getDeviceId()},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"shouldShowFoundPosts",{get:function(){return this.getFlag("ShowFoundPosts")},set:function(t){this.setFlag("ShowFoundPosts",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"lastInterestsSend",{get:function(){return this.getDate("lastIntrestsSend-2")},set:function(t){this.setDate("lastIntrestsSend-2",t)},enumerable:!0,configurable:!0}),SmartStorage.prototype.getString=function(t){if(!(t in this.storage))return null;var e=this.storage.getItem(t);return null===e?null:('"'!==e.charAt(0)&&(e='"'+e+'"'),JSON.parse(e))},SmartStorage.prototype.setString=function(t,e){return this.storage.setItem(t,JSON.stringify(e))},SmartStorage.prototype.getNumber=function(t){var e=this.storage.getItem(t);return e?JSON.parse(e):0},SmartStorage.prototype.setNumber=function(t,e){this.storage.setItem(t,JSON.stringify(e))},SmartStorage.prototype.getFlag=function(t){return this.storage.getItem(t)&&"false"!==this.storage.getItem(t)||this.storage.setItem(t,JSON.stringify(!1)),JSON.parse(this.storage.getItem(t))},SmartStorage.prototype.setFlag=function(t,e){this.storage.setItem(t,JSON.stringify(e))},SmartStorage.prototype.getDate=function(t){var e=new Date(this.storage.getItem(t));return isNaN(e.getTime())&&(e=new Date(0),this.storage.setItem(t,e.toJSON())),e},SmartStorage.prototype.setDate=function(t,e){this.storage.setItem(t,e.toJSON())},SmartStorage}();function getRandomToken(t){var e=new Uint8Array(32),n="";t.getRandomValues(e);for(var r=0;r<e.length;++r)n+=e[r].toString(16);return n}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(20),o=function(){return function YouTubeTracker(t,e){var n=this;this.log=t,this.sponsoredYTVideosSubscription=new r.d,e(function(t){var e=t.url.search("\\?"),r=t.url.slice(e);if(e){var o=new URLSearchParams(r),i=Array.from(o).reduce(function(t,e){var n=e[0],r=e[1];return t[n]=r,t},{});n.log.debug("Found new video with ID="+i.video_id+" url "+t.url+"\n",i),i.pltype&&"content"!==i.pltype&&"contentugc"!==i.pltype&&"contentlive"!==i.pltype&&"contentugclive"!==i.pltype&&i.video_id&&n.sponsoredYTVideosSubscription.next({id:i.video_id,host_type:i.pltype})}},["https://www.youtube.com/ptracking*"])}}()},function(t,e,n){"use strict";var r=n(20),o=n(42),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};!function(){function MobileFacebookScraper(t,e){this.log=t,this.http=e,this.sponsoredMobileFacebookPostsSubscription=new r.d,this.getPosts(),this.scheduleAndGetEvents()}MobileFacebookScraper.prototype.scheduleAndGetEvents=function(){var t=this,e=Math.round(1440*Math.random())+1;this.log.info("Will get new events in "+e+" minutes"),window.setTimeout(function(){t.getPosts(),t.scheduleAndGetEvents()},60*e*1e3)},MobileFacebookScraper.prototype.getPosts=function(){return s(this,void 0,void 0,function(){var t,e,n,r,s,c,u,l,f,d,p,h,b,_,v,y,m,g,S,w,O,x,E;return a(this,function(a){switch(a.label){case 0:this.log.info("Trying to get events as mobile..."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.http.get("https://m.facebook.com")];case 2:for(t=a.sent(),(e=document.createElement("div")).innerHTML=t.data,n=null,r=0,s=Array.from(e.querySelectorAll("script"));r<s.length;r++)if(h=s[r],b=h.text.match(/ServerJSDefine"\)\).handleDefines\((.*?)\)\;/))try{for(_=JSON.parse(b[1]),c=0,u=_;c<u.length;c++)if("CurrentUserInitialData"===(l=u[c])[0]&&l.length>2&&(f=l[2]).USER_ID){n=f.USER_ID;break}}catch(t){this.log.info("Couldn't parse userid",t)}if(n)for(d=0,p=Array.from(e.querySelectorAll("script"));d<p.length;d++)if(h=p[d],b=h.text.match(/^require\("MRenderingScheduler"\).getInstance\(\).schedule\(({.*}),.*function.*\);?$/))try{if((_=JSON.parse(b[1])).content&&_.content.__html)for((v=document.createElement("div")).innerHTML=_.content.__html,y=v.querySelectorAll("article"),m=new o.i(this.log,"mobile"),g=0,S=Array.from(y);g<S.length;g++)w=S[g],m.isStorySponsored(w)&&(O=m.parseSponsoredFeedStory(w,[]),x=i({fb_post_width:null,fb_post_height:null,fb_user_id:n},O),this.sponsoredMobileFacebookPostsSubscription.next(x))}catch(t){this.log.info("Couldn't parse articles.")}return[3,4];case 3:return E=a.sent(),this.log.info("General error during getPorst",E),[3,4];case 4:return[2]}})})}}()},function(t,e,n){"use strict";e.b=function captureNeededRequestParams(t){return new Promise(function(e,n){var r=t(function(t){t.url.indexOf("?");if(t.requestBody&&t.requestBody.formData){var n=t.requestBody.formData[c]&&t.requestBody.formData[c][0],o=t.requestBody.formData[u]&&t.requestBody.formData[u][0],i=t.requestBody.formData[l]&&t.requestBody.formData[l][0];i&&n&&o&&n.length>120&&(r(),e({dyn:n,user:o,dtsg:i}))}},{urls:["https://www.facebook.com/*"],types:["xmlhttprequest"]})})},n.d(e,"a",function(){return d});var r=n(20),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},verb("next"),verb("throw"),verb("return"),e[Symbol.asyncIterator]=function(){return this},e);function verb(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){(function settle(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,o,(e=t[n](e)).done,e.value)})}}},c="__dyn",u="__user",l="fb_dtsg";function regexMatcherFactory(t,e){return function(n){var r=n.match(t);if(r&&r.length==e.length+1){for(var o=new Map,i=0;i<e.length;i++)o.set(e[i],r[1+i]);return o}return null}}var f=[regexMatcherFactory(/\/(.*)\/posts\/([0-9]*)/,["fb_post_advertiser_page_id","entityId"]),regexMatcherFactory(/\/(.*)\/videos\/([0-9]*)/,["fb_post_advertiser_page_id","entityId"]),regexMatcherFactory(/story_fbid=([0-9]*)&id=([0-9]*)&?/,["entityId","fb_post_advertiser_page_entity_id"]),regexMatcherFactory(/\/(.*)\/photos\/.*\/([0-9]*)\/\?type=[0-9].*/,["fb_post_advertiser_page_id","entityId"])];var d=function(){function AdActivityTracker(t,e,n,o){var i=this;if(this.log=t,this.httpClient=e,this.getNeededRequestParams=n,this.adActivitySubscription=new r.d,o){var s=Math.floor(1*Math.random()*24*60*60*1e3);window.setTimeout(function(){return i.start()},s)}else this.start()}return AdActivityTracker.prototype.start=function(){var t=this;this.log.info("Trying to fetch new posts..."),this.getNeededRequestParams.then(function(e){var n=e.dyn,r=e.user,o=e.dtsg;t.getPosts(n,r,o).then(function(e){e.forEach(function(e){return t.adActivitySubscription.next(e)})}),t.log.debug("Unregistering.... will try again in 1 week"),t.nextEventFetchTimeout=window.setTimeout(function(){return t.start()},6048e5)})},AdActivityTracker.prototype.getPosts=function(t,e,n){var r,c;return i(this,void 0,void 0,function(){var i,u,l,d,h,b,_,v,y,m,g,S,w,O,x,E,k,j,T,I,A,C,P,F,M,L;return s(this,function(s){switch(s.label){case 0:i=new p(this.httpClient,t,e,n),u=[],(l=new URLSearchParams).set("__user",e),l.set("__a","1"),l.set("fb_dtsg",n),l.set("__dyn",t),d=10,s.label=1;case 1:s.trys.push([1,14,15,20]),h=a(i),s.label=2;case 2:return[4,h.next()];case 3:if((b=s.sent()).done)return[3,13];if(_=b.value,0==d--||void 0===_)return[3,13];for(y in v=[],_)v.push(y);m=0,s.label=4;case 4:if(!(m<v.length))return[3,12];g=v[m],S=void 0,w=0,O=["https://www.facebook.com/click_activity/preview_contents/?ad_id="+g+"&image_height=78&image_width=150&dpr=2","https://www.facebook.com/ad_activity/ad_preview_contents/?ad_id="+g+"&image_height=78&image_width=150&dpr=2"],s.label=5;case 5:if(!(w<O.length))return[3,10];x=O[w],s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.httpClient.post(x,l.toString())];case 7:return""!==(S=s.sent())?[3,10]:[3,9];case 8:return s.sent(),[3,9];case 9:return w++,[3,5];case 10:if(!S)throw new Error("No ad_activity/click_activity valid url");if((E=S.match(/for \(;;\);(.*)/))&&E[1]&&(k=JSON.parse(E[1])).payload){if(this.log.debug("new data",k.payload),j=null,T=null,I=null,k.payload.contents)for(A=0,C=f;A<C.length;A++)(P=(0,C[A])(k.payload.contents.storyURI))&&(!j&&P.has("entityId")&&(j=P.get("entityId")),!T&&P.has("fb_post_advertiser_page_id")&&(T=P.get("fb_post_advertiser_page_id")),!I&&P.has("entityId")&&(I=P.get("fb_post_advertiser_page_entity_id")));if(!j||!k.payload.contents)throw this.log.captureBreadcrumb({message:"storyURI",data:k.payload.contents}),this.log.error(new Error("Encoutered a bad storyURI")),new Error("Encoutered a bad storyURI");F=_[g].date,M=o(o({},k.payload.contents),{dateClicked:new Date(1e3*Number.parseInt(F)),userId:e,entityId:j,fb_post_advertiser_page_id:T,fb_post_advertiser_page_entity_id:I}),this.log.debug("Found new entId",M),u.push(M)}s.label=11;case 11:return m++,[3,4];case 12:return[3,2];case 13:return[3,20];case 14:return L=s.sent(),r={error:L},[3,20];case 15:return s.trys.push([15,,18,19]),b&&!b.done&&(c=h.return)?[4,c.call(h)]:[3,17];case 16:s.sent(),s.label=17;case 17:return[3,19];case 18:if(r)throw r.error;return[7];case 19:return[7];case 20:return[2,u.sort(function(t,e){return t.dateClicked>e.dateClicked?1:-1})]}})})},AdActivityTracker}();Symbol.asyncIterator||(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"));var p=function(){function AdsActivityPagesIterator(t,e,n,r){this.httpClient=t,this.dyn=e,this.user=n,this.dtsg=r,this.last_item_served_hash=void 0,this.hasMore=!0,this.ongoingRequest=!1}return AdsActivityPagesIterator.prototype[Symbol.asyncIterator]=function(){return this},AdsActivityPagesIterator.prototype.next=function(){return i(this,void 0,void 0,function(){var t,e,n,r,o,i,a;return s(this,function(s){switch(s.label){case 0:if(this.ongoingRequest)throw new Error("You must wait the last operation to complete");if(!this.hasMore)return[2,{value:void 0,done:!0}];(t=new URLSearchParams).set(c,this.dyn),t.set(u,this.user),t.set(l,this.dtsg),t.set("__a","1"),t.set("dpr","2"),this.last_item_served_hash&&(t.set("see_more_type","adClicks"),t.set("last_item_served_hash",this.last_item_served_hash)),this.ongoingRequest=!0,s.label=1;case 1:s.trys.push([1,,8,9]),e=void 0,n=0,r=["https://www.facebook.com/business_integrity/purchase_history/purchase_history_row_data/","https://www.facebook.com/ads_integrity/purchase_history/purchase_history_row_data/"],s.label=2;case 2:if(!(n<r.length))return[3,7];o=r[n],s.label=3;case 3:return s.trys.push([3,5,,6]),[4,this.httpClient.post(o,t.toString())];case 4:return e=s.sent(),[3,7];case 5:return s.sent(),[3,6];case 6:return n++,[3,2];case 7:if(!e)throw new Error("No business_integrity/ads_integrity valid url");if(!e)throw new Error("purchase_history.data empty");if(!(i=e.match(/for \(;;\);(.*)/))||!i[1])throw new Error("invalid purchase_history.data payload");return(a=JSON.parse(i[1])).payload&&a.payload.click_history?(this.hasMore=a.payload.click_history.has_more_items,this.last_item_served_hash=a.payload.click_history.last_item_served_hash,[2,{value:a.payload.click_history.history_rows,done:!1}]):(this.hasMore=!1,[2,{value:void 0,done:!0}]);case 8:return this.ongoingRequest=!1,[7];case 9:return[2]}})})},AdsActivityPagesIterator}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t,e,n){return function(){}}},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(297);n.d(e,"a",function(){return r.a});n(380)},function(t,e,n){t.exports=n(382)},,,,,,,,,,,function(t,e,n){"use strict";e.a=function retryBackoff(t){var e="number"==typeof t?{initialInterval:t}:t,n=e.initialInterval,s=e.maxRetries,a=void 0===s?1/0:s,c=e.maxInterval,u=void 0===c?1/0:c,l=e.shouldRetry,f=void 0===l?function(){return!0}:l,d=e.backoffDelay,p=void 0===d?i.a:d;return function(t){return t.pipe(Object(o.n)(function(t){return t.pipe(Object(o.d)(function(t,e){return Object(r.k)(function(){return e<a&&f(t)},Object(r.o)(Object(i.b)(p(e,n),u)),Object(r.n)(t))}))}))}};var r=n(20),o=n(34),i=n(167)},function(t,e,n){"use strict";n(21),n(160),n(147)},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";e.a=function bufferCount(t,e){void 0===e&&(e=null);return function bufferCountOperatorFunction(n){return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function BufferCountOperator(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?a:s}return BufferCountOperator.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),s=function(t){function BufferCountSubscriber(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r.a(BufferCountSubscriber,t),BufferCountSubscriber.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},BufferCountSubscriber.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},BufferCountSubscriber}(o.a),a=function(t){function BufferSkipCountSubscriber(e,n,r){var o=t.call(this,e)||this;return o.bufferSize=n,o.startBufferEvery=r,o.buffers=[],o.count=0,o}return r.a(BufferSkipCountSubscriber,t),BufferSkipCountSubscriber.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,o=this.count;this.count++,o%n==0&&r.push([]);for(var i=r.length;i--;){var s=r[i];s.push(t),s.length===e&&(r.splice(i,1),this.destination.next(s))}},BufferSkipCountSubscriber.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},BufferSkipCountSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function bufferTime(t){var e=arguments.length,n=o.a;Object(s.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;e>=3&&(i=arguments[2]);return function bufferTimeOperatorFunction(e){return e.lift(new a(t,r,i,n))}};var r=n(3),o=n(21),i=n(5),s=n(30);var a=function(){function BufferTimeOperator(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return BufferTimeOperator.prototype.call=function(t,e){return e.subscribe(new u(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},BufferTimeOperator}(),c=function(){return function Context(){this.buffer=[]}}(),u=function(t){function BufferTimeSubscriber(e,n,r,o,i){var s=t.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=o,s.scheduler=i,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var c={subscriber:s,context:a,bufferTimeSpan:n};s.add(a.closeAction=i.schedule(dispatchBufferTimeSpanOnly,n,c))}else{var u={subscriber:s,context:a},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:i};s.add(a.closeAction=i.schedule(dispatchBufferClose,n,u)),s.add(i.schedule(dispatchBufferCreation,r,l))}return s}return r.a(BufferTimeSubscriber,t),BufferTimeSubscriber.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,o=0;o<r;o++){var i=n[o],s=i.buffer;s.push(t),s.length==this.maxBufferSize&&(e=i)}e&&this.onBufferFull(e)},BufferTimeSubscriber.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},BufferTimeSubscriber.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.contexts=null},BufferTimeSubscriber.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,n,r))}},BufferTimeSubscriber.prototype.openContext=function(){var t=new c;return this.contexts.push(t),t},BufferTimeSubscriber.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},BufferTimeSubscriber}(i.a);function dispatchBufferTimeSpanOnly(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function dispatchBufferCreation(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,o=t.scheduler,i=r.openContext();r.closed||(r.add(i.closeAction=o.schedule(dispatchBufferClose,n,{subscriber:r,context:i})),this.schedule(t,e))}function dispatchBufferClose(t){var e=t.subscriber,n=t.context;e.closeContext(n)}},function(t,e,n){"use strict";var r=n(3),o=n(14),i=n(11),s=n(10);s.a},function(t,e,n){"use strict";var r=n(3),o=n(14),i=n(10),s=n(11);i.a},function(t,e,n){"use strict";e.a=function catchError(t){return function catchErrorOperatorFunction(e){var n=new a(t),r=e.lift(n);return n.caught=r}};var r=n(3),o=n(10),i=n(35),s=n(11);var a=function(){function CatchOperator(t){this.selector=t}return CatchOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.selector,this.caught))},CatchOperator}(),c=function(t){function CatchSubscriber(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return r.a(CatchSubscriber,t),CatchSubscriber.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new i.a(this,void 0,void 0);this.add(r),Object(s.a)(this,n,void 0,void 0,r)}},CatchSubscriber}(o.a)},function(t,e,n){"use strict";n(99)},function(t,e,n){"use strict";n(17),n(99),n(31)},function(t,e,n){"use strict";n(73)},function(t,e,n){"use strict";n(161)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";e.a=function debounceTime(t,e){void 0===e&&(e=i.a);return function(n){return n.lift(new s(t,e))}};var r=n(3),o=n(5),i=n(21);var s=function(){function DebounceTimeOperator(t,e){this.dueTime=t,this.scheduler=e}return DebounceTimeOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))},DebounceTimeOperator}(),a=function(t){function DebounceTimeSubscriber(e,n,r){var o=t.call(this,e)||this;return o.dueTime=n,o.scheduler=r,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return r.a(DebounceTimeSubscriber,t),DebounceTimeSubscriber.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},DebounceTimeSubscriber.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(o.a);function dispatchNext(t){t.debouncedNext()}},function(t,e,n){"use strict";var r=n(3),o=(n(21),n(162),n(5)),i=n(68);o.a;var s=function(){return function DelayMessage(t,e){this.time=t,this.notification=e}}()},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(6),s=n(10),a=n(11);s.a,i.a;var c=function(t){function SubscriptionDelaySubscriber(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r.a(SubscriptionDelaySubscriber,t),SubscriptionDelaySubscriber.prototype._next=function(t){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},SubscriptionDelaySubscriber.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";n(163)},function(t,e,n){"use strict";n(57),n(51),n(93),n(70),n(116)},function(t,e,n){"use strict";n(73),n(66)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(35),s=n(11);n(26),n(31);o.a},function(t,e,n){"use strict";e.a=function expand(t,e,n){void 0===e&&(e=Number.POSITIVE_INFINITY);void 0===n&&(n=void 0);return e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new s(t,e,n))}};var r=n(3),o=n(10),i=n(11);var s=function(){function ExpandOperator(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return ExpandOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.concurrent,this.scheduler))},ExpandOperator}(),a=function(t){function ExpandSubscriber(e,n,r,o){var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.scheduler=o,i.index=0,i.active=0,i.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(i.buffer=[]),i}return r.a(ExpandSubscriber,t),ExpandSubscriber.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,o=t.index;e.subscribeToProjection(n,r,o)},ExpandSubscriber.prototype._next=function(t){var e=this.destination;if(e.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){e.next(t);try{var r=(0,this.project)(t,n);if(this.scheduler){var o={subscriber:this,result:r,value:t,index:n};this.destination.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,o))}else this.subscribeToProjection(r,t,n)}catch(t){e.error(t)}}else this.buffer.push(t)}},ExpandSubscriber.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(Object(i.a)(this,t,e,n))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},ExpandSubscriber.prototype.notifyNext=function(t,e,n,r,o){this._next(e)},ExpandSubscriber.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(14);o.a},function(t,e,n){"use strict";n(164)},function(t,e,n){"use strict";n(58),n(51),n(116),n(70),n(93),n(43)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";n(58),n(51),n(117),n(93),n(70),n(43)},function(t,e,n){"use strict";e.a=function mapTo(t){return function(e){return e.lift(new i(t))}};var r=n(3),o=n(5);var i=function(){function MapToOperator(t){this.value=t}return MapToOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.value))},MapToOperator}(),s=function(t){function MapToSubscriber(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r.a(MapToSubscriber,t),MapToSubscriber.prototype._next=function(t){this.destination.next(this.value)},MapToSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(68);o.a},function(t,e,n){"use strict";n(94)},function(t,e,n){"use strict";n(144)},function(t,e,n){"use strict";n(59)},function(t,e,n){"use strict";var r=n(3),o=n(11),i=n(10),s=n(35);i.a},function(t,e,n){"use strict";n(94)},function(t,e,n){"use strict";var r=n(3),o=(n(31),n(17),n(10)),i=n(35),s=n(11);o.a},function(t,e,n){"use strict";e.a=function pairwise(){return function(t){return t.lift(new i)}};var r=n(3),o=n(5);var i=function(){function PairwiseOperator(){}return PairwiseOperator.prototype.call=function(t,e){return e.subscribe(new s(t))},PairwiseOperator}(),s=function(t){function PairwiseSubscriber(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r.a(PairwiseSubscriber,t),PairwiseSubscriber.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},PairwiseSubscriber}(o.a)},function(t,e,n){"use strict";n(145),n(51)},function(t,e,n){"use strict";n(26)},function(t,e,n){"use strict";n(19),n(54)},function(t,e,n){"use strict";n(139),n(54)},function(t,e,n){"use strict";n(67),n(54)},function(t,e,n){"use strict";n(98),n(54)},function(t,e,n){"use strict";n(17),n(146)},function(t,e,n){"use strict";var r=n(3),o=n(5);n(29);o.a},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(10),s=n(11);i.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";e.a=function retryWhen(t){return function(e){return e.lift(new a(t,e))}};var r=n(3),o=n(19),i=n(10),s=n(11);var a=function(){function RetryWhenOperator(t,e){this.notifier=t,this.source=e}return RetryWhenOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.notifier,this.source))},RetryWhenOperator}(),c=function(t){function RetryWhenSubscriber(e,n,r){var o=t.call(this,e)||this;return o.notifier=n,o.source=r,o}return r.a(RetryWhenSubscriber,t),RetryWhenSubscriber.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new o.a;try{r=(0,this.notifier)(n)}catch(e){return t.prototype.error.call(this,e)}i=Object(s.a)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},RetryWhenSubscriber.prototype.notifyNext=function(t,e,n,r,o){var i=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=i,this.source.subscribe(this)},RetryWhenSubscriber}(i.a)},function(t,e,n){"use strict";var r=n(3),o=n(10);n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);n(21);o.a;function dispatchNotification(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a;var i=function(t){function SequenceEqualCompareToSubscriber(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r.a(SequenceEqualCompareToSubscriber,t),SequenceEqualCompareToSubscriber.prototype._next=function(t){this.parent.nextB(t)},SequenceEqualCompareToSubscriber.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},SequenceEqualCompareToSubscriber.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},SequenceEqualCompareToSubscriber}(o.a)},function(t,e,n){"use strict";n(54),n(97),n(19)},function(t,e,n){"use strict";e.a=function shareReplay(t,e,n){var o;o=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n};return function(t){return t.lift(function shareReplayOperator(t){var e,n,o=t.bufferSize,i=void 0===o?Number.POSITIVE_INFINITY:o,s=t.windowTime,a=void 0===s?Number.POSITIVE_INFINITY:s,c=t.refCount,u=t.scheduler,l=0,f=!1,d=!1;return function shareReplayOperation(t){l++,e&&!f||(f=!1,e=new r.a(i,a,u),n=t.subscribe({next:function(t){e.next(t)},error:function(t){f=!0,e.error(t)},complete:function(){d=!0,e.complete()}}));var o=e.subscribe(this);this.add(function(){l--,o.unsubscribe(),n&&!d&&c&&0===l&&(n.unsubscribe(),n=void 0,e=void 0)})}}(o))}};var r=n(98)},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(58);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);n(57);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(35),s=n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";e.a=function startWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(o.a)(n)?(t.pop(),function(e){return Object(r.a)(t,e,n)}):function(e){return Object(r.a)(t,e)}};var r=n(73),o=n(30)},function(t,e,n){"use strict";n(361)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=n(6),i=n(141),s=n(69),a=function(t){function SubscribeOnObservable(e,n,r){void 0===n&&(n=0),void 0===r&&(r=i.a);var o=t.call(this)||this;return o.source=e,o.delayTime=n,o.scheduler=r,(!Object(s.a)(n)||n<0)&&(o.delayTime=0),r&&"function"==typeof r.schedule||(o.scheduler=i.a),o}return r.a(SubscribeOnObservable,t),SubscribeOnObservable.create=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=i.a),new SubscribeOnObservable(t,e,n)},SubscribeOnObservable.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},SubscribeOnObservable.prototype._subscribe=function(t){var e=this.delayTime,n=this.source;return this.scheduler.schedule(SubscribeOnObservable.dispatch,e,{source:n,subscriber:t})},SubscribeOnObservable}(o.a)},function(t,e,n){"use strict";n(119),n(43)},function(t,e,n){"use strict";e.a=function switchMapTo(t,e){return e?Object(r.a)(function(){return t},e):Object(r.a)(function(){return t})};var r=n(119)},function(t,e,n){"use strict";var r=n(3),o=n(10);n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";e.a=function tap(t,e,n){return function tapOperatorFunction(r){return r.lift(new a(t,e,n))}};var r=n(3),o=n(5),i=n(65),s=n(50);var a=function(){function DoOperator(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return DoOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))},DoOperator}(),c=function(t){function TapSubscriber(e,n,r,o){var a=t.call(this,e)||this;return a._tapNext=i.a,a._tapError=i.a,a._tapComplete=i.a,a._tapError=r||i.a,a._tapComplete=o||i.a,Object(s.a)(n)?(a._context=a,a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||i.a,a._tapError=n.error||i.a,a._tapComplete=n.complete||i.a),a}return r.a(TapSubscriber,t),TapSubscriber.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},TapSubscriber.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},TapSubscriber.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},TapSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5);n(21),n(165);o.a;function dispatchNext(t){t.subscriber.clearThrottle()}},function(t,e,n){"use strict";n(21),n(118),n(92),n(26)},function(t,e,n){"use strict";n(21),n(142),n(166),n(90)},function(t,e,n){"use strict";n(21),n(26)},function(t,e,n){"use strict";n(94)},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(10);n(11);i.a},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(19);o.a},function(t,e,n){"use strict";var r=n(3),o=n(19),i=(n(21),n(5));n(69),n(30);var s=function(t){function CountedSubject(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r.a(CountedSubject,t),CountedSubject.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(CountedSubject.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),CountedSubject}(o.a);i.a;function dispatchWindowTimeSpanOnly(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function dispatchWindowCreation(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,o=t.windowCreationInterval,i=n.openWindow(),s={action:this,subscription:null},a={subscriber:n,window:i,context:s};s.subscription=r.schedule(dispatchWindowClose,e,a),this.add(s.subscription),this.schedule(t,o)}function dispatchWindowClose(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(14),s=n(10),a=n(11);s.a},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(10),s=n(11);i.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";n(100)},function(t,e,n){"use strict";n(100)},function(t,e,n){"use strict";n(20),n(34),n(167)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(16),o=n(60),i=n(285),s=n(20),a=n(34),c=n(169),u=n(286),l=n.n(u),f=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},d=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},p=function(){return Object(a.h)(function(t){return function isUserAbove18OrIL(t){var e=t.fb_meta_dob_year,n=t.fb_meta_dob_month,r=t.geo_current_location_country_iso;if(!e||!n)return!0;var o=new Date(e,n);if(((new Date).valueOf()-o.valueOf())/31536e6<18)return"IL"===r;return!0}(t)})};var h=function(){function BackgroundMainBase(t,e,n,r,o,i,s,a,c,u,l,f,d,p,h,b,_,v){this.clientId=t,this.gitRev=e,this.gitBranch=n,this.version=r,this.log=o,this.environmentServices=i,this.analyticsProvider=s,this.eventsEnricher=a,this.messageSender=c,this.facebookMetadataProvider=u,this.locationService=l,this.storage=f,this.pixelsService=d,this.safeSetIntervalImpl=p,this.safeSetTimeoutImpl=h,this.ytTracker=b,this.adActivityTracker=_,this.FB_SPONSORED_FAILSAFE_ENABLED=v,this.ytVideoEvents=null,this.auditEventsSubscription=null,this.igSponsoredPostsSub=null,this.adActivityEventsSub=null,this.crossMessageSubscription=null,this.envEventsSubscription=null,this.interestsSendingTimerStopper=null,this.configRequesterUnsub=null}return BackgroundMainBase.prototype.start=function(){var t=this;this.crossMessageSubscription=this.environmentServices.crossMessage.subscribe(function(e){return t.onCrossMessage(e)}),this.auditEventsSubscription=this.environmentServices.auditEvents.subscribe(function(e){return t.onAuditEvent(e)}),this.FB_SPONSORED_FAILSAFE_ENABLED&&this.setupSponsoredFailsafeWarning(),this.envEventsSubscription=this.environmentServices.envEvents.subscribe(function(e){return t.onEnvEvent(e)}),this.configRequesterUnsub=this.environmentServices.onConfigRequest(function(){return{ShouldShowFoundPosts:t.storage.shouldShowFoundPosts}}),this.interestsSendingTimerStopper=this.initInterestsSending().subscribe(),this.environmentServices.sendMessageToContent({type:"background-ready",payload:{}}),this.ytVideoEvents=this.ytTracker?this.ytTracker.sponsoredYTVideosSubscription.pipe(Object(a.f)(function(t,e){return t.id==e.id})).subscribe(function(e){return t.onYTAd(e)}):null,this.adActivityTracker&&(this.adActivityEventsSub=this.adActivityTracker.adActivitySubscription.subscribe(function(e){return f(t,void 0,void 0,function(){return d(this,function(t){return this.storage.GetLastAdActivityTime(e.userId)<e.dateClicked&&(this.storage.SetLastAdActivityTime(e.userId,e.dateClicked),this.onInteraction({fb_post_interaction_type:"ad_activity",fb_post_entity_id:e.entityId,fb_post_interaction_url:e.landingPageURL,fb_post_interaction_text:e.bodyRawText,fb_post_interaction_click_origin:null,fb_post_src:null,fb_user_id:e.userId,original_event_time:e.dateClicked,fb_post_advertiser_page_entity_id:e.fb_post_advertiser_page_entity_id,fb_post_advertiser_page_id:e.fb_post_advertiser_page_id})),[2]})})}))},BackgroundMainBase.prototype.stop=function(){var t,e,n,r,o,i,s;null===(t=this.crossMessageSubscription)||void 0===t||t.unsubscribe(),this.crossMessageSubscription=null,null===(e=this.auditEventsSubscription)||void 0===e||e.unsubscribe(),this.auditEventsSubscription=null,null===(n=this.envEventsSubscription)||void 0===n||n.unsubscribe(),this.envEventsSubscription=null,null!==this.configRequesterUnsub&&this.configRequesterUnsub(),this.configRequesterUnsub=null,null===(r=this.interestsSendingTimerStopper)||void 0===r||r.unsubscribe(),this.interestsSendingTimerStopper=null,null===(o=this.ytVideoEvents)||void 0===o||o.unsubscribe(),this.ytVideoEvents=null,null===(i=this.igSponsoredPostsSub)||void 0===i||i.unsubscribe(),this.igSponsoredPostsSub=null,null===(s=this.adActivityEventsSub)||void 0===s||s.unsubscribe(),this.adActivityEventsSub=null},BackgroundMainBase.prototype.onEnvEvent=function(t){var e=this;this.log.info("onEnvEvent",t),this.getThirdPartyCookie().then(function(n){var r=n.uid,o=n.raw;e.storage.thirdPartyCookie=o,e.storage.thirdPartyIdIS=r,e.analyticsProvider.then(function(n){Object(c.a)(n,e.gitRev,e.gitBranch,e.clientId,e.storage.deviceId,e.version,e.storage.thirdPartyIdIS,e.storage.thirdPartyCookie),n("send",{hitType:"event",eventCategory:"Cookie read",eventAction:o,eventLabel:"Cookie read reason:"+t,nonInteraction:!0})})},function(){}).then(function(){"install"===t&&(e.sendInstallEventAws(e.storage.thirdPartyCookie),e.pixelsService.fireAttributionPixelOnInstallIfNeeded(e.storage.thirdPartyCookie)),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"Extension install",eventAction:"reason:"+t,eventLabel:"",nonInteraction:!0})})})},BackgroundMainBase.prototype.initInterestsSending=function(){var t=this;this.log.info("initInterestsSending");var e=this.storage.lastInterestsSend,n=0!==e.valueOf(),r=new Date(e.valueOf()+20736e5);return Object(s.o)(n?r:0,20736e5).pipe(Object(a.l)(function(){return t.facebookMetadataProvider.getInterests()}),Object(a.i)(function(t){return{fb_user_id:t.id,fb_user_interests:t.interests.filter(function(t){return"interest"===t.type}).map(function(t){return{fbid:t.fbid,name:t.name,type:t.type,topic:t.topic,disambiguation_category:t.disambiguation_category}})}}),Object(a.r)(function(e){var n=e.fb_user_id,r=e.fb_user_interests;return t.eventsEnricher.enrichInterestsEvent({fb_user_id:n,fb_user_interests:r})}),Object(i.a)({initialInterval:6e5,maxRetries:1}),Object(a.u)({error:function(e){return t.log.error("getAndSendInterests facebook fetch error")}}),p(),Object(a.r)(function(e){return Object(s.g)(function(){return t.sendInterestsToAws(e)}).pipe(Object(i.a)({initialInterval:6e5,maxRetries:3}),Object(a.u)(function(){t.storage.lastInterestsSend=new Date,t.log.info("initInterestsSending interval")},function(e){return t.log.error("getAndSendInterests",e)}))}))},BackgroundMainBase.prototype.onAuditEvent=function(t){var e;switch(t.type){case"Navigation":this.onAuditLogsEvent(null===(e=t.payload)||void 0===e?void 0:e.channel,t.payload.isAdBlockEnabled);break;case"Heartbeat":this.onAuditLogsEvent(null,null);break;default:Object(r.f)(t)}},BackgroundMainBase.prototype.onCrossMessage=function(t){switch(t.type){case"Analytics":this.onAnalyticsMessage(t.payload);break;case"Interaction":this.onInteraction(t.payload);break;case"NewSponsoredPost":this.onSponsoredPost(t.payload);break;case"Post":this.onRegularPost(t.payload);break;case"IsBackgroundReady":this.environmentServices.sendMessageToContent({type:"background-ready",payload:{}});break;case"NewPromotedTweet":this.onPromotedTweet(t.payload);break;case"AmazonSponsored":this.onAmazonSponsored(t.payload);break;case"LinkedInSponsored":this.onLinkedInPost(t.payload);break;case"FacebookNewFeedUi":this.onFacebookNewFeedUi(t.payload)}},BackgroundMainBase.prototype.onAuditLogsEvent=function(t,e){var n=this;this.log.info("sending audit heartbeat event - "+t),this.eventsEnricher.enrichAuditEvent(t,e).then(function(t){var e={event_content:t,event_type:"heartbeat"};n.messageSender.SendAuditEvent(e),n.log.info("sent audit event",t)})},BackgroundMainBase.prototype.onFacebookNewFeedUi=function(t){var e=this;this.log.info("got info about new Facebook UI feed: "+t),Object(s.h)(this.eventsEnricher.enrichNewFacebookUiEvent(t)).pipe(Object(a.l)(function(t){return l.a.post("https://collection-endpoint-staging.herokuapp.com/fbbeta",t.event_content)})).subscribe(function(){e.log.info("sending info about new Facebook UI feed: "+t)},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onLinkedInPost=function(t){return f(this,void 0,void 0,function(){var e=this;return d(this,function(n){return this.log.info("got new linked in post - "+t.li_post_urn),Object(s.h)(this.eventsEnricher.enrichLinkedInSponsored(t)).pipe(p()).subscribe(function(n){e.log.info("sending post ",t.li_post_urn),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New LinkedIn Post",eventAction:"li_post_urn: "+t.li_post_urn,eventLabel:""})}),e.sendLinkedInPostToAws(n)},function(t){e.log.error(t)}),[2]})})},BackgroundMainBase.prototype.onAmazonSponsored=function(t){var e=this;this.log.info("got amazon sponsored in the background"),Object(s.h)(this.eventsEnricher.enrichAmazonSponsored(t)).pipe(p()).subscribe(function(n){switch(t.sponsored_type){case o.a.Headline:e.sendAmazonSponsoredToAws(n,"az_sponsored_headline");break;case o.a.Product:e.sendAmazonSponsoredToAws(n,"az_sponsored_product");break;case o.a.Banner:e.sendAmazonSponsoredToAws(n,"az_sponsored_banner")}},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onAnalyticsMessage=function(t){this.analyticsProvider.then(function(e){e.apply(e,t)})},BackgroundMainBase.prototype.onRegularPost=function(t){var e=this;Object(s.h)(this.eventsEnricher.enrichRegularStory(t)).pipe(p()).subscribe(function(t){e.log.info("sending regular story",t.fb_post_hashed_entity_id),e.sendPostToAws(t,"facebook_post")},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onSponsoredPost=function(t){var e=this;this.pixelsService.fireAttributionOnSponsoredEventIfneeded(this.storage.thirdPartyIdIS),Object(s.h)(this.eventsEnricher.enrichSponsoredStory(t)).pipe(p()).subscribe(function(n){e.log.info("sending SponsoredStory",n.fb_post_hashed_entity_id),e.sendPostToAws(n,{desktop:"facebook_post","desktop-v2":"facebook_post",mobile:"facebook_mobile_post",partial:"facebook_partial_post"}[t.parser_type])},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onInteraction=function(t){var e=this;Object(s.h)(this.eventsEnricher.enrichInteraction(t)).pipe(p()).subscribe(function(t){e.log.info("sending interaction",t),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New interaction",eventAction:"fb_post_entity_id: "+t.fb_post_entity_id,eventLabel:"interaction:"+t.fb_post_interaction_type})}),e.sendInteractionToAws(t)},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onPromotedTweet=function(t){var e=this;this.log.info("New tweet "+t.tw_tweet_id+" it's screen name is "+t.tw_user_screen_name),Object(s.h)(this.eventsEnricher.enrichTweet(t)).pipe(p()).subscribe(function(n){e.log.info("sending tweet ",t.tw_tweet_id),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New Tweet",eventAction:"tw_tweet_id: "+t.tw_tweet_id,eventLabel:""})}),e.sendTweetToAws(n)},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onYTAd=function(t){var e=this;this.log.info("New video "+t.id+" it's host is "+t.host_type),Object(s.h)(this.eventsEnricher.enrichYTAdVideo(t)).pipe(p()).subscribe(function(n){e.log.info("sending Youtube video ",t.id),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New Youtube video",eventAction:"yt_video_id: "+t.id,eventLabel:""})}),e.sendVideoToAws(n)},function(t){return e.log.error(t)})},BackgroundMainBase.prototype.sendPostToAws=function(t,e){var n={event_content:t,event_type:e};this.messageSender.SendEvent(n)},BackgroundMainBase.prototype.sendVideoToAws=function(t){var e={event_content:t,event_type:"yt_video"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendTweetToAws=function(t){var e={event_content:t,event_type:"tw_promoted_tweet"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendLinkedInPostToAws=function(t){var e={event_content:t,event_type:"li_promoted_post"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendAmazonSponsoredToAws=function(t,e){var n={event_content:t,event_type:e};this.messageSender.SendEvent(n)},BackgroundMainBase.prototype.sendInteractionToAws=function(t){var e={event_content:t,event_type:"facebook_post_interaction"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendInterestsToAws=function(t){var e={event_content:t,event_type:"facebook_user_interests"};return this.messageSender.SendEventImmediate(e)},BackgroundMainBase.prototype.sendInstallEventAws=function(t){this.messageSender.SendEvent({event_type:"device_install",event_content:{device_id:this.storage.deviceId,extension_id:this.clientId,third_party_id:t,event_time:new Date}})},BackgroundMainBase.prototype.getThirdPartyCookie=function(){var t=this;return Promise.resolve().then(function(){var e=t.pixelsService.getCookieDomainAndKeyIfNeeded(t.clientId);if(!e)throw new Error("This extension has no cookie associated");return e}).then(function(e){return t.log.info("Cookie for this extension is domain: "+e.domain+" name:"+e.name),Object(r.A)(3e3).then(function(){return e})}).then(function(e){return t.environmentServices.getAllCookies(e)}).then(function(e){if(!Array.isArray(e)||0===e.length||void 0===e[0])throw new Error("no cookie");var n=e[0].value.match(/uid\=([^,]+)/),r="";return null!==n&&2===n.length&&(r=n[1]),t.log.info("Found cookie to send "+e[0].value),{uid:r,raw:e[0].value}})},BackgroundMainBase.prototype.setupSponsoredFailsafeWarning=function(){var t=this;this.environmentServices.crossMessage.pipe(Object(a.h)(function(t){return"Post"===t.type||"NewSponsoredPost"===t.type}),Object(a.a)(4),Object(a.i)(function(t){return t.every(function(t){return"NewSponsoredPost"===t.type})}),Object(a.q)(!1),Object(a.m)(),Object(a.h)(function(t){return t[0]!==t[1]})).subscribe(function(e){var n=e[0],r=e[1];!0===r&&!1===n?t.log.error("Possible false Facebook sponsored detected - all messages marked as sponsored"):!0===n&&!1===r&&t.log.error("Recovered from all Facebook sponsored state")})},BackgroundMainBase}()},function(t,e,n){"use strict";var r=n(32),o=n(170),i=n(384),s=n(129);function createInstance(t){var e=new i(t),n=o(i.prototype.request,e);return r.extend(n,i.prototype,e),r.extend(n,e),n}var a=createInstance(s);a.Axios=i,a.create=function create(t){return createInstance(r.merge(s,t))},a.Cancel=n(174),a.CancelToken=n(398),a.isCancel=n(173),a.all=function all(t){return Promise.all(t)},a.spread=n(399),t.exports=a,t.exports.default=a},function(t,e){function isBuffer(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(isBuffer(t)||function isSlowBuffer(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&isBuffer(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(129),o=n(32),i=n(393),s=n(394);function Axios(t){this.defaults=t,this.interceptors={request:new i,response:new i}}Axios.prototype.request=function request(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function unshiftRequestInterceptors(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function pushResponseInterceptors(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function forEachMethodNoData(t){Axios.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function forEachMethodWithData(t){Axios.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=Axios},function(t,e,n){"use strict";var r=n(32);t.exports=function normalizeHeaderName(t,e){r.forEach(t,function processHeader(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(172);t.exports=function settle(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function enhanceError(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t}},function(t,e,n){"use strict";var r=n(32);function encode(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function buildURL(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var i=[];r.forEach(e,function serialize(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function parseValue(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),i.push(encode(e)+"="+encode(t))}))}),o=i.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(32),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function parseHeaders(t){var e,n,i,s={};return t?(r.forEach(t.split("\n"),function parser(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(s[e]&&o.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},function(t,e,n){"use strict";var r=n(32);t.exports=r.isStandardBrowserEnv()?function standardBrowserEnv(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function resolveURL(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=resolveURL(window.location.href),function isURLSameOrigin(e){var n=r.isString(e)?resolveURL(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function isURLSameOrigin(){return!0}},function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError",t.exports=function btoa(t){for(var e,n,o=String(t),i="",s=0,a=r;o.charAt(0|s)||(a="=",s%1);i+=a.charAt(63&e>>8-s%1*8)){if((n=o.charCodeAt(s+=.75))>255)throw new E;e=e<<8|n}return i}},function(t,e,n){"use strict";var r=n(32);t.exports=r.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(t,e,n,o,i,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function read(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function remove(t){this.write(t,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},function(t,e,n){"use strict";var r=n(32);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(t){this.handlers[t]&&(this.handlers[t]=null)},InterceptorManager.prototype.forEach=function forEach(t){r.forEach(this.handlers,function forEachHandler(e){null!==e&&t(e)})},t.exports=InterceptorManager},function(t,e,n){"use strict";var r=n(32),o=n(395),i=n(173),s=n(129),a=n(396),c=n(397);function throwIfCancellationRequested(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function dispatchRequest(t){return throwIfCancellationRequested(t),t.baseURL&&!a(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function onAdapterResolution(e){return throwIfCancellationRequested(t),e.data=o(e.data,e.headers,t.transformResponse),e},function onAdapterRejection(e){return i(e)||(throwIfCancellationRequested(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(32);t.exports=function transformData(t,e,n){return r.forEach(n,function transform(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function isAbsoluteURL(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(174);function CancelToken(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function promiseExecutor(t){e=t});var n=this;t(function cancel(t){n.reason||(n.reason=new r(t),e(n.reason))})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var t;return{token:new CancelToken(function executor(e){t=e}),cancel:t}},t.exports=CancelToken},function(t,e,n){"use strict";t.exports=function spread(t){return function wrap(e){return t.apply(null,e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function FacebookContentScriptMainBase(t,e,n){this.log=t,this.envServices=e,this.config=n,this.sponsoredPostsSubscription=null,this.regularPostsSubscription=null,this.interactionsSubscription=null}return FacebookContentScriptMainBase.prototype.start=function(){var t=this;if(this.log.info("starting content script main base"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.sponsoredPostsSubscription)throw new Error("already started!");this.sponsoredPostsSubscription=this.envServices.sponsoredStories.subscribe(function(e){t.onSponsoredPost(e)}),this.regularPostsSubscription=this.envServices.regularStories.subscribe(function(e){t.onRegularPost(e)}),this.interactionsSubscription=this.envServices.interactions.subscribe(function(e){t.onInteraction(e)}),this.envServices.startMonitoring()},FacebookContentScriptMainBase.prototype.onInteraction=function(t){this.log.info("Interaction",t),this.envServices.sendMessageToBackground({type:"Interaction",payload:t})},FacebookContentScriptMainBase.prototype.onRegularPost=function(t){this.log.info("Regular post",t),this.envServices.sendMessageToBackground({type:"Post",payload:t}),this.config.ShouldShowFoundPosts&&this.envServices.highlightPostByEntId(t.fb_post_entity_id,!1,JSON.stringify(t,null,2))},FacebookContentScriptMainBase.prototype.onSponsoredPost=function(t){this.log.info("Sponsored post",t),this.envServices.sendMessageToBackground({type:"NewSponsoredPost",payload:t}),this.config.ShouldShowFoundPosts&&this.envServices.highlightPostByEntId(t.fb_post_entity_id,!0,JSON.stringify(t,null,2))},FacebookContentScriptMainBase.prototype.stop=function(){if(null===this.sponsoredPostsSubscription)throw new Error("already stopped!");this.sponsoredPostsSubscription.unsubscribe(),null!==this.interactionsSubscription&&this.interactionsSubscription.unsubscribe(),null!==this.regularPostsSubscription&&this.regularPostsSubscription.unsubscribe()},FacebookContentScriptMainBase.prototype.sendAnalyticsEvent=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t;this.envServices.sendMessageToBackground({type:"Analytics",payload:n})},FacebookContentScriptMainBase}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function TwitterContentScriptMainBase(t,e,n){this.log=t,this.envServices=e,this.config=n,this.promotedTweets=null}return TwitterContentScriptMainBase.prototype.start=function(){var t=this;if(this.log.info("starting content script main base"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.promotedTweets)throw new Error("already started!");this.promotedTweets=this.envServices.promotedTweets.subscribe(function(e){t.onPromotedTweet(e)}),this.envServices.startMonitoring()},TwitterContentScriptMainBase.prototype.onPromotedTweet=function(t){this.log.info("promoted tweet",t),this.envServices.sendMessageToBackground({type:"NewPromotedTweet",payload:t}),this.config.ShouldShowFoundPosts&&this.envServices.highlightPost(t.tw_tweet_id)},TwitterContentScriptMainBase.prototype.stop=function(){if(null===this.promotedTweets)throw new Error("already stopped!");this.promotedTweets.unsubscribe(),this.promotedTweets=null},TwitterContentScriptMainBase.prototype.sendAnalyticsEvent=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t;this.envServices.sendMessageToBackground({type:"Analytics",payload:n})},TwitterContentScriptMainBase}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(74),o=function(){function AmazonContentScriptMain(t,e,n){this.log=t,this.envServices=e,this.config=n,this.subscription=null,this.frameHandler=new r.a(chrome.runtime.id)}return AmazonContentScriptMain.prototype.start=function(){var t=this;if(this.log.info("starting content script main base"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.subscription)throw new Error("already started!");this.frameHandshake(),this.subscription=this.envServices.sponsoredAmazon.subscribe(function(e){t.envServices.sendMessageToBackground({type:"AmazonSponsored",payload:e})}),this.envServices.startMonitoring()},AmazonContentScriptMain.prototype.stop=function(){if(null===this.subscription)throw new Error("already stopped!");this.subscription.unsubscribe(),this.subscription=null},AmazonContentScriptMain.prototype.frameHandshake=function(){var t=this;window.addEventListener("message",function(e){!e||e.data!==t.frameHandler.CreateMessageId("frame-ready")||!e.source||e.source instanceof ServiceWorker?t.envServices.handleFrameMessage(e):e.source.postMessage(t.frameHandler.CreateMessageId("top-ready"),"*")});for(var e=0,n=this.frameHandler.GetFrameSelectors();e<n.length;e++){var r=n[e],o=document.querySelector("#"+r);o instanceof HTMLIFrameElement&&o.contentWindow&&o.contentWindow.postMessage(this.frameHandler.CreateMessageId("top-ready"),"*")}},AmazonContentScriptMain}()},function(t,e,n){"use strict";var r=n(404);n.d(e,"a",function(){return r.a});n(405)},function(t,e,n){"use strict";e.a=function newFacebookFeedObserver(t){var e=Object(s.k)(t.body,r.j,!0),n=Object(s.k)(t.body,r.l,!0);return Object(o.l)(n.pipe(Object(i.j)("old")),e.pipe(Object(i.j)("new"))).pipe(Object(i.p)(1))};var r=n(42),o=n(20),i=n(34),s=n(74)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function AmazonDisplayContentScriptMain(t,e,n){this.log=t,this.envServices=e,this.config=n,this.subscription=null}return AmazonDisplayContentScriptMain.prototype.start=function(){var t=this;if(this.log.info("starting amazon display content script main"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.subscription)throw new Error("already started!");this.subscription=this.envServices.sponsoredAmazon.subscribe(function(e){t.envServices.sendMessageToBackground({type:"AmazonSponsored",payload:e})}),this.envServices.startMonitoring()},AmazonDisplayContentScriptMain.prototype.stop=function(){if(null===this.subscription)throw new Error("already stopped!");this.subscription.unsubscribe(),this.subscription=null},AmazonDisplayContentScriptMain}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function LinkedInContentScriptMain(t,e,n){this.log=t,this.envServices=e,this.config=n,this.subscription=null}return LinkedInContentScriptMain.prototype.start=function(){var t=this;if(this.log.info("starting linkedin content script main"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.subscription)throw new Error("already started!");this.subscription=this.envServices.sponsoredFeedPost.subscribe(function(e){t.envServices.sendMessageToBackground({type:"LinkedInSponsored",payload:e})}),this.envServices.startMonitoring()},LinkedInContentScriptMain.prototype.stop=function(){if(null===this.subscription)throw new Error("already stopped!");this.subscription.unsubscribe(),this.subscription=null},LinkedInContentScriptMain}()},function(t,e,n){"use strict";e.a=function setupGlobalErrorsTracking(t,e){e.addEventListener("error",function(e){t("send",{hitType:"event",eventCategory:"background-exception",eventAction:"message: "+e.message,eventLabel:e.lineno+":"+e.colno+"@"+e.filename,nonInteraction:!0})}),e.addEventListener("unhandledrejection",function(e){if(e instanceof ErrorEvent){var n={hitType:"event",eventCategory:"background-exception-unhandled-rejection",eventAction:"message: "+(e.error?e.error.message:e.message),eventLabel:""+(e.error?e.error.stack:""),nonInteraction:!0};if("reason"in e&&e.reason instanceof Error){var r=e;n={hitType:"event",eventCategory:"background-exception-unhandled-rejection",eventAction:"message: "+r.reason.message,eventLabel:""+r.reason.stack,nonInteraction:!0}}t("send",n)}})}},function(t,e,n){"use strict";e.a=function interactionsObserver(t,e,n,s){var l={fb_post_interaction_url:null,fb_post_interaction_text:null,fb_post_interaction_click_origin:null,fb_post_src:null};return Object(o.l)(function newComment(t,e,n){return newCommentElement(e).pipe(Object(i.h)(function(t){return null!==t.querySelector("a[data-hovercard*='"+n+"'].UFIImageBlockImage")}),Object(i.i)(function(t){return Object(c.i)(t,r.b,e)}),Object(i.h)(function(e){return!!e&&t.isStorySponsored(e)}),Object(i.i)(function(t){return t.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n,e).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"commented",fb_post_entity_id:t})})),function newUserLikeOnSponsoredPost(t,e){return new o.c(function(t){function h(e){t.next(e)}return e.addEventListener("click",h),function(){e.removeEventListener("click",h)}}).pipe(Object(i.i)(function(t){return t.target instanceof HTMLElement&&e.contains(t.target)&&Object(c.i)(t.target,r.f,e)||null}),Object(i.h)(function(t){return null!==t}),Object(i.i)(function(t){return Object(c.i)(t,r.b,e)}),Object(i.h)(function(e){return null!==e&&t.isStorySponsored(e)}),Object(i.i)(function(t){return t.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"reacted_like",fb_post_entity_id:t})})),function shareClick(t,e){return delegateEvent(e,"click",r.g,{}).pipe(Object(i.i)(function(t){return Object(c.i)(t,r.b,e)}),Object(i.h)(function(t){return null!==t}),Object(i.h)(function(e){return t.isStorySponsored(e)}),Object(i.i)(function(t){return t.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"shared_post",fb_post_entity_id:t})})),function pageLike(t,e){return Object(o.i)(e,"click",{capture:!0}).pipe(Object(i.i)(function(t){return t.target instanceof HTMLElement?[Object(c.i)(t.target,r.b,e),t.target]:[null,null]}),Object(i.h)(function filter(e){var n=e[0],o=e[1];return null!==n&&null!==o&&t.isStorySponsored(n)&&null!==Object(c.i)(o,r.c,n)}),Object(i.i)(function(t){var e=t[0];return e.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"liked_advertiser_page",fb_post_entity_id:t})})),function reaction(t,e,n){var s=null;return new o.c(function(a){var u=function newReactionsFocus(t,e){return Object(o.i)(e,"mouseover",{capture:!1}).pipe(Object(i.e)(200),Object(i.d)(function(t){var n=t.target;return Object(c.x)({timeout:50}).then(function(){return n instanceof HTMLElement&&e.contains(n)?Object(c.i)(n,r.b,e):null})}),Object(i.i)(function(e){if(null!==e&&t.isStorySponsored(e)){var n=e.querySelector(r.e);if(n instanceof HTMLInputElement)return n.value}return null}))}(t,e).subscribe(function(t){s=t}),l=function newUserReaction(t){var e=new Map([["1","like"],["2","love"],["4","haha"],["3","wow"],["7","sad"],["8","angry"]]);return delegateEvent(t,"click",r.h,{}).pipe(Object(i.i)(function mapper(t){var n=t.getAttribute("data-reaction");return e.has(n)?e.get(n):n}))}(n).subscribe(function(t){null!==s&&a.next({postId:s,reaction:t})});return function(){u.unsubscribe(),l.unsubscribe()}})}(t,n,s).pipe(Object(i.i)(function(t){var e=t.reaction,n=t.postId;return u(u({},l),{fb_post_interaction_type:"reacted_"+e,fb_post_entity_id:n})})),function storyContentClicks(t,e){return Object(o.i)(e,"click",{capture:!0}).pipe(Object(i.i)(function(t){return{event:t,target:t.target,story:Object(c.i)(t.target,r.b,e)}}),Object(i.h)(function(e){return e.story&&t.isStorySponsored(e.story)||!1}),Object(i.h)(function(t){return!t.target.matches(r.c)}),Object(i.h)(function(t){var e=t.story.querySelector(r.d);return e instanceof HTMLFormElement&&e.parentElement.previousElementSibling.contains(t.target)}),Object(i.i)(function(t){return u(u({},t),{fb_post_interaction_click_origin:a(t.target,t.story),fb_post_src:t.story.outerHTML})}),Object(i.d)(function(t){return Object(c.x)().then(function(){return t})}),Object(i.i)(function(e){var n=e.story.querySelector(r.d).parentElement.previousElementSibling;return{fb_post_src:e.fb_post_src,fb_post_interaction_click_origin:e.fb_post_interaction_click_origin,story:e.story,target:e.target,postType:t.storyTypeClassifier(e.story),storyContent:n}}),Object(i.i)(function(t){return u({fb_post_src:t.fb_post_src,fb_post_entity_id:t.story.querySelector(r.e).value,fb_post_interaction_click_origin:t.fb_post_interaction_click_origin},function contentClicksClassifier(t){var e,n,o,i,s,a="clicked_unclassified",u=null,l=null,f=Array.from(t.storyContent.querySelectorAll(r.a)),d=f[0],p=f[1];if(t.target.parentElement===d||t.target===p)a="clicked_advertiser_page";else if(t.target.matches(".see_more_link_inner"))a="clicked_see_more";else if(t.story.contains(Object(c.i)(t.target,".userContent",t.story))&&t.story.contains(Object(c.i)(t.target,"a",t.story))){var h=Object(c.i)(t.target,"a",t.story);a="clicked_in_text_link",u=h.href,l=h.text}"clicked_unclassified"===a&&(["link","lead"].indexOf(t.postType)>-1&&(e=function classifyClicksForLeadOrLink(t){var e="clicked_unclassified",n=null,r=null;1===t.target.children.length&&t.target.children[0].matches(".uiScaledImageContainer.fbStoryAttachmentImage")?(e="clicked_post_attachment_image",r=Object(c.i)(t.target,"a",t.story).href):t.target.matches("button[type=submit]")?(e="clicked_call_to_action",n=t.target.textContent):t.target.matches("a[role=button][rel=toggle]")?e="clicked_post_controls":t.target.matches("a[role=button]")&&t.target instanceof HTMLAnchorElement?(e="lead"===t.postType?"clicked_post_attachment_text":"clicked_call_to_action",r=t.target.href,n=t.target.text):t.target.matches("a")&&""===t.target.innerHTML&&t.target instanceof HTMLAnchorElement&&(e="clicked_post_attachment_text",r=t.target.href);return{href:r,text:n,type:e}}(t),a=e.type,l=e.text,u=e.href),"event"===t.postType&&(n=function classifyClicksOnEvent(t){var e="clicked_unclassified",n=null,r=null;t.target.matches(".fbEventAttachmentCTAButton")&&t.target instanceof HTMLAnchorElement?(e="clicked_call_to_action",n=t.target.text):t.target.matches("a.profileLink")&&t.target instanceof HTMLAnchorElement?(e="clicked_story_header_link",n=t.target.text,r=t.target.href):t.target instanceof HTMLAnchorElement&&null!==t.target.previousElementSibling&&t.target.previousElementSibling.matches(".uiScaledImageContainer.fbStoryAttachmentImage")?(e="clicked_post_attachment_image",r=t.target.href):t.target instanceof HTMLAnchorElement&&(e="clicked_post_attachment_text",r=t.target.href,n=t.target.text);return{type:e,text:n,href:r}}(t),a=n.type,l=n.text,u=n.href),"album"===t.postType&&(a=(o={type:"clicked_unclassified",text:null,href:null}).type,l=o.text,u=o.href),"photo"===t.postType&&(a=(i={type:"clicked_unclassified",text:null,href:null}).type,l=i.text,u=i.href),"carousel"===t.postType&&(s=function classifyCarousel(t){var e="clicked_unclassified",n=null,r=null,o=t.storyContent.querySelector("ul").nextElementSibling,i=o.nextElementSibling,s=null,a=null;o.querySelector('[data-testid="multishare_pager_next"]')?(s=o,a=i):(s=i,a=o);if(s.contains(t.target)||s===t.target)e="clicked_carousel_forward";else if(a.contains(t.target)||a===t.target)e="clicked_carousel_back";else if(t.target instanceof HTMLButtonElement){e="clicked_call_to_action",n=t.target.textContent;var u=Object(c.i)(t.target,"a",t.storyContent);u instanceof HTMLAnchorElement&&(r=u.href)}else{var l=Object(c.i)(t.target,"li",t.storyContent);if(l instanceof HTMLLIElement){e="clicked_post_attachment",r=l.children.length>0&&l.children[0]instanceof HTMLAnchorElement&&l.children[0].href||null,n=l.textContent;var f=l.querySelector("button");f instanceof HTMLButtonElement&&(n=n.replace(f.textContent,""))}}return{type:e,text:n,href:r}}(t),a=s.type,l=s.text,u=s.href));if("clicked_unclassified"===a){var h=Object(c.i)(t.target,"a",t.story);h instanceof HTMLAnchorElement&&t.storyContent.contains(h)&&(l=h.text,u=h.href)}return{fb_post_interaction_url:u,fb_post_interaction_text:l,fb_post_interaction_type:a}}(t))}),Object(i.h)(function(t){return"clicked_post_controls"!==t.fb_post_interaction_type}))}(t,n))};var r=n(42),o=n(20),i=n(34),s=n(74),a=n(410),c=(n.n(a),n(16)),u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function newCommentElement(t){return Object(s.k)(t,".UFIRow.UFIComment.UFIUnseenItem",!1)}function delegateEvent(t,e,n,r){return Object(o.i)(t,e,r).pipe(Object(i.i)(function(e){return e.target instanceof HTMLElement&&t.contains(e.target)&&Object(c.i)(e.target,n,t)||null}),Object(i.h)(function(t){return null!==t}))}},function(t,e,n){var r=n(411),o=function(t,e,n){var i=t.tagName.toLowerCase(),s=[i],a=t.getAttribute("class"),c=t.getAttribute("id");return c?(n.unshift(i+"#"+r(c)),n):(a&&s.push(function(t){for(var e=t.split(/\s/g),n=[],r=0;r<e.length;++r)e[r].length>0&&n.push("."+e[r]);return n.join("")}(a)),"html"!==i&&"body"!==i&&t.parentNode&&s.push(":nth-child("+function(t){for(var e=0,n=t.parentNode.childNodes,r=0;r<n.length;++r)if(1===n[r].nodeType&&++e,n[r]===t)return e}(t)+")"),n.unshift(s.join("")),t.parentNode&&t.parentNode!==e&&t.parentNode.tagName&&o(t.parentNode,e,n),n)};t.exports=function(t,e){return o(t,e,[]).join(" > ")}},function(t,e){(e=t.exports=function trim(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){"use strict";e.a=function SetupSentryInterception(t,e){return Object(r.b)(function(e){if(e.requestHeaders){for(var n=null,r=0,o=e.requestHeaders;r<o.length;r++){var i=o[r];if("origin"===i.name.toLowerCase()){n=i;break}}n||(t.info("Missing origin field! adding it now!."),n={name:"Origin",value:location.href},e.requestHeaders.push(n)),n.value=location.href}return{requestHeaders:e.requestHeaders}},{urls:["*://sentry.io/api/"+e+"*"]},["blocking","requestHeaders","extraHeaders"])};var r=n(175)},function(t,e,n){"use strict";e.a=function setUpHeartbeatAudit(t,e){r.a&&e&&Object(o.l)(r.a.tabs.onUpdated.pipe(Object(i.h)(function(t){var e=t.changeInfo;return"loading"===e.status||"complete"===e.status})),r.a.tabs.onCreated).pipe(Object(i.i)(function(t){return t.tab}),Object(i.h)(function(t){var e;return void 0!==(null===(e=t)||void 0===e?void 0:e.url)}),Object(i.i)(function(t){return new URL(t.url).hostname}),Object(i.f)(),Object(i.i)(function(t){var e=t.split(".");return e.length<2?null:e[e.length-2]}),Object(i.h)(s.d),Object(i.r)(function(e){return t.crossMessage.pipe(Object(i.h)(function(t){return"AdBlockerStatus"===t.type}),Object(i.i)(function(t){return t.payload.ad_blocker_enabled}),Object(i.t)(1),Object(i.v)(2e3,Object(o.m)(null)),Object(i.i)(function(t){return{type:"Navigation",payload:{channel:e,isAdBlockEnabled:t}}}))})).subscribe(t.auditEvents);Object(o.o)(0,36e5).pipe(Object(i.j)({type:"Heartbeat"})).subscribe(t.auditEvents)};var r=n(177),o=n(20),i=n(34),s=n(60)},function(t,e,n){"use strict";e.a=function extractSponsoredFromTwitterHomePayload(t){var e=function getSponsoredTimelineEntriesFromPayload(t){return Object(r.p)(function(){return t.timeline.instructions.flatMap(function(t){var e;return(null===(e=t.addEntries)||void 0===e?void 0:e.entries)?t.addEntries.entries.filter(function(t){return Object(r.p)(function(){return t.entryId.startsWith("promotedTweet-")||"item"in t.content&&"tweet"in t.content.item.content&&"promotedMetadata"in t.content.item.content.tweet},!1)}).map(function(t){return Object(r.p)(function(){return t.content.item.content.tweet},null)}):[]}).filter(r.q)},[]).filter(r.q)}(t),n=new Set(e.map(function(t){return t.id}));return Object.entries(t.globalObjects.tweets).filter(function(t){var e=t[0];return n.has(e)}).map(function(t){var n=t[0],r=t[1];return{tweet:r,timelineData:e.find(function(t){return t.id===n})}}).map(function(e){var n=e.tweet,o=e.timelineData,i=Object(r.p)(function(){return t.globalObjects.users[n.user_id_str]},{name:"default N/A",screen_name:"default N/A"}),s=i.name,a=i.screen_name;return{tw_perma_link:"https://twitter.com/"+a+"/status/"+n.id_str,tw_user_screen_name:a,tw_user_display_name:s,tw_tweet_id:n.id_str,tw_user_id:n.user_id_str,tw_tweet_display_type:o.displayType}})};var r=n(16)},function(t,e,n){"use strict"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(148),o=n(168),i=Object(r.j)(window,window.document),s=new r.g(window.localStorage,window.crypto);function bindCheckbox(t,e,n){document.querySelector(t).checked=n,document.querySelector(t).addEventListener("change",e)}i.then(function(t){t("create","UA-120225139-1","auto"),t("set","checkProtocolTask",null),Object(o.m)(t,"ab75204","master",chrome.runtime.id,s.deviceId,chrome.runtime.getManifest().version,s.thirdPartyIdIS,s.thirdPartyCookie),Object(o.n)(t,window),t("send","pageview","options")}),bindCheckbox("#ShouldShowFoundPosts",function(){s.shouldShowFoundPosts=this.checked},s.shouldShowFoundPosts),bindCheckbox("#OptOut",function(){chrome.extension.getBackgroundPage().ChangeOptOutStatus(this.checked)},s.user_opted_out),document.querySelector("#uniqueIdText").innerText=""+s.deviceId}]);
//# sourceMappingURL=options.js.map