/*! UTC: 2020-09-13T08:24:06.873Z | ab75204 | 2.10.1445 */!function(t){var e={};function __webpack_require__(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=670)}([,,,function(t,e,n){"use strict";e.a=function __extends(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};Object.assign},function(t,e){var n,r,o=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(n===setTimeout)return setTimeout(t,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){n=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){r=defaultClearTimeout}}();var i,a=[],s=!1,c=-1;function cleanUpNextTick(){s&&i&&(s=!1,i.length?a=i.concat(a):c=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var t=runTimeout(cleanUpNextTick);s=!0;for(var e=a.length;e;){for(i=a,a=[];++c<e;)i&&i[c].run();c=-1,e=a.length}i=null,s=!1,function runClearTimeout(t){if(r===clearTimeout)return clearTimeout(t);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new Item(t,e)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(3),o=n(50),i=n(106),a=n(14),s=n(78),c=n(55),u=n(76),l=function(t){function Subscriber(e,n,r){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=i.a;break;case 1:if(!e){o.destination=i.a;break}if("object"==typeof e){e instanceof Subscriber?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new f(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new f(o,e,n,r)}return o}return r.a(Subscriber,t),Subscriber.prototype[s.a]=function(){return this},Subscriber.create=function(t,e,n){var r=new Subscriber(t,e,n);return r.syncErrorThrowable=!1,r},Subscriber.prototype.next=function(t){this.isStopped||this._next(t)},Subscriber.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(t){this.destination.next(t)},Subscriber.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},Subscriber}(a.a),f=function(t){function SafeSubscriber(e,n,r,a){var s,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return Object(o.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==i.a&&(u=Object.create(n),Object(o.a)(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=s,c._error=r,c._complete=a,c}return r.a(SafeSubscriber,t),SafeSubscriber.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},SafeSubscriber.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}},SafeSubscriber.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.a.useDeprecatedSynchronousErrorHandling)throw t;Object(u.a)(t)}},SafeSubscriber.prototype.__tryOrSetError=function(t,e,n){if(!c.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return c.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(u.a)(e),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},SafeSubscriber}(l)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(75),o=n(188),i=n(39),a=n(89),s=n(55),c=function(){function Observable(t){this._isScalar=!1,t&&(this._subscribe=t)}return Observable.prototype.lift=function(t){var e=new Observable;return e.source=this,e.operator=t,e},Observable.prototype.subscribe=function(t,e,n){var r=this.operator,i=Object(o.a)(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||s.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},Observable.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}},Observable.prototype.forEach=function(t,e){var n=this;return new(e=getPromiseCtor(e))(function(e,r){var o;o=n.subscribe(function(e){try{t(e)}catch(t){r(t),o&&o.unsubscribe()}},r,e)})},Observable.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},Observable.prototype[i.a]=function(){return this},Observable.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(a.b)(t)(this)},Observable.prototype.toPromise=function(t){var e=this;return new(t=getPromiseCtor(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},Observable.create=function(t){return new Observable(t)},Observable}();function getPromiseCtor(t){if(t||(t=s.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},,,,function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function OuterSubscriber(){return null!==t&&t.apply(this,arguments)||this}return r.a(OuterSubscriber,t),OuterSubscriber.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},OuterSubscriber.prototype.notifyError=function(t,e){this.destination.error(t)},OuterSubscriber.prototype.notifyComplete=function(t){this.destination.complete()},OuterSubscriber}(n(5).a)},function(t,e,n){"use strict";e.a=function subscribeToResult(t,e,n,a,s){void 0===s&&(s=new r.a(t,n,a));if(s.closed)return;if(e instanceof i.a)return e.subscribe(s);return Object(o.a)(e)(s)};var r=n(35),o=n(80),i=n(6)},,,function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(17),o=n(77),i=n(50),a=n(107),s=function(){function Subscription(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return Subscription.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof Subscription)e.remove(this);else if(null!==e)for(var c=0;c<e.length;++c){e[c].remove(this)}if(Object(i.a)(n))try{n.call(this)}catch(e){t=e instanceof a.a?flattenUnsubscriptionErrors(e.errors):[e]}if(Object(r.a)(s)){c=-1;for(var u=s.length;++c<u;){var l=s[c];if(Object(o.a)(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof a.a?t=t.concat(flattenUnsubscriptionErrors(e.errors)):t.push(e)}}}if(t)throw new a.a(t)}},Subscription.prototype.add=function(t){var e=t;if(!t)return Subscription.EMPTY;switch(typeof t){case"function":e=new Subscription(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof Subscription)){var n=e;(e=new Subscription)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=e._parentOrParents;if(null===r)e._parentOrParents=this;else if(r instanceof Subscription){if(r===this)return e;e._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return e;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e},Subscription.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},Subscription.EMPTY=((t=new Subscription).closed=!0,t),Subscription}();function flattenUnsubscriptionErrors(t){return t.reduce(function(t,e){return t.concat(e instanceof a.a?e.errors:e)},[])}},,function(t,e,n){"use strict";e.g=function captureGlobalErrors(t,e,n){t.addEventListener("error",function(t){e&&t.preventDefault(),n(t)}),t.addEventListener("unhandledrejection",function(t){e&&t.preventDefault(),n(t)})},n.d(e,"z",function(){return f}),e.y=function safeSetInterval(t,e){var n=function(){r=f(n,e),t()},r=f(n,e);return function(){r()}},e.r=function makeDistincter(){var t=new Set;return function(e){return!t.has(e)&&(t.add(e),!0)}},e.s=function makeWeakDistincter(){var t=new WeakSet;return function(e){return!t.has(e)&&(t.add(e),!0)}},e.A=function sleep(t){return new Promise(function(e){return setTimeout(e,t)})},e.l=function fetchJson(t){return fetchText(t).then(function(t){if(!t)throw new Error("fetchJson - JSON empty");return JSON.parse(t)})},n.d(e,"c",function(){return d}),n.d(e,"d",function(){return h}),e.m=fetchText,e.w=function removeSrcFromImgs(t){for(var e=t.querySelectorAll("img"),n=0;n<e.length;n++)e[n].removeAttribute("src");return!0},e.x=function requestIdleCallbackPromise(t){void 0===t&&(t={timeout:50});return new Promise(function(e,n){!function requestIdleCallback(t,e){void 0===e&&(e={timeout:50});if("requestIdleCallback"in window)return window.requestIdleCallback(t,e);return setTimeout(function(){t({didTimeout:!0,timeRemaining:function(){return 0}})},e.timeout)}(e,t)})},e.a=function ChangeDomainInRavenReports(t,e,n){t.setDataCallback(function(t){if(t.stacktrace)changeFramesInRavenException(t,e,n);else if(t.exception)for(var r=t.exception.values,o=0,i=r;o<i.length;o++){var a=i[o];changeFramesInRavenException(a,e,n)}})},e.b=function ChangeDomainInRavenReportsAndSanetizeRavenEvent(t,e,n){t.setDataCallback(function(t){if(t.stacktrace)changeFramesInRavenException(t,e,n);else if(t.exception)for(var r=t.exception.values,o=0,i=r;o<i.length;o++){var a=i[o];changeFramesInRavenException(a,e,n)}if(t.request){if(t.request.url){var s=new URL(t.request.url);s.pathname="",s.search="",s.hash="",t.request.url=s.toString()}t.request.headers&&delete t.request.headers.Referer}})},e.h=function checkIfFirefox(){return navigator.userAgent.toLowerCase().search("firefox")>-1};var r=n(221);n.d(e,"o",function(){return r.a});var o=n(222);n.d(e,"v",function(){return o.a});var i=n(223);n.d(e,"e",function(){return i.a});var a=n(27);n.d(e,"f",function(){return a.a}),n.d(e,"i",function(){return a.b}),n.d(e,"j",function(){return a.c}),n.d(e,"k",function(){return a.d}),n.d(e,"n",function(){return a.e}),n.d(e,"p",function(){return a.g}),n.d(e,"q",function(){return a.i}),n.d(e,"t",function(){return a.j}),n.d(e,"u",function(){return a.k}),n.d(e,"B",function(){return a.l});var s,c=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=setTimeout;"undefined"!=typeof window&&window.setTimeout.nativeBackup&&(u=window.setTimeout.nativeBackup.bind(window));var l=clearTimeout;"undefined"!=typeof window&&window.clearTimeout.nativeBackup&&(l=window.clearTimeout.nativeBackup.bind(window));var f=function(t,e){var n=Math.pow(2,31)-1,r=e%n,o=Math.floor(e/n),i=0,a=null,s=function(){i===o?t():(i++,a=u(s,n))};return 0===r&&0!==e?s():a=u(s,r),function(){null!==a&&l(a)}};var d=function(t){function HTTPError(e,n,r,o,i){var a=t.call(this,e)||this;return a.httpCode=n,a.shortMessage=r,a.requestUrl=o,a.responseUrl=i,a.name="HTTPError",Object.setPrototypeOf(a,HTTPError.prototype),a}return c(HTTPError,t),HTTPError}(Error),h=function(t){function HTTPIOError(e,n,r,o,i){var a=t.call(this,e)||this;return a.shortMessage=n,a.requestUrl=r,a.type=o,a.responseURL=i,a.name="HTTPIOError",Object.setPrototypeOf(a,HTTPIOError.prototype),a}return c(HTTPIOError,t),HTTPIOError}(Error);function fetchText(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=1e4),new Promise(function(r,o){var i=new XMLHttpRequest;i.responseType="text",i.open("GET",t),i.timeout=n;for(var a=0,s=e;a<s.length;a++){var c=s[a],u=c[0],l=c[1];i.setRequestHeader(u,l)}i.addEventListener("load",function(){200!==i.status?o(new d("status: "+i.status+"-"+i.statusText+"|req url:"+t,i.status,i.statusText,t,i.responseURL)):r(i.responseText)}),i.addEventListener("error",function onXHRError(e){o(new h("xhr.error","error",t,e.type,i.responseURL))}),i.addEventListener("abort",function onXHRAbort(e){o(new h("xhr.abort","error",t,e.type,i.responseURL))}),i.addEventListener("timeout",function onXHRTimeout(e){o(new h("xhr.timeout","error",t,e.type,i.responseURL))}),i.send()})}function changeFramesInRavenException(t,e,n){if(t.stacktrace)for(var r=0,o=t.stacktrace.frames;r<o.length;r++){var i=o[r];i.filename=i.filename.replace(n,e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}()},function(t,e,n){var r=n(49),o=n(429).f,i=n(102),a=n(430),s=n(270),c=n(489),u=n(493);t.exports=function(t,e){var n,l,f,d,h,p=t.target,b=t.global,v=t.stat;if(n=b?r:v?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in e){if(d=e[l],f=t.noTargetGet?(h=o(n,l))&&h.value:n[l],!u(b?l:p+(v?".":"#")+l,t.forced)&&void 0!==f){if(typeof d==typeof f)continue;c(d,f)}(t.sham||f&&f.sham)&&i(d,"sham",!0),a(n,l,d,t)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return f});var r=n(3),o=n(6),i=n(5),a=n(14),s=n(56),c=n(108),u=n(78),l=function(t){function SubjectSubscriber(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.a(SubjectSubscriber,t),SubjectSubscriber}(i.a),f=function(t){function Subject(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(Subject,t),Subject.prototype[u.a]=function(){return new l(this)},Subject.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},Subject.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},Subject.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},Subject.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new c.a(this,t))},Subject.prototype.asObservable=function(){var t=new o.a;return t.source=this,t},Subject.create=function(t,e){return new d(t,e)},Subject}(o.a),d=function(t){function AnonymousSubject(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.a(AnonymousSubject,t),AnonymousSubject.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},AnonymousSubject.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},AnonymousSubject.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},AnonymousSubject}(f)},function(t,e,n){"use strict";var r=n(6);n.d(e,"c",function(){return r.a});n(137),n(138),n(39);var o=n(19);n.d(e,"d",function(){return o.a});var i=n(139);n.d(e,"a",function(){return i.a});n(98),n(67),n(141);var a=n(21);n.d(e,"e",function(){return a.a});n(109),n(195),n(198),n(110),n(14),n(5),n(68),n(89),n(65),n(43),n(199),n(57),n(58),n(56),n(107),n(142);var s=n(200);n.d(e,"f",function(){return s.a});n(201),n(99),n(73);var c=n(92);n.d(e,"g",function(){return c.a});var u=n(29),l=(n(210),n(31));n.d(e,"h",function(){return l.a});var f=n(211);n.d(e,"i",function(){return f.a});var d=n(212);n.d(e,"j",function(){return d.a});n(213);var h=n(214);n.d(e,"k",function(){return h.a});n(215);var p=n(144);n.d(e,"l",function(){return p.a});n(115);var b=n(66);n.d(e,"m",function(){return b.a});n(216),n(217),n(218),n(146),n(219);var v=n(90);n.d(e,"n",function(){return v.a});var _=n(147);n.d(e,"o",function(){return _.a});n(220),n(100),n(114);n.d(e,"b",function(){return u.a});n(55)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(44),o=new(n(45).a)(r.a)},,,,,function(t,e,n){"use strict";e.a=function map(t,e){return function mapOperation(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function MapOperator(t,e){this.project=t,this.thisArg=e}return MapOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},MapOperator}(),a=function(t){function MapSubscriber(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return r.a(MapSubscriber,t),MapSubscriber.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},MapSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(224);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b}),n.d(e,"c",function(){return r.c}),n.d(e,"d",function(){return r.d}),n.d(e,"e",function(){return r.e}),n.d(e,"f",function(){return r.f}),n.d(e,"g",function(){return r.g}),n.d(e,"h",function(){return r.h}),n.d(e,"i",function(){return r.i}),n.d(e,"j",function(){return r.j}),n.d(e,"k",function(){return r.k}),n.d(e,"l",function(){return r.l}),n.d(e,"m",function(){return r.m})},,function(t,e,n){"use strict";n.d(e,"a",function(){return o}),e.b=function empty(t){return t?function emptyScheduled(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):o};var r=n(6),o=new r.a(function(t){return t.complete()})},function(t,e,n){"use strict";e.a=function isScheduler(t){return t&&"function"==typeof t.schedule}},function(t,e,n){"use strict";e.a=function from(t,e){return e?Object(i.a)(t,e):t instanceof r.a?t:new r.a(Object(o.a)(t))};var r=n(6),o=n(80),i=n(114)},function(t,e,n){"use strict";var r=n(170),o=n(383),i=Object.prototype.toString;function isArray(t){return"[object Array]"===i.call(t)}function isObject(t){return null!==t&&"object"==typeof t}function isFunction(t){return"[object Function]"===i.call(t)}function forEach(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),isArray(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:isArray,isArrayBuffer:function isArrayBuffer(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:o,isFormData:function isFormData(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function isArrayBufferView(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function isString(t){return"string"==typeof t},isNumber:function isNumber(t){return"number"==typeof t},isObject:isObject,isUndefined:function isUndefined(t){return void 0===t},isDate:function isDate(t){return"[object Date]"===i.call(t)},isFile:function isFile(t){return"[object File]"===i.call(t)},isBlob:function isBlob(t){return"[object Blob]"===i.call(t)},isFunction:isFunction,isStream:function isStream(t){return isObject(t)&&isFunction(t.pipe)},isURLSearchParams:function isURLSearchParams(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:forEach,merge:function merge(){var t={};function assignValue(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=merge(t[n],e):t[n]=e}for(var e=0,n=arguments.length;e<n;e++)forEach(arguments[e],assignValue);return t},extend:function extend(t,e,n){return forEach(e,function assignValue(e,o){t[o]=n&&"function"==typeof e?r(e,n):e}),t},trim:function trim(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){var r=n(101),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){"use strict";n(160),n(298),n(299);var r=n(300);n.d(e,"a",function(){return r.a});var o=n(301);n.d(e,"b",function(){return o.a});n(302),n(303);var i=n(304);n.d(e,"c",function(){return i.a});n(305),n(306),n(307),n(143);var a=n(161);n.d(e,"d",function(){return a.a});n(308),n(309),n(310);var s=n(311);n.d(e,"e",function(){return s.a});n(70),n(312),n(313),n(314),n(315);var c=n(163);n.d(e,"f",function(){return c.a});n(316),n(317),n(318),n(319),n(320),n(321);var u=n(322);n.d(e,"g",function(){return u.a});var l=n(51);n.d(e,"h",function(){return l.a});n(323),n(164),n(324),n(325),n(138),n(326),n(327),n(328);var f=n(26);n.d(e,"i",function(){return f.a});var d=n(329);n.d(e,"j",function(){return d.a});n(330),n(331),n(332);var h=n(91);n.d(e,"k",function(){return h.a});var p=n(59);n.d(e,"l",function(){return p.a});n(333),n(334),n(335),n(54),n(140),n(336);var b=n(337);n.d(e,"m",function(){return b.a});n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(94),n(345),n(346),n(347);var v=n(348);n.d(e,"n",function(){return v.a});n(97),n(349),n(350);var _=n(118);n.d(e,"o",function(){return _.a});n(351),n(352);var y=n(353);n.d(e,"p",function(){return y.a});n(354),n(355),n(356),n(357),n(358);var m=n(359);n.d(e,"q",function(){return m.a});n(360),n(362);var g=n(119);n.d(e,"r",function(){return g.a});var w=n(363);n.d(e,"s",function(){return w.a});var S=n(116);n.d(e,"t",function(){return S.a});n(117),n(364),n(365);var x=n(366);n.d(e,"u",function(){return x.a});n(165),n(367),n(93),n(368),n(369);var O=n(166);n.d(e,"v",function(){return O.a});n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function InnerSubscriber(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return r.a(InnerSubscriber,t),InnerSubscriber.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(n(5).a)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(49),o=n(426),i=n(63),a=n(427),s=n(435),c=n(496),u=o("wks"),l=r.Symbol,f=c?l:l&&l.withoutSetter||a;t.exports=function(t){return i(u,t)||(s&&i(l,t)?u[t]=l[t]:u[t]=f("Symbol."+t)),u[t]}},,function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(268);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(244);n.d(e,"i",function(){return r.a});var o=n(250);n.d(e,"a",function(){return o.a}),n.d(e,"b",function(){return o.b}),n.d(e,"c",function(){return o.c}),n.d(e,"d",function(){return o.d}),n.d(e,"e",function(){return o.e}),n.d(e,"f",function(){return o.f}),n.d(e,"g",function(){return o.g}),n.d(e,"h",function(){return o.h}),n.d(e,"j",function(){return o.i}),n.d(e,"k",function(){return o.j}),n.d(e,"l",function(){return o.k}),n.d(e,"m",function(){return o.l}),n.d(e,"n",function(){return o.m}),n.d(e,"o",function(){return o.n}),n.d(e,"p",function(){return o.o}),n.d(e,"q",function(){return o.p}),n.d(e,"r",function(){return o.q}),n.d(e,"s",function(){return o.r}),n.d(e,"t",function(){return o.s})},function(t,e,n){"use strict";e.a=function identity(t){return t}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AsyncAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(AsyncAction,t),AsyncAction.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},AsyncAction.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},AsyncAction.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},AsyncAction.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},AsyncAction.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},AsyncAction}(n(190).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(3),o=n(110),i=function(t){function AsyncScheduler(e,n){void 0===n&&(n=o.a.now);var r=t.call(this,e,function(){return AsyncScheduler.delegate&&AsyncScheduler.delegate!==r?AsyncScheduler.delegate.now():n()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return r.a(AsyncScheduler,t),AsyncScheduler.prototype.schedule=function(e,n,r){return void 0===n&&(n=0),AsyncScheduler.delegate&&AsyncScheduler.delegate!==this?AsyncScheduler.delegate.schedule(e,n,r):t.prototype.schedule.call(this,e,n,r)},AsyncScheduler.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},AsyncScheduler}(o.a)},function(t,e,n){"use strict";e.a=function fromArray(t,e){return e?Object(i.a)(t,e):new r.a(Object(o.a)(t))};var r=n(6),o=n(111),i=n(79)},function(t,e,n){"use strict";function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return r});var r=getSymbolIterator()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});var i=function(t){function FacebookIdFetchError(e,n){var r=t.call(this,function buildErrorMessage(t,e){return("logged-out"===t?"The user is probably not logged in to facebook":"failed getting facebook user id")+" (source: "+e+")"}(e,n))||this;return r.reason=e,r.source=n,Object.setPrototypeOf(r,FacebookIdFetchError.prototype),r}return o(FacebookIdFetchError,t),FacebookIdFetchError}(Error)},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(e,n(36))},function(t,e,n){"use strict";e.a=function isFunction(t){return"function"==typeof t}},function(t,e,n){"use strict";e.a=function filter(t,e){return function filterOperatorFunction(n){return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function FilterOperator(t,e){this.predicate=t,this.thisArg=e}return FilterOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))},FilterOperator}(),a=function(t){function FilterSubscriber(e,n,r){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return r.a(FilterSubscriber,t),FilterSubscriber.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},FilterSubscriber}(o.a)},function(t,e,n){var r=n(37),o=n(436),i=n(62),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},,function(t,e,n){"use strict";e.a=function multicast(t,e){return function multicastOperatorFunction(n){var i;if(i="function"==typeof t?t:function subjectFactory(){return t},"function"==typeof e)return n.lift(new o(i,e));var a=Object.create(n,r.a);return a.source=n,a.subjectFactory=i,a}};var r=n(137);var o=function(){function MulticastOperator(t,e){this.subjectFactory=t,this.selector=e}return MulticastOperator.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},MulticastOperator}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype),ObjectUnsubscribedErrorImpl}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype),ArgumentOutOfRangeErrorImpl}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function EmptyErrorImpl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return EmptyErrorImpl.prototype=Object.create(Error.prototype),EmptyErrorImpl}()},function(t,e,n){"use strict";e.a=function mergeMap(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY);if("function"==typeof e)return function(r){return r.pipe(mergeMap(function(n,r){return Object(c.a)(t(n,r)).pipe(Object(s.a)(function(t,o){return e(n,t,r,o)}))},n))};"number"==typeof e&&(n=e);return function(e){return e.lift(new u(t,n))}};var r=n(3),o=n(11),i=n(10),a=n(35),s=n(26),c=n(31);var u=function(){function MergeMapOperator(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return MergeMapOperator.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent))},MergeMapOperator}(),l=function(t){function MergeMapSubscriber(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r.a(MergeMapSubscriber,t),MergeMapSubscriber.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},MergeMapSubscriber.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},MergeMapSubscriber.prototype._innerSub=function(t,e,n){var r=new a.a(this,void 0,void 0);this.destination.add(r),Object(o.a)(this,t,e,n,r)},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},MergeMapSubscriber.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},MergeMapSubscriber.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(i.a)},function(t,e,n){"use strict";n.d(e,"e",function(){return a}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return c});var r=n(236);n.d(e,"d",function(){return r.a});var o,i,a=["LIKE","LOVE","HAHA","WOW","ANGER","SORRY"];!function(t){t[t.pageview=0]="pageview",t[t.screenview=1]="screenview",t[t.event=2]="event",t[t.transaction=3]="transaction",t[t.item=4]="item",t[t.social=5]="social",t[t.exception=6]="exception",t[t.timing=7]="timing"}(o||(o={})),function(t){t[t.Headline=0]="Headline",t[t.Banner=1]="Banner",t[t.Product=2]="Product"}(i||(i={}));var s="(*&Y(UHsx#4",c="1q2w3e4r"},function(t,e,n){"use strict";e.a=function extractLinkFromFbRedirector(t){if(!function isFacebookRedirectorUrl(t){return t.startsWith("https://l.facebook.com/")||t.startsWith("http://l.facebook.com/")||t.startsWith("https://lm.facebook.com/")||t.startsWith("http://lm.facebook.com/")}(t))return t;var e=r.parse(r.extract(t)).u;if("string"==typeof e&&e.startsWith("http"))return e;return t};var r=n(125);n.n(r)},function(t,e,n){var r=n(71),o=n(424),i=n(103),a=n(271),s=Object.defineProperty;e.f=r?s:function defineProperty(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r=n(40);t.exports=function(t,e){var n=[][t];return!n||!r(function(){n.call(null,e||function(){throw 1},1)})}},function(t,e,n){"use strict";e.a=function noop(){}},function(t,e,n){"use strict";e.a=function of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(r.a)(n)?(t.pop(),Object(i.a)(t,n)):Object(o.a)(t)};var r=n(30),o=n(46),i=n(79)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=n(19),i=n(14),a=function(t){function AsyncSubject(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.a(AsyncSubject,t),AsyncSubject.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),i.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),i.a.EMPTY):t.prototype._subscribe.call(this,e)},AsyncSubject.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},AsyncSubject.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},AsyncSubject.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},AsyncSubject}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,o=n(29),i=n(66),a=n(90);r||(r={});var s=function(){function Notification(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return Notification.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},Notification.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},Notification.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},Notification.prototype.toObservable=function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(a.a)(this.error);case"C":return Object(o.b)()}throw new Error("unexpected notification kind value")},Notification.createNext=function(t){return void 0!==t?new Notification("N",t):Notification.undefinedValueNotification},Notification.createError=function(t){return new Notification("E",void 0,t)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}()},function(t,e,n){"use strict";e.a=function isNumeric(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0};var r=n(17)},function(t,e,n){"use strict";e.a=function defaultIfEmpty(t){void 0===t&&(t=null);return function(e){return e.lift(new i(t))}};var r=n(3),o=n(5);var i=function(){function DefaultIfEmptyOperator(t){this.defaultValue=t}return DefaultIfEmptyOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.defaultValue))},DefaultIfEmptyOperator}(),a=function(t){function DefaultIfEmptySubscriber(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.a(DefaultIfEmptySubscriber,t),DefaultIfEmptySubscriber.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(o.a)},function(t,e,n){var r=n(40);t.exports=!r(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";e.a=function concat(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(o.a)()(r.a.apply(void 0,t))};var r=n(66),o=n(143)},function(t,e,n){"use strict";e.f=function documentReady(t){return new Promise(function(e,n){var r=function(){t.removeEventListener("DOMContentLoaded",r),e()};"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?e():t.addEventListener("DOMContentLoaded",r)})},e.b=function addStyleString(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},e.j=function processStory(t,e,n,i,a,s){return l(this,void 0,void 0,function(){var c,l,h,p,b,v;return f(this,function(f){switch(f.label){case 0:return[4,Object(o.x)({timeout:50})];case 1:f.sent(),c=!1,l=5,f.label=2;case 2:return(h=l>0)?[4,ensureStoryLoaded(t,e)]:[3,4];case 3:h=!(c=f.sent()),f.label=4;case 4:return h?[4,Object(o.A)(1e3)]:[3,7];case 5:f.sent(),f.label=6;case 6:return l--,[3,2];case 7:return c||s.warn("Story isn't loaded!",t),p=e.isStorySponsored(t),b=r.m.tryExtractStoryEntityId(t),p||!b?[3,10]:[4,n];case 8:return[4,f.sent()(b)];case 9:(v=f.sent())&&v.isSponsored&&(s.error("This story is sponsored, but DOM detection thought it wasnt.... try again",t),p=!0),f.label=10;case 10:return p?[2,processSponsoredStory(e,t,i,a,n).then(function(t){return u(u({},t),{wasLoaded:c,isSponsered:!0})})]:[2,processRegularStory(e,t,i).then(function(t){t.diag;var e=d(t,["diag"]);return u(u({},e),{isSponsered:!1})})]}})})},e.k=selectorObserver,e.d=function desktopTryGetFbId(t){if("new"===Object(r.n)(t.documentElement)){var e=Object(r.p)(t.documentElement).id;if(!e)throw new Error("Failed to parse user id for new Facebook UI");return e}var n=t.querySelector("img[id*='profile_pic_header']");if(null!==n){if(!(n instanceof HTMLImageElement))throw new RangeError("profile image selector has no results");var o=(n.getAttribute("id")||"").match("profile_pic_header_([0-9]*)");if(null===o||2!==o.length)throw new RangeError("failed to parse profile image id: "+n.getAttribute("id"));return o[1]}throw new Error("Failed to parse user id for old Facebook UI")},e.c=function desktopNewsfeedObserver(t,e){return newsfeedObserverBase(t,e,"div#stream_pagelet")},e.e=function desktopTwitterFeedObserver(t){return selectorObserver(t.body,"#stream-items-id",!0)},e.h=function highlightPost(t,e,n,r){var o=t.createElement("pre");o.textContent=r;var i=t.createElement("span");i.textContent="π";var a=t.createElement("span");a.classList.add("tooltiptext"),a.appendChild(o);var s=t.createElement("div");s.classList.add("tooltip"),s.appendChild(i),s.appendChild(a),e.appendChild(s),e.style.boxShadow="0px 0px 10px "+(n?"red":"green")},e.g=function getLocaleDesktop(t){if("new"===Object(r.n)(t.documentElement)){var e=Object(r.p)(t.documentElement).locale;if(!e)throw new Error("failed get locale for new UI");return e}var n=Array.from(t.body.classList).find(function(t){return t.startsWith("Locale")});if(null==n){var o=t.body.innerHTML.match(/"locale":"(\w+)"/);if(o&&o[1])return o[1]}var i=null;"string"==typeof n&&(i=n.replace("Locale_",""));if(null===i)throw new Error("failed get local");return i},n.d(e,"a",function(){return p});var r=n(42),o=n(16),i=n(60),a=n(20),s=n(34),c=n(403);n.d(e,"i",function(){return c.a});var u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},f=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};function processRegularStory(t,e,n){return Promise.resolve().then(function(){var r=[],o=u(u({},t.parseRegularStory(e,r)),{fb_user_id:n});if(null===o.fb_post_entity_id)throw new Error("fb_post_entity_id is null");return{diag:r,dataToSend:o}})}function processSponsoredStory(t,e,n,r,o){if(null!==e.querySelector(".fbInternPreview"))throw new Error(".fbInternPreview");var i=[],a=t.parseSponsoredFeedStory(e,i);if(null===a.fb_post_entity_id)throw new Error("fb_post_entity_id is null");var s=window.getComputedStyle(e),c=null!==s.width?parseInt(s.width.replace("px",""),10):null,l=null!==s.height?parseInt(s.height.replace("px",""),10):null;null===c||isFinite(c)||(c=null),null===l||isFinite(l)||(l=null);var f=u(u({},a),{fb_post_width:c,fb_post_height:l,fb_user_id:n}),d=f.fb_post_entity_id;if(null===d)throw new RangeError("Unexpected branch");return Promise.resolve().then(function(){return o(d)}).then(function(e){return null!==e&&(f=function addReactData(t,e,n,r){var o=function createReactionMap(t,e){if(!t)return h;var n=t.edges.reduce(function(t,n){var r=null!=n.reaction_count?n.reaction_count:e(n.i18n_reaction_count);return t[n.node.reaction_type]=r,t},{});return u(u({},h),n)}(t.reactions,function(t){return n.parseStringedNumber(t,r)});return u(u({},e),{fb_post_engage_like:o.LIKE,fb_post_engage_love:o.LOVE,fb_post_engage_wow:o.WOW,fb_post_engage_angry:o.ANGER,fb_post_engage_haha:o.HAHA,fb_post_engage_sad:o.SORRY,fb_post_engage_comments:t.commentsReduced?t.commentsReduced:null,fb_post_engage_shares:t.shareCount,fb_post_video_views:t.viewCount&&Number.isFinite(t.viewCount)?t.viewCount:null,fb_post_this_video_views:t.postViewCount&&Number.isFinite(t.postViewCount)?t.postViewCount:null,fb_post_width:t.width})}(e,f,t,r)),{diag:i,dataToSend:f}})}function ensureStoryLoaded(t,e){return l(this,void 0,void 0,function(){var n,r;return f(this,function(o){switch(o.label){case 0:if(n=5,e.isStoryLoaded(t))return[2,!0];r=0,o.label=1;case 1:return r<n?[4,childListChangedOnce(t,500)]:[3,4];case 2:if(o.sent(),e.isStoryLoaded(t))return[2,!0];o.label=3;case 3:return r++,[3,1];case 4:return[2,!1]}})})}function childListChangedOnce(t,e){return l(this,void 0,void 0,function(){return f(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,new Promise(function(n,r){var i=new MutationObserver(function(t){i.disconnect(),a(),n()}),a=Object(o.z)(function(){i.disconnect(),r()},e);i.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!1})})];case 1:return n.sent(),[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})}function selectorObserver(t,e,n){return void 0===n&&(n=!0),new a.c(function(r){if(n)for(var o=0,i=Array.from(t.querySelectorAll(e));o<i.length;o++){var a=i[o];if(!(a instanceof HTMLElement))return;r.next(a)}var s=new MutationObserver(function(t){for(var n=0,o=t;n<o.length;n++)for(var i=o[n],a=0,s=Array.from(i.addedNodes);a<s.length;a++){var c=s[a];if(!(c instanceof HTMLElement))return;c.matches(e)&&r.next(c);for(var u=0,l=Array.from(c.querySelectorAll(e));u<l.length;u++){var f=l[u];if(!(f instanceof HTMLElement))return;r.next(f)}}});return s.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),function(){s.disconnect()}}).pipe(Object(s.h)(Object(o.s)()))}function newsfeedObserverBase(t,e,n){var r=!1;return selectorObserver(t.body,n,!0).pipe(Object(s.h)(function(t){return"hidden"!==getComputedStyle(t).visibility&&r!==t}),Object(s.d)(function(t){return t&&r?Object(a.m)(!1,t):Object(a.m)(t)}),Object(s.u)(function(t){r=t}))}var h=i.e.reduce(function(t,e){return t[e]=null,t},{});var p=function(){function AmazonFrameHandler(t){this.chromeRuntimeId=t,this.selectorMap=new Map([["ape_Detail_ams-detail-right-v2_Desktop_iframe","AMS"],["ape_Detail_hero-quick-promo_Desktop_iframe","Hero"]])}return AmazonFrameHandler.prototype.GetFrameType=function(t){return this.selectorMap.has(t)?this.selectorMap.get(t):null},AmazonFrameHandler.prototype.GetFrameSelectors=function(){return Array.from(this.selectorMap.keys())},AmazonFrameHandler.prototype.CreateMessageId=function(t){return o.e.salted_hash(t+"_"+this.chromeRuntimeId,i.b)},AmazonFrameHandler}()},function(t,e,n){"use strict";e.a=function canReportError(t){for(;t;){var e=t,n=e.closed,o=e.destination,i=e.isStopped;if(n||i)return!1;t=o&&o instanceof r.a?o:null}return!0};var r=n(5)},function(t,e,n){"use strict";e.a=function hostReportError(t){setTimeout(function(){throw t},0)}},function(t,e,n){"use strict";e.a=function isObject(t){return null!==t&&"object"==typeof t}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(t,e,n){"use strict";e.a=function scheduleArray(t,e){return new r.a(function(n){var r=new o.a,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})};var r=n(6),o=n(14)},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(111),o=n(202),i=n(203),a=n(204),s=n(112),c=n(113),u=n(77),l=n(47),f=n(39),d=function(t){if(t&&"function"==typeof t[f.a])return Object(a.a)(t);if(Object(s.a)(t))return Object(r.a)(t);if(Object(c.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[l.a])return Object(i.a)(t);var e=Object(u.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";e.a=function extractStateOrCountry(t){var e,n=t.split(",");return(null===(e=n[n.length-1])||void 0===e?void 0:e.trim())||null},e.b=function fetchDocument(t){var e=t.fetchText,n=t.urlString,a=t.addId,s=void 0===a?"r":a,c=t.headers;return o(this,void 0,void 0,function(){var t,o,a;return i(this,function(i){switch(i.label){case 0:return t=new URL(n),!1!==s&&t.searchParams.append(s,Date.now().toString()),[4,e(t.toString(),c)];case 1:return o=i.sent(),a=Object(r.j)(o),Object(r.w)(a),[2,a]}})})};var r=n(16),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}},function(t,e,n){"use strict";var r=n(126);n.d(e,"j",function(){return r.a});var o=n(127);n.d(e,"i",function(){return o.a});var i=n(83);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return i.b}),n.d(e,"c",function(){return i.c}),n.d(e,"d",function(){return i.d}),n.d(e,"e",function(){return i.e}),n.d(e,"f",function(){return i.f}),n.d(e,"g",function(){return i.g}),n.d(e,"h",function(){return i.h})},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return c}),n.d(e,"a",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"i",function(){return f});var r="div[data-testid=fbfeed_story][id^='hyperfeed_story_id']",o="form.commentable_item",i="input[name=ft_ent_identifier]",a="[data-testid='fb-ufi-likelink']",s="[data-testid='ufi_share_link_loaded']",c="[data-reaction]",u='a[data-hovercard]:not([href="#"])',l=".PageLikeButton",f="ArticleCacheKey"},function(t,e,n){"use strict";e.b=function isCometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed(t){return"label"in t&&"CometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed"===t.label},e.h=function isInitialData(t){return"viewer"in t.data&&t.data.viewer.news_feed&&Array.isArray(t.data.viewer.news_feed.edges)},e.j=function isSponsored(t){return"SPONSORED"===t.category},e.i=function isOrganic(t){return"ORGANIC"===t.category},e.f=function isFbRawInteractionResponse(t){var e=t;return Object(r.g)(function(){return!!e.data.feedback_react.feedback.viewer_feedback_reaction_info},!1)},n.d(e,"q",function(){return o}),n.d(e,"n",function(){return i}),n.d(e,"l",function(){return a}),n.d(e,"p",function(){return s}),n.d(e,"m",function(){return c}),n.d(e,"o",function(){return u}),n.d(e,"k",function(){return l}),n.d(e,"e",function(){return f}),n.d(e,"r",function(){return d}),n.d(e,"g",function(){return h}),n.d(e,"c",function(){return p}),n.d(e,"d",function(){return b}),n.d(e,"a",function(){return v});var r=n(27);function isGqlTypeGuardFactory(t){return function(e){if(!e||"object"!=typeof e)return!1;return"__typename"in e&&e.__typename===t}}var o=isGqlTypeGuardFactory("StoryAttachmentVideoStyleRenderer"),i=isGqlTypeGuardFactory("StoryAttachmentMultiShareStyleRenderer"),a=isGqlTypeGuardFactory("StoryAttachmentEventStyleRenderer"),s=isGqlTypeGuardFactory("StoryAttachmentShareStyleRenderer"),c=isGqlTypeGuardFactory("StoryAttachmentLeadGenLinkRenderer"),u=isGqlTypeGuardFactory("StoryAttachmentPhotoStyleRenderer"),l=isGqlTypeGuardFactory("StoryAttachmentAlbumStyleRenderer"),f=isGqlTypeGuardFactory("ExternalUrl"),d=isGqlTypeGuardFactory("Video"),h=isGqlTypeGuardFactory("GenericAttachmentMedia"),p=isGqlTypeGuardFactory("CometStoryAttachmentFooterGenericShareStrategy"),b=isGqlTypeGuardFactory("CometStoryAttachmentFooterGenericVideoStrategy"),v=(isGqlTypeGuardFactory("CometStoryAttachedStoryStrategy"),isGqlTypeGuardFactory("CometFeedStoryAudienceStrategy"))},function(t,e,n){var r=n(156),o=n(268);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(275);t.exports=Array.isArray||function isArray(t){return"Array"==r(t)}},function(t,e,n){var r=n(278),o=n(156),i=n(41),a=n(33),s=n(134),c=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,f=6==t,d=5==t||f;return function(h,p,b,v){for(var _,y,m=i(h),g=o(m),w=r(p,b,3),S=a(g.length),x=0,O=v||s,E=e?O(h,S):n?O(h,0):void 0;S>x;x++)if((d||x in g)&&(y=w(_=g[x],x,m),t))if(e)E[x]=y;else if(y)switch(t){case 3:return!0;case 5:return _;case 6:return x;case 2:c.call(E,_)}else if(l)return!1;return f?-1:u||l?l:E}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},,function(t,e,n){"use strict";e.a=function pipe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pipeFromArray(t)},e.b=pipeFromArray;var r=n(65);function pipeFromArray(t){return t?1===t.length?t[0]:function piped(e){return t.reduce(function(t,e){return e(t)},e)}:r.a}},function(t,e,n){"use strict";e.a=function throwError(t,e){return e?new r.a(function(n){return e.schedule(dispatch,0,{error:t,subscriber:n})}):new r.a(function(e){return e.error(t)})};var r=n(6);function dispatch(t){var e=t.error;t.subscriber.error(e)}},function(t,e,n){"use strict";e.a=function mergeAll(t){void 0===t&&(t=Number.POSITIVE_INFINITY);return Object(r.a)(o.a,t)};var r=n(59),o=n(43)},function(t,e,n){"use strict";e.a=function defer(t){return new r.a(function(e){var n;try{n=t()}catch(t){return void e.error(t)}var r=n?Object(o.a)(n):Object(i.b)();return r.subscribe(e)})};var r=n(6),o=n(31),i=n(29)},function(t,e,n){"use strict";e.a=function throwIfEmpty(t){void 0===t&&(t=defaultErrorFactory);return function(e){return e.lift(new a(t))}};var r=n(3),o=n(58),i=n(5);var a=function(){function ThrowIfEmptyOperator(t){this.errorFactory=t}return ThrowIfEmptyOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.errorFactory))},ThrowIfEmptyOperator}(),s=function(t){function ThrowIfEmptySubscriber(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.a(ThrowIfEmptySubscriber,t),ThrowIfEmptySubscriber.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},ThrowIfEmptySubscriber.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},ThrowIfEmptySubscriber}(i.a);function defaultErrorFactory(){return new o.a}},function(t,e,n){"use strict";e.a=function reduce(t,e){if(arguments.length>=2)return function reduceOperatorFunctionWithSeed(n){return Object(a.a)(Object(r.a)(t,e),Object(o.a)(1),Object(i.a)(e))(n)};return function reduceOperatorFunction(e){return Object(a.a)(Object(r.a)(function(e,n,r){return t(e,n,r+1)}),Object(o.a)(1))(e)}};var r=n(118),o=n(117),i=n(70),a=n(89)},,,function(t,e,n){"use strict";e.a=function refCount(){return function refCountOperatorFunction(t){return t.lift(new i(t))}};var r=n(3),o=n(5);var i=function(){function RefCountOperator(t){this.connectable=t}return RefCountOperator.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new a(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},RefCountOperator}(),a=function(t){function RefCountSubscriber(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(RefCountSubscriber,t),RefCountSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},RefCountSubscriber}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(3),o=n(19),i=n(109),a=n(14),s=n(140),c=n(56),u=n(108),l=function(t){function ReplaySubject(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var o=t.call(this)||this;return o.scheduler=r,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return r.a(ReplaySubject,t),ReplaySubject.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},ReplaySubject.prototype.nextTimeWindow=function(e){this._events.push(new f(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},ReplaySubject.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new c.a;if(this.isStopped||this.hasError?e=a.a.EMPTY:(this.observers.push(t),e=new u.a(this,t)),o&&t.add(t=new s.a(t,o)),n)for(var l=0;l<i&&!t.closed;l++)t.next(r[l]);else for(l=0;l<i&&!t.closed;l++)t.next(r[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},ReplaySubject.prototype._getNow=function(){return(this.scheduler||i.a).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return o>e&&(i=Math.max(i,o-e)),i>0&&r.splice(0,i),r},ReplaySubject}(o.a),f=function(){return function ReplayEvent(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(3),o=(n(30),n(17),n(10)),i=n(11),a=(n(46),{});var s=function(){function CombineLatestOperator(t){this.resultSelector=t}return CombineLatestOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.resultSelector))},CombineLatestOperator}(),c=function(t){function CombineLatestSubscriber(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(CombineLatestSubscriber,t),CombineLatestSubscriber.prototype._next=function(t){this.values.push(a),this.observables.push(t)},CombineLatestSubscriber.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(i.a)(this,r,r,n))}}},CombineLatestSubscriber.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(t,e,n,r,o){var i=this.values,s=i[n],c=this.toRespond?s===a?--this.toRespond:this.toRespond:0;i[n]=e,0===c&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},CombineLatestSubscriber.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},CombineLatestSubscriber}(o.a)},function(t,e,n){"use strict";e.b=function zip(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];"function"==typeof n&&t.pop();return Object(o.a)(t,void 0).lift(new l(n))},n.d(e,"a",function(){return l});var r=n(3),o=n(46),i=n(17),a=n(5),s=n(10),c=n(11),u=n(47);var l=function(){function ZipOperator(t){this.resultSelector=t}return ZipOperator.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},ZipOperator}(),f=function(t){function ZipSubscriber(e,n,r){void 0===r&&(r=Object.create(null));var o=t.call(this,e)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof n?n:null,o.values=r,o}return r.a(ZipSubscriber,t),ZipSubscriber.prototype._next=function(t){var e=this.iterators;Object(i.a)(t)?e.push(new h(t)):"function"==typeof t[u.a]?e.push(new d(t[u.a]())):e.push(new p(this.destination,this,t))},ZipSubscriber.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(a=t[r]).hasValue&&!a.hasValue())return}var o=!1,i=[];for(r=0;r<e;r++){var a,s=(a=t[r]).next();if(a.hasCompleted()&&(o=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),o&&n.complete()},ZipSubscriber.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},ZipSubscriber}(a.a),d=function(){function StaticIterator(t){this.iterator=t,this.nextResult=t.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},StaticIterator.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},StaticIterator}(),h=function(){function StaticArrayIterator(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return StaticArrayIterator.prototype[u.a]=function(){return this},StaticArrayIterator.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),p=function(t){function ZipBufferIterator(e,n,r){var o=t.call(this,e)||this;return o.parent=n,o.observable=r,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return r.a(ZipBufferIterator,t),ZipBufferIterator.prototype[u.a]=function(){return this},ZipBufferIterator.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(t,e,n,r,o){this.buffer.push(e),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(t,e){return Object(c.a)(this,this.observable,this,e)},ZipBufferIterator}(s.a)},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(71),o=n(62),i=n(155);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(72);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},,,function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(55),o=n(76),i={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(o.a)(t)},complete:function(){}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function UnsubscriptionErrorImpl(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),UnsubscriptionErrorImpl}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function SubjectSubscription(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.a(SubjectSubscription,t),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},SubjectSubscription}(n(14).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(189),o=new(n(191).a)(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function Scheduler(t,e){void 0===e&&(e=Scheduler.now),this.SchedulerAction=t,this.now=e}return Scheduler.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},Scheduler.now=function(){return Date.now()},Scheduler}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";e.a=function isPromise(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,n){"use strict";e.a=function scheduled(t,e){if(null!=t){if(Object(s.a)(t))return Object(r.a)(t,e);if(Object(c.a)(t))return Object(o.a)(t,e);if(Object(u.a)(t))return Object(i.a)(t,e);if(Object(l.a)(t)||"string"==typeof t)return Object(a.a)(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")};var r=n(205),o=n(206),i=n(79),a=n(207),s=n(208),c=n(113),u=n(112),l=n(209)},function(t,e,n){"use strict";var r=n(6),o=n(65);o.a},function(t,e,n){"use strict";e.a=function take(t){return function(e){return 0===t?Object(a.b)():e.lift(new s(t))}};var r=n(3),o=n(5),i=n(57),a=n(29);var s=function(){function TakeOperator(t){if(this.total=t,this.total<0)throw new i.a}return TakeOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},TakeOperator}(),c=function(t){function TakeSubscriber(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(TakeSubscriber,t),TakeSubscriber.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function takeLast(t){return function takeLastOperatorFunction(e){return 0===t?Object(a.b)():e.lift(new s(t))}};var r=n(3),o=n(5),i=n(57),a=n(29);var s=function(){function TakeLastOperator(t){if(this.total=t,this.total<0)throw new i.a}return TakeLastOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},TakeLastOperator}(),c=function(t){function TakeLastSubscriber(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.a(TakeLastSubscriber,t),TakeLastSubscriber.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},TakeLastSubscriber.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,o=0;o<n;o++){var i=e++%n;t.next(r[i])}t.complete()},TakeLastSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function scan(t,e){var n=!1;arguments.length>=2&&(n=!0);return function scanOperatorFunction(r){return r.lift(new i(t,e,n))}};var r=n(3),o=n(5);var i=function(){function ScanOperator(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return ScanOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))},ScanOperator}(),a=function(t){function ScanSubscriber(e,n,r,o){var i=t.call(this,e)||this;return i.accumulator=n,i._seed=r,i.hasSeed=o,i.index=0,i}return r.a(ScanSubscriber,t),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},ScanSubscriber.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},ScanSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function switchMap(t,e){if("function"==typeof e)return function(n){return n.pipe(switchMap(function(n,r){return Object(c.a)(t(n,r)).pipe(Object(s.a)(function(t,o){return e(n,t,r,o)}))}))};return function(e){return e.lift(new u(t))}};var r=n(3),o=n(10),i=n(35),a=n(11),s=n(26),c=n(31);var u=function(){function SwitchMapOperator(t){this.project=t}return SwitchMapOperator.prototype.call=function(t,e){return e.subscribe(new l(t,this.project))},SwitchMapOperator}(),l=function(t){function SwitchMapSubscriber(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.a(SwitchMapSubscriber,t),SwitchMapSubscriber.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},SwitchMapSubscriber.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new i.a(this,void 0,void 0);this.destination.add(o),this.innerSubscription=Object(a.a)(this,t,e,n,o)},SwitchMapSubscriber.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},SwitchMapSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function findClosingBracketMatchIndex(t,e){if("{"!==t[e])throw new Error("No '{' at index "+e);for(var n=1,r=e+1;r<t.length;r++)switch(t[r]){case"{":n++;break;case"}":if(0==--n)return r}return-1}},function(t,e,n){"use strict";e.a=function objectFromEntries(t){return Array.from(t).reduce(function(t,e){var n=e[0],r=e[1];return t[n]=r,t},{})}},function(t,e,n){"use strict";e.a=function createFbqProvider(t,e){return new Promise(function(n,r){!function(t,e,r,o){if(!t.fbq){var i=t.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)};t._fbq||(t._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[];var a=e.createElement(r);a.async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js";var s=e.getElementsByTagName(r)[0];a.addEventListener("load",function(){n(t.fbq)}),s.parentNode.insertBefore(a,s)}}(t,e,"script")})}},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return c});var r=n(16),o=n(239),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s={id:"",birthday:{month:null,year:null},gender:null,relationshipStatus:null,userNameOnlyForAnonymizingTheHTMLDoNotSend:null,locale:null,stateOrCountry:null},c=function(){function FacebookMetadataProvider(t,e,n){var r=this;this.fetchText=t,this.log=e,this.trafficRegisterFunction=n,this._currentRequestPromise=null,this.metadataFetched=function(t){return r.available.set(t.id,t),r._currentRequestPromise=null,t},this.metadataFetchFailed=function(t){r._currentRequestPromise=null,r.log.error(t)},this.available=new Map,this.currentRequestPromise.then()}return FacebookMetadataProvider.prototype.getInterests=function(){return i(this,void 0,void 0,function(){var t,e;return a(this,function(n){switch(n.label){case 0:return[4,this.getCurrentUserId()];case 1:return t=n.sent(),[4,Object(o.b)(this.fetchText)];case 2:return e=n.sent(),[2,{id:t,interests:e}]}})})},Object.defineProperty(FacebookMetadataProvider.prototype,"currentRequestPromise",{get:function(){var t=this;return this._currentRequestPromise instanceof Promise||(this._currentRequestPromise=Object(o.a)(this.fetchText,this.trafficRegisterFunction).catch(function(e){return Object(r.A)(500).then(function(){return Object(o.a)(t.fetchText,t.trafficRegisterFunction)})}),this._currentRequestPromise.then(this.metadataFetched,this.metadataFetchFailed)),this._currentRequestPromise},enumerable:!0,configurable:!0}),FacebookMetadataProvider.prototype.getCurrentUserId=function(){for(var t=this.available.values(),e=t.next();!e.done;)e=t.next();return void 0!==e.value?Promise.resolve(e.value.id):this.currentRequestPromise.then(function(t){return t.id})},FacebookMetadataProvider.prototype.getForUser=function(t){return this.available.has(t)?Promise.resolve(this.available.get(t)):this.currentRequestPromise.then(function(e){if(e.id===t)return e;throw new Error("The loggedin user is not the one that the metadata asked for. cant provide metadata")})},FacebookMetadataProvider}()},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,o=n(125),i=(n.n(o),n(61)),a=n(82),s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=function(t){function MobileParsedStory(e,n,r){var o=t.call(this,e,n,r)||this;o.log=n,o._dataStore=null,o._dataFt=null;for(var i=e,a=e;a&&!a.hasAttribute("data-store")&&a.parentElement;)a=a.parentElement;o._article=a,o._innerStory=i;var s=i.querySelector("div.story_body_container");return s&&(o._innerStory=s),o.parseInnerStory(),o}return s(MobileParsedStory,t),MobileParsedStory.prototype.init=function(){},MobileParsedStory.countOccurrencesInString=function(t,e){var n=t.match(new RegExp(e,"g"));return n?n.length:0},Object.defineProperty(MobileParsedStory.prototype,"entId",{get:function(){var t,e,n;if(!this._entId){var r=this.dataStore,o=this.dataFt;if((null===(t=o)||void 0===t?void 0:t.page_insights)&&o.top_level_post_id)this._isNestingStory=!0,this._entId=o.top_level_post_id;else if((null===(e=r)||void 0===e?void 0:e.share_id)&&r.share_id!=this.fb_post_advertiser_page_entity_id){var i=r.share_id.toString(),a=i.match("([0-9]*)");if(null!==a&&a[0]===i)this._entId=i;else{var s=i.match(".*:([0-9]*)");if(!s||1!=MobileParsedStory.countOccurrencesInString(i,":"))throw new RangeError("_entId can't be null");this._entId=s[1]}}else{if(null===(n=r)||void 0===n||!n.feedback_target)throw new RangeError("_entId can't be null");this._entId=""+r.feedback_target}}return this._entId},enumerable:!0,configurable:!0}),MobileParsedStory.extractDataStoreFromElement=function(t,e){var n=t.getAttribute(e);if(!n)return null;try{return JSON.parse(n)}catch(t){return null}},Object.defineProperty(MobileParsedStory.prototype,"dataStore",{get:function(){return this._dataStore||(this._dataStore=MobileParsedStory.extractDataStoreFromElement(this._article,"data-store")),this._dataStore},enumerable:!0,configurable:!0}),Object.defineProperty(MobileParsedStory.prototype,"dataFt",{get:function(){return this._dataFt||(this._dataFt=MobileParsedStory.extractDataStoreFromElement(this._article,"data-ft")),this._dataFt},enumerable:!0,configurable:!0}),MobileParsedStory.prototype.parseInnerStory=function(){if(void 0===this._header){this._header=null,this._footer=null,this._divs=[];for(var t=0,e=Array.from(this._innerStory.childNodes);t<e.length;t++){var n=e[t];n instanceof HTMLElement&&("header"===n.tagName.toLowerCase()?this._header=n:"footer"===n.tagName.toLowerCase()?this._footer=n:"div"===n.tagName.toLowerCase()&&this._divs.push(n))}}},Object.defineProperty(MobileParsedStory.prototype,"storyType",{get:function(){return this._postType||(this._postType="unknown",this._innerStory.querySelector("[data-sigil*='m-video-play-button']")?this._postType="video":this._divs.length>1&&(this._divs[1].querySelector(".scrollArea-horizontal")?this._postType="carousel":this._divs[1].querySelector("button")?this._postType="link":this._divs[1].querySelector("a >div > div >i")&&(this._postType="photo"))),this._postType},enumerable:!0,configurable:!0}),Object.defineProperty(MobileParsedStory.prototype,"fb_post_carousel_info",{get:function(){var t=this;if("carousel"===this.storyType){var e=this._innerStory.querySelector(".scrollAreaBody");if(null===e)throw new RangeError("missing scrollAreaBody inside carousel");return Array.from(e.children).map(function(e){var n=e.querySelector("i.img");if(null===n)throw new RangeError("Unexpected post structure. fb_post_carousel_info. id:"+t._entId);var r=n.style.backgroundImage&&n.style.backgroundImage.replace(/^url\(/,"").replace(/\)$/,"")||null,o=e.querySelector("header")&&e.querySelector("header").textContent||null,a=e.querySelector("a"),s=null;return null!==a&&(s=Object(i.a)(a.href)),{fb_post_carousel_actionlink_url:s,fb_post_carousel_text:o,fb_post_carousel_img_url:r}})}return null},enumerable:!0,configurable:!0}),MobileParsedStory.prototype.parseAdvertiserFields=function(){var t,e,n,r,i,a,s;this._fb_post_advertiser_page_pretty_name=null;var c=this.dataFt,u=null===(e=null===(t=this._divs[0])||void 0===t?void 0:t.querySelector("a"))||void 0===e?void 0:e.href,l=u&&o.parse(u)||{},f=null,d=l.id;if(d)f=d instanceof Array?d[0]:l.id;else{var h=null===(n=this._header)||void 0===n?void 0:n.querySelector("[class*='like_thumb_conta']");if(h){var p=MobileParsedStory.extractDataStoreFromElement(h,"data-store");p&&(f=p.pageID.toString())}else{var b=this._article.querySelector("[data-sigil='ufi-inline-actions'] > div:nth-child(2) > a");b instanceof HTMLAnchorElement&&(f=(b.href.match("/([0-9]*)/posts")||[null,null])[1])}}if(f&&(f.match(/^[0-9]*$/)?this._fb_post_advertiser_page_entity_id=f:this._fb_post_advertiser_page_id=f),this._fb_post_advertiser_page_entity_id||c&&c.page_id&&(this._fb_post_advertiser_page_entity_id=c.page_id),this._header&&!this._fb_post_advertiser_page_id){var v=this._header.querySelector("a[href]:not([href^='/story'])");if(v instanceof HTMLAnchorElement){var _=v.href,y=void 0;(y=_.startsWith("http")?_.match("https?://"+document.location.host+"/(.*)/"):_.match("^/?(.*)/"))&&(this._fb_post_advertiser_page_id=y[1])}}var m=null===(i=null===(r=this._header)||void 0===r?void 0:r.querySelector("i"))||void 0===i?void 0:i.style.backgroundImage,g=null===(a=m)||void 0===a?void 0:a.match(/url\("(.*)"\)/);g||(g=null===(s=m)||void 0===s?void 0:s.match(/url\((.*)\)/)),g&&g[1]?this._fb_post_advertiser_thumbnail_url=g[1]:this._fb_post_advertiser_thumbnail_url=null},MobileParsedStory.prototype.initActionLink=function(){var t=this._divs[1].querySelector("button");if(t){var e=MobileParsedStory.extractDataStoreFromElement(t.parentElement,"data-store");e&&(this._fb_post_call_to_action_url=e.dest_uri||null),this._fb_post_call_to_action_text=t.textContent}else this._fb_post_call_to_action_url=null,this._fb_post_call_to_action_text=null},Object.defineProperty(MobileParsedStory.prototype,"fb_post_actionlink_url",{get:function(){if(void 0===!this._fb_post_actionlink_url){var t=this._divs[1].querySelector("a");if(t){var e=MobileParsedStory.extractDataStoreFromElement(t,"data-store");e&&(this._fb_post_actionlink_url=e.dest_uri||null)}else this._fb_post_actionlink_url=null}return this._fb_post_actionlink_url},enumerable:!0,configurable:!0}),Object.defineProperty(MobileParsedStory.prototype,"fb_post_img_url",{get:function(){if(!this._fb_post_img_url)if(this._fb_post_img_url=null,"album"===this.storyType||"photo"===this.storyType){var t=this._innerStory.querySelector("a[rel=theater] img");t instanceof HTMLImageElement&&(this._fb_post_img_url=t.src)}else{var e=this._innerStory.querySelector("div.fbStoryAttachmentImage > img");e instanceof HTMLImageElement?this._fb_post_img_url=e.src:this._diagnostics.push("can't parse, fb_post_img_url. expected selector not found")}return this._fb_post_img_url},enumerable:!0,configurable:!0}),MobileParsedStory}(a.i)},function(t,e,n){"use strict";const r=n(245),o=n(246),i=n(247);function validateArrayFormatSeparator(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function decode(t,e){return e.decode?o(t):t}function removeHash(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function extract(t){const e=(t=removeHash(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function parseValue(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function parse(t,e){validateArrayFormatSeparator((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function parserForArrayFormat(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const o="string"==typeof n&&n.split("").indexOf(t.arrayFormatSeparator)>-1?n.split(t.arrayFormatSeparator).map(e=>decode(e,t)):null===n?n:decode(n,t);r[e]=o};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const o of t.split("&")){let[t,a]=i(e.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator"].includes(e.arrayFormat)?a:decode(a,e),n(decode(t,e),a,r)}for(const t of Object.keys(r)){const n=r[t];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=parseValue(n[t],e);else r[t]=parseValue(n,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function keysSorter(t){return Array.isArray(t)?t.sort():"object"==typeof t?keysSorter(Object.keys(t)).sort((t,e)=>Number(t)-Number(e)).map(e=>t[e]):t}(n):t[e]=n,t},Object.create(null))}e.extract=extract,e.parse=parse,e.stringify=((t,e)=>{if(!t)return"";validateArrayFormatSeparator((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>e.skipNull&&(t=>null==t)(t[n])||e.skipEmptyString&&""===t[n],r=function encoderForArrayFormat(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const o=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[encode(e,t),"[",o,"]"].join("")]:[...n,[encode(e,t),"[",encode(o,t),"]=",encode(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[encode(e,t),"[]"].join("")]:[...n,[encode(e,t),"[]=",encode(r,t)].join("")];case"comma":case"separator":return e=>(n,r)=>null==r||0===r.length?n:0===n.length?[[encode(e,t),"=",encode(r,t)].join("")]:[[n,encode(r,t)].join(t.arrayFormatSeparator)];default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,encode(e,t)]:[...n,[encode(e,t),"=",encode(r,t)].join("")]}}(e),o={};for(const e of Object.keys(t))n(e)||(o[e]=t[e]);const i=Object.keys(o);return!1!==e.sort&&i.sort(e.sort),i.map(n=>{const o=t[n];return void 0===o?"":null===o?encode(n,e):Array.isArray(o)?o.reduce(r(n),[]).join("&"):encode(n,e)+"="+encode(o,e)}).filter(t=>t.length>0).join("&")}),e.parseUrl=((t,e)=>{e=Object.assign({decode:!0},e);const[n,r]=i(t,"#");return Object.assign({url:n.split("?")[0]||"",query:parse(extract(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:decode(r,e)}:{})}),e.stringifyUrl=((t,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=removeHash(t.url).split("?")[0]||"",o=e.extract(t.url),i=e.parse(o,{sort:!1}),a=Object.assign(i,t.query);let s=e.stringify(a,n);s&&(s=`?${s}`);let c=function getHash(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(c=`#${encode(t.fragmentIdentifier,n)}`),`${r}${s}${c}`})},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(27),i=n(61),a=n(83),s=n(127),c=n(248),u=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=function(){function Parser(t,e){if(this.log=t,this.extensionVersion=e,!t)throw new Error("You can't start a parser without a logger!")}return Parser.prototype.getNewCache=function(t,e){return new s.a(t,this.log,e)},Parser.prototype.getCache=function(t,e){return t[a.i]||(t[a.i]=this.getNewCache(t,e)),t[a.i]},Parser.prototype.storyTypeClassifier=function(t){return this.getCache(t,[]).storyType},Parser.prototype.getLocale=function(){var t=Array.from(document.body.classList).find(function(t){return t.startsWith("Locale")}),e=null;return"string"==typeof t&&(e=t.replace("Locale_","")),e},Parser.prototype.extractFirstPostInStoryText=function(t){var e=t.querySelector("p");return e instanceof HTMLParagraphElement&&e.parentElement?e.parentElement.textContent:""},Parser.prototype.isChildOf=function(t,e){return t instanceof Element&&t.contains(e)},Parser.prototype.parseRegularStory=function(t,e){var n=null,r=null!==t.querySelector("div[data-hover='tooltip'][data-tooltip-content='Shared with: Public']"),o=this.extractFirstPostInStoryText(t),i=["posts","videos","notes","permalink"],a=["comment_id"],s=i.map(function(t){return"[href*='/"+t+"/']:not("+a.map(function(t){return"[href*='"+t+"']"}).join(",")+")"});s.push("[href*='photo.php?fbid=']"),s.push("[href*='permalink.php?story_fbid=']"),s.push("[href*='/photos/a.']");var c=t.querySelector("form.commentable_item > input[name='ft_ent_identifier']");if(c instanceof HTMLInputElement&&(n=c.value,this.log.info("Found the entity id using the commentable_item "+n,t)),!n){var u=t.querySelector(s.join(","));if(!(u instanceof HTMLAnchorElement))throw new RangeError("can't parse fb_post_entity_id, expected selector not found");if(u.href.indexOf("/photos/a.")>-1)null===(l=u.href.match(/photos\/a[^\/]+\/([0-9]+)/))||2!==l.length?e.push("can't extract fb_post_entity_id from href, post type '/photos/a. ?type=3&theater':"+u.href):n=l[1];else if(u.href.indexOf("permalink.php?story_fbid=")>-1){null===(l=u.href.match(/permalink\.php\?story_fbid=([0-9]+)/))||2!==l.length?e.push("can't extract fb_post_entity_id from href, post type 'permalink and the publishing user dosn't have String handle':"+u.href):n=l[1]}else if(u.href.indexOf("photo.php?fbid=")>-1){null===(l=u.href.match(/photo\.php\?fbid=([0-9]+)/))||2!==l.length?e.push("can't extract fb_post_entity_id from href, post type photo:"+u.href):n=l[1]}else{var l;null===(l=u.href.match(new RegExp("("+i.join("|")+")/([0-9]+)/?")))||3!==l.length?e.push("can't extract fb_post_entity_id from href:"+u.href):n=l[2]}}if(null===n)throw new RangeError("can't parse fb_post_entity_id!!!");return{fb_post_entity_id:n,fb_post_text:o,fb_post_is_public:r,parser_type:"desktop",parser_version:this.extensionVersion}},Parser.prototype.isFeedbackTarget=function(t){return null!==t.querySelector(a.d)},Parser.prototype.parseSponsoredFeedStory=function(t,e){var n,r,o,i=this.getCache(t,e),s=this.sanityzePIIPostHtml(t.cloneNode(!0)).outerHTML,c=t.querySelector(a.d);if(!(c instanceof HTMLFormElement&&c.parentElement&&c.parentElement.previousElementSibling))throw new RangeError("The given element is not a feedback target:"+t.id);o=c.parentElement.previousElementSibling;var u=i.storyType,l=i.fb_post_carousel_info,f=i.fb_post_app_pretty_name,d=i.fb_post_app_id,h=i.fb_post_app_thumbnail_url,p=i.fb_post_advertiser_page_id,b=i.fb_post_advertiser_page_entity_id,v=i.fb_post_advertiser_page_pretty_name,_=i.fb_post_advertiser_thumbnail_url,y=i.fb_post_actionlink_url,m=i.fb_post_img_url,g=i.fb_post_call_to_action_url,w=i.fb_post_call_to_action_text,S=i.entId,x=null;"gif"===u?(x=(n=this.parseGifFields(o)).videoUrl,m=n.previewImageUrl):"video"===u&&(x=(r=this.parseVideoFields(o)).videoUrl,m=r.previewImageUrl);var O=(this.getLocale()||"").startsWith("en")?this.getEngagementScoreFromStory(c):null,E=O&&O.has("Angry")?O.get("Angry"):null,k=O&&O.has("Comments")?O.get("Comments"):null,j=O&&O.has("Haha")?O.get("Haha"):null,T=O&&O.has("Like")?O.get("Like"):null,P=O&&O.has("Love")?O.get("Love"):null,I=O&&O.has("Sad")?O.get("Sad"):null,A=O&&O.has("Shares")?O.get("Shares"):null,C=O&&O.has("Wow")?O.get("Wow"):null;return{fb_post_actionlink_url:y,fb_post_src:s,fb_post_text:this.extractFirstPostInStoryText(o),fb_post_type:u,fb_post_img_url:m,fb_post_video_url:x,fb_post_engage_sad:I,fb_post_engage_wow:C,fb_post_entity_id:S,fb_post_engage_haha:j,fb_post_engage_like:T,fb_post_engage_love:P,fb_post_video_views:null,fb_post_this_video_views:null,fb_post_engage_angry:E,fb_post_engage_shares:A,fb_post_engage_comments:k,fb_post_advertiser_page_id:p,fb_post_advertiser_page_entity_id:b,fb_post_call_to_action_url:g,fb_post_call_to_action_text:w,fb_post_advertiser_thumbnail_url:_,fb_post_advertiser_page_pretty_name:v,fb_post_app_pretty_name:f,fb_post_app_id:d,fb_post_app_thumbnail_url:h,fb_post_carousel_info:l,fb_post_caption:i.fb_post_caption,fb_post_attachment_description:i.fb_post_attachment_description,fb_post_attachment_title:i.fb_post_attachment_title,parser_type:"desktop",parser_version:this.extensionVersion,fb_post_ad_placement:"feed"}},Parser.prototype.parseVideoFields=function(t){var e=null,n=null,r=t.querySelectorAll("img.img:not([src*='emoji.php'])")[1];r instanceof HTMLImageElement&&""===(e=(r.style.backgroundImage||"").replace(/^url\(("|')?/,"").replace(/("|')?\)$/,""))&&(e=r.src);var o=t.querySelector("video");return o instanceof HTMLVideoElement&&o.hasAttribute("src")&&!o.src.startsWith("blob:")&&(n=o.src),{previewImageUrl:e,videoUrl:n}},Parser.prototype.parseGifFields=function(t){var e=null,n=null,r=null,o=t.querySelectorAll("img.img:not([src*='emoji.php'])")[1];o instanceof HTMLImageElement&&(e=o.src);var i=t.querySelector("video");i instanceof HTMLVideoElement&&(n=i.src);var a=t.querySelector("span > [target='_blank']");return a instanceof HTMLAnchorElement&&(r=a.href),{previewImageUrl:e,videoUrl:n,originalUrl:r}},Parser.prototype.getStorySelector=function(){return["סיפור","Story","Actualité"].map(function(t){return"div[aria-label="+t+"]"}).join(", ")},Parser.prototype.removeZeroSizedFont=function(t){var e=window.getComputedStyle(t).fontSize;if(!e||0===e.length||"0px"===e||function hiddenFromSightHeuristics(t,e){var n=e.getComputedStyle(t);if("none"===n.display)return!0;if("0"===n.opacity&&"absolute"===n.position)return!0;return!1}(t,window))return null;if(!t.childElementCount)return t;for(var n=document.createElement(t.tagName),r=0;r<t.childElementCount;r++){var o=this.removeZeroSizedFont(t.children[r]);if(o){var i=o.cloneNode(!0);i.textContent=o.textContent,n.appendChild(i)}}return n},Parser.prototype.isStorySponsoredImpl=function(t,e){var n=this;return Array.from(t.querySelectorAll("s, [data-testid='story-subtilte'] > span, a, div[data-testid=story-subtitle], div[data-testid*=story-label] a")).map(function(r){var o,i,a=window.getComputedStyle(r);if(a.display&&a.display.match("none"))return{story:t,a:r,ok:!1,reason:"self-none",context:{}};if(null===(o=r.firstElementChild)||void 0===o?void 0:o.childElementCount){var s=Array.from(r.firstElementChild.children).filter(function(t){var e=t.getBoundingClientRect();return 0!==e.width&&0!==e.height}).map(function(t){return t.textContent}).join("").replace(new RegExp('"',"g"),"");if(s&&e.indexOf(trimTextContent(s))>-1)return{story:t,a:r,ok:!0,reason:"within rect overflow",context:s};var c=r.querySelector("span");if((null===(i=c)||void 0===i?void 0:i.children)&&(s=Array.from(c.children).flatMap(function(t){return function getLeaves(t){if(t.children.length)return Array.from(t.children).flatMap(function(t){return getLeaves(t)});return[t]}(t)}).filter(function(t){return["0px","auto"].includes(window.getComputedStyle(t).top)}).map(function(t){return t.textContent}).join("").replace(new RegExp('"',"g"),""))&&e.indexOf(trimTextContent(s))>-1)return{story:t,a:r,ok:!0,reason:"within rect overflow - using top attribute",context:s}}var u=Array.from(r.querySelectorAll("[data-content]")).filter(function(t){return"none"!==window.getComputedStyle(t).getPropertyValue("display")}).map(function(t){return window.getComputedStyle(t,"::after").getPropertyValue("content")}).join("").replace(new RegExp('"',"g"),"");if(u&&e.indexOf(trimTextContent(u))>-1)return{story:t,a:r,ok:!0,reason:"after-content",context:u};var l=window.getComputedStyle(r,":after").content;if(l){var f=l.match(/\"(.*)\"/);f&&(l=f[1])}var d=n.removeZeroSizedFont(r);return getParentsUpTo(r,t).some(function(t){return"none"===window.getComputedStyle(t).display})?{story:t,a:r,ok:!1,reason:"parent-none",context:getParentsUpTo(r,t).find(function(t){return"none"===window.getComputedStyle(t).display})}:d&&d.textContent&&e.indexOf(trimTextContent(d.textContent))>-1?{story:t,a:r,ok:!0,reason:"element && anchorPossibleText",context:{elementWithoutZeroSize:d}}:l&&e.indexOf(l)>-1?{story:t,a:r,ok:!0,reason:"cssAfterContent && anchorPossibleText",context:{cssAfterContent:l,elementWithoutZeroSize:d}}:{story:t,a:r,ok:r.textContent&&e.indexOf(trimTextContent(r.textContent))>-1||!1,reason:"legacy",context:{cssAfterContent:l,elementWithoutZeroSize:d}}}).some(function(t){return t.ok})},Parser.prototype.isStorySponsored=function(t){return this.isStorySponsoredImpl(t,["Sponsored","ממומן","Sponsorisé","Sponsorizzata","إعلان مُموَّل","Publicidad","Patrocinado","Gesponsert","Rėmėjai","5p4m","Реклама","Sponsorowane"])},Parser.prototype.parseStringedNumber=function(t,e){var n=new Set(["en_US","en_GB","en_CA","he_IL","fr_FR","fr_CA","it_IT","de_DE","es_ES","es_LA"]),r=new Map([["k",1e3],["mil",1e3],["m",1e6],["mill.",1e6],["mln",1e6],["mio.",1e6],["b",1e9],["g",1e9]]);if(!n.has(e)&&/[^0-9]/.test(t))return null;var i=t.toLowerCase().replace(",",".").match(new RegExp("^([0-9]+\\.?[0-9]*)( ?("+Array.from(r.keys()).map(function(t){return Object(o.d)(t)}).join("|")+"))?$"));return null!==i&&function isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}(i[1])?parseFloat(i[1])*(r.has(i[3])?r.get(i[3]):-1!==["de_DE","it_IT"].indexOf(e)?1e3:1):null},Parser.prototype.parseVerbAndNumber=function(t,e){var n=t.match(/([0-9]*(\.|,)?[0-9]*)(.*)\ (.*)/),r=-1,o="";this.log.captureBreadcrumb({message:"parseVerbAndNumber",data:{splitText:n}}),n&&("m"===n[3].toLowerCase()||"k"===n[3].toLowerCase()?r=parseFloat(n[1])*("k"==n[3].toLowerCase()?1e3:1e6):","===n[2]?r=parseInt(n[1].replace(",","")):n[2]?this.log.error("Found an unknown multiplier"):r=parseInt(n[1]),o=n[4]),-1!=r?(e.set(o,r),this.log.debug("Found new verb: "+o+" with a number of: "+r)):(this.log.captureBreadcrumb({message:"content-parsing-error",level:"error",data:{verb:o,splitText:n}}),this.log.error("content-parsing-error"))},Parser.prototype.getEngagementScoreFromStory=function(t){var e=new Map;try{this.log.debug("Start getting engage scores....");var n=t.querySelectorAll("span[role*='toolbar'] a");this.log.info("Found "+n.length+" feelings...");for(var r=0;r<n.length;r++)try{var o=n[r].getAttribute("aria-label")||"";this.parseVerbAndNumber(o,e)}catch(t){this.log.error("Error while parsing a verb from feelings!"+t)}var i=t.querySelectorAll("a[aria-live='polite'], span[aria-live='polite']");this.log.info("Found "+i.length+" in comment and share section.");for(var a=0;a<i.length;a++)try{this.parseVerbAndNumber(i[a].textContent||"",e)}catch(t){this.log.error("Error while parsing a verb from comments and shares!"+t)}}catch(t){}return e},Parser.prototype.isStoryLoaded=function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;return null!==t.querySelector(".fbUserContent, input[name=ft_ent_identifier], .userContentWrapper, i.profpic")&&0!==n&&0!==r},Parser.prototype.isSuggestedPageStory=function(t,e){t.innerHTML},Parser.prototype.getNestingType=function(t,e){return"unknown"},Parser.prototype.parseInstreamAd=function(t){var e;if(!0===t.isEmpty)return null;var n=t.instreamVideoAdBreakVideoID;if(!n)throw new f("Unable to find ad entity id for instream video. Raw response:",t);var r=document.createElement("div");r.innerHTML=t.videoAdStory.__html;var i=r.firstElementChild.dataset.xt;if(!i)return null;var a=Object(o.h)(i)[0],s=Object.values(a)[0];return{fb_post_entity_id:Object(o.g)(function(){return s.post_context.story_fbid[0]},n).toString(),fb_post_advertiser_page_entity_id:(e=s.page_id,null!=e?e:s.actor_id).toString()}},Parser.tryExtractStoryEntityId=function(t){var e,n=t.querySelector(a.e);return n instanceof HTMLInputElement?n.value:null!=(e=Object(o.g)(function(){return JSON.parse(t.dataset.store).feedback_target},null))?e:Object(o.g)(function(){return JSON.parse(t.querySelector("article[data-store]").dataset.store).share_id},null)},Parser.prototype.sanityzePIIPostHtml=function(t){if(t.parentElement)throw new Error("don't pass elements from living document! it hurt the page. you must pass only clones");for(var e=0,n=Array.from(t.querySelectorAll(c.a.join(",")));e<n.length;e++){var r=n[e];this.log.info("will remove",[r]),r.remove()}return t},Parser.extractLinkFromFbRedirector=i.a,Parser}();function getParentsUpTo(t,e){if(!e.contains(t))throw new Error("el is not decendent of upto");for(var n=[],r=t;r.parentElement!==e&&null!==r.parentElement;)n.push(r.parentElement),r=r.parentElement;return n}function trimTextContent(t){return t.replace(" · ","")}var f=function(t){function InsteamAdParseError(e,n){var r=t.call(this,e)||this;return r.rawResponse=n,Object.setPrototypeOf(r,InsteamAdParseError.prototype),r}return u(InsteamAdParseError,t),InsteamAdParseError}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(27),o=n(61),i=n(83),a=n(126),s=function(){function ParsedStory(t,e,n){this.log=e,this._fb_post_actionlink_url=null,this._fb_post_img_url=null,this._fb_post_call_to_action_url=null,this._fb_post_call_to_action_text=null,this._fb_post_carousel_info=null,this._fb_post_advertiser_page_pretty_name=null,this._fb_post_advertiser_page_id=null,this._fb_post_advertiser_page_entity_id=null,this._fb_post_advertiser_thumbnail_url=null,this._fb_post_app_id=null,this._fb_post_app_pretty_name=null,this._fb_post_app_thumbnail_url=null,this._diagnostics=n||[],this._article=t,this.init()}return ParsedStory.prototype.init=function(){var t=this._article.querySelector(i.d);if(!(t instanceof HTMLFormElement))throw new RangeError("The given element is not a feedback target:"+this._article.id);this._commentsForm=t,null!==this._commentsForm.parentElement&&null!==this._commentsForm.parentElement.previousElementSibling?this._innerStory=this._commentsForm.parentElement.previousElementSibling:this._innerStory=this._article,this.is_app_post=null!==this._innerStory.querySelector("a[data-hovercard*='application.php'][href*='apps.facebook.com']")},Object.defineProperty(ParsedStory.prototype,"entId",{get:function(){if(!this._entId){var t=a.a.tryExtractStoryEntityId(this._commentsForm);if(!t)throw new Error("can't parse fb_post_entity_id, expected selector not found");this._entId=t}return this._entId},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"nestType",{get:function(){return this._nestType||(this._nestType="unknown"),this._nestType},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"isNestingStory",{get:function(){return this._isNestingStory||(this._isNestingStory=!1),this._isNestingStory},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_caption",{get:function(){if(void 0===this._fb_post_caption){var t=this._innerStory.querySelector("div._6lz._6mb.ellipsis");t&&""!==t.textContent?this._fb_post_caption=t.textContent:this._fb_post_caption=null}return this._fb_post_caption},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_attachment_title",{get:function(){if(void 0===this._fb_post_attachment_title){var t=this._innerStory.querySelector(".mbs._6m6._2cnj._5s6c > a");t&&""!==t.textContent?this._fb_post_attachment_title=t.textContent:this._fb_post_attachment_title=null}return this._fb_post_attachment_title},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_attachment_description",{get:function(){if(void 0===this._fb_post_attachment_description){var t=this._innerStory.querySelector("._6m7._3bt9");t&&""!==t.textContent?this._fb_post_attachment_description=t.textContent:this._fb_post_attachment_description=null}return this._fb_post_attachment_description},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_carousel_info",{get:function(){var t=this;if("carousel"===this.storyType){var e=this._innerStory.querySelector("ul.uiList");if(null===e)throw new RangeError("missing ul inside carousel");var n=Array.from(e.children).map(function(e){var n=e.querySelector("img:nth-of-type(1)");if(null===n)throw new RangeError("Unexpected post structure. missing img in li. fb_post_carousel_info. id:"+t._entId);var r=n.style.backgroundImage&&n.style.backgroundImage.replace(/^url\(\"/,"").replace(/\"\)$/,"")||n.src,i=e.children[0],a=e.children[1],s=i instanceof HTMLAnchorElement?i:a instanceof HTMLAnchorElement?a:null;if(s instanceof HTMLAnchorElement){var c=Object(o.a)(s.href),u=s.cloneNode(!0);Array.from(u.querySelectorAll("button")).forEach(function(t){t.remove()});var l=e.querySelector("div._1032"),f=e.querySelector("div._1m-h"),d=l?l.textContent:u.textContent;return f&&(d+=" "+f.textContent),{fb_post_carousel_actionlink_url:c,fb_post_carousel_text:d,fb_post_carousel_img_url:r}}throw new RangeError("Unexpected post structure. fb_post_carousel_info. id:"+t._entId)});return""===n[n.length-1].fb_post_carousel_text&&(n[n.length-1].fb_post_carousel_text=e.children[e.children.length-1].textContent),n}return null},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"storyType",{get:function(){if(!this._postType){this._postType="unknown";var t=this._innerStory.querySelectorAll("a[rel=theater] img");if(t.length>0)1===t.length?this._postType="photo":this._postType="album";else if(null!==this._innerStory.querySelector("a[href*='/offers/url/?offer_id']"))this._postType="offer";else if(null!==this._innerStory.querySelector('a[href*="/events/"][data-hover=tooltip]'))this._postType="event";else{var e=this._innerStory.querySelector("ul.uiList");if(this._innerStory.querySelector('[data-testid="multishare_pager_next"]')||e instanceof HTMLUListElement&&e.nextElementSibling&&e.nextElementSibling.querySelector("div > a > div > i"))this._postType="carousel";else if(this._innerStory.querySelector("video")instanceof HTMLVideoElement)this._innerStory.querySelector("[role=progressbar]")instanceof HTMLSpanElement?this._postType="video":this._postType="gif";else if(null!==this._innerStory.querySelector(".fbStoryAttachmentImage.uiScaledImageContainer"))null!==this._innerStory.querySelector("button[type='submit']:not(.PageLikeButton)")?this._postType="lead":this._postType="link";else{var n=this._innerStory.querySelector("div.userContent"),r=!!n&&n.nextElementSibling instanceof HTMLDivElement&&n.nextElementSibling;r&&null===r.querySelector("img")&&(this._postType="text")}}}return this._postType},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_actionlink_url",{get:function(){if(!this._fb_post_actionlink_url){this._fb_post_actionlink_url=null;var t=this._innerStory.querySelector("a[rel*=nofollow][target=_blank],a[rel*=noopener][target=_blank]");t instanceof HTMLAnchorElement?this._fb_post_actionlink_url=Object(o.a)(t.href):this._diagnostics.push("can't parse fb_post_actionlink_url, the expected selector not found")}return this._fb_post_actionlink_url},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_img_url",{get:function(){if(!this._fb_post_img_url)if(this._fb_post_img_url=null,"album"===this.storyType||"photo"===this.storyType){var t=this._innerStory.querySelector("a[rel=theater] img");t instanceof HTMLImageElement&&(this._fb_post_img_url=t.src)}else{var e=this._innerStory.querySelector("div.fbStoryAttachmentImage > img");e instanceof HTMLImageElement?this._fb_post_img_url=e.src:this._diagnostics.push("can't parse, fb_post_img_url. expected selector not found")}return this._fb_post_img_url},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_call_to_action_url",{get:function(){return this._fb_post_call_to_action_url||this.initActionLink(),this._fb_post_call_to_action_url},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_call_to_action_text",{get:function(){return this._fb_post_call_to_action_text||this.initActionLink(),this._fb_post_call_to_action_text},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_page_pretty_name",{get:function(){return this._fb_post_advertiser_page_pretty_name||this.parseAdvertiserFields(),this._fb_post_advertiser_page_pretty_name},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_page_entity_id",{get:function(){return this._fb_post_advertiser_page_entity_id||this.parseAdvertiserFields(),this._fb_post_advertiser_page_entity_id},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_page_id",{get:function(){return this._fb_post_advertiser_page_id||this.parseAdvertiserFields(),this._fb_post_advertiser_page_id},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_advertiser_thumbnail_url",{get:function(){return this._fb_post_advertiser_thumbnail_url||this.parseAdvertiserFields(),this._fb_post_advertiser_thumbnail_url},enumerable:!0,configurable:!0}),ParsedStory.prototype.parseAdvertiserFields=function(){var t;if(this._fb_post_advertiser_page_pretty_name=null,this._fb_post_advertiser_page_id=null,this._fb_post_advertiser_thumbnail_url=null,!this.is_app_post){var e=this._innerStory.querySelectorAll(i.a),n=null!=(t=e[1])?t:e[0];if(n instanceof HTMLAnchorElement){this._fb_post_advertiser_page_pretty_name=n.textContent;var r=Object(o.a)(n.href);if(-1===r.indexOf("profile.php?id=")){var a=document.createElement("a");a.href=r,this._fb_post_advertiser_page_id=decodeURIComponent(a.pathname.substr(1).replace(/\/$/,""))}else{var s=r.match(/profile\.php\?id\=([0-9]+)/);s instanceof Array?this._fb_post_advertiser_page_id=s[1]:this._diagnostics.push("Couldn't parse fb_post_advertiser_page_id from the a element")}}else this._diagnostics.push("Couldn't parse fb_post_advertiser_page_id, fb_post_advertiser_page_pretty_name. the expected selector not found");var c=e[0];if(c instanceof HTMLAnchorElement){var u=c.querySelector("img");u instanceof HTMLImageElement?this._fb_post_advertiser_thumbnail_url=u.src:this._diagnostics.push("can't parse fb_post_advertiser_thumbnail_url, expected selector not found")}else this._diagnostics.push("can't parse fb_post_advertiser_thumbnail_url, expected selector not found")}},Object.defineProperty(ParsedStory.prototype,"fb_post_app_id",{get:function(){return this._fb_post_app_id||this.parseFbAppStoryFields(),this._fb_post_app_id},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_app_pretty_name",{get:function(){return this._fb_post_app_pretty_name||this.parseFbAppStoryFields(),this._fb_post_app_pretty_name},enumerable:!0,configurable:!0}),Object.defineProperty(ParsedStory.prototype,"fb_post_app_thumbnail_url",{get:function(){return this._fb_post_app_thumbnail_url||this.parseFbAppStoryFields(),this._fb_post_app_thumbnail_url},enumerable:!0,configurable:!0}),ParsedStory.prototype.parseFbAppStoryFields=function(){if(this._fb_post_app_id=null,this._fb_post_app_pretty_name=null,this._fb_post_app_thumbnail_url=null,this.is_app_post){var t=this._innerStory.querySelectorAll(i.a),e=t[0];if(e instanceof HTMLAnchorElement){var n=e.querySelector("img");n instanceof HTMLImageElement?this._fb_post_app_thumbnail_url=n.src:this._diagnostics.push("failed with fb_post_app_thumbnail_url. expected selector not found")}else this._diagnostics.push("failed with fb_post_app_thumbnail_url. expected selector not found");var r=t[1];if(r instanceof HTMLAnchorElement){this._fb_post_app_pretty_name=r.textContent;var a=Object(o.a)(r.href).match(/apps\.facebook\.com\/([^\/]+)\//);null!==a&&2===a.length?this._fb_post_app_id=a[1]:this._diagnostics.push("failed with fb_post_app_id. failed extract id from href")}else this._diagnostics.push("failed with fb_post_app_pretty_name. expected selector not found")}},ParsedStory.prototype.initActionLink=function(){if("lead"===this.storyType){var t=this._innerStory.querySelector('button[type="submit"]:not([class*="Like"])');this._fb_post_call_to_action_url=null,t instanceof HTMLButtonElement?this._fb_post_call_to_action_text=t.textContent:(this._diagnostics.push("cant parse fb_post_call_to_action_url, expected selector not found"),this._fb_post_call_to_action_text=null)}else if("offer"===this.storyType){var e=this._innerStory.querySelector("a[href*='/offers/url/?offer_id'][role=button]");e instanceof HTMLAnchorElement&&(this._fb_post_call_to_action_text=e.text,this._fb_post_call_to_action_url=e.href.replace("http://localhost",""))}else if("carousel"===this.storyType){var n=this._innerStory.querySelector("button[type=submit]:not(.PageLikeButton)");if(n instanceof HTMLButtonElement||(n=this._innerStory.querySelector("a[role='button'][rel*='nofollow'],a[role='button'][rel*='noopener']")),n instanceof HTMLElement&&this._innerStory instanceof HTMLElement){this._fb_post_call_to_action_text=n.textContent;var i=Object(r.b)(n,"a",this._innerStory);i instanceof HTMLAnchorElement&&(this._fb_post_call_to_action_url=Object(o.a)(i.href))}}else{var a=this._innerStory.querySelector("a[role=button][rel*=nofollow],a[role=button][rel*=noopener]");a instanceof HTMLAnchorElement?(this._fb_post_call_to_action_url=Object(o.a)(a.href),this._fb_post_call_to_action_text=a.textContent):(this._diagnostics.push("cant parse fb_post_call_to_action_url, expected selector not found"),this._fb_post_call_to_action_url=null,this._fb_post_call_to_action_text=null)}},ParsedStory}()},function(t,e){var n=t.exports=function(t){return new Traverse(t)};function Traverse(t){this.value=t}function walk(t,e,n){var s=[],c=[],u=!0;return function walker(t){var l=n?copy(t):t,f={},d=!0,h={node:l,node_:t,path:[].concat(s),parent:c[c.length-1],parents:c,key:s.slice(-1)[0],isRoot:0===s.length,level:s.length,circular:null,update:function(t,e){h.isRoot||(h.parent.node[h.key]=t),h.node=t,e&&(d=!1)},delete:function(t){delete h.parent.node[h.key],t&&(d=!1)},remove:function(t){o(h.parent.node)?h.parent.node.splice(h.key,1):delete h.parent.node[h.key],t&&(d=!1)},keys:null,before:function(t){f.before=t},after:function(t){f.after=t},pre:function(t){f.pre=t},post:function(t){f.post=t},stop:function(){u=!1},block:function(){d=!1}};if(!u)return h;function updateState(){if("object"==typeof h.node&&null!==h.node){h.keys&&h.node_===h.node||(h.keys=r(h.node)),h.isLeaf=0==h.keys.length;for(var e=0;e<c.length;e++)if(c[e].node_===t){h.circular=c[e];break}}else h.isLeaf=!0,h.keys=null;h.notLeaf=!h.isLeaf,h.notRoot=!h.isRoot}updateState();var p=e.call(h,h.node);return void 0!==p&&h.update&&h.update(p),f.before&&f.before.call(h,h.node),d?("object"!=typeof h.node||null===h.node||h.circular||(c.push(h),updateState(),i(h.keys,function(t,e){s.push(t),f.pre&&f.pre.call(h,h.node[t],t);var r=walker(h.node[t]);n&&a.call(h.node,t)&&(h.node[t]=r.node),r.isLast=e==h.keys.length-1,r.isFirst=0==e,f.post&&f.post.call(h,r),s.pop()}),c.pop()),f.after&&f.after.call(h,h.node),h):h}(t).node}function copy(t){if("object"==typeof t&&null!==t){var e;if(o(t))e=[];else if(function isDate(t){return"[object Date]"===toS(t)}(t))e=new Date(t.getTime?t.getTime():t);else if(function isRegExp(t){return"[object RegExp]"===toS(t)}(t))e=new RegExp(t);else if(function isError(t){return"[object Error]"===toS(t)}(t))e={message:t.message};else if(function isBoolean(t){return"[object Boolean]"===toS(t)}(t))e=new Boolean(t);else if(function isNumber(t){return"[object Number]"===toS(t)}(t))e=new Number(t);else if(function isString(t){return"[object String]"===toS(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},a=function(){};a.prototype=n,e=new a}return i(r(t),function(n){e[n]=t[n]}),e}return t}Traverse.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!a.call(e,r)){e=void 0;break}e=e[r]}return e},Traverse.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!a.call(e,r))return!1;e=e[r]}return!0},Traverse.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var o=t[r];a.call(n,o)||(n[o]={}),n=n[o]}return n[t[r]]=e,e},Traverse.prototype.map=function(t){return walk(this.value,t,!0)},Traverse.prototype.forEach=function(t){return this.value=walk(this.value,t,!1),this.value},Traverse.prototype.reduce=function(t,e){var n=1===arguments.length,r=n?this.value:e;return this.forEach(function(e){this.isRoot&&n||(r=t.call(this,r,e))}),r},Traverse.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},Traverse.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},Traverse.prototype.clone=function(){var t=[],e=[];return function clone(n){for(var o=0;o<t.length;o++)if(t[o]===n)return e[o];if("object"==typeof n&&null!==n){var a=copy(n);return t.push(n),e.push(a),i(r(n),function(t){a[t]=clone(n[t])}),t.pop(),e.pop(),a}return n}(this.value)};var r=Object.keys||function keys(t){var e=[];for(var n in t)e.push(n);return e};function toS(t){return Object.prototype.toString.call(t)}var o=Array.isArray||function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)},i=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};i(r(Traverse.prototype),function(t){n[t]=function(e){var n=[].slice.call(arguments,1),r=new Traverse(e);return r[t].apply(r,n)}});var a=Object.hasOwnProperty||function(t,e){return e in t}},function(t,e,n){"use strict";(function(e){var r=n(32),o=n(385),i={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a={adapter:function getDefaultAdapter(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(171):void 0!==e&&(t=n(171)),t}(),transformRequest:[function transformRequest(t,e){return o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(setContentTypeIfUnset(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(setContentTypeIfUnset(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function transformResponse(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function validateStatus(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function forEachMethodNoData(t){a.headers[t]={}}),r.forEach(["post","put","patch"],function forEachMethodWithData(t){a.headers[t]=r.merge(i)}),t.exports=a}).call(e,n(4))},function(t,e,n){(function(e){var r=n(178),o="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function isUndefined(t){return void 0===t}function isPlainObject(t){return"[object Object]"===Object.prototype.toString.call(t)}function isString(t){return"[object String]"===Object.prototype.toString.call(t)}function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function supportsFetch(){if(!("fetch"in o))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function each(t,e){var n,r;if(isUndefined(t.length))for(n in t)hasKey(t,n)&&e.call(null,n,t[n]);else if(r=t.length)for(n=0;n<r;n++)e.call(null,n,t[n])}function truncate(t,e){if("number"!=typeof e)throw new Error("2nd argument to `truncate` function should be a number");return"string"!=typeof t||0===e?t:t.length<=e?t:t.substr(0,e)+"…"}function hasKey(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function joinRegExp(t){for(var e,n=[],r=0,o=t.length;r<o;r++)isString(e=t[r])?n.push(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&n.push(e.source);return new RegExp(n.join("|"),"i")}function htmlElementAsString(t){var e,n,r,o,i,a=[];if(!t||!t.tagName)return"";if(a.push(t.tagName.toLowerCase()),t.id&&a.push("#"+t.id),(e=t.className)&&isString(e))for(n=e.split(/\s+/),i=0;i<n.length;i++)a.push("."+n[i]);var s=["type","name","title","alt"];for(i=0;i<s.length;i++)r=s[i],(o=t.getAttribute(r))&&a.push("["+r+'="'+o+'"]');return a.join("")}function isOnlyOneTruthy(t,e){return!!(!!t^!!e)}function isSameStacktrace(t,e){if(isOnlyOneTruthy(t,e))return!1;var n,r,o=t.frames,i=e.frames;if(o.length!==i.length)return!1;for(var a=0;a<o.length;a++)if(n=o[a],r=i[a],n.filename!==r.filename||n.lineno!==r.lineno||n.colno!==r.colno||n.function!==r.function)return!1;return!0}var i=3,a=51200,s=40;function jsonSize(t){return function utf8Length(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function serializeValue(t){if("string"==typeof t){return truncate(t,40)}if("number"==typeof t||"boolean"==typeof t||void 0===t)return t;var e=Object.prototype.toString.call(t);return"[object Object]"===e?"[Object]":"[object Array]"===e?"[Array]":"[object Function]"===e?t.name?"[Function: "+t.name+"]":"[Function]":t}t.exports={isObject:function isObject(t){return"object"==typeof t&&null!==t},isError:function isError(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}},isErrorEvent:function isErrorEvent(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)},isDOMError:function isDOMError(t){return"[object DOMError]"===Object.prototype.toString.call(t)},isDOMException:function isDOMException(t){return"[object DOMException]"===Object.prototype.toString.call(t)},isUndefined:isUndefined,isFunction:function isFunction(t){return"function"==typeof t},isPlainObject:isPlainObject,isString:isString,isArray:isArray,isEmptyObject:function isEmptyObject(t){if(!isPlainObject(t))return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},supportsErrorEvent:function supportsErrorEvent(){try{return new ErrorEvent(""),!0}catch(t){return!1}},supportsDOMError:function supportsDOMError(){try{return new DOMError(""),!0}catch(t){return!1}},supportsDOMException:function supportsDOMException(){try{return new DOMException(""),!0}catch(t){return!1}},supportsFetch:supportsFetch,supportsReferrerPolicy:function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(t){return!1}},supportsPromiseRejectionEvent:function supportsPromiseRejectionEvent(){return"function"==typeof PromiseRejectionEvent},wrappedCallback:function wrappedCallback(t){return function dataCallback(e,n){var r=t(e)||e;return n&&n(r)||r}},each:each,objectMerge:function objectMerge(t,e){return e?(each(e,function(e,n){t[e]=n}),t):t},truncate:truncate,objectFrozen:function objectFrozen(t){return!!Object.isFrozen&&Object.isFrozen(t)},hasKey:hasKey,joinRegExp:joinRegExp,urlencode:function urlencode(t){var e=[];return each(t,function(t,n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.join("&")},uuid4:function uuid4(){var t=o.crypto||o.msCrypto;if(!isUndefined(t)&&t.getRandomValues){var e=new Uint16Array(8);t.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;var n=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return n(e[0])+n(e[1])+n(e[2])+n(e[3])+n(e[4])+n(e[5])+n(e[6])+n(e[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},htmlTreeAsString:function htmlTreeAsString(t){for(var e,n=[],r=0,o=0,i=" > ".length;t&&r++<5&&!("html"===(e=htmlElementAsString(t))||r>1&&o+n.length*i+e.length>=80);)n.push(e),o+=e.length,t=t.parentNode;return n.reverse().join(" > ")},htmlElementAsString:htmlElementAsString,isSameException:function isSameException(t,e){return!isOnlyOneTruthy(t,e)&&(t=t.values[0],e=e.values[0],t.type===e.type&&t.value===e.value&&!function isBothUndefined(t,e){return isUndefined(t)&&isUndefined(e)}(t.stacktrace,e.stacktrace)&&isSameStacktrace(t.stacktrace,e.stacktrace))},isSameStacktrace:isSameStacktrace,parseUrl:function parseUrl(t){if("string"!=typeof t)return{};var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),n=e[6]||"",r=e[8]||"";return{protocol:e[2],host:e[4],path:e[5],relative:e[5]+n+r}},fill:function fill(t,e,n,r){if(null!=t){var o=t[e];t[e]=n(o),t[e].__raven__=!0,t[e].__orig__=o,r&&r.push([t,e,o])}},safeJoin:function safeJoin(t,e){if(!isArray(t))return"";for(var n=[],r=0;r<t.length;r++)try{n.push(String(t[r]))}catch(t){n.push("[value cannot be serialized]")}return n.join(e)},serializeException:function serializeException(t,e,n){if(!isPlainObject(t))return t;n="number"!=typeof(e="number"!=typeof e?i:e)?a:n;var o=function serializeObject(t,e){return 0===e?serializeValue(t):isPlainObject(t)?Object.keys(t).reduce(function(n,r){return n[r]=serializeObject(t[r],e-1),n},{}):Array.isArray(t)?t.map(function(t){return serializeObject(t,e-1)}):serializeValue(t)}(t,e);return jsonSize(r(o))>n?serializeException(t,e-1):o},serializeKeysForMessage:function serializeKeysForMessage(t,e){if("number"==typeof t||"string"==typeof t)return t.toString();if(!Array.isArray(t))return"";if(0===(t=t.filter(function(t){return"string"==typeof t})).length)return"[object has no keys]";if(e="number"!=typeof e?s:e,t[0].length>=e)return t[0];for(var n=t.length;n>0;n--){var r=t.slice(0,n).join(", ");if(!(r.length>e))return n===t.length?r:r+"…"}return""},sanitize:function sanitize(t,e){if(!isArray(e)||isArray(e)&&0===e.length)return t;var n,o=joinRegExp(e),i="********";try{n=JSON.parse(r(t))}catch(e){return t}return function sanitizeWorker(t){return isArray(t)?t.map(function(t){return sanitizeWorker(t)}):isPlainObject(t)?Object.keys(t).reduce(function(e,n){return o.test(n)?e[n]=i:e[n]=sanitizeWorker(t[n]),e},{}):t}(n)}}}).call(e,n(36))},function(t,e,n){var r=n(101),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(271),o=n(62),i=n(155);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},function(t,e,n){var r=n(72),o=n(86),i=n(37)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(40),o=n(37),i=n(438),a=o("species");t.exports=function(t){return i>=51||!r(function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},,function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(3),o=n(19),i=n(6),a=n(5),s=n(14),c=n(97),u=function(t){function ConnectableObservable(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(ConnectableObservable,t),ConnectableObservable.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},ConnectableObservable.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t},ConnectableObservable.prototype.refCount=function(){return Object(c.a)()(this)},ConnectableObservable}(i.a),l=function(){var t=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),f=function(t){function ConnectableSubscriber(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(ConnectableSubscriber,t),ConnectableSubscriber.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},ConnectableSubscriber}(o.b);a.a},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(14),a=n(6),s=n(19);o.a;var c=function(t){function GroupDurationSubscriber(e,n,r){var o=t.call(this,n)||this;return o.key=e,o.group=n,o.parent=r,o}return r.a(GroupDurationSubscriber,t),GroupDurationSubscriber.prototype._next=function(t){this.complete()},GroupDurationSubscriber.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},GroupDurationSubscriber}(o.a),u=function(t){function GroupedObservable(e,n,r){var o=t.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=r,o}return r.a(GroupedObservable,t),GroupedObservable.prototype._subscribe=function(t){var e=new i.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new l(n)),e.add(r.subscribe(t)),e},GroupedObservable}(a.a),l=function(t){function InnerRefCountSubscription(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.a(InnerRefCountSubscription,t),InnerRefCountSubscription.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},InnerRefCountSubscription}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=n(19),i=n(56),a=function(t){function BehaviorSubject(e){var n=t.call(this)||this;return n._value=e,n}return r.a(BehaviorSubject,t),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value},BehaviorSubject.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},BehaviorSubject}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=n(5),i=n(68);var a=function(t){function ObserveOnSubscriber(e,n,r){void 0===r&&(r=0);var o=t.call(this,e)||this;return o.scheduler=n,o.delay=r,o}return r.a(ObserveOnSubscriber,t),ObserveOnSubscriber.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},ObserveOnSubscriber.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new s(t,this.destination)))},ObserveOnSubscriber.prototype._next=function(t){this.scheduleMessage(i.a.createNext(t))},ObserveOnSubscriber.prototype._error=function(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()},ObserveOnSubscriber}(o.a),s=function(){return function ObserveOnMessage(t,e){this.notification=t,this.destination=e}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(192),o=new(n(194).a)(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function TimeoutErrorImpl(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return TimeoutErrorImpl.prototype=Object.create(Error.prototype),TimeoutErrorImpl}()},function(t,e,n){"use strict";e.a=function concatAll(){return Object(r.a)(1)};var r=n(91)},function(t,e,n){"use strict";e.a=function merge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,c=t[t.length-1];Object(o.a)(c)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof c&&(n=t.pop());if(null===s&&1===t.length&&t[0]instanceof r.a)return t[0];return Object(i.a)(n)(Object(a.a)(t,s))};var r=n(6),o=n(30),i=n(91),a=n(46)},function(t,e,n){"use strict";e.a=function not(t,e){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=t,notPred.thisArg=e,notPred}},function(t,e,n){"use strict";e.a=function race(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(o.a)(t[0]))return t[0];t=t[0]}return Object(i.a)(t,void 0).lift(new c)};var r=n(3),o=n(17),i=n(46),a=n(10),s=n(11);var c=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(t,e){return e.subscribe(new u(t))},RaceOperator}(),u=function(t){function RaceSubscriber(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(RaceSubscriber,t),RaceSubscriber.prototype._next=function(t){this.observables.push(t)},RaceSubscriber.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],o=Object(s.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(t,e,n,r,o){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},RaceSubscriber}(a.a)},function(t,e,n){"use strict";e.a=function timer(t,e,n){void 0===t&&(t=0);var s=-1;Object(i.a)(e)?s=Number(e)<1?1:Number(e):Object(a.a)(e)&&(n=e);Object(a.a)(n)||(n=o.a);return new r.a(function(e){var r=Object(i.a)(t)?t:+t-n.now();return n.schedule(dispatch,r,{index:0,period:s,subscriber:e})})};var r=n(6),o=n(21),i=n(69),a=n(30);function dispatch(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},function(t,e,n){"use strict";n(122);var r=n(237);n.d(e,"j",function(){return r.a});var o=n(238);n.d(e,"b",function(){return o.a});var i=n(123);n.d(e,"c",function(){return i.a});var a=n(260);n.d(e,"d",function(){return a.a});var s=n(261);n.d(e,"e",function(){return s.a});var c=n(262);n.d(e,"f",function(){return c.a});var u=n(263);n.d(e,"g",function(){return u.a});var l=n(264);n.d(e,"h",function(){return l.a});n(265);var f=n(266);n.d(e,"a",function(){return f.a}),n.d(e,"i",function(){return f.b});var d=n(267);n.d(e,"k",function(){return d.a})},,,,,,,function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(40),o=n(275),i="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(431),o=n(49),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},,function(t,e,n){"use strict";e.a=function audit(t){return function auditOperatorFunction(e){return e.lift(new a(t))}};var r=n(3),o=n(10),i=n(11);var a=function(){function AuditOperator(t){this.durationSelector=t}return AuditOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.durationSelector))},AuditOperator}(),s=function(t){function AuditSubscriber(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(AuditSubscriber,t),AuditSubscriber.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}var n=Object(i.a)(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},AuditSubscriber.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},AuditSubscriber.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function concatMap(t,e){return Object(r.a)(t,e,1)};var r=n(59)},function(t,e,n){"use strict";e.a=function isDate(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,n){"use strict";e.a=function distinctUntilChanged(t,e){return function(n){return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function DistinctUntilChangedOperator(t,e){this.compare=t,this.keySelector=e}return DistinctUntilChangedOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),a=function(t){function DistinctUntilChangedSubscriber(e,n,r){var o=t.call(this,e)||this;return o.keySelector=r,o.hasKey=!1,"function"==typeof n&&(o.compare=n),o}return r.a(DistinctUntilChangedSubscriber,t),DistinctUntilChangedSubscriber.prototype.compare=function(t,e){return t===e},DistinctUntilChangedSubscriber.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},DistinctUntilChangedSubscriber}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(3),o=n(5);var i=function(){function FindValueOperator(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return FindValueOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},FindValueOperator}(),a=function(t){function FindValueSubscriber(e,n,r,o,i){var a=t.call(this,e)||this;return a.predicate=n,a.source=r,a.yieldIndex=o,a.thisArg=i,a.index=0,a}return r.a(FindValueSubscriber,t),FindValueSubscriber.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},FindValueSubscriber.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},FindValueSubscriber.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},FindValueSubscriber}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=n(10),i=n(11),a={leading:!0,trailing:!1};o.a},function(t,e,n){"use strict";e.a=function timeoutWith(t,e,n){void 0===n&&(n=o.a);return function(r){var o=Object(i.a)(t),a=o?+t-n.now():Math.abs(t);return r.lift(new c(a,o,e,n))}};var r=n(3),o=n(21),i=n(162),a=n(10),s=n(11);var c=function(){function TimeoutWithOperator(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return TimeoutWithOperator.prototype.call=function(t,e){return e.subscribe(new u(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),u=function(t){function TimeoutWithSubscriber(e,n,r,o,i){var a=t.call(this,e)||this;return a.absoluteTimeout=n,a.waitFor=r,a.withObservable=o,a.scheduler=i,a.action=null,a.scheduleTimeout(),a}return r.a(TimeoutWithSubscriber,t),TimeoutWithSubscriber.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(s.a)(t,e))},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,this))},TimeoutWithSubscriber.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},TimeoutWithSubscriber.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},TimeoutWithSubscriber}(a.a)},function(t,e,n){"use strict";e.b=function getDelay(t,e){return Math.min(t,e)},e.a=function exponentialBackoffDelay(t,e){return Math.pow(2,t)*e}},function(t,e,n){"use strict";var r=n(381);n.d(e,"c",function(){return r.a});var o=n(400);n.d(e,"e",function(){return o.a});var i=n(401);n.d(e,"h",function(){return i.a});var a=n(402);n.d(e,"a",function(){return a.a});var s=n(406);n.d(e,"b",function(){return s.a});var c=n(407);n.d(e,"f",function(){return c.a});var u=n(169);n.d(e,"m",function(){return u.a});var l=n(408);n.d(e,"n",function(){return l.a});var f=n(175);n.d(e,"d",function(){return f.a}),n.d(e,"k",function(){return f.b});var d=n(409);n.d(e,"j",function(){return d.a});var h=n(412);n.d(e,"g",function(){return h.a});n(176);var p=n(413);n.d(e,"l",function(){return p.a});n(177);var b=n(414);n.d(e,"i",function(){return b.a});n(415)},function(t,e,n){"use strict";e.a=function setupAnalyticsVars(t,e,n,r,o,i,a,s){t("set","dimension1",r),t("set","dimension2",""),t("set","dimension3",i),t("set","dimension4",e),a&&t("set","dimension5",a);t("set","dimension6",o),s&&t("set","dimension7",s);t("set","dimension8",n)}},function(t,e,n){"use strict";t.exports=function bind(t,e){return function wrap(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";(function(e){var r=n(32),o=n(386),i=n(388),a=n(389),s=n(390),c=n(172),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(391);t.exports=function xhrAdapter(t){return new Promise(function dispatchXhrRequest(l,f){var d=t.data,h=t.headers;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest,b="onreadystatechange",v=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(t.url)||(p=new window.XDomainRequest,b="onload",v=!0,p.onprogress=function handleProgress(){},p.ontimeout=function handleTimeout(){}),t.auth){var _=t.auth.username||"",y=t.auth.password||"";h.Authorization="Basic "+u(_+":"+y)}if(p.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[b]=function handleLoad(){if(p&&(4===p.readyState||v)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:e,config:t,request:p};o(l,f,n),p=null}},p.onerror=function handleError(){f(c("Network Error",t,null,p)),p=null},p.ontimeout=function handleTimeout(){f(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var m=n(392),g=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;g&&(h[t.xsrfHeaderName]=g)}if("setRequestHeader"in p&&r.forEach(h,function setRequestHeader(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function onCanceled(t){p&&(p.abort(),f(t),p=null)}),void 0===d&&(d=null),p.send(d)})}}).call(e,n(4))},function(t,e,n){"use strict";var r=n(387);t.exports=function createError(t,e,n,o,i){var a=new Error(t);return r(a,e,n,o,i)}},function(t,e,n){"use strict";t.exports=function isCancel(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function Cancel(t){this.message=t}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,t.exports=Cancel},function(t,e,n){"use strict";n.d(e,"a",function(){return a}),e.b=onBeforeSendHeaders;var r=n(16),o=n(20),i=n(176),a=function(){function ChromeExtensionEnvironmentServicesImpl(t,e,n,r,i){this.chromeEnv=t,this.storage=e,this.iconPath=n,this.updateEventHandler=r,this.log=i,this.auditEvents=new o.d,this.envEvents=function envEventsProvider(t){return new o.c(function(e){var n=function(t){"install"===t.reason?e.next("install"):"update"===t.reason?e.next("update"):e.next("env_update")};return t.addListener(n),function unsubscribe(){t.removeListener(n)}})}(r),this.crossMessage=function crossMessageProvider(t){var e=["NewSponsoredPost","Post","Analytics","Interaction","Config","IsBackgroundReady","NewPromotedTweet","AmazonProduct","AmazonSponsored","LinkedInSponsored","FacebookNewFeedUi","AdBlockerStatus","Navigation"];return new o.c(function(n){var r=function(t,r,o){return-1!==e.indexOf(t.type)&&(n.next(t),!1)};return t.runtime.onMessage.addListener(r),function unsubscribe(){t.runtime.onMessage.removeListener(r)}})}(this.chromeEnv)}return ChromeExtensionEnvironmentServicesImpl.prototype.hideOrigin=function(t,e){var n=this;onBeforeSendHeaders(function(t){if(t.requestHeaders){for(var r=0,o=t.requestHeaders;r<o.length;r++){var i=o[r];i.value&&"Origin"===i.name&&i.value.match(n.chromeEnv.extension.getURL("/"))&&(n.log.info("Request to "+t.url+" Change origin from "+i.value+" to https://www.facebook.com"),i.value=e,!0)}t.requestHeaders.push({name:"Origin",value:e})}return{requestHeaders:t.requestHeaders}},{urls:[t]},["blocking","requestHeaders","extraHeaders"])},ChromeExtensionEnvironmentServicesImpl.prototype.sendMessageToContent=function(t){var e=this;this.chromeEnv.tabs.query({},function(n){for(var r=0,o=n;r<o.length;r++){var i=o[r].id;i&&e.chromeEnv.tabs.sendMessage(i,t)}})},ChromeExtensionEnvironmentServicesImpl.prototype.getAllCookies=function(t){return Object(i.a)(this.chromeEnv,t)},ChromeExtensionEnvironmentServicesImpl.prototype.onConfigRequest=function(t){var e=this,n=function(e,n,r){return"Config"===e.type&&r(t()),!1};return this.chromeEnv.runtime.onMessage.addListener(n),function(){e.chromeEnv.runtime.onMessage.removeListener(n)}},ChromeExtensionEnvironmentServicesImpl}();function onBeforeSendHeaders(t,e,n){var o,i,a,s,c=Object(r.o)(),u=new Set(c&&c<72?["extraHeaders"]:[]);return null===(a=null===(i=null===(o=chrome)||void 0===o?void 0:o.webRequest)||void 0===i?void 0:i.onBeforeSendHeaders)||void 0===a||a.addListener(t,e,null===(s=n)||void 0===s?void 0:s.filter(function(t){return!u.has(t)})),function(){var e,n,r;null===(r=null===(n=null===(e=chrome)||void 0===e?void 0:e.webRequest)||void 0===n?void 0:n.onBeforeSendHeaders)||void 0===r||r.removeListener(t)}}},function(t,e,n){"use strict";e.a=function chromeCookiesGetAll(t,e){return new Promise(function(n,r){t.cookies.getAll(e,n)})}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(20),o=n(34);var i="undefined"!=typeof chrome&&chrome?{tabs:chrome.tabs&&{query:chrome.tabs.query&&Object(r.f)(chrome.tabs.query),onCreated:chrome.tabs.onCreated&&Object(r.j)(function(t){return chrome.tabs.onCreated.addListener(t)},function(t){return chrome.tabs.onCreated.removeListener(t)}).pipe(Object(o.i)(function(t){return{tab:t[0]}})),onUpdated:chrome.tabs.onUpdated&&Object(r.j)(function(t){return chrome.tabs.onUpdated.addListener(t)},function(t){return chrome.tabs.onUpdated.removeListener(t)}).pipe(Object(o.i)(function(t){return{tabId:t[0],changeInfo:t[1],tab:t[2]}}))},browserAction:chrome.browserAction&&{onClicked:chrome.browserAction.onClicked&&Object(r.j)(function(t){return chrome.browserAction.onClicked.addListener(t)},function(t){return chrome.browserAction.onClicked.removeListener(t)}).pipe(Object(o.i)(function(t){return{tab:t[0]}}))}}:null},function(t,e){function indexOf(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function serializer(t,e){var n=[],r=[];return null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+r.slice(0,indexOf(n,e)).join(".")+"]"}),function(o,i){if(n.length>0){var a=indexOf(n,this);~a?n.splice(a+1):n.push(this),~a?r.splice(a,1/0,o):r.push(o),~indexOf(n,i)&&(i=e.call(this,o,i))}else n.push(i);return null==t?i instanceof Error?function stringifyError(t){var e={stack:t.stack,message:t.message,name:t.name};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(i):i:t.call(this,o,i)}}(t.exports=function stringify(t,e,n,r){return JSON.stringify(t,serializer(e,r),n)}).getSerialize=serializer},,,,,,,,,function(t,e,n){"use strict";var r,o;n.d(e,"a",function(){return r}),e.c=function setLevel(t){i=t},function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug",t[t.Log=5]="Log"}(r||(r={})),function(t){t[t.none=0]="none",t[t.error=1]="error",t[t.warn=2]="warn",t[t.info=3]="info",t[t.debug=4]="debug",t[t.log=5]="log"}(o||(o={}));var i=r.None;for(var a={},s=function(t){Object.defineProperty(a,t,{get:function(){var e=t;if(e in console||"debug"!==e||(e="log"),e in console&&"function"==typeof console[e]){var n=5;return e in o&&(n=o[e]),i<n?function(){}:console[e].bind(console)}return console[e]}})},c=0,u=["assert","dir","error","info","log","time","timeEnd","trace","warn","debug"];c<u.length;c++){s(u[c])}e.b=a},function(t,e,n){"use strict";e.a=function toSubscriber(t,e,n){if(t){if(t instanceof r.a)return t;if(t[o.a])return t[o.a]()}if(!t&&!e&&!n)return new r.a(i.a);return new r.a(t,e,n)};var r=n(5),o=n(78),i=n(106)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function QueueAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(QueueAction,t),QueueAction.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},QueueAction.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},QueueAction}(n(44).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function Action(e,n){return t.call(this)||this}return r.a(Action,t),Action.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},Action}(n(14).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function QueueScheduler(){return null!==t&&t.apply(this,arguments)||this}return r.a(QueueScheduler,t),QueueScheduler}(n(45).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(3),o=n(193),i=function(t){function AsapAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(AsapAction,t),AsapAction.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.a.setImmediate(e.flush.bind(e,null))))},AsapAction.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(o.a.clearImmediate(n),e.scheduled=void 0)},AsapAction}(n(44).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=1,o={};var i={setImmediate:function(t){var e=r++;return o[e]=t,Promise.resolve().then(function(){return function runIfPresent(t){var e=o[t];e&&e()}(e)}),e},clearImmediate:function(t){delete o[t]}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AsapScheduler(){return null!==t&&t.apply(this,arguments)||this}return r.a(AsapScheduler,t),AsapScheduler.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},AsapScheduler}(n(45).a)},function(t,e,n){"use strict";var r=n(196);r.a},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AnimationFrameAction(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(AnimationFrameAction,t),AnimationFrameAction.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},AnimationFrameAction.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},AnimationFrameAction}(n(44).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),o=function(t){function AnimationFrameScheduler(){return null!==t&&t.apply(this,arguments)||this}return r.a(AnimationFrameScheduler,t),AnimationFrameScheduler.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},AnimationFrameScheduler}(n(45).a)},function(t,e,n){"use strict";var r=n(3),o=n(44),i=(n(45).a,function(t){function VirtualAction(e,n,r){void 0===r&&(r=e.index+=1);var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=r,o.active=!0,o.index=e.index=r,o}return r.a(VirtualAction,t),VirtualAction.prototype.schedule=function(e,n){if(void 0===n&&(n=0),!this.id)return t.prototype.schedule.call(this,e,n);this.active=!1;var r=new VirtualAction(this.scheduler,this.work);return this.add(r),r.schedule(e,n)},VirtualAction.prototype.requestAsyncId=function(t,e,n){void 0===n&&(n=0),this.delay=t.frame+n;var r=t.actions;return r.push(this),r.sort(VirtualAction.sortActions),!0},VirtualAction.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},VirtualAction.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},VirtualAction.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},VirtualAction}(o.a))},function(t,e,n){"use strict";n(6)},function(t,e,n){"use strict";e.a=function bindCallback(t,e,n){if(e){if(!Object(c.a)(e))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return bindCallback(t,n).apply(void 0,r).pipe(Object(i.a)(function(t){return Object(s.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var s,c=this,u={context:c,subject:s,callbackFunc:t,scheduler:n};return new r.a(function(r){if(n){var i={args:e,subscriber:r,params:u};return n.schedule(dispatch,0,i)}if(!s){s=new o.a;try{t.apply(c,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.next(t.length<=1?t[0]:t),s.complete()}]))}catch(t){Object(a.a)(s)?s.error(t):console.warn(t)}}return s.subscribe(r)})}};var r=n(6),o=n(67),i=n(26),a=n(75),s=n(17),c=n(30);function dispatch(t){var e=this,n=t.args,r=t.subscriber,i=t.params,a=i.callbackFunc,s=i.context,c=i.scheduler,u=i.subject;if(!u){u=i.subject=new o.a;try{a.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(c.schedule(dispatchNext,0,{value:r,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(r))}function dispatchNext(t){var e=t.value,n=t.subject;n.next(e),n.complete()}},function(t,e,n){"use strict";n(6),n(67),n(26),n(75),n(30),n(17)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(76),o=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.a),e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(47),o=function(t){return function(e){for(var n=t[r.a]();;){var o=n.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(39),o=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},function(t,e,n){"use strict";e.a=function scheduleObservable(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){var o=t[i.a]();r.add(o.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})};var r=n(6),o=n(14),i=n(39)},function(t,e,n){"use strict";e.a=function schedulePromise(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})};var r=n(6),o=n(14)},function(t,e,n){"use strict";e.a=function scheduleIterable(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(function(n){var r,a=new o.a;return a.add(function(){r&&"function"==typeof r.return&&r.return()}),a.add(e.schedule(function(){r=t[i.a](),a.add(e.schedule(function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),a})};var r=n(6),o=n(14),i=n(47)},function(t,e,n){"use strict";e.a=function isInteropObservable(t){return t&&"function"==typeof t[r.a]};var r=n(39)},function(t,e,n){"use strict";e.a=function isIterable(t){return t&&"function"==typeof t[r.a]};var r=n(47)},function(t,e,n){"use strict";n(6),n(17),n(26),n(77),n(31)},function(t,e,n){"use strict";e.a=function fromEvent(t,e,n,s){Object(i.a)(n)&&(s=n,n=void 0);if(s)return fromEvent(t,e,n).pipe(Object(a.a)(function(t){return Object(o.a)(t)?s.apply(void 0,t):s(t)}));return new r.a(function(r){!function setupSubscription(t,e,n,r,o){var i;if(function isEventTarget(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var a=t;t.addEventListener(e,n,o),i=function(){return a.removeEventListener(e,n,o)}}else if(function isJQueryStyleEventEmitter(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var s=t;t.on(e,n),i=function(){return s.off(e,n)}}else if(function isNodeStyleEventEmitter(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var c=t;t.addListener(e,n),i=function(){return c.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,l=t.length;u<l;u++)setupSubscription(t[u],e,n,r,o)}r.add(i)}(t,e,function handler(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,n)})};var r=n(6),o=n(17),i=n(50),a=n(26)},function(t,e,n){"use strict";e.a=function fromEventPattern(t,e,n){if(n)return fromEventPattern(t,e).pipe(Object(a.a)(function(t){return Object(o.a)(t)?n.apply(void 0,t):n(t)}));return new r.a(function(n){var r,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(o)}catch(t){return void n.error(t)}if(Object(i.a)(e))return function(){return e(o,r)}})};var r=n(6),o=n(17),i=n(50),a=n(26)},function(t,e,n){"use strict";n(6),n(43),n(30)},function(t,e,n){"use strict";e.a=function iif(t,e,n){void 0===e&&(e=o.a);void 0===n&&(n=o.a);return Object(r.a)(function(){return t()?e:n})};var r=n(92),o=n(29)},function(t,e,n){"use strict";n(6),n(21),n(69)},function(t,e,n){"use strict";n(6),n(31),n(17),n(29)},function(t,e,n){"use strict";n(6),n(14)},function(t,e,n){"use strict";n(145),n(80),n(51),n(6)},function(t,e,n){"use strict";n(6)},function(t,e,n){"use strict";n(6),n(31),n(29)},function(t,e,n){"use strict";e.a=function getChromeMajorVersion(t){void 0===t&&(t=navigator.userAgent);var e=t.match(/Chrome\/(\d+)/);return e&&parseInt(e[1],10)||null}},function(t,e,n){"use strict";e.a=function randomString(){return Math.random().toString(16)}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function Sha1(){}return Sha1.salted_hash=function(t,e){return Sha1.hash(e+t)},Sha1.hash=function(t){t=this.utf8Encode(t);var e,n=[1518500249,1859775393,2400959708,3395469782],r=(t+=String.fromCharCode(128)).length/4+2,o=Math.ceil(r/16),i=new Array(o);for(e=0;e<o;e++){i[e]=new Array(16);for(var a=0;a<16;a++)i[e][a]=t.charCodeAt(64*e+4*a)<<24|t.charCodeAt(64*e+4*a+1)<<16|t.charCodeAt(64*e+4*a+2)<<8|t.charCodeAt(64*e+4*a+3)}i[o-1][14]=8*(t.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(t.length-1)&4294967295;var s,c,u,l,f,d=1732584193,h=4023233417,p=2562383102,b=271733878,v=3285377520,_=new Array(80);for(e=0;e<o;e++){var y;for(y=0;y<16;y++)_[y]=i[e][y];for(y=16;y<80;y++)_[y]=Sha1.rotl(_[y-3]^_[y-8]^_[y-14]^_[y-16],1);for(s=d,c=h,u=p,l=b,f=v,y=0;y<80;y++){var m=Math.floor(y/20),g=Sha1.rotl(s,5)+Sha1.f(m,c,u,l)+f+n[m]+_[y]&4294967295;f=l,l=u,u=Sha1.rotl(c,30),c=s,s=g}d=d+s&4294967295,h=h+c&4294967295,p=p+u&4294967295,b=b+l&4294967295,v=v+f&4294967295}return Sha1.toHexStr(d)+Sha1.toHexStr(h)+Sha1.toHexStr(p)+Sha1.toHexStr(b)+Sha1.toHexStr(v)},Sha1.f=function(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}throw new TypeError("Something was wrong with the input")},Sha1.rotl=function(t,e){return t<<e|t>>>32-e},Sha1.toHexStr=function(t){for(var e="",n=7;n>=0;n--)e+=(t>>>4*n&15).toString(16);return e},Sha1.utf8Encode=function(t){return window.unescape(encodeURIComponent(t))},Sha1.utf8Decode=function(t){return window.decodeURIComponent(window.escape(t))},Sha1}()},function(t,e,n){"use strict";var r=n(225);n.d(e,"a",function(){return r.a});var o=n(226);n.d(e,"b",function(){return o.a});var i=n(227);n.d(e,"c",function(){return i.a});var a=n(228);n.d(e,"d",function(){return a.a});var s=n(120);n.d(e,"e",function(){return s.a});var c=n(229);n.d(e,"f",function(){return c.a});var u=n(230);n.d(e,"g",function(){return u.a});var l=n(231);n.d(e,"h",function(){return l.a});var f=n(232);n.d(e,"i",function(){return f.a});var d=n(121);n.d(e,"j",function(){return d.a});var h=n(233);n.d(e,"k",function(){return h.a});var p=n(234);n.d(e,"l",function(){return p.a});var b=n(235);n.d(e,"m",function(){return b.a})},function(t,e,n){"use strict";e.a=function assertNever(t,e){if(e)return t;throw new Error("Unhandled discriminated union member: "+JSON.stringify(t))}},function(t,e,n){"use strict";e.a=function closestUpTo(t,e,n){if(!n.contains(t))throw new RangeError("startFrom is not descendant of upTo");if(t.matches(e))return t;var r=t;for(;r!==n&&!r.matches(e)&&null!==r.parentElement;)r=r.parentElement;return r.matches(e)?r:null}},function(t,e,n){"use strict";e.a=function domStringToDomTree(t){var e=document.createElement("html");return t=t.replace(/\<\!\-\-/g,""),e.innerHTML=t,e}},function(t,e,n){"use strict";e.a=function escapeRegexChars(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(r,"\\$&")};var r=/[|\\{}()[\]^$+*?.]/g},function(t,e,n){"use strict";e.a=function firstResult(t,e,n){for(var r=0,o=t;r<o.length;r++){var i=o[r],a=e(i);if(void 0!==a)return a}return n}},function(t,e,n){"use strict";e.a=function getOrDefault(t,e){try{return t()}catch(t){return e}}},function(t,e,n){"use strict";e.a=function getTopLevelObjectsFromString(t){var e=[],n=t;for(;n.length>0;){var o=n.indexOf("{");if(-1===o)break;var i=Object(r.a)(n,o),a=n.slice(o,i+1);e.push(JSON.parse(a)),n=n.slice(i+1)}return e};var r=n(120)},function(t,e,n){"use strict";e.a=function isNonNullable(t){return null!=t}},function(t,e,n){"use strict";e.a=function omit(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Object(r.a)(Object.entries(t).filter(function(t){var n=t[0];t[1];return!e.includes(n)}))};var r=n(121)},function(t,e,n){"use strict";e.a=function typedObjectEntries(t){return Object.entries(t)}},function(t,e,n){"use strict";e.a=function uniqBy(t,e){var n=new Set(t.map(e));return Array.from(n).map(function(n){return t.find(function(t){return e(t)===n})})}},function(t,e,n){"use strict";e.a=function isKnownChannel(t){return"string"==typeof t&&r.includes(t)};var r=["facebook","twitter","youtube","linkedin","amazon"]},function(t,e,n){"use strict";e.a=function createGaProvider(t,e,n){void 0===n&&(n=!1);return new Promise(function(n){t.GoogleAnalyticsObject="_____private_ga____";var r=e.createElement("script");r.src="https://www.google-analytics.com/analytics.js",r.async=!0,r.addEventListener("load",function(){n(t._____private_ga____)}),e.head.appendChild(r)})}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(60),o=n(123),i=n(16),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(){function EventsEnricher(t,e,n,r,o,i,a,s,c,u,l){this.locationService=t,this.facebookMetadataProvider=e,this.deviceId=n,this.extensionId=r,this.extensionVersion=o,this.userAgent=i,this.thirdPartyId=a,this.thirdPartyCookie=s,this.errorReporter=c,this.secret_local_salt=u,this.extensionPlatform=l}return EventsEnricher.prototype.getFacebookMetadataForUserOrNulls=function(t){var e=this;return this.facebookMetadataProvider.getForUser(t).catch(function(n){return e.errorReporter(n),a(a({},o.b),{id:t})})},EventsEnricher.prototype.updateThirdPartyInfo=function(t,e){this.thirdPartyId=t,this.thirdPartyCookie=e},EventsEnricher.prototype.enrichAuditEvent=function(t,e){return s(this,void 0,void 0,function(){var n,r,o,i;return c(this,function(s){switch(s.label){case 0:return n=new Date,[4,Promise.all([this.locationService.getLocation(),this.getFinalUserId()])];case 1:return r=s.sent(),o=r[0],i=r[1],[2,a(a({event_time:n},EventsEnricher.geoData(o)),{fb_user_hashed_id:i,third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion,browser_time_zone:n.getTimezoneOffset()/60*-1,navigated_to:t,adblocker_enabled:e,platform:this.extensionPlatform})]}})})},EventsEnricher.prototype.enrichInteraction=function(t){return s(this,void 0,void 0,function(){var e,n,o,i,s,u,l,f,d,h,p,b,v,_;return c(this,function(c){switch(c.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=c.sent(),o=n[0],i=n[1],t.fb_post_src=this.annonimizeSponsoredPostHTML(t.fb_post_src,t.fb_user_id,o.userNameOnlyForAnonymizingTheHTMLDoNotSend),s=t.fb_post_interaction_type,u=t.fb_post_entity_id,l=t.fb_post_interaction_text,f=t.fb_post_interaction_url,d=t.fb_post_interaction_click_origin,h=t.fb_post_src,p=t.original_event_time,b=t.fb_post_advertiser_page_entity_id,v=t.fb_post_advertiser_page_id,_=t.fb_user_id,[2,a(a(a(a(a({event_time:e,fb_post_interaction_type:s,fb_post_interaction_text:l,fb_post_interaction_url:f,fb_post_interaction_click_origin:d,fb_post_entity_id:u,fb_post_src:h,browser_time_zone:e.getTimezoneOffset()/60*-1},this.interactionHash({fb_user_id:_,fb_post_entity_id:u},r.c)),EventsEnricher.facebookMetadata(o)),EventsEnricher.geoData(i)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion,original_event_time:p,fb_post_advertiser_page_entity_id:b,fb_post_advertiser_page_id:v})]}})})},EventsEnricher.prototype.enrichInterestsEvent=function(t){return s(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(i){switch(i.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=i.sent(),r=n[0],o=n[1],[2,a(a(a(a(a({fb_user_interests:t.fb_user_interests,event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1},EventsEnricher.facebookMetadata(r)),EventsEnricher.geoData(o)),this.getUserHashes(t.fb_user_id)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion})]}})})},EventsEnricher.prototype.enrichYTAdVideo=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(s){switch(s.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=s.sent(),r=n[0],o=n[1],i=n[2],[2,a(a(a(a({yt_video_id:t.id,yt_host_type:t.host_type,event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r},o),EventsEnricher.geoData(i)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion})]}})})},EventsEnricher.prototype.enrichAmazonSponsored=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(s){switch(s.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=s.sent(),r=n[0],o=n[1],i=n[2],[2,a(a(a(a(a({},t),{event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r,third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion}),EventsEnricher.geoData(i)),EventsEnricher.googleData()),o)]}})})},EventsEnricher.prototype.enrichLinkedInSponsored=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(s){switch(s.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=s.sent(),r=n[0],o=n[1],i=n[2],[2,a(a(a(a(a({},t),{event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r,third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion}),EventsEnricher.geoData(i)),EventsEnricher.googleData()),o)]}})})},EventsEnricher.prototype.enrichTweet=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i;return c(this,function(s){switch(s.label){case 0:return e=new Date,[4,Promise.all([this.getFinalUserId(),this.getFacebookDataOrNulls(),this.locationService.getLocation()])];case 1:return n=s.sent(),r=n[0],o=n[1],i=n[2],[2,a(a(a(a(a({event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1,fb_user_hashed_id:r},o),EventsEnricher.geoData(i)),EventsEnricher.googleData()),t),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:this.extensionVersion})]}})})},EventsEnricher.prototype.enrichRegularStory=function(t){return s(this,void 0,void 0,function(){var e,n,o,i;return c(this,function(s){switch(s.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=s.sent(),o=n[0],i=n[1],[2,a(a(a(a(a({event_time:e,browser_time_zone:e.getTimezoneOffset()/60*-1},EventsEnricher.facebookMetadata(o)),EventsEnricher.geoData(i)),this.getRegularStoryHashes(t,r.c)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:t.parser_version,fb_post_is_sponsored:!1,parser_version:t.parser_version})]}})})},EventsEnricher.prototype.enrichSponsoredStory=function(t){return s(this,void 0,void 0,function(){var e,n,o,i;return c(this,function(s){switch(s.label){case 0:return e=new Date,[4,Promise.all([this.getFacebookMetadataForUserOrNulls(t.fb_user_id),this.locationService.getLocation()])];case 1:return n=s.sent(),o=n[0],i=n[1],t.fb_post_src=this.annonimizeSponsoredPostHTML(t.fb_post_src,t.fb_user_id,o.userNameOnlyForAnonymizingTheHTMLDoNotSend),[2,a(a(a(a(a(a({browser_time_zone:e.getTimezoneOffset()/60*-1},EventsEnricher.pickFieldsToSendSponsored(t)),EventsEnricher.facebookMetadata(o)),EventsEnricher.geoData(i)),this.getStoryHashes(t,r.c)),EventsEnricher.googleData()),{third_party_id:this.thirdPartyId,third_party_cookie:this.thirdPartyCookie,event_time:e,device_id:this.deviceId,user_agent:this.userAgent,extension_id:this.extensionId,extension_version:t.parser_version,fb_post_is_sponsored:!0,parser_version:t.parser_version,parser_type:t.parser_type})]}})})},EventsEnricher.prototype.getFacebookDataOrNulls=function(){return s(this,void 0,void 0,function(){var t,e,n,r;return c(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t=[{}],n=(e=EventsEnricher).facebookMetadata,r=this.getFacebookMetadataForUserOrNulls,[4,this.facebookMetadataProvider.getCurrentUserId()];case 1:return[4,r.apply(this,[o.sent()])];case 2:return[2,a.apply(void 0,t.concat([n.apply(e,[o.sent()])]))];case 3:return o.sent(),[2,{fb_meta_gender:null,fb_meta_dob_month:null,fb_meta_dob_year:null,fb_meta_relationship_status:null,fb_meta_user_locale:null,fb_meta_current_state_or_country:null}];case 4:return[2]}})})},EventsEnricher.prototype.getFinalUserId=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.facebookMetadataProvider.getCurrentUserId()];case 1:return t=e.sent(),[2,this.getUserHashes(t).fb_user_hashed_id];case 2:return e.sent(),[2,("unkn_"+this.deviceId).substring(0,45)];case 3:return[2]}})})},EventsEnricher.prototype.enrichNewFacebookUiEvent=function(t){return s(this,void 0,void 0,function(){var e,n,r;return c(this,function(o){switch(o.label){case 0:return[4,Promise.all([this.getFinalUserId(),this.locationService.getLocation()])];case 1:return e=o.sent(),n=e[0],r=e[1],[2,{event_type:"fb_new_feed_ui",event_content:{fb_user_hashed_id:n,device_id:this.deviceId,fb_is_beta_member:"new"===t,geo_current_country_iso:EventsEnricher.geoData(r).geo_current_location_country_iso,extension_id:this.extensionId,extension_version:this.extensionVersion}}]}})})},EventsEnricher.prototype.annonimizeSponsoredPostHTML=function(t,e,n){if(null===t)return null;if(null===n){var r=new Error("Cloudn't get user name");this.errorReporter(r)}else t.match(new RegExp(Object(i.k)(n),"ig"))&&(t=t.replace(new RegExp(Object(i.k)(n),"ig"),"--annonimized-un--"));return t.replace(new RegExp(e,"g"),"--annonimized--")},EventsEnricher.pickFieldsToSendSponsored=function(t){var e=t.fb_post_actionlink_url,n=t.fb_post_advertiser_page_pretty_name,r=t.fb_post_advertiser_page_id,o=t.fb_post_advertiser_thumbnail_url,i=t.fb_post_call_to_action_text,s=t.fb_post_call_to_action_url,c=t.fb_post_img_url,u=t.fb_post_src,l=t.fb_post_text,f=t.fb_post_type,d=t.fb_post_video_url,h=t.fb_post_video_views,p=t.fb_post_this_video_views,b=t.fb_post_entity_id,v=t.fb_post_engage_angry,_=t.fb_post_engage_comments,y=t.fb_post_engage_haha,m=t.fb_post_engage_like,g=t.fb_post_engage_love,w=t.fb_post_engage_sad,S=t.fb_post_engage_shares,x=t.fb_post_engage_wow,O=t.fb_post_width,E=t.fb_post_height,k=t.fb_post_app_id,j=t.fb_post_app_pretty_name,T=t.fb_post_app_thumbnail_url,P=t.fb_post_carousel_info,I=t.fb_post_attachment_description,A=t.fb_post_attachment_title,C=t.fb_post_caption,F=t.fb_post_advertiser_page_entity_id,M=t.fb_post_ad_placement,R="fb_post_anonymized_edge"in t?t.fb_post_anonymized_edge:void 0;return a({fb_post_actionlink_url:e,fb_post_advertiser_page_pretty_name:n,fb_post_advertiser_page_id:r,fb_post_advertiser_thumbnail_url:o,fb_post_call_to_action_text:i,fb_post_call_to_action_url:s,fb_post_img_url:c,fb_post_src:u,fb_post_text:l,fb_post_type:f,fb_post_video_url:d,fb_post_video_views:h,fb_post_this_video_views:p,fb_post_entity_id:b,fb_post_engage_angry:v,fb_post_engage_comments:_,fb_post_engage_haha:y,fb_post_engage_like:m,fb_post_engage_love:g,fb_post_engage_sad:w,fb_post_engage_shares:S,fb_post_engage_wow:x,fb_post_width:O,fb_post_height:E,fb_post_app_id:k,fb_post_app_pretty_name:j,fb_post_app_thumbnail_url:T,fb_post_carousel_info:P,fb_post_attachment_description:I,fb_post_attachment_title:A,fb_post_caption:C,fb_post_advertiser_page_entity_id:F,fb_post_ad_placement:M},R&&{fb_post_anonymized_edge:R})},EventsEnricher.googleData=function(){return{google_meta_dob:null,google_meta_gender:null}},EventsEnricher.isFacebookRedirectorUrl=function(t){return t.startsWith("https://l.facebook.com/")||t.startsWith("http://l.facebook.com/")},EventsEnricher.getUrlPartAfterDomain=function(t){var e=document.createElement("a");return e.href=t,e.pathname+e.search+e.hash},EventsEnricher.prototype.getStoryHashes=function(t,e){var n=new Set(["fb_post_advertiser_page_id","fb_post_app_id","fb_post_call_to_action_text","fb_post_text","fb_post_type"]),r=Array.from(n.keys()).filter(function(e){return null!==t[e]}).map(function(e){return t[e]});return{fb_post_hashed_content:i.e.hash(""+r.join(",")),fb_post_hashed_entity_id:i.e.salted_hash(t.fb_post_entity_id,e),fb_user_hashed_id:i.e.salted_hash(t.fb_user_id,this.secret_local_salt)}},EventsEnricher.prototype.getUserHashes=function(t){return{fb_user_hashed_id:i.e.salted_hash(t,this.secret_local_salt)}},EventsEnricher.prototype.getRegularStoryHashes=function(t,e){return{fb_post_hashed_entity_id:i.e.salted_hash(t.fb_post_entity_id,e),fb_post_hashed_content:i.e.hash(t.fb_post_text||""),fb_user_hashed_id:i.e.salted_hash(t.fb_user_id,this.secret_local_salt)}},EventsEnricher.prototype.interactionHash=function(t,e){return{fb_post_hashed_entity_id:i.e.salted_hash(t.fb_post_entity_id,e),fb_user_hashed_id:this.getUserHashes(t.fb_user_id).fb_user_hashed_id}},EventsEnricher.facebookMetadata=function(t){return{fb_meta_gender:t.gender,fb_meta_dob_month:t.birthday.month,fb_meta_dob_year:t.birthday.year,fb_meta_relationship_status:t.relationshipStatus,fb_meta_user_locale:t.locale,fb_meta_current_state_or_country:t.stateOrCountry}},EventsEnricher.geoData=function(t){var e=t.countryIso2,n=t.state;return{geo_current_location_country:t.country,geo_current_location_country_iso:e,geo_current_location_state:n,geo_current_location_region:t.region,geo_current_location_metro_code:t.metro_code}},EventsEnricher}()},function(t,e,n){"use strict";e.a=function facebookMetadataFetcher(t,e){return s(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,f;return c(this,function(c){switch(c.label){case 0:return[4,getMetadata(t,e)];case 1:if(n=c.sent(),r=n.id,o=n.userNameOnlyForAnonymizingTheHTMLDoNotSend,i=n.locale,!r)throw new Error("Failed to get facebook user id");return[4,getBasicInfo(t)];case 2:return a=c.sent(),s=a.birthday,u=a.gender,l=a.stateOrCountry,[4,getRelationship(t)];case 3:return f=c.sent(),[2,{id:r,birthday:s,gender:u,locale:i,relationshipStatus:f,userNameOnlyForAnonymizingTheHTMLDoNotSend:o,stateOrCountry:l}]}})})},e.b=function getInterests(t){return a.b(t)};var r=n(48),o=n(240),i=n(241),a=n(242),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function getMetadata(t,e){return s(this,void 0,void 0,function(){var n,s,u,l,f;return c(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,8]),function isMobile(){return"m.facebook.com"===window.location.hostname}()?[4,i.a(t)]:[3,2];case 1:return n=c.sent(),[3,4];case 2:return[4,a.a(t,e)];case 3:n=c.sent(),c.label=4;case 4:return[2,n];case 5:return(s=c.sent())instanceof r.a&&"logged-out"!==s.reason?[4,o.b(t)]:[3,7];case 6:return u=c.sent(),l=u.id,f=u.userNameOnlyForAnonymizingTheHTMLDoNotSend,[2,{id:l,userNameOnlyForAnonymizingTheHTMLDoNotSend:f,locale:null}];case 7:throw s;case 8:return[2]}})})}function getBasicInfo(t){var e,n;return s(this,void 0,void 0,function(){var r,a,s,u,l,f,d,h;return c(this,function(c){switch(c.label){case 0:return[4,o.a(t)];case 1:return r=c.sent(),a=r.birthday,s=r.gender,u=r.stateOrCountry,null!==s&&null!==a.month&&null!==a.year&&null!==u?[3,3]:[4,i.b(t)];case 2:return l=c.sent(),f=l.birthday,d=l.gender,h=l.stateOrCountry,[2,{gender:s||d,birthday:{year:a.year||(null===(e=f)||void 0===e?void 0:e.year)||null,month:a.month||(null===(n=f)||void 0===n?void 0:n.month)||null},stateOrCountry:u||h}];case 3:return[2,{birthday:a,gender:s,stateOrCountry:u}]}})})}function getRelationship(t){return i.c(t)}},function(t,e,n){"use strict";e.a=function getMetadata(t){return a(this,void 0,void 0,function(){var e,n,r,i,a,c;return s(this,function(s){switch(s.label){case 0:return[4,getAboutPage(t)];case 1:return e=s.sent(),(r=function getGender(t){var e=getTextValueByEdit(t,"gender");if(!e)return null;var n=e.toLowerCase();if("male"===n)return"Male";if("female"===n)return"Female";return null}(e))?[3,3]:[4,getGenderFromEditProfile(t)];case 2:r=s.sent(),s.label=3;case 3:return n=r,(a=function getBirthday(t){var e=getTextValueByEdit(t,"birthday");if(!e||isNaN(Date.parse(e)))return null;var n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1}}(e))?[3,5]:[4,getBirthdayFromEditProfile(t)];case 4:a=s.sent(),s.label=5;case 5:return i=a,(c=function getStateOrCountry(t){var e=getTextValueByEdit(t,"current_city");if(!e)return null;return Object(o.a)(e)}(e))?[3,7]:[4,getStateOrCountryFromEditProfile(t)];case 6:c=s.sent(),s.label=7;case 7:return[2,{gender:n,birthday:i,stateOrCountry:c}]}})})},e.b=function getUserIdAndName(t){return a(this,void 0,void 0,function(){var e,n,o;return s(this,function(a){switch(a.label){case 0:return[4,getAboutPage(t)];case 1:if(e=a.sent(),!(n=function getId(t){var e,n;return null!==(n=null!==(e=function getIdFromPhoto(){var e=t.querySelector("a[href^='/photo.php']");return Object(r.p)(function(){return new URL(e.href).searchParams.get("id")},void 0)}())&&void 0!==e?e:function getIdFromEditCoverPhotoLink(){var e=t.querySelector("a[href^='/cover_photo/']");return Object(r.p)(function(){return new URL(e.href).searchParams.get("profile_id")},void 0)}())&&void 0!==n?n:function getIdFromActivityLogLink(){var e,n=t.querySelector("a[href$='/allactivity']"),r=null===(e=n)||void 0===e?void 0:e.href.match(/(\d+)\/allactivity/);if(r&&r[1])return r[1]}()}(e))){if(e.querySelector("#login_top_banner"))throw new i.a("logged-out","mbasic");throw new i.a("other","mbasic")}return o=function getName(t){var e,n;return null!==(n=null!==(e=function getNameFromProfilePictureAlt(){var e=t.querySelector("a[href^='/photo.php'] > img[alt]");if(e instanceof HTMLImageElement&&e.alt)return e.alt}())&&void 0!==e?e:function getNameFromLogoutButton(){var e,n=t.querySelector("#mbasic_logout_button");if(n instanceof HTMLAnchorElement){var r=null===(e=n.textContent)||void 0===e?void 0:e.match(/\(([^)]+)\)/);if(r&&r[1])return r[1]}}())&&void 0!==n?n:function getNameFromTitle(){return t.title}()}(e),[2,{id:n,userNameOnlyForAnonymizingTheHTMLDoNotSend:o}]}})})};var r=n(16),o=n(81),i=n(48),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function getAboutPage(t){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/me/about"})]})})}function getTextValueByEdit(t,e){var n=Array.from(t.querySelectorAll("tr")).filter(function(t){return t.querySelector('a[href="/editprofile.php?type=basic&edit='+e+'"]')}).flatMap(function(t){return Array.from(t.querySelectorAll("td"))});return 2!==n.length?null:n[1].textContent}function getBirthdayFromEditProfile(t){return a(this,void 0,void 0,function(){var e,n,r;return s(this,function(i){switch(i.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/editprofile.php?type=basic&edit=birthday"})];case 1:return e=i.sent(),n=function(){var t=e.querySelector("select[name=year]");if(!t)return null;if(!t.value)return null;var n=Number.parseInt(t.value,10);return Number.isNaN(n)?null:n}(),r=function(){var t=e.querySelector("select[name=month]");if(!t)return null;if(!t.value)return null;var n=Number.parseInt(t.value,10);return Number.isNaN(n)?null:n}(),[2,{year:n,month:r}]}})})}function getStateOrCountryFromEditProfile(t){return a(this,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/editprofile.php?type=basic&edit=current_city"})];case 1:return e=r.sent(),(n=e.querySelector('input[name="current_city[]"]'))?[2,Object(o.a)(n.value)]:[2,null]}})})}function getGenderFromEditProfile(t){var e;return a(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://mbasic.facebook.com/editprofile.php?type=basic&edit=gender"})];case 1:return n=i.sent(),!!n.querySelector('select[name="preferred_pronoun"]')?[2,"Other"]:(r=(null===(e=n.querySelector('input[name="new_info"][checked]'))||void 0===e?void 0:e.value)||null)?"1"===r?[2,"Female"]:"2"===r?[2,"Male"]:[2,"Other"]:[2,null]}})})}},function(t,e,n){"use strict";e.a=function getIdAndLocaleAndName(t){return i(this,void 0,void 0,function(){var e,n,i,s,c,u,l,f;return a(this,function(a){switch(a.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/me?_rdr",addId:"b"})];case 1:if(e=a.sent(),n=e.outerHTML.match('"USER_ID"..([0-9]*)'),i=null,!n)throw new r.a("other","mobile");return i=n[1],s=null,(c=e.querySelector("#cover-name-root"))&&((u=c.querySelector(".alternate_name"))&&u.remove(),s=c.textContent&&c.textContent.replace(/(^\W+)|(\W+$)/,"")),[4,getLocaleMobile(t)];case 2:return null===(l=a.sent())&&(f=e.childNodes[1].outerHTML.match("LOCALE...([a-z,_,A-Z]*)"),l=f?f[1]:null),[2,{id:i,locale:l,userNameOnlyForAnonymizingTheHTMLDoNotSend:s}]}})})},e.b=function getMetadata(t){return i(this,void 0,void 0,function(){var e,n,r,o;return a(this,function(i){switch(i.label){case 0:return[4,getEditBasicInfoDocument(t)];case 1:return e=i.sent(),n=function getGenderViaEditBasicInfo(t){var e=t.querySelector("input[name=gender][type=radio][checked]");if(e instanceof HTMLInputElement)return"1"===e.value?"Female":"2"===e.value?"Male":"Other";return null}(e),r=function getBirthdayViaEditBasicInfo(t){var e=t.querySelector('select[name="birthday_month"]'),n=t.querySelector('select[name="birthday_year"]');if(!e||!n)return null;return{year:parseInt(n.value,10),month:parseInt(e.value,10)}}(e),[4,getStateOrCountry(t)];case 2:return o=i.sent(),[2,{gender:n,birthday:r,stateOrCountry:o}]}})})},e.c=function getRelationship(t){return function getRelationshipViaEdit(t){return i(this,void 0,void 0,function(){var e,n;return a(this,function(r){switch(r.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/profile/edit/infotab/section/forms/?info_surface=info&section=relationship",headers:[],addId:!1})];case 1:return e=r.sent(),(n=e.querySelector("select[name=relationship_status]"))instanceof HTMLSelectElement?s.has(n.value)?[2,s.get(n.value)]:[2,n.value]:[2,null]}})})}(t)};var r=n(48),o=n(81),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=new Map([["0","Unspecified"],["1","Single"],["2","In a relationship"],["5","Engaged"],["4","Married"],["10","In a civil union"],["11","In a domestic partnership"],["3","In an open relationship"],["6","It's complicated"],["8","Separated"],["9","Divorced"],["7","Widowed"]]);function getStateOrCountry(t){return function getStateOrCountryViaEdit(t){return i(this,void 0,void 0,function(){var e,n,r;return a(this,function(i){switch(i.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/profile/edit/infotab/section/forms/?info_surface=info&section=living",headers:[],addId:!1})];case 1:return e=i.sent(),(n=e.querySelector('input[name="current_city_text"]'))instanceof HTMLInputElement&&(r=n.value)?[2,Object(o.a)(r)]:[2,null]}})})}(t)}function getLocaleMobile(t){return i(this,void 0,void 0,function(){var e,n,r;return a(this,function(o){switch(o.label){case 0:return[4,t("https://m.facebook.com/language.php?r="+Date.now())];case 1:return e=o.sent(),(n=e.match(/"?currentLocale"?: ?(\{[^}]+?\})/))&&n[1]&&(r=n[1].match(/"?locale_code"?: ?"([^"]+?)"/))&&r[1]?[2,r[1]]:[2,null]}})})}function getEditBasicInfoDocument(t){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,Object(o.b)({fetchText:t,urlString:"https://m.facebook.com/profile/edit/infotab/section/forms/?section=basic-info",addId:!1})];case 1:return[2,e.sent()]}})})}},function(t,e,n){"use strict";var r=n(243);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b})},function(t,e,n){"use strict";e.a=function getIdAndLocaleAndName(t,e){return c(this,void 0,void 0,function(){var n,c;return u(this,function(u){switch(u.label){case 0:return[4,Object(s.a)(t,e)()];case 1:return n=u.sent(),"new"!==Object(r.n)(n)?[3,3]:[4,o.a(n)];case 2:if(!(c=u.sent()).id)throw new a.a("other","web-ui");return[2,c];case 3:return[2,i.a(n)]}})})},e.b=function getInterests(t){return i.b(t)};var r=n(42),o=n(257),i=n(258),a=n(48),s=n(259),c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}},function(t,e,n){"use strict";n(124);var r=n(249);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";t.exports=(t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},function(t,e,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],decodeComponents(n),decodeComponents(r))}function decode(t){try{return decodeURIComponent(t)}catch(o){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=decodeComponents(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function customDecodeURIComponent(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=decode(n[0]);r!==n[0]&&(e[n[0]]=r)}n=o.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),a=0;a<i.length;a++){var s=i[a];t=t.replace(new RegExp(s,"g"),e[s])}return t}(t)}}},function(t,e,n){"use strict";t.exports=((t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["h5._1qbu._14f3._14f5._5pbw._5vra","input[name=fb_dtsg]"]},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,o=n(27),i=n(82),a=n(124),s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=function(t){function MobileParser(){return null!==t&&t.apply(this,arguments)||this}return s(MobileParser,t),MobileParser.prototype.getCache=function(e,n){return t.prototype.getCache.call(this,e,n)},MobileParser.prototype.isStorySponsoredImpl=function(t,e){return Array.from(t.querySelectorAll("span")).some(function(t){return null!==t.textContent&&e.indexOf(t.textContent)>-1})},MobileParser.prototype.getNewCache=function(t,e){return new a.a(t,this.log,e)},MobileParser.prototype.getNestingType=function(t,e){return this.getCache(t,e).nestType},MobileParser.prototype.getEntId=function(t,e){return this.getCache(t,e).entId},MobileParser.prototype.parseRegularStory=function(t,e){return{fb_post_entity_id:this.getEntId(t,e),fb_post_text:this.extractFirstPostInStoryText(t),parser_type:"mobile",parser_version:this.extensionVersion}},MobileParser.prototype.sanitizePIIPostHtmlMobile=function(t){if(t.parentElement)throw new Error("don't pass elements from living document! it hurt the page. you must pass only clones");var e=Object(o.g)(function(){return JSON.parse(t.dataset.store)},null);e&&(t.dataset.store=JSON.stringify(Object(o.k)(e,"actor_id")));var n=t.querySelector("a[data-store]");if(n&&n.dataset.store){var r=Object(o.g)(function(){return JSON.parse(n.dataset.store)},null);r&&(n.dataset.store=JSON.stringify(Object(o.k)(r,"user_id")))}return t},MobileParser.prototype.parseSponsoredFeedStory=function(t,e){var n,r,o=this.getCache(t,e),i=this.sanitizePIIPostHtmlMobile(o._article.cloneNode(!0)).outerHTML,a=o.storyType,s=o.fb_post_img_url,c=null,u=o.entId,l=o.fb_post_app_pretty_name,f=o.fb_post_app_id,d=o.fb_post_app_thumbnail_url,h=o.fb_post_advertiser_page_id,p=o.fb_post_advertiser_page_entity_id,b=o.fb_post_advertiser_page_pretty_name,v=o.fb_post_advertiser_thumbnail_url,_=o.fb_post_actionlink_url,y=o.fb_post_call_to_action_url,m=o.fb_post_call_to_action_text,g=o.fb_post_carousel_info;"gif"===a?(c=(n=this.parseGifFields(o._article)).videoUrl,s=n.previewImageUrl):"video"===a&&(c=(r=this.parseVideoFields(o._article)).videoUrl,s=r.previewImageUrl);this.getLocale();return{fb_post_actionlink_url:_,fb_post_src:i,fb_post_text:this.extractFirstPostInStoryText(o._article),fb_post_type:a,fb_post_img_url:s,fb_post_video_url:c,fb_post_engage_sad:null,fb_post_engage_wow:null,fb_post_entity_id:u,fb_post_engage_haha:null,fb_post_engage_like:null,fb_post_engage_love:null,fb_post_video_views:null,fb_post_this_video_views:null,fb_post_engage_angry:null,fb_post_engage_shares:null,fb_post_engage_comments:null,fb_post_advertiser_page_id:h,fb_post_advertiser_page_entity_id:p,fb_post_call_to_action_url:y,fb_post_call_to_action_text:m,fb_post_advertiser_thumbnail_url:v,fb_post_advertiser_page_pretty_name:b,fb_post_app_pretty_name:l,fb_post_app_id:f,fb_post_app_thumbnail_url:d,fb_post_carousel_info:g,fb_post_caption:null,fb_post_attachment_description:null,fb_post_attachment_title:null,fb_post_ad_placement:"feed",parser_type:"mobile",parser_version:this.extensionVersion}},MobileParser}(i.j)},function(t,e,n){"use strict";var r=n(251);n.d(e,"i",function(){return r.a}),n.d(e,"j",function(){return r.b}),n.d(e,"k",function(){return r.c}),n.d(e,"m",function(){return r.d}),n.d(e,"n",function(){return r.e}),n.d(e,"o",function(){return r.f}),n.d(e,"p",function(){return r.g}),n.d(e,"q",function(){return r.h}),n.d(e,"r",function(){return r.i}),n.d(e,"s",function(){return r.j});var o=n(82);n.d(e,"a",function(){return o.a}),n.d(e,"b",function(){return o.b}),n.d(e,"c",function(){return o.c}),n.d(e,"d",function(){return o.d}),n.d(e,"e",function(){return o.e}),n.d(e,"f",function(){return o.f}),n.d(e,"g",function(){return o.g}),n.d(e,"h",function(){return o.h}),n.d(e,"l",function(){return o.j})},function(t,e,n){"use strict";var r=n(84);n.d(e,"g",function(){return r.b}),n.d(e,"h",function(){return r.h}),n.d(e,"i",function(){return r.i}),n.d(e,"j",function(){return r.j});var o=n(252);n.d(e,"a",function(){return o.a}),n.d(e,"c",function(){return o.b}),n.d(e,"d",function(){return o.c});var i=n(253);n.d(e,"b",function(){return i.a});var a=n(256);n.d(e,"e",function(){return a.a}),n.d(e,"f",function(){return a.b})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),e.c=function getFacebookUiKind(t){if(t.querySelector(o))return"old";if(t.querySelector(r))return"new";return null};var r="div#mount_0_0",o="#pagelet_bluebar"},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,o=n(27),i=n(84),a=n(254),s=n(255),c=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=function(){function NewFeedParser(t,e,n){if(this.log=t,this.options=n,!t)throw new Error("You can't start a parser without a logger!");this.parserVersion="4."+e.split(".").slice(1).join(".")}return NewFeedParser.prototype.anonymizeEdge=function(t){return Object(a.a)(t)},NewFeedParser.prototype.parseOrganicEdge=function(t){return u(u({},this.parseEdgeCommon(t)),{fb_post_is_public:Object(s.m)(t)})},NewFeedParser.prototype.parseSponsoredEdge=function(t){var e,n,r,o,i,a,c,l,f,d,h,p,b=this,v=this.parseEdgeCommon(t),_=this.createGetValueOrDefault(v.fb_post_entity_id),y=_(function(){return Object(s.r)(t)});return u(u({},v),{fb_post_call_to_action_text:_(function(){return Object(s.h)(t)}),fb_post_call_to_action_url:_(function(){return Object(s.i)(t)}),fb_post_actionlink_url:_(function(){return Object(s.a)(t)}),fb_post_engage_haha:(n=null===(e=y)||void 0===e?void 0:e.HAHA,null!=n?n:null),fb_post_engage_wow:(o=null===(r=y)||void 0===r?void 0:r.WOW,null!=o?o:null),fb_post_engage_angry:(a=null===(i=y)||void 0===i?void 0:i.ANGRY,null!=a?a:null),fb_post_engage_like:(l=null===(c=y)||void 0===c?void 0:c.LIKE,null!=l?l:null),fb_post_engage_love:(d=null===(f=y)||void 0===f?void 0:f.LOVE,null!=d?d:null),fb_post_engage_sad:(p=null===(h=y)||void 0===h?void 0:h.SAD,null!=p?p:null),fb_post_engage_comments:_(function(){return Object(s.k)(t)}),fb_post_attachment_description:_(function(){return Object(s.f)(t)}),fb_post_advertiser_page_pretty_name:_(function(){return Object(s.d)(t)}),fb_post_advertiser_page_id:_(function(){var e;return Object(s.c)(t,null===(e=b.options)||void 0===e?void 0:e.URLConstructor)}),fb_post_caption:_(function(){return Object(s.n)(t)}),fb_post_src:null,fb_post_engage_shares:_(function(){return Object(s.s)(t)}),fb_post_video_url:_(function(){return Object(s.v)(t)}),fb_post_video_url_hd:_(function(){return Object(s.u)(t)}),fb_post_carousel_info:_(function(){var e,n;return null!=(n=null===(e=Object(s.j)(t))||void 0===e?void 0:e.map(function(t){return{fb_post_carousel_text:t.text,fb_post_carousel_img_url:t.img_url,fb_post_carousel_actionlink_url:t.actionlink_url}}))?n:null}),fb_post_type:_(function(){return Object(s.q)(t)},"unknown"),fb_post_this_video_views:_(function(){return Object(s.t)(t)}),fb_post_video_views:_(function(){return Object(s.w)(t)}),fb_post_attachment_title:_(function(){return Object(s.g)(t)}),fb_post_img_url:_(function(){return Object(s.l)(t)}),fb_post_advertiser_page_entity_id:_(function(){return Object(s.b)(t)}),fb_post_advertiser_thumbnail_url:_(function(){return Object(s.e)(t)}),fb_post_app_id:null,fb_post_app_pretty_name:null,fb_post_app_thumbnail_url:null})},NewFeedParser.prototype.tryParseFeedPage=function(t){return"string"==typeof t&&(!!t.includes("$CometNewsFeed_viewer_news_feed")&&Object(o.h)(t))},NewFeedParser.prototype.tryParseEngagementInteractionResponse=function(t){if(!t)return!1;if("string"!=typeof t||"object"!=typeof t)return!1;try{var e="string"==typeof t?JSON.parse(t):t;if(Object(i.f)(e))return e}catch(t){return!1}return!1},NewFeedParser.prototype.parseEdgeCommon=function(t){var e=this.createGetValueOrDefault()(function(){return Object(s.o)(t)});if(!e)throw new f("Couldn't get post entity id for edge",t);var n=this.createGetValueOrDefault(e);try{return{parser_type:"desktop-v2",parser_version:this.parserVersion,fb_post_text:n(function(){return Object(s.p)(t)}),fb_post_entity_id:e}}catch(e){if(this.log.error("failed to parse common part of edge",t),e instanceof Error)throw new f(e.message,t);throw e}},NewFeedParser.prototype.createGetValueOrDefault=function(t){var e=this.log;return function getValueOrDefault(n,r){void 0===r&&(r=null);try{return n()}catch(n){return t&&e.captureBreadcrumb({message:"Failed to parse value in edge",data:{entityId:t}}),e.error("[New Facebook UI] Failed to parse value in edge",n),r}}},NewFeedParser}(),f=function(t){function ParseError(e,n){var r=t.call(this,e)||this;return r.edge=n,Object.setPrototypeOf(r,ParseError.prototype),r}return c(ParseError,t),ParseError}(Error)},function(t,e,n){"use strict";e.a=function anonymizeEdge(t){var e=o.map(t,function(){isUserObject(this.node)&&this.update(i,!0);var t=/"(viewer|context_id)":(\d+)/gi;"string"==typeof this.node&&this.node.match(t)&&this.update(this.node.replace(t,"$1"+i.id))}),n=Object(r.m)(o.nodes(t).filter(isUserObject),function(t){return t.id}).flatMap(function(t){return[{searchValue:t.id,replaceValue:i.id},{searchValue:t.name,replaceValue:i.name},{searchValue:t.url,replaceValue:i.url}].filter(function(t){return t.searchValue})});return JSON.parse(n.reduce(function(t,e){var n=e.searchValue,r=e.replaceValue;return t.replace(new RegExp(n,"g"),r)},JSON.stringify(e)))};var r=n(27),o=n(128);n.n(o);function isUserObject(t){return t&&"object"==typeof t&&"__typename"in t&&"User"===t.__typename}var i={__typename:"User",id:"123456789",name:"ANONYMIZED_NAME",url:"https://www.facebook.com/anonymized.name"}},function(t,e,n){"use strict";e.o=function getPostEntityId(t){var e=[function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.share_fbid},function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.subscription_target_id},function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.share_fbid},function(t){var e;return null===(e=t.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.subscription_target_id},function(t){if(t.comet_sections.feedback)try{var e=JSON.parse(t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.content_based_comment_list_renderer.feedback.mentions_datasource_js_constructor_args_json)[0];return e.queryData.post_fbid}catch(t){return}},function(t){var e;if(null===(e=t.comet_sections.content.story.comet_sections.aggregated_stories)||void 0===e?void 0:e.story.interesting_substories)return Object(r.f)(t.comet_sections.content.story.comet_sections.aggregated_stories.story.interesting_substories.edges,function(t){return getPostEntityId(t)||void 0})}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.p=function getPostText(t){var e,n,r;return null!==(r=null===(n=null===(e=t.node.comet_sections.content.story.comet_sections.message)||void 0===e?void 0:e.story)||void 0===n?void 0:n.message.text)&&void 0!==r?r:null},e.m=function getIsPublic(t){function getFromCometFeedStoryAudienceStrategy(t){return"everyone"===t.story.privacy_scope.icon_image.name}var e=[function(t){return function getFromCometFeedStoryDefaultContextLayoutStrategy(t){if(t.story.comet_sections.audience)return getFromCometFeedStoryAudienceStrategy(t.story.comet_sections.audience)}(t.comet_sections.context_layout)},function(t){var e=[];if(o.forEach(t,function(){Object(a.a)(this.node)&&e.push(this.node)}),e.length>0)return e.map(getFromCometFeedStoryAudienceStrategy).every(Boolean)}];try{return Object(r.f)(e,function(e){return e(t.node)})}catch(e){console.error("couldn't get isPublic for edge",t)}},e.r=function getReactions(t){var e,n,o,i,a,s,u,l=null===(e=t.node.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context,f=null!==(o=null===(n=l)||void 0===n?void 0:n.top_reactions)&&void 0!==o?o:null===(a=null===(i=l)||void 0===i?void 0:i.comet_ufi_summary_and_actions_renderer)||void 0===a?void 0:a.feedback.top_reactions;return function getReactionsFromEdges(t){var e=t.reduce(function(t,e){return t.set(e.node.key,e.reaction_count),t},new Map),n=Object(r.l)(c).map(function(t){var n,r=t[0],o=t[1];return[r,(n=e.get(o),null!=n?n:null)]});return Object(r.j)(n)}(null!==(u=null===(s=f)||void 0===s?void 0:s.edges)&&void 0!==u?u:[])},e.k=function getCommentsCount(t){var e;return(null===(e=t.node.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context.comment_count.total_count)||0},e.d=function getAdvertiserPagePrettyName(t){var e;return(null===(e=t.node.comet_sections.context_layout.story.comet_sections.title.story.actors[0])||void 0===e?void 0:e.name)||null},e.c=function getAdvertiserPageId(t,e){void 0===e&&(e=URL);var n=Object(r.f)([function(t){var e;return null===(e=t.comet_sections.context_layout.story.comet_sections.title.story.actors[0])||void 0===e?void 0:e.url},function(t){var e;return null===(e=t.comet_sections.context_layout.story.actors[0])||void 0===e?void 0:e.url}],function(e){return e(t.node)});if(!n)return null;var o=new e(n).pathname.match(/\/?([^\/"]+)\/?/);if(!o)return null;return o[1]||null},e.b=function getAdvertiserPageEntityId(t){return Object(r.f)([function(t){var e;return null===(e=t.comet_sections.context_layout.story.actors[0])||void 0===e?void 0:e.id},function(t){var e;return null===(e=t.comet_sections.context_layout.story.comet_sections.actor_photo.story.actors[0])||void 0===e?void 0:e.id},function(t){var e;return null===(e=t.comet_sections.context_layout.story.comet_sections.title.story.actors[0])||void 0===e?void 0:e.id},function(t){if(t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.owning_profile.id},function(t){if(t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.top_level_comment_list_renderer.feedback.content_based_comment_list_renderer.feedback.owning_profile.id}],function(e){return e(t.node)},null)},e.n=function getPostCaption(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.c)(o))return null===(r=o.attachment.source)||void 0===r?void 0:r.text},function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(o)&&(null===(r=o.attachment.cta_screen_renderer)||void 0===r?void 0:r.action_link)&&"link_display"in o.attachment.cta_screen_renderer.action_link)return o.attachment.cta_screen_renderer.action_link.link_display},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.n)(o))return Object(r.f)(o.attachment.subattachments,function(t){return t.cta_screen_renderer.action_link.link_display})},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.l)(r))return r.attachment.target.name},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.l)(r))return r.attachment.title}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.s=function getShareCount(t){var e,n,r,o,i,a,s,c=null===(e=t.node.comet_sections.feedback)||void 0===e?void 0:e.story.feedback_context.feedback_target_with_context;return null!==(s=null===(a=null!==(r=null===(n=c)||void 0===n?void 0:n.share_count)&&void 0!==r?r:null===(i=null===(o=c)||void 0===o?void 0:o.comet_ufi_summary_and_actions_renderer)||void 0===i?void 0:i.feedback.share_count)||void 0===a?void 0:a.count)&&void 0!==s?s:0},e.g=function getAttachmentTitle(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.p)(o))return null===(r=o.attachment.title_with_entities)||void 0===r?void 0:r.text},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.c)(r))return r.attachment.title_with_entities.text},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.d)(o))return Object(r.f)(o.attachment.action_links,getOpenActionLinkTitle)},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.l)(r))return r.attachment.target.name},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.l)(r))return r.attachment.title}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.f=function getAttachmentDescription(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.c)(o))return null===(r=o.attachment.description)||void 0===r?void 0:r.text},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.d)(o))return Object(r.f)(o.attachment.action_links,getOpenActionLinkDescription)},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.l)(r))return r.attachment.description.text}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.h=function getCallToActionText(t){var e=[function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.c)(r)&&r.attachment.call_to_action_renderer)return getOpenActionLinkTitle(r.attachment.call_to_action_renderer.action_link)},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(r)&&r.attachment.cta_screen_renderer)return getOpenActionLinkTitle(r.attachment.cta_screen_renderer.action_link)},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.n)(o))return Object(r.f)(o.attachment.subattachments,function(t){if(t.call_to_action_renderer)return getOpenActionLinkTitle(t.call_to_action_renderer.action_link)})},function(t){var e,n,o,i=null===(o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer)||void 0===o?void 0:o.attachment.story_attachment_link_renderer.attachment.action_links;if(i)return Object(r.f)(i,getOpenActionLinkTitle)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.i=function getCallToActionUrl(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.c)(o))return null===(r=o.attachment.target)||void 0===r?void 0:r.external_url},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(r)&&r.attachment.cta_screen_renderer){var o=getOpenActionLinkUrl(r.attachment.cta_screen_renderer.action_link);if(o)return Object(i.a)(o)}},function(t){var e,n,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.n)(o))return Object(r.f)(o.attachment.subattachments,function(t){if(t.call_to_action_renderer){var e=getOpenActionLinkUrl(t.call_to_action_renderer.action_link);return e?Object(i.a)(e):void 0}})},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.l)(r))return r.attachment.url},function(t){var e,n,o,i=null===(o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer)||void 0===o?void 0:o.attachment.story_attachment_link_renderer.attachment.action_links;if(i)return Object(r.f)(i,getOpenActionLinkUrl)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.a=function getActionlinkUrl(t){var e=[function(t){var e,n,r,o=null===(r=null===(n=null===(e=t.comet_sections.content.story.comet_sections.message)||void 0===e?void 0:e.story)||void 0===n?void 0:n.message.ranges[0])||void 0===r?void 0:r.entity;if(Object(a.e)(o))return o.external_url},function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.comet_footer_renderer;if(Object(a.c)(o))return null===(r=o.attachment.target)||void 0===r?void 0:r.external_url},function(t){var e,n,r=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(r)&&r.attachment.cta_screen_renderer){var o=getOpenActionLinkUrl(r.attachment.cta_screen_renderer.action_link);if(o)return Object(i.a)(o)}}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.e=function getAdvertiserThumbnailUrl(t){return Object(r.f)([function(t){var e,n;return null===(n=null===(e=t.comet_sections.context_layout.story.comet_sections.actor_photo.story.actors[0])||void 0===e?void 0:e.profile_picture)||void 0===n?void 0:n.uri}],function(e){return e(t.node)},null)},e.v=function getVideoUrl(t){var e=[function(t){var e,n,r,o,i,s=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(s)&&Object(a.r)(s.attachment.media)||(s=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(a.q)(s)&&Object(a.r)(s.attachment.media))return s.attachment.media.playable_url}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.u=function getVideoHdUrl(t){var e=[function(t){var e,n,r,o,i,s=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(s)&&Object(a.r)(s.attachment.media)||(s=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(a.q)(s)&&Object(a.r)(s.attachment.media))return s.attachment.media.playable_url_quality_hd}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.w=function getVideoViewsCount(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(o)&&t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.video_view_count||(null===(r=t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.comet_ufi_summary_and_actions_renderer)||void 0===r?void 0:r.feedback.video_view_count)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.t=function getThisVideoViewsCount(t){var e=[function(t){var e,n,r,o=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.q)(o)&&t.comet_sections.feedback)return t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.video_post_view_count||(null===(r=t.comet_sections.feedback.story.feedback_context.feedback_target_with_context.comet_ufi_summary_and_actions_renderer)||void 0===r?void 0:r.feedback.video_post_view_count)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.l=function getImageUrl(t){var e=[function(t){var e,n,o,i,s,c=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.n)(c)||(c=null===(s=null===(i=null===(o=t.comet_sections.content.story.attached_story)||void 0===o?void 0:o.attachments)||void 0===i?void 0:i[0])||void 0===s?void 0:s.style_type_renderer),Object(a.n)(c))return Object(r.f)(c.attachment.subattachments,function(t){return getImageUri(t.media)})},function(t){var e,n,r,o,i,s=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.p)(s)&&Object(a.g)(s.attachment.media)||(s=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(a.p)(s)&&Object(a.g)(s.attachment.media))return getImageUri(s.attachment.media)},function(t){var e,n,r,o,i,s=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer,c=null;if(!Object(a.q)(s)||Object(a.r)(s.attachment.media)){var u=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer;c=u||s}if(c&&Object(a.q)(c)&&Object(a.r)(c.attachment.media))return c.attachment.media.preferred_thumbnail.image.uri},function(t){var e,n,r,o,i,s=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.o)(s)||(s=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(a.o)(s))return getPhotoImageUri(s.attachment.media)},function(t){var e,n,r,o,i,s,c,u,l,f,d=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.l)(d)||(d=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(a.l)(d))return null!=(u=null===(c=null===(s=d.attachment.media)||void 0===s?void 0:s.fallback_image)||void 0===c?void 0:c.uri)?u:null===(f=null===(l=d.attachment.media)||void 0===l?void 0:l.image)||void 0===f?void 0:f.uri},function(t){var e,n,r,o,i,s=null===(n=null===(e=t.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;if(Object(a.k)(s)||(s=null===(i=null===(o=null===(r=t.comet_sections.content.story.attached_story)||void 0===r?void 0:r.attachments)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer),Object(a.k)(s))return getPhotoImageUri(s.attachment.all_subattachments.nodes[0].media)}];return Object(r.f)(e,function(e){return e(t.node)},null)},e.j=function getCarouselCardsInfos(t){var e,n,o,c,u;function getActionlinkUrl(t){var e=[function(t){if(t.call_to_action_renderer)return getOpenActionLinkUrl(t.call_to_action_renderer.action_link)},function(t){if(t.story_attachment_link_renderer.attachment.action_links[0])return getOpenActionLinkUrl(t.story_attachment_link_renderer.attachment.action_links[0])},function(t){return t.story_attachment_link_renderer.attachment.url},function(t){var e,n;return null===(n=null===(e=t.cta_screen_renderer)||void 0===e?void 0:e.action_link)||void 0===n?void 0:n.url}];return Object(r.f)(e,function(e){return e(t)},null)}var l=null===(n=null===(e=t.node.comet_sections.content.story.attachments)||void 0===e?void 0:e[0])||void 0===n?void 0:n.style_type_renderer;Object(a.n)(l)||(l=null===(u=null===(c=null===(o=t.node.comet_sections.content.story.attached_story)||void 0===o?void 0:o.attachments)||void 0===c?void 0:c[0])||void 0===u?void 0:u.style_type_renderer);if(Object(a.n)(l))return l.attachment.subattachments.map(function(t){var e;return{text:t.card_title.text,actionlink_url:getActionlinkUrl(t),img_url:(e=getImageUri(t.media),null!=e?e:null)}}).map(function(t){var e=t.actionlink_url?Object(i.a)(t.actionlink_url):t.actionlink_url;return s(s({},t),{actionlink_url:e})})},e.q=function getPostType(t){var e,n,r,o,i,s,c,u,l,f=t.node.comet_sections.content.story,d=f.attachments;if(!(null===(e=d)||void 0===e?void 0:e.length)&&!(null===(r=null===(n=f.attached_story)||void 0===n?void 0:n.attachments)||void 0===r?void 0:r.length))return"text";var h=null!==(s=null===(i=null===(o=d)||void 0===o?void 0:o[0])||void 0===i?void 0:i.style_type_renderer)&&void 0!==s?s:null===(l=null===(u=null===(c=f.attached_story)||void 0===c?void 0:c.attachments)||void 0===u?void 0:u[0])||void 0===l?void 0:l.style_type_renderer;if(h){if(Object(a.q)(h))return"video";if(Object(a.l)(h))return"event";if(Object(a.n)(h))return"carousel";if(Object(a.k)(h))return"album";if(Object(a.o)(h))return"photo";if(Object(a.p)(h))return Object(a.m)(h.attachment.story_attachment_link_renderer)?"lead":"link"}return"unknown"};var r=n(27),o=n(128),i=(n.n(o),n(61)),a=n(84),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var c={LIKE:1,ANGRY:8,HAHA:4,LOVE:2,SAD:7,WOW:3};function getOpenActionLinkTitle(t){return"title"in t&&t.title||"link_title"in t&&t.link_title||void 0}function getOpenActionLinkDescription(t){return"link_description"in t&&t.link_description||void 0}function getOpenActionLinkUrl(t){return"url"in t?t.url:void 0}function getImageUri(t){var e,n,r,o,i,a,s;return null!=(a=null!=(o=null!=(n=null===(e=t.flexible_height_share_image)||void 0===e?void 0:e.uri)?n:null===(r=t.large_share_image)||void 0===r?void 0:r.uri)?o:null===(i=t.card_image)||void 0===i?void 0:i.uri)?a:null===(s=t.image)||void 0===s?void 0:s.uri}function getPhotoImageUri(t){return"photo_image"in t?t.photo_image.uri:"image"in t?t.image.uri:void 0}},function(t,e,n){"use strict";e.b=getUserIdAndLocaleAndNameSync,e.a=function getUserIdAndLocaleAndName(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return"function"!=typeof t?[3,2]:[4,getMe(t)];case 1:return e=n.sent(),[3,3];case 2:e=t,n.label=3;case 3:return[2,getUserIdAndLocaleAndNameSync(e)]}})})};var r=n(27),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function getFirstMatch(t,e,n){for(var r=0,o=e;r<o.length;r++){var i=o[r],a=t.match(i),s=a&&n(a);if(s)return s}return null}function getMe(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,t("https://www.facebook.com/me?b"+Date.now())];case 1:return e=n.sent(),[2,Object(r.c)(e)]}})})}function getUserIdFromMe(t){return getFirstMatch(t.outerHTML,[/"CurrentUserInitialData".*"USER_ID":"(\d+)"/,/"CurrentUserInitialData".*"ACCOUNT_ID":"(\d+)",/,/"userID":"(\d+)"/],function(t){return t&&t[1]})}function getLocaleFromMe(t){return getFirstMatch(t.outerHTML,[/"LocaleInitialData",\[\],{"locale":"(\w+)"/],function(t){return t&&t[1]})}function getNameFromMe(t){var e;return(null===(e=getFirstMatch(t.outerHTML,[/"NAME":"([^"]+)"/,/{"user":{"name":"([^"]+)"/,/"account_user":{"name":"([^"]+)"/,/{"__typename":"User",.*"name":"([^"]+)"/],function(t){return t&&t[1]}))||void 0===e?void 0:e.replace(/(^\W+)|(\W+$)/,""))||null}function getUserIdAndLocaleAndNameSync(t){return{id:getUserIdFromMe(t),locale:getLocaleFromMe(t),userNameOnlyForAnonymizingTheHTMLDoNotSend:getNameFromMe(t)}}},function(t,e,n){"use strict";var r=n(42);n.d(e,"a",function(){return r.o})},function(t,e,n){"use strict";e.a=function getIdAndLocaleAndName(t){var e,n,o=function getId(t){var e,n;return null!==(n=null!==(e=function getIdFromMeta(){var e=t.querySelector('[property="al:android:url"]');if(e instanceof HTMLMetaElement&&e.content.startsWith("fb://profile/")){var n=e.content.replace("fb://profile/","");return n}}())&&void 0!==e?e:function getIdFromProfileImg(){var e,n,r=t.querySelector("img[id^=profile_pic_header_]");return null===(n=null===(e=r)||void 0===e?void 0:e.id)||void 0===n?void 0:n.replace("profile_pic_header_","")}())&&void 0!==n?n:function getIdFromScript(){var e=t.innerHTML.match(/{"USER_ID":"(\d+)","ACCOUNT_ID":"(\d+)"/);if(e){var n=e[1]||e[2];if(n&&"0"!==n)return n}}()}(t);if(!o){if(t.querySelector("body.UIPage_LoggedOut"))throw new r.a("logged-out","web-old");throw new r.a("other","web-old")}var i=null!==(e=function getName(t){var e;var n=null!==(e=function getNameFromTimelineCoverName(){var e=t.querySelector("#fb-timeline-cover-name, [data-testid=profile_name_in_profile_page]");if(e){var n=e.querySelector(".alternate_name");return n&&n.remove(),e.textContent}}())&&void 0!==e?e:function getNameFromScript(){var e=t.innerHTML.match(/"ACCOUNT_ID":"(\d+)","NAME":"([^"]+)",/);if(e&&e[2])return e[2]}();if(n)return n.replace(/(^\W+)|(\W+$)/,"")}(t))&&void 0!==e?e:null,a=null!==(n=function getLocale(t){var e=t.querySelector("body");if(e instanceof HTMLElement){var n=Array.from(e.classList).find(function(t){return t.startsWith("Locale")});if("string"==typeof n){var r=n.replace("Locale_","");return r}}}(t))&&void 0!==n?n:null;return{id:o,locale:a,userNameOnlyForAnonymizingTheHTMLDoNotSend:i}},e.b=function getInterests(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,t("https://www.facebook.com/ads/profile/interests/?dpr=1",[["X-Requested-With","XMLHttpRequest"]],12e4)];case 1:return e=n.sent(),[2,JSON.parse(e.replace("for (;;);","")).payload.interests]}})})};var r=n(48),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}},function(t,e,n){"use strict";e.a=function createMeDocumentFetcher(t,e){var n=this;return function(){return i(n,void 0,void 0,function(){var n,i,l;return a(this,function(a){switch(a.label){case 0:return n=Object(o.v)(),i=e(function(t){var e,r,i,a,l,f=void 0!==(null===(e=t.requestHeaders)||void 0===e?void 0:e.find(function(t){return t.name===n}));if(f){var d=[];return"GET"===t.method&&function isRelevantChrome(t){var e=Object(o.o)(t);return e&&e>s}(null===(i=null===(r=t.requestHeaders)||void 0===r?void 0:r.find(function(t){return"user-agent"===t.name.toLowerCase()}))||void 0===i?void 0:i.value)&&void 0!==(null===(a=t.requestHeaders)||void 0===a?void 0:a.find(function(t){return t.name!==c}))&&d.push({name:c,value:u}),{requestHeaders:null===(l=t.requestHeaders)||void 0===l?void 0:l.filter(function(t){return t.name!==n}).concat(d)}}},{urls:["https://www.facebook.com/me*","https://www.facebook.com/profile.php*"]},{blocking:!0,requestHeaders:!0,extraHeaders:!0}),[4,Object(r.b)({fetchText:t,urlString:"https://www.facebook.com/me",addId:"b",headers:[[n,n]]})];case 1:return l=a.sent(),i(),[2,l]}})})}};var r=n(81),o=n(16),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};var s=76,c="sec-fetch-user",u="?1"},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(16),o=function(){function LocationService(t,e,n,r){this.log=t,this.fetchJson=e,this.lastRequest=null,this.locationUrl=n+"?seed="+r,this.lastRequest=this.sendRequest()}return LocationService.prototype.sendRequest=function(){var t=this,e=this.fetchJson(this.locationUrl).catch(function(){return Object(r.A)(500).then(function(){return t.fetchJson(t.locationUrl)})});return e.catch(function(e){t.log.error(e)}),e},LocationService.prototype.getLocation=function(){var t=this;return null===this.lastRequest&&(this.lastRequest=this.sendRequest()),this.lastRequest.catch(function(){t.lastRequest=null}),this.lastRequest},LocationService.prototype.start=function(){var t=this;this.log.info("Starting to get location..."),this.interval=window.setInterval(function(){t.log.info("Periodic refresh of location"),t.lastRequest=null,t.getLocation()},36e5)},LocationService.prototype.stop=function(){this.interval&&(window.clearInterval(this.interval),this.interval=void 0)},LocationService}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,o=n(16),i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),a=function(t){function LogReporter(e,n,r){var o=t.call(this,e)||this;return o.logger=e,o.ga=n,o.raven=r,o}return i(LogReporter,t),Object.defineProperty(LogReporter.prototype,"error",{get:function(){return this.errorImpl.bind(this)},enumerable:!0,configurable:!0}),LogReporter.prototype.errorImpl=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if("string"==typeof r)if(i instanceof Error){this.raven.captureBreadcrumb({message:r,level:"info",category:"console"});var a=[],s={};(i instanceof o.c||i instanceof o.d)&&(a.push(i.shortMessage),a.push(i.requestUrl.replace(/\?.*/g,"?querystringstripped")),i instanceof o.c&&a.push(i.httpCode.toString()),i instanceof o.d&&(s={requestUrl:i.requestUrl,responseURL:i.responseURL,type:i.type})),this.captureException(i,{fingerprint:a,extra:s});var c=exceptionToMessage(i);this.ga("send",{hitType:"event",eventCategory:"Log Reporter: "+r,eventAction:c.message,eventLabel:c.stack,nonInteraction:!0})}else r.startsWith("react data is missing for:")?this.ga("send",{hitType:"event",eventCategory:"react data is missing for",eventAction:r.split(":")[1],eventLabel:"placeholder",nonInteraction:!0}):(this.raven.captureMessage(r),this.ga("send",{hitType:"event",eventCategory:"Log Reporter: "+r,eventAction:"placeholder",eventLabel:"placeholder",nonInteraction:!0}));else if(r instanceof Error){a=[];(r instanceof o.c||r instanceof o.d)&&(a.push(r.shortMessage),a.push(r.requestUrl.replace(/\?.*/g,"?querystringstripped"))),this.captureException(r,{fingerprint:a});c=exceptionToMessage(r);this.ga("send",{hitType:"event",eventCategory:"Log Reporter: Exception",eventAction:c.message,eventLabel:c.stack,nonInteraction:!0})}else if(r instanceof ErrorEvent){c=function errorEventToMessage(t){if(t.error&&t.error instanceof Error)return exceptionToMessage(t.error);return{message:"ErrorEvent! "+t.message,stack:(new Error).stack}}(r);this.ga("send",{hitType:"event",eventCategory:"Log Reporter: ErrorEvent",eventAction:c.message,eventLabel:c.stack,nonInteraction:!0})}(t=this.logger).error.apply(t,e)},LogReporter.prototype.captureException=function(t,e){(function shouldSend(t){return!(t instanceof o.d)})(t)&&this.raven.captureException(t,e)},LogReporter.prototype.captureBreadcrumb=function(t){this.raven.captureBreadcrumb(t)},LogReporter}(function(){function LogConsole(t){this.logger=t}return LogConsole.prototype.captureBreadcrumb=function(t){},Object.defineProperty(LogConsole.prototype,"log",{get:function(){return this.logger.log},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"info",{get:function(){return this.logger.info},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"warn",{get:function(){return this.logger.warn},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"debug",{get:function(){return this.logger.debug},enumerable:!0,configurable:!0}),Object.defineProperty(LogConsole.prototype,"error",{get:function(){return this.logger.error},enumerable:!0,configurable:!0}),LogConsole}());function exceptionToMessage(t){return{message:"exception! name: "+t.name+"| message: "+t.message,stack:"stack: "+t.stack}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(122),o=n(16),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=function(){function PixelService(t,e,n,r,o,i){this.httpClient=t,this.deviceId=e,this.clientId=n,this.log=r,this.storage=o,this.geo=i,this.getFacebookPixel()}return PixelService.prototype.fireAttributionPixelOnInstallIfNeeded=function(t){return i(this,void 0,void 0,function(){var t,e,n;return a(this,function(r){switch(r.label){case 0:return this.storage.attributionPixelOnInstalledEventFired?[3,3]:(this.storage.attributionPixelOnInstalledEventFired=!0,t=getCurrentExtensionHashFromID(this.clientId),(e=h.get(t))?[4,e(this.storage.thirdPartyCookie,this.deviceId,this.geo(this.deviceId))]:[3,2]);case 1:n=r.sent(),this.log.info("About to fire "+n),this.httpClient.get(n,{withCredentials:!0}),r.label=2;case 2:this.triggerFBQ("INSTALL"),r.label=3;case 3:return[2]}})})},PixelService.prototype.fireAttributionOnSponsoredEventIfneeded=function(t){var e=this.storage.sponsoredEventsFiredCount;if(e++,this.storage.sponsoredEventsFiredCount=e,t)switch(e){case 1:this.fireAttributionPixelOnFirstSponsoredEventIfNeeded(t)}var n,r=getCurrentExtensionHashFromID(this.clientId),o=d.get(r);if(o&&(n=o.get(e))){var i=n(this.storage.thirdPartyCookie,this.deviceId);this.log.info("Fire pixel upon "+e+" events "+i),this.httpClient.get(i)}switch(e){case 1:this.triggerFBQ("VIEW_ONE_AD");break;case 3:this.triggerFBQ("VIEW_THREE_ADS");break;case 5:this.triggerFBQ("VIEW_FIVE_ADS");break;case 10:this.triggerFBQ("VIEW_TEN_ADS");break;case 1e3:this.triggerFBQ("VIEW_1K_ADS")}},PixelService.prototype.triggerFBQ=function(t){return i(this,void 0,void 0,function(){var e,n,r;return a(this,function(o){switch(o.label){case 0:return[4,this.getFacebookPixel()];case 1:return(e=o.sent())?void 0===(n=l.get(t))?[2]:(r="function"==typeof n?n(getCurrentExtensionHashFromID(this.clientId)):n,e(r.is_custom?"trackCustom":"track",r.name,r.parameters),[2]):[2]}})})},PixelService.prototype.fireAttributionPixelOnFirstSponsoredEventIfNeeded=function(t){if(!this.storage.attributionPixelOnSponsoredEventFired){this.storage.attributionPixelOnSponsoredEventFired=!0;var e=getCurrentExtensionHashFromID(this.clientId),n=new Map([["4f8bd05394724861c15d6ae4c16e22193019b940","http://cnx.ziggyl.com/?psh="+t]]).get(e);n&&this.httpClient.get(n)}},PixelService.prototype.getFacebookPixel=function(){var t=this;if(null==this.local_fbq){var e=u.get(getCurrentExtensionHashFromID(this.clientId));return e?(this.log.info("Will create fbq with pixel "+e),Object(r.a)(window,document).then(function(n){return t.log.info("Success creating fbq!"),t.local_fbq=function(e,r,o){return t.log.debug("Fire fbq: '"+e+"' , event: '"+r+"', params:",o),n(e,r,o)},t.local_fbq("init",e),t.local_fbq})):(this.local_fbq=null,this.log.info("No need for Facebook pixel"),Promise.resolve(null))}return Promise.resolve(this.local_fbq)},PixelService.prototype.getCookieDomainAndKeyIfNeeded=function(t){var e=getCurrentExtensionHashFromID(t);return f.get(e)},PixelService}(),c="dfdsa@#$!@S4";function getCurrentExtensionHashFromID(t){return o.e.hash(c+t)}var u=new Map([["55d44272945989aeb22962d444aa75db155d4205","365402327179764"],["9990fcdc8ff467a78a4f394fb519e7ef3d8e5e13","633538343512506"],["8db321cfa45dd6beeec8cd618147c807c2688db4","794717750894645"],["d98e5e61822f6b0fd6890cf7542b2dc9649e6385","794717750894645"]]),l=new Map([["INSTALL",function(t){return"d98e5e61822f6b0fd6890cf7542b2dc9649e6385"===t?{name:"Purchase",is_custom:!1,parameters:{value:5,currency:"USD"}}:{name:"Lead",is_custom:!1}}],["VIEW_ONE_AD",{name:"View_one_ad",is_custom:!0}],["VIEW_THREE_ADS",{name:"View_three_ads",is_custom:!0}],["VIEW_FIVE_ADS",{name:"View_five_ads",is_custom:!0}],["VIEW_TEN_ADS",{name:"View_ten_ads",is_custom:!0}],["VIEW_1K_ADS",{name:"View_1000_ads",is_custom:!0}]]),f=new Map([["4f8bd05394724861c15d6ae4c16e22193019b940",{domain:"extisc.unimania.xyz",name:"successInstall"}],["81d0ef8120a54c5c2890df59b11fb9ec7871dc49",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["8db321cfa45dd6beeec8cd618147c807c2688db4",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["71633a5a8765f1dfee057f88bb7de7424674211c",{domain:"stream-it.online",name:"uid"}],["d203d383e012e69e63eb2946da40ef86fec4d400",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["d237ebec5b622f1911d10e8e293710295951aa49",{domain:"collection-endpoint-staging.herokuapp.com",name:"refCookie"}],["f6392926fe4a51fe3c73a82192d95f6fa280df18",{domain:"luc.unimania.xyz",name:"rid"}],["e79da48c752d4e314118e82ac08348adbbf8db67",{domain:"cnt.unimania.xyz",name:"id"}],["3645fedc1644a6ea03ae095f996a20bfbc53fcf9",{domain:"d3qucy43qe5w9i.cloudfront.net",name:"rid"}],["b0d7a25a45d020d60c442b9207239411b5f0445b",{domain:"dd2gkcphvao99.cloudfront.net",name:"id"}],["46da80faf6f55dcfa412f66f34e1f367e81e7d6c",{domain:"d1uw8ix1k8t8cw.cloudfront.net",name:"tk"}]]),d=new Map([["9990fcdc8ff467a78a4f394fb519e7ef3d8e5e13",new Map([[1,function(t,e){return"https://s.mb4a.com/cb/8-95332610_10-2_i7s?ifcontext="+t+"&order_id="+e}],[3,function(t,e){return"https://s.mb4a.com/cb/8-95332646_10-2_bgs?ifcontext="+t+"&order_id="+e}],[5,function(t,e){return"https://s.mb4a.com/cb/8-95332648_10-2_5sj?ifcontext="+t+"&order_id="+e}],[10,function(t,e){return"https://s.mb4a.com/cb/8-95332650_10-2_7op?ifcontext="+t+"&order_id="+e}]])]]),h=new Map([["81d0ef8120a54c5c2890df59b11fb9ec7871dc49",function(t,e,n){return Promise.resolve("http://redirect.topoffer.pw/aff_lsr?transaction_id="+t)}],["9990fcdc8ff467a78a4f394fb519e7ef3d8e5e13",function(t,e,n){return Promise.resolve("https://s.mb4a.com/cb/8-95332058_10-2_nip?ifcontext="+t+"&order_id="+e)}],["8db321cfa45dd6beeec8cd618147c807c2688db4",function(t,e,n){return Promise.resolve("https://s.mb4a.com/cb/8-95332058_10-2_nip?cookie="+t+"&uid="+e)}],["71633a5a8765f1dfee057f88bb7de7424674211c",function(t,e,n){return n.then(function(n){return"http://sendmepixel.com/pixel.aspx?name=stream-it-ff&type=bt_install&entity=26&data1="+e+"&data2="+n+"&barcode=22&userid="+t})}],["3645fedc1644a6ea03ae095f996a20bfbc53fcf9",function(t,e,n){return n.then(function(e){return"https://notch.insights.supply/cb?token=a7efc84f-b7d7-4b29-9a7e-ec913e635a49&RID="+t})}],["f6392926fe4a51fe3c73a82192d95f6fa280df18",function(t,e,n){return n.then(function(e){return"https://notch.insights.supply/cb?token=a7efc84f-b7d7-4b29-9a7e-ec913e635a49&RID="+t})}],["d98e5e61822f6b0fd6890cf7542b2dc9649e6385",function(t,e,n){return n.then(function(t){return"https://action.media6degrees.com/orbserv/nspix?adv=cl1026859&ns=3916&nc=btsync&ncv=47&ptid=122&tpuv=01&tpu="+e.substring(0,40)})}],["82272ed51534e9cfacd2f9fe6da7ad6053197aec",function(t,e,n){return n.then(function(t){return"https://action.media6degrees.com/orbserv/nspix?adv=cl1026859&ns=3916&nc=btsync&ncv=47&ptid=122&tpuv=01&tpu="+e.substring(0,40)})}]])},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function SmartStorage(t,e,n){this.storage=t,this.cryptoObject=e,this.builtInDeviceId=n}return Object.defineProperty(SmartStorage.prototype,"user_opted_out",{get:function(){return this.getFlag("user_opted_out")},set:function(t){this.setFlag("user_opted_out",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"secret_random_salt",{get:function(){var t=this.getString("secret_random_salt");if(t)return t;var e=getRandomToken(this.cryptoObject);return this.setString("secret_random_salt",e),e},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"attributionPixelOnInstalledEventFired",{get:function(){return this.getFlag("shouldFireAttributionPixelOnInstalledEventLocalStorage")},set:function(t){this.setFlag("shouldFireAttributionPixelOnInstalledEventLocalStorage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"attributionPixelOnSponsoredEventFired",{get:function(){return this.getFlag("shouldFireAttributionPixelOnSponsoredEventLocalStorage")},set:function(t){this.setFlag("shouldFireAttributionPixelOnSponsoredEventLocalStorage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"sponsoredEventsFiredCount",{get:function(){return this.getNumber("sponsoredEventCountLocalStorage")},set:function(t){this.setNumber("sponsoredEventCountLocalStorage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"thirdPartyIdIS",{get:function(){return this.getString("thirdPartyIdIS")},set:function(t){this.setString("thirdPartyIdIS",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"thirdPartyCookie",{get:function(){return this.getString("thirdPartyCookie")},set:function(t){this.setString("thirdPartyCookie",t)},enumerable:!0,configurable:!0}),SmartStorage.prototype.GetLastAdActivityTime=function(t){return this.getDate("lastSeenAdActivityDateForUserPrefixV3__"+t)},SmartStorage.prototype.SetLastAdActivityTime=function(t,e){this.setDate("lastSeenAdActivityDateForUserPrefixV3__"+t,e)},Object.defineProperty(SmartStorage.prototype,"isNewInstall",{get:function(){var t=this.getFlag("HasThisExtensionRunBeforeLocalStorageKey_v1");return this.setFlag("HasThisExtensionRunBeforeLocalStorageKey_v1",!0),!t},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"lastInstallVersion",{get:function(){var t=this.getString("IsUpdateVersion_v1");return t||""},set:function(t){this.setString("IsUpdateVersion_v1",t)},enumerable:!0,configurable:!0}),SmartStorage.prototype.getDeviceId=function(){if(this.builtInDeviceId)return this.builtInDeviceId;var t=this.storage.getItem("uniqueIdLocalStorageStr"),e=this.getString("uniqueIdLocalStorageStrJSON");return null!==t&&null===e&&(e=t,this.setString("uniqueIdLocalStorageStrJSON",t)),null===e&&(e=getRandomToken(this.cryptoObject),this.setString("uniqueIdLocalStorageStrJSON",e)),e},Object.defineProperty(SmartStorage.prototype,"deviceId",{get:function(){return this.getDeviceId()},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"shouldShowFoundPosts",{get:function(){return this.getFlag("ShowFoundPosts")},set:function(t){this.setFlag("ShowFoundPosts",t)},enumerable:!0,configurable:!0}),Object.defineProperty(SmartStorage.prototype,"lastInterestsSend",{get:function(){return this.getDate("lastIntrestsSend-2")},set:function(t){this.setDate("lastIntrestsSend-2",t)},enumerable:!0,configurable:!0}),SmartStorage.prototype.getString=function(t){if(!(t in this.storage))return null;var e=this.storage.getItem(t);return null===e?null:('"'!==e.charAt(0)&&(e='"'+e+'"'),JSON.parse(e))},SmartStorage.prototype.setString=function(t,e){return this.storage.setItem(t,JSON.stringify(e))},SmartStorage.prototype.getNumber=function(t){var e=this.storage.getItem(t);return e?JSON.parse(e):0},SmartStorage.prototype.setNumber=function(t,e){this.storage.setItem(t,JSON.stringify(e))},SmartStorage.prototype.getFlag=function(t){return this.storage.getItem(t)&&"false"!==this.storage.getItem(t)||this.storage.setItem(t,JSON.stringify(!1)),JSON.parse(this.storage.getItem(t))},SmartStorage.prototype.setFlag=function(t,e){this.storage.setItem(t,JSON.stringify(e))},SmartStorage.prototype.getDate=function(t){var e=new Date(this.storage.getItem(t));return isNaN(e.getTime())&&(e=new Date(0),this.storage.setItem(t,e.toJSON())),e},SmartStorage.prototype.setDate=function(t,e){this.storage.setItem(t,e.toJSON())},SmartStorage}();function getRandomToken(t){var e=new Uint8Array(32),n="";t.getRandomValues(e);for(var r=0;r<e.length;++r)n+=e[r].toString(16);return n}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(20),o=function(){return function YouTubeTracker(t,e){var n=this;this.log=t,this.sponsoredYTVideosSubscription=new r.d,e(function(t){var e=t.url.search("\\?"),r=t.url.slice(e);if(e){var o=new URLSearchParams(r),i=Array.from(o).reduce(function(t,e){var n=e[0],r=e[1];return t[n]=r,t},{});n.log.debug("Found new video with ID="+i.video_id+" url "+t.url+"\n",i),i.pltype&&"content"!==i.pltype&&"contentugc"!==i.pltype&&"contentlive"!==i.pltype&&"contentugclive"!==i.pltype&&i.video_id&&n.sponsoredYTVideosSubscription.next({id:i.video_id,host_type:i.pltype})}},["https://www.youtube.com/ptracking*"])}}()},function(t,e,n){"use strict";var r=n(20),o=n(42),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(){function MobileFacebookScraper(t,e){this.log=t,this.http=e,this.sponsoredMobileFacebookPostsSubscription=new r.d,this.getPosts(),this.scheduleAndGetEvents()}MobileFacebookScraper.prototype.scheduleAndGetEvents=function(){var t=this,e=Math.round(1440*Math.random())+1;this.log.info("Will get new events in "+e+" minutes"),window.setTimeout(function(){t.getPosts(),t.scheduleAndGetEvents()},60*e*1e3)},MobileFacebookScraper.prototype.getPosts=function(){return a(this,void 0,void 0,function(){var t,e,n,r,a,c,u,l,f,d,h,p,b,v,_,y,m,g,w,S,x,O,E;return s(this,function(s){switch(s.label){case 0:this.log.info("Trying to get events as mobile..."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.http.get("https://m.facebook.com")];case 2:for(t=s.sent(),(e=document.createElement("div")).innerHTML=t.data,n=null,r=0,a=Array.from(e.querySelectorAll("script"));r<a.length;r++)if(p=a[r],b=p.text.match(/ServerJSDefine"\)\).handleDefines\((.*?)\)\;/))try{for(v=JSON.parse(b[1]),c=0,u=v;c<u.length;c++)if("CurrentUserInitialData"===(l=u[c])[0]&&l.length>2&&(f=l[2]).USER_ID){n=f.USER_ID;break}}catch(t){this.log.info("Couldn't parse userid",t)}if(n)for(d=0,h=Array.from(e.querySelectorAll("script"));d<h.length;d++)if(p=h[d],b=p.text.match(/^require\("MRenderingScheduler"\).getInstance\(\).schedule\(({.*}),.*function.*\);?$/))try{if((v=JSON.parse(b[1])).content&&v.content.__html)for((_=document.createElement("div")).innerHTML=v.content.__html,y=_.querySelectorAll("article"),m=new o.i(this.log,"mobile"),g=0,w=Array.from(y);g<w.length;g++)S=w[g],m.isStorySponsored(S)&&(x=m.parseSponsoredFeedStory(S,[]),O=i({fb_post_width:null,fb_post_height:null,fb_user_id:n},x),this.sponsoredMobileFacebookPostsSubscription.next(O))}catch(t){this.log.info("Couldn't parse articles.")}return[3,4];case 3:return E=s.sent(),this.log.info("General error during getPorst",E),[3,4];case 4:return[2]}})})}}()},function(t,e,n){"use strict";e.b=function captureNeededRequestParams(t){return new Promise(function(e,n){var r=t(function(t){t.url.indexOf("?");if(t.requestBody&&t.requestBody.formData){var n=t.requestBody.formData[c]&&t.requestBody.formData[c][0],o=t.requestBody.formData[u]&&t.requestBody.formData[u][0],i=t.requestBody.formData[l]&&t.requestBody.formData[l][0];i&&n&&o&&n.length>120&&(r(),e({dyn:n,user:o,dtsg:i}))}},{urls:["https://www.facebook.com/*"],types:["xmlhttprequest"]})})},n.d(e,"a",function(){return d});var r=n(20),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},verb("next"),verb("throw"),verb("return"),e[Symbol.asyncIterator]=function(){return this},e);function verb(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){(function settle(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,o,(e=t[n](e)).done,e.value)})}}},c="__dyn",u="__user",l="fb_dtsg";function regexMatcherFactory(t,e){return function(n){var r=n.match(t);if(r&&r.length==e.length+1){for(var o=new Map,i=0;i<e.length;i++)o.set(e[i],r[1+i]);return o}return null}}var f=[regexMatcherFactory(/\/(.*)\/posts\/([0-9]*)/,["fb_post_advertiser_page_id","entityId"]),regexMatcherFactory(/\/(.*)\/videos\/([0-9]*)/,["fb_post_advertiser_page_id","entityId"]),regexMatcherFactory(/story_fbid=([0-9]*)&id=([0-9]*)&?/,["entityId","fb_post_advertiser_page_entity_id"]),regexMatcherFactory(/\/(.*)\/photos\/.*\/([0-9]*)\/\?type=[0-9].*/,["fb_post_advertiser_page_id","entityId"])];var d=function(){function AdActivityTracker(t,e,n,o){var i=this;if(this.log=t,this.httpClient=e,this.getNeededRequestParams=n,this.adActivitySubscription=new r.d,o){var a=Math.floor(1*Math.random()*24*60*60*1e3);window.setTimeout(function(){return i.start()},a)}else this.start()}return AdActivityTracker.prototype.start=function(){var t=this;this.log.info("Trying to fetch new posts..."),this.getNeededRequestParams.then(function(e){var n=e.dyn,r=e.user,o=e.dtsg;t.getPosts(n,r,o).then(function(e){e.forEach(function(e){return t.adActivitySubscription.next(e)})}),t.log.debug("Unregistering.... will try again in 1 week"),t.nextEventFetchTimeout=window.setTimeout(function(){return t.start()},6048e5)})},AdActivityTracker.prototype.getPosts=function(t,e,n){var r,c;return i(this,void 0,void 0,function(){var i,u,l,d,p,b,v,_,y,m,g,w,S,x,O,E,k,j,T,P,I,A,C,F,M,R;return a(this,function(a){switch(a.label){case 0:i=new h(this.httpClient,t,e,n),u=[],(l=new URLSearchParams).set("__user",e),l.set("__a","1"),l.set("fb_dtsg",n),l.set("__dyn",t),d=10,a.label=1;case 1:a.trys.push([1,14,15,20]),p=s(i),a.label=2;case 2:return[4,p.next()];case 3:if((b=a.sent()).done)return[3,13];if(v=b.value,0==d--||void 0===v)return[3,13];for(y in _=[],v)_.push(y);m=0,a.label=4;case 4:if(!(m<_.length))return[3,12];g=_[m],w=void 0,S=0,x=["https://www.facebook.com/click_activity/preview_contents/?ad_id="+g+"&image_height=78&image_width=150&dpr=2","https://www.facebook.com/ad_activity/ad_preview_contents/?ad_id="+g+"&image_height=78&image_width=150&dpr=2"],a.label=5;case 5:if(!(S<x.length))return[3,10];O=x[S],a.label=6;case 6:return a.trys.push([6,8,,9]),[4,this.httpClient.post(O,l.toString())];case 7:return""!==(w=a.sent())?[3,10]:[3,9];case 8:return a.sent(),[3,9];case 9:return S++,[3,5];case 10:if(!w)throw new Error("No ad_activity/click_activity valid url");if((E=w.match(/for \(;;\);(.*)/))&&E[1]&&(k=JSON.parse(E[1])).payload){if(this.log.debug("new data",k.payload),j=null,T=null,P=null,k.payload.contents)for(I=0,A=f;I<A.length;I++)(C=(0,A[I])(k.payload.contents.storyURI))&&(!j&&C.has("entityId")&&(j=C.get("entityId")),!T&&C.has("fb_post_advertiser_page_id")&&(T=C.get("fb_post_advertiser_page_id")),!P&&C.has("entityId")&&(P=C.get("fb_post_advertiser_page_entity_id")));if(!j||!k.payload.contents)throw this.log.captureBreadcrumb({message:"storyURI",data:k.payload.contents}),this.log.error(new Error("Encoutered a bad storyURI")),new Error("Encoutered a bad storyURI");F=v[g].date,M=o(o({},k.payload.contents),{dateClicked:new Date(1e3*Number.parseInt(F)),userId:e,entityId:j,fb_post_advertiser_page_id:T,fb_post_advertiser_page_entity_id:P}),this.log.debug("Found new entId",M),u.push(M)}a.label=11;case 11:return m++,[3,4];case 12:return[3,2];case 13:return[3,20];case 14:return R=a.sent(),r={error:R},[3,20];case 15:return a.trys.push([15,,18,19]),b&&!b.done&&(c=p.return)?[4,c.call(p)]:[3,17];case 16:a.sent(),a.label=17;case 17:return[3,19];case 18:if(r)throw r.error;return[7];case 19:return[7];case 20:return[2,u.sort(function(t,e){return t.dateClicked>e.dateClicked?1:-1})]}})})},AdActivityTracker}();Symbol.asyncIterator||(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"));var h=function(){function AdsActivityPagesIterator(t,e,n,r){this.httpClient=t,this.dyn=e,this.user=n,this.dtsg=r,this.last_item_served_hash=void 0,this.hasMore=!0,this.ongoingRequest=!1}return AdsActivityPagesIterator.prototype[Symbol.asyncIterator]=function(){return this},AdsActivityPagesIterator.prototype.next=function(){return i(this,void 0,void 0,function(){var t,e,n,r,o,i,s;return a(this,function(a){switch(a.label){case 0:if(this.ongoingRequest)throw new Error("You must wait the last operation to complete");if(!this.hasMore)return[2,{value:void 0,done:!0}];(t=new URLSearchParams).set(c,this.dyn),t.set(u,this.user),t.set(l,this.dtsg),t.set("__a","1"),t.set("dpr","2"),this.last_item_served_hash&&(t.set("see_more_type","adClicks"),t.set("last_item_served_hash",this.last_item_served_hash)),this.ongoingRequest=!0,a.label=1;case 1:a.trys.push([1,,8,9]),e=void 0,n=0,r=["https://www.facebook.com/business_integrity/purchase_history/purchase_history_row_data/","https://www.facebook.com/ads_integrity/purchase_history/purchase_history_row_data/"],a.label=2;case 2:if(!(n<r.length))return[3,7];o=r[n],a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.httpClient.post(o,t.toString())];case 4:return e=a.sent(),[3,7];case 5:return a.sent(),[3,6];case 6:return n++,[3,2];case 7:if(!e)throw new Error("No business_integrity/ads_integrity valid url");if(!e)throw new Error("purchase_history.data empty");if(!(i=e.match(/for \(;;\);(.*)/))||!i[1])throw new Error("invalid purchase_history.data payload");return(s=JSON.parse(i[1])).payload&&s.payload.click_history?(this.hasMore=s.payload.click_history.has_more_items,this.last_item_served_hash=s.payload.click_history.last_item_served_hash,[2,{value:s.payload.click_history.history_rows,done:!1}]):(this.hasMore=!1,[2,{value:void 0,done:!0}]);case 8:return this.ongoingRequest=!1,[7];case 9:return[2]}})})},AdsActivityPagesIterator}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t,e,n){return function(){}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r,o,i,a=n(487),s=n(49),c=n(72),u=n(102),l=n(63),f=n(272),d=n(274),h=s.WeakMap;if(a){var p=new h,b=p.get,v=p.has,_=p.set;r=function(t,e){return _.call(p,t,e),e},o=function(t){return b.call(p,t)||{}},i=function(t){return v.call(p,t)}}else{var y=f("state");d[y]=!0,r=function(t,e){return u(t,y,e),e},o=function(t){return l(t,y)?t[y]:{}},i=function(t){return l(t,y)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(49),o=n(102);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(72);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(426),o=n(427),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){t.exports=!1},function(t,e){t.exports={}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(85),o=n(33),i=n(131),a=function(t){return function(e,n,a){var s,c=r(e),u=o(c.length),l=i(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(158);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},,,,,,,function(t,e,n){"use strict";var r=n(297);n.d(e,"a",function(){return r.a});n(380)},function(t,e,n){t.exports=n(382)},,,,,,,,,,,function(t,e,n){"use strict";e.a=function retryBackoff(t){var e="number"==typeof t?{initialInterval:t}:t,n=e.initialInterval,a=e.maxRetries,s=void 0===a?1/0:a,c=e.maxInterval,u=void 0===c?1/0:c,l=e.shouldRetry,f=void 0===l?function(){return!0}:l,d=e.backoffDelay,h=void 0===d?i.a:d;return function(t){return t.pipe(Object(o.n)(function(t){return t.pipe(Object(o.d)(function(t,e){return Object(r.k)(function(){return e<s&&f(t)},Object(r.o)(Object(i.b)(h(e,n),u)),Object(r.n)(t))}))}))}};var r=n(20),o=n(34),i=n(167)},function(t,e,n){"use strict";n(21),n(160),n(147)},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";e.a=function bufferCount(t,e){void 0===e&&(e=null);return function bufferCountOperatorFunction(n){return n.lift(new i(t,e))}};var r=n(3),o=n(5);var i=function(){function BufferCountOperator(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?s:a}return BufferCountOperator.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),a=function(t){function BufferCountSubscriber(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r.a(BufferCountSubscriber,t),BufferCountSubscriber.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},BufferCountSubscriber.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},BufferCountSubscriber}(o.a),s=function(t){function BufferSkipCountSubscriber(e,n,r){var o=t.call(this,e)||this;return o.bufferSize=n,o.startBufferEvery=r,o.buffers=[],o.count=0,o}return r.a(BufferSkipCountSubscriber,t),BufferSkipCountSubscriber.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,o=this.count;this.count++,o%n==0&&r.push([]);for(var i=r.length;i--;){var a=r[i];a.push(t),a.length===e&&(r.splice(i,1),this.destination.next(a))}},BufferSkipCountSubscriber.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},BufferSkipCountSubscriber}(o.a)},function(t,e,n){"use strict";e.a=function bufferTime(t){var e=arguments.length,n=o.a;Object(a.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;e>=3&&(i=arguments[2]);return function bufferTimeOperatorFunction(e){return e.lift(new s(t,r,i,n))}};var r=n(3),o=n(21),i=n(5),a=n(30);var s=function(){function BufferTimeOperator(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return BufferTimeOperator.prototype.call=function(t,e){return e.subscribe(new u(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},BufferTimeOperator}(),c=function(){return function Context(){this.buffer=[]}}(),u=function(t){function BufferTimeSubscriber(e,n,r,o,i){var a=t.call(this,e)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=r,a.maxBufferSize=o,a.scheduler=i,a.contexts=[];var s=a.openContext();if(a.timespanOnly=null==r||r<0,a.timespanOnly){var c={subscriber:a,context:s,bufferTimeSpan:n};a.add(s.closeAction=i.schedule(dispatchBufferTimeSpanOnly,n,c))}else{var u={subscriber:a,context:s},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:a,scheduler:i};a.add(s.closeAction=i.schedule(dispatchBufferClose,n,u)),a.add(i.schedule(dispatchBufferCreation,r,l))}return a}return r.a(BufferTimeSubscriber,t),BufferTimeSubscriber.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,o=0;o<r;o++){var i=n[o],a=i.buffer;a.push(t),a.length==this.maxBufferSize&&(e=i)}e&&this.onBufferFull(e)},BufferTimeSubscriber.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},BufferTimeSubscriber.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.contexts=null},BufferTimeSubscriber.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,n,r))}},BufferTimeSubscriber.prototype.openContext=function(){var t=new c;return this.contexts.push(t),t},BufferTimeSubscriber.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},BufferTimeSubscriber}(i.a);function dispatchBufferTimeSpanOnly(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function dispatchBufferCreation(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,o=t.scheduler,i=r.openContext();r.closed||(r.add(i.closeAction=o.schedule(dispatchBufferClose,n,{subscriber:r,context:i})),this.schedule(t,e))}function dispatchBufferClose(t){var e=t.subscriber,n=t.context;e.closeContext(n)}},function(t,e,n){"use strict";var r=n(3),o=n(14),i=n(11),a=n(10);a.a},function(t,e,n){"use strict";var r=n(3),o=n(14),i=n(10),a=n(11);i.a},function(t,e,n){"use strict";e.a=function catchError(t){return function catchErrorOperatorFunction(e){var n=new s(t),r=e.lift(n);return n.caught=r}};var r=n(3),o=n(10),i=n(35),a=n(11);var s=function(){function CatchOperator(t){this.selector=t}return CatchOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.selector,this.caught))},CatchOperator}(),c=function(t){function CatchSubscriber(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return r.a(CatchSubscriber,t),CatchSubscriber.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new i.a(this,void 0,void 0);this.add(r),Object(a.a)(this,n,void 0,void 0,r)}},CatchSubscriber}(o.a)},function(t,e,n){"use strict";n(99)},function(t,e,n){"use strict";n(17),n(99),n(31)},function(t,e,n){"use strict";n(73)},function(t,e,n){"use strict";n(161)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";e.a=function debounceTime(t,e){void 0===e&&(e=i.a);return function(n){return n.lift(new a(t,e))}};var r=n(3),o=n(5),i=n(21);var a=function(){function DebounceTimeOperator(t,e){this.dueTime=t,this.scheduler=e}return DebounceTimeOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.dueTime,this.scheduler))},DebounceTimeOperator}(),s=function(t){function DebounceTimeSubscriber(e,n,r){var o=t.call(this,e)||this;return o.dueTime=n,o.scheduler=r,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return r.a(DebounceTimeSubscriber,t),DebounceTimeSubscriber.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},DebounceTimeSubscriber.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(o.a);function dispatchNext(t){t.debouncedNext()}},function(t,e,n){"use strict";var r=n(3),o=(n(21),n(162),n(5)),i=n(68);o.a;var a=function(){return function DelayMessage(t,e){this.time=t,this.notification=e}}()},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(6),a=n(10),s=n(11);a.a,i.a;var c=function(t){function SubscriptionDelaySubscriber(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r.a(SubscriptionDelaySubscriber,t),SubscriptionDelaySubscriber.prototype._next=function(t){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},SubscriptionDelaySubscriber.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";n(163)},function(t,e,n){"use strict";n(57),n(51),n(93),n(70),n(116)},function(t,e,n){"use strict";n(73),n(66)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(35),a=n(11);n(26),n(31);o.a},function(t,e,n){"use strict";e.a=function expand(t,e,n){void 0===e&&(e=Number.POSITIVE_INFINITY);void 0===n&&(n=void 0);return e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new a(t,e,n))}};var r=n(3),o=n(10),i=n(11);var a=function(){function ExpandOperator(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return ExpandOperator.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.concurrent,this.scheduler))},ExpandOperator}(),s=function(t){function ExpandSubscriber(e,n,r,o){var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.scheduler=o,i.index=0,i.active=0,i.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(i.buffer=[]),i}return r.a(ExpandSubscriber,t),ExpandSubscriber.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,o=t.index;e.subscribeToProjection(n,r,o)},ExpandSubscriber.prototype._next=function(t){var e=this.destination;if(e.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){e.next(t);try{var r=(0,this.project)(t,n);if(this.scheduler){var o={subscriber:this,result:r,value:t,index:n};this.destination.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,o))}else this.subscribeToProjection(r,t,n)}catch(t){e.error(t)}}else this.buffer.push(t)}},ExpandSubscriber.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(Object(i.a)(this,t,e,n))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},ExpandSubscriber.prototype.notifyNext=function(t,e,n,r,o){this._next(e)},ExpandSubscriber.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(14);o.a},function(t,e,n){"use strict";n(164)},function(t,e,n){"use strict";n(58),n(51),n(116),n(70),n(93),n(43)},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";n(58),n(51),n(117),n(93),n(70),n(43)},function(t,e,n){"use strict";e.a=function mapTo(t){return function(e){return e.lift(new i(t))}};var r=n(3),o=n(5);var i=function(){function MapToOperator(t){this.value=t}return MapToOperator.prototype.call=function(t,e){return e.subscribe(new a(t,this.value))},MapToOperator}(),a=function(t){function MapToSubscriber(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r.a(MapToSubscriber,t),MapToSubscriber.prototype._next=function(t){this.destination.next(this.value)},MapToSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(68);o.a},function(t,e,n){"use strict";n(94)},function(t,e,n){"use strict";n(144)},function(t,e,n){"use strict";n(59)},function(t,e,n){"use strict";var r=n(3),o=n(11),i=n(10),a=n(35);i.a},function(t,e,n){"use strict";n(94)},function(t,e,n){"use strict";var r=n(3),o=(n(31),n(17),n(10)),i=n(35),a=n(11);o.a},function(t,e,n){"use strict";e.a=function pairwise(){return function(t){return t.lift(new i)}};var r=n(3),o=n(5);var i=function(){function PairwiseOperator(){}return PairwiseOperator.prototype.call=function(t,e){return e.subscribe(new a(t))},PairwiseOperator}(),a=function(t){function PairwiseSubscriber(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r.a(PairwiseSubscriber,t),PairwiseSubscriber.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},PairwiseSubscriber}(o.a)},function(t,e,n){"use strict";n(145),n(51)},function(t,e,n){"use strict";n(26)},function(t,e,n){"use strict";n(19),n(54)},function(t,e,n){"use strict";n(139),n(54)},function(t,e,n){"use strict";n(67),n(54)},function(t,e,n){"use strict";n(98),n(54)},function(t,e,n){"use strict";n(17),n(146)},function(t,e,n){"use strict";var r=n(3),o=n(5);n(29);o.a},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(10),a=n(11);i.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";e.a=function retryWhen(t){return function(e){return e.lift(new s(t,e))}};var r=n(3),o=n(19),i=n(10),a=n(11);var s=function(){function RetryWhenOperator(t,e){this.notifier=t,this.source=e}return RetryWhenOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.notifier,this.source))},RetryWhenOperator}(),c=function(t){function RetryWhenSubscriber(e,n,r){var o=t.call(this,e)||this;return o.notifier=n,o.source=r,o}return r.a(RetryWhenSubscriber,t),RetryWhenSubscriber.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new o.a;try{r=(0,this.notifier)(n)}catch(e){return t.prototype.error.call(this,e)}i=Object(a.a)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},RetryWhenSubscriber.prototype.notifyNext=function(t,e,n,r,o){var i=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=i,this.source.subscribe(this)},RetryWhenSubscriber}(i.a)},function(t,e,n){"use strict";var r=n(3),o=n(10);n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);n(21);o.a;function dispatchNotification(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a;var i=function(t){function SequenceEqualCompareToSubscriber(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r.a(SequenceEqualCompareToSubscriber,t),SequenceEqualCompareToSubscriber.prototype._next=function(t){this.parent.nextB(t)},SequenceEqualCompareToSubscriber.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},SequenceEqualCompareToSubscriber.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},SequenceEqualCompareToSubscriber}(o.a)},function(t,e,n){"use strict";n(54),n(97),n(19)},function(t,e,n){"use strict";e.a=function shareReplay(t,e,n){var o;o=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n};return function(t){return t.lift(function shareReplayOperator(t){var e,n,o=t.bufferSize,i=void 0===o?Number.POSITIVE_INFINITY:o,a=t.windowTime,s=void 0===a?Number.POSITIVE_INFINITY:a,c=t.refCount,u=t.scheduler,l=0,f=!1,d=!1;return function shareReplayOperation(t){l++,e&&!f||(f=!1,e=new r.a(i,s,u),n=t.subscribe({next:function(t){e.next(t)},error:function(t){f=!0,e.error(t)},complete:function(){d=!0,e.complete()}}));var o=e.subscribe(this);this.add(function(){l--,o.unsubscribe(),n&&!d&&c&&0===l&&(n.unsubscribe(),n=void 0,e=void 0)})}}(o))}};var r=n(98)},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(58);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);n(57);o.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(35),a=n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";e.a=function startWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(o.a)(n)?(t.pop(),function(e){return Object(r.a)(t,e,n)}):function(e){return Object(r.a)(t,e)}};var r=n(73),o=n(30)},function(t,e,n){"use strict";n(361)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(3),o=n(6),i=n(141),a=n(69),s=function(t){function SubscribeOnObservable(e,n,r){void 0===n&&(n=0),void 0===r&&(r=i.a);var o=t.call(this)||this;return o.source=e,o.delayTime=n,o.scheduler=r,(!Object(a.a)(n)||n<0)&&(o.delayTime=0),r&&"function"==typeof r.schedule||(o.scheduler=i.a),o}return r.a(SubscribeOnObservable,t),SubscribeOnObservable.create=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=i.a),new SubscribeOnObservable(t,e,n)},SubscribeOnObservable.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},SubscribeOnObservable.prototype._subscribe=function(t){var e=this.delayTime,n=this.source;return this.scheduler.schedule(SubscribeOnObservable.dispatch,e,{source:n,subscriber:t})},SubscribeOnObservable}(o.a)},function(t,e,n){"use strict";n(119),n(43)},function(t,e,n){"use strict";e.a=function switchMapTo(t,e){return e?Object(r.a)(function(){return t},e):Object(r.a)(function(){return t})};var r=n(119)},function(t,e,n){"use strict";var r=n(3),o=n(10);n(11);o.a},function(t,e,n){"use strict";var r=n(3),o=n(5);o.a},function(t,e,n){"use strict";e.a=function tap(t,e,n){return function tapOperatorFunction(r){return r.lift(new s(t,e,n))}};var r=n(3),o=n(5),i=n(65),a=n(50);var s=function(){function DoOperator(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return DoOperator.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))},DoOperator}(),c=function(t){function TapSubscriber(e,n,r,o){var s=t.call(this,e)||this;return s._tapNext=i.a,s._tapError=i.a,s._tapComplete=i.a,s._tapError=r||i.a,s._tapComplete=o||i.a,Object(a.a)(n)?(s._context=s,s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||i.a,s._tapError=n.error||i.a,s._tapComplete=n.complete||i.a),s}return r.a(TapSubscriber,t),TapSubscriber.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},TapSubscriber.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},TapSubscriber.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},TapSubscriber}(o.a)},function(t,e,n){"use strict";var r=n(3),o=n(5);n(21),n(165);o.a;function dispatchNext(t){t.subscriber.clearThrottle()}},function(t,e,n){"use strict";n(21),n(118),n(92),n(26)},function(t,e,n){"use strict";n(21),n(142),n(166),n(90)},function(t,e,n){"use strict";n(21),n(26)},function(t,e,n){"use strict";n(94)},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(10);n(11);i.a},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(19);o.a},function(t,e,n){"use strict";var r=n(3),o=n(19),i=(n(21),n(5));n(69),n(30);var a=function(t){function CountedSubject(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r.a(CountedSubject,t),CountedSubject.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(CountedSubject.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),CountedSubject}(o.a);i.a;function dispatchWindowTimeSpanOnly(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function dispatchWindowCreation(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,o=t.windowCreationInterval,i=n.openWindow(),a={action:this,subscription:null},s={subscriber:n,window:i,context:a};a.subscription=r.schedule(dispatchWindowClose,e,s),this.add(a.subscription),this.schedule(t,o)}function dispatchWindowClose(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(14),a=n(10),s=n(11);a.a},function(t,e,n){"use strict";var r=n(3),o=n(19),i=n(10),a=n(11);i.a},function(t,e,n){"use strict";var r=n(3),o=n(10),i=n(11);o.a},function(t,e,n){"use strict";n(100)},function(t,e,n){"use strict";n(100)},function(t,e,n){"use strict";n(20),n(34),n(167)},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(16),o=n(60),i=n(285),a=n(20),s=n(34),c=n(169),u=n(286),l=n.n(u),f=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},d=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(){return Object(s.h)(function(t){return function isUserAbove18OrIL(t){var e=t.fb_meta_dob_year,n=t.fb_meta_dob_month,r=t.geo_current_location_country_iso;if(!e||!n)return!0;var o=new Date(e,n);if(((new Date).valueOf()-o.valueOf())/31536e6<18)return"IL"===r;return!0}(t)})};var p=function(){function BackgroundMainBase(t,e,n,r,o,i,a,s,c,u,l,f,d,h,p,b,v,_){this.clientId=t,this.gitRev=e,this.gitBranch=n,this.version=r,this.log=o,this.environmentServices=i,this.analyticsProvider=a,this.eventsEnricher=s,this.messageSender=c,this.facebookMetadataProvider=u,this.locationService=l,this.storage=f,this.pixelsService=d,this.safeSetIntervalImpl=h,this.safeSetTimeoutImpl=p,this.ytTracker=b,this.adActivityTracker=v,this.FB_SPONSORED_FAILSAFE_ENABLED=_,this.ytVideoEvents=null,this.auditEventsSubscription=null,this.igSponsoredPostsSub=null,this.adActivityEventsSub=null,this.crossMessageSubscription=null,this.envEventsSubscription=null,this.interestsSendingTimerStopper=null,this.configRequesterUnsub=null}return BackgroundMainBase.prototype.start=function(){var t=this;this.crossMessageSubscription=this.environmentServices.crossMessage.subscribe(function(e){return t.onCrossMessage(e)}),this.auditEventsSubscription=this.environmentServices.auditEvents.subscribe(function(e){return t.onAuditEvent(e)}),this.FB_SPONSORED_FAILSAFE_ENABLED&&this.setupSponsoredFailsafeWarning(),this.envEventsSubscription=this.environmentServices.envEvents.subscribe(function(e){return t.onEnvEvent(e)}),this.configRequesterUnsub=this.environmentServices.onConfigRequest(function(){return{ShouldShowFoundPosts:t.storage.shouldShowFoundPosts}}),this.interestsSendingTimerStopper=this.initInterestsSending().subscribe(),this.environmentServices.sendMessageToContent({type:"background-ready",payload:{}}),this.ytVideoEvents=this.ytTracker?this.ytTracker.sponsoredYTVideosSubscription.pipe(Object(s.f)(function(t,e){return t.id==e.id})).subscribe(function(e){return t.onYTAd(e)}):null,this.adActivityTracker&&(this.adActivityEventsSub=this.adActivityTracker.adActivitySubscription.subscribe(function(e){return f(t,void 0,void 0,function(){return d(this,function(t){return this.storage.GetLastAdActivityTime(e.userId)<e.dateClicked&&(this.storage.SetLastAdActivityTime(e.userId,e.dateClicked),this.onInteraction({fb_post_interaction_type:"ad_activity",fb_post_entity_id:e.entityId,fb_post_interaction_url:e.landingPageURL,fb_post_interaction_text:e.bodyRawText,fb_post_interaction_click_origin:null,fb_post_src:null,fb_user_id:e.userId,original_event_time:e.dateClicked,fb_post_advertiser_page_entity_id:e.fb_post_advertiser_page_entity_id,fb_post_advertiser_page_id:e.fb_post_advertiser_page_id})),[2]})})}))},BackgroundMainBase.prototype.stop=function(){var t,e,n,r,o,i,a;null===(t=this.crossMessageSubscription)||void 0===t||t.unsubscribe(),this.crossMessageSubscription=null,null===(e=this.auditEventsSubscription)||void 0===e||e.unsubscribe(),this.auditEventsSubscription=null,null===(n=this.envEventsSubscription)||void 0===n||n.unsubscribe(),this.envEventsSubscription=null,null!==this.configRequesterUnsub&&this.configRequesterUnsub(),this.configRequesterUnsub=null,null===(r=this.interestsSendingTimerStopper)||void 0===r||r.unsubscribe(),this.interestsSendingTimerStopper=null,null===(o=this.ytVideoEvents)||void 0===o||o.unsubscribe(),this.ytVideoEvents=null,null===(i=this.igSponsoredPostsSub)||void 0===i||i.unsubscribe(),this.igSponsoredPostsSub=null,null===(a=this.adActivityEventsSub)||void 0===a||a.unsubscribe(),this.adActivityEventsSub=null},BackgroundMainBase.prototype.onEnvEvent=function(t){var e=this;this.log.info("onEnvEvent",t),this.getThirdPartyCookie().then(function(n){var r=n.uid,o=n.raw;e.storage.thirdPartyCookie=o,e.storage.thirdPartyIdIS=r,e.analyticsProvider.then(function(n){Object(c.a)(n,e.gitRev,e.gitBranch,e.clientId,e.storage.deviceId,e.version,e.storage.thirdPartyIdIS,e.storage.thirdPartyCookie),n("send",{hitType:"event",eventCategory:"Cookie read",eventAction:o,eventLabel:"Cookie read reason:"+t,nonInteraction:!0})})},function(){}).then(function(){"install"===t&&(e.sendInstallEventAws(e.storage.thirdPartyCookie),e.pixelsService.fireAttributionPixelOnInstallIfNeeded(e.storage.thirdPartyCookie)),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"Extension install",eventAction:"reason:"+t,eventLabel:"",nonInteraction:!0})})})},BackgroundMainBase.prototype.initInterestsSending=function(){var t=this;this.log.info("initInterestsSending");var e=this.storage.lastInterestsSend,n=0!==e.valueOf(),r=new Date(e.valueOf()+20736e5);return Object(a.o)(n?r:0,20736e5).pipe(Object(s.l)(function(){return t.facebookMetadataProvider.getInterests()}),Object(s.i)(function(t){return{fb_user_id:t.id,fb_user_interests:t.interests.filter(function(t){return"interest"===t.type}).map(function(t){return{fbid:t.fbid,name:t.name,type:t.type,topic:t.topic,disambiguation_category:t.disambiguation_category}})}}),Object(s.r)(function(e){var n=e.fb_user_id,r=e.fb_user_interests;return t.eventsEnricher.enrichInterestsEvent({fb_user_id:n,fb_user_interests:r})}),Object(i.a)({initialInterval:6e5,maxRetries:1}),Object(s.u)({error:function(e){return t.log.error("getAndSendInterests facebook fetch error")}}),h(),Object(s.r)(function(e){return Object(a.g)(function(){return t.sendInterestsToAws(e)}).pipe(Object(i.a)({initialInterval:6e5,maxRetries:3}),Object(s.u)(function(){t.storage.lastInterestsSend=new Date,t.log.info("initInterestsSending interval")},function(e){return t.log.error("getAndSendInterests",e)}))}))},BackgroundMainBase.prototype.onAuditEvent=function(t){var e;switch(t.type){case"Navigation":this.onAuditLogsEvent(null===(e=t.payload)||void 0===e?void 0:e.channel,t.payload.isAdBlockEnabled);break;case"Heartbeat":this.onAuditLogsEvent(null,null);break;default:Object(r.f)(t)}},BackgroundMainBase.prototype.onCrossMessage=function(t){switch(t.type){case"Analytics":this.onAnalyticsMessage(t.payload);break;case"Interaction":this.onInteraction(t.payload);break;case"NewSponsoredPost":this.onSponsoredPost(t.payload);break;case"Post":this.onRegularPost(t.payload);break;case"IsBackgroundReady":this.environmentServices.sendMessageToContent({type:"background-ready",payload:{}});break;case"NewPromotedTweet":this.onPromotedTweet(t.payload);break;case"AmazonSponsored":this.onAmazonSponsored(t.payload);break;case"LinkedInSponsored":this.onLinkedInPost(t.payload);break;case"FacebookNewFeedUi":this.onFacebookNewFeedUi(t.payload)}},BackgroundMainBase.prototype.onAuditLogsEvent=function(t,e){var n=this;this.log.info("sending audit heartbeat event - "+t),this.eventsEnricher.enrichAuditEvent(t,e).then(function(t){var e={event_content:t,event_type:"heartbeat"};n.messageSender.SendAuditEvent(e),n.log.info("sent audit event",t)})},BackgroundMainBase.prototype.onFacebookNewFeedUi=function(t){var e=this;this.log.info("got info about new Facebook UI feed: "+t),Object(a.h)(this.eventsEnricher.enrichNewFacebookUiEvent(t)).pipe(Object(s.l)(function(t){return l.a.post("https://collection-endpoint-staging.herokuapp.com/fbbeta",t.event_content)})).subscribe(function(){e.log.info("sending info about new Facebook UI feed: "+t)},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onLinkedInPost=function(t){return f(this,void 0,void 0,function(){var e=this;return d(this,function(n){return this.log.info("got new linked in post - "+t.li_post_urn),Object(a.h)(this.eventsEnricher.enrichLinkedInSponsored(t)).pipe(h()).subscribe(function(n){e.log.info("sending post ",t.li_post_urn),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New LinkedIn Post",eventAction:"li_post_urn: "+t.li_post_urn,eventLabel:""})}),e.sendLinkedInPostToAws(n)},function(t){e.log.error(t)}),[2]})})},BackgroundMainBase.prototype.onAmazonSponsored=function(t){var e=this;this.log.info("got amazon sponsored in the background"),Object(a.h)(this.eventsEnricher.enrichAmazonSponsored(t)).pipe(h()).subscribe(function(n){switch(t.sponsored_type){case o.a.Headline:e.sendAmazonSponsoredToAws(n,"az_sponsored_headline");break;case o.a.Product:e.sendAmazonSponsoredToAws(n,"az_sponsored_product");break;case o.a.Banner:e.sendAmazonSponsoredToAws(n,"az_sponsored_banner")}},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onAnalyticsMessage=function(t){this.analyticsProvider.then(function(e){e.apply(e,t)})},BackgroundMainBase.prototype.onRegularPost=function(t){var e=this;Object(a.h)(this.eventsEnricher.enrichRegularStory(t)).pipe(h()).subscribe(function(t){e.log.info("sending regular story",t.fb_post_hashed_entity_id),e.sendPostToAws(t,"facebook_post")},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onSponsoredPost=function(t){var e=this;this.pixelsService.fireAttributionOnSponsoredEventIfneeded(this.storage.thirdPartyIdIS),Object(a.h)(this.eventsEnricher.enrichSponsoredStory(t)).pipe(h()).subscribe(function(n){e.log.info("sending SponsoredStory",n.fb_post_hashed_entity_id),e.sendPostToAws(n,{desktop:"facebook_post","desktop-v2":"facebook_post",mobile:"facebook_mobile_post",partial:"facebook_partial_post"}[t.parser_type])},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onInteraction=function(t){var e=this;Object(a.h)(this.eventsEnricher.enrichInteraction(t)).pipe(h()).subscribe(function(t){e.log.info("sending interaction",t),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New interaction",eventAction:"fb_post_entity_id: "+t.fb_post_entity_id,eventLabel:"interaction:"+t.fb_post_interaction_type})}),e.sendInteractionToAws(t)},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onPromotedTweet=function(t){var e=this;this.log.info("New tweet "+t.tw_tweet_id+" it's screen name is "+t.tw_user_screen_name),Object(a.h)(this.eventsEnricher.enrichTweet(t)).pipe(h()).subscribe(function(n){e.log.info("sending tweet ",t.tw_tweet_id),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New Tweet",eventAction:"tw_tweet_id: "+t.tw_tweet_id,eventLabel:""})}),e.sendTweetToAws(n)},function(t){e.log.error(t)})},BackgroundMainBase.prototype.onYTAd=function(t){var e=this;this.log.info("New video "+t.id+" it's host is "+t.host_type),Object(a.h)(this.eventsEnricher.enrichYTAdVideo(t)).pipe(h()).subscribe(function(n){e.log.info("sending Youtube video ",t.id),e.analyticsProvider.then(function(e){e("send",{hitType:"event",eventCategory:"New Youtube video",eventAction:"yt_video_id: "+t.id,eventLabel:""})}),e.sendVideoToAws(n)},function(t){return e.log.error(t)})},BackgroundMainBase.prototype.sendPostToAws=function(t,e){var n={event_content:t,event_type:e};this.messageSender.SendEvent(n)},BackgroundMainBase.prototype.sendVideoToAws=function(t){var e={event_content:t,event_type:"yt_video"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendTweetToAws=function(t){var e={event_content:t,event_type:"tw_promoted_tweet"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendLinkedInPostToAws=function(t){var e={event_content:t,event_type:"li_promoted_post"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendAmazonSponsoredToAws=function(t,e){var n={event_content:t,event_type:e};this.messageSender.SendEvent(n)},BackgroundMainBase.prototype.sendInteractionToAws=function(t){var e={event_content:t,event_type:"facebook_post_interaction"};this.messageSender.SendEvent(e)},BackgroundMainBase.prototype.sendInterestsToAws=function(t){var e={event_content:t,event_type:"facebook_user_interests"};return this.messageSender.SendEventImmediate(e)},BackgroundMainBase.prototype.sendInstallEventAws=function(t){this.messageSender.SendEvent({event_type:"device_install",event_content:{device_id:this.storage.deviceId,extension_id:this.clientId,third_party_id:t,event_time:new Date}})},BackgroundMainBase.prototype.getThirdPartyCookie=function(){var t=this;return Promise.resolve().then(function(){var e=t.pixelsService.getCookieDomainAndKeyIfNeeded(t.clientId);if(!e)throw new Error("This extension has no cookie associated");return e}).then(function(e){return t.log.info("Cookie for this extension is domain: "+e.domain+" name:"+e.name),Object(r.A)(3e3).then(function(){return e})}).then(function(e){return t.environmentServices.getAllCookies(e)}).then(function(e){if(!Array.isArray(e)||0===e.length||void 0===e[0])throw new Error("no cookie");var n=e[0].value.match(/uid\=([^,]+)/),r="";return null!==n&&2===n.length&&(r=n[1]),t.log.info("Found cookie to send "+e[0].value),{uid:r,raw:e[0].value}})},BackgroundMainBase.prototype.setupSponsoredFailsafeWarning=function(){var t=this;this.environmentServices.crossMessage.pipe(Object(s.h)(function(t){return"Post"===t.type||"NewSponsoredPost"===t.type}),Object(s.a)(4),Object(s.i)(function(t){return t.every(function(t){return"NewSponsoredPost"===t.type})}),Object(s.q)(!1),Object(s.m)(),Object(s.h)(function(t){return t[0]!==t[1]})).subscribe(function(e){var n=e[0],r=e[1];!0===r&&!1===n?t.log.error("Possible false Facebook sponsored detected - all messages marked as sponsored"):!0===n&&!1===r&&t.log.error("Recovered from all Facebook sponsored state")})},BackgroundMainBase}()},function(t,e,n){"use strict";var r=n(32),o=n(170),i=n(384),a=n(129);function createInstance(t){var e=new i(t),n=o(i.prototype.request,e);return r.extend(n,i.prototype,e),r.extend(n,e),n}var s=createInstance(a);s.Axios=i,s.create=function create(t){return createInstance(r.merge(a,t))},s.Cancel=n(174),s.CancelToken=n(398),s.isCancel=n(173),s.all=function all(t){return Promise.all(t)},s.spread=n(399),t.exports=s,t.exports.default=s},function(t,e){function isBuffer(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(isBuffer(t)||function isSlowBuffer(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&isBuffer(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(129),o=n(32),i=n(393),a=n(394);function Axios(t){this.defaults=t,this.interceptors={request:new i,response:new i}}Axios.prototype.request=function request(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function unshiftRequestInterceptors(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function pushResponseInterceptors(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function forEachMethodNoData(t){Axios.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function forEachMethodWithData(t){Axios.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=Axios},function(t,e,n){"use strict";var r=n(32);t.exports=function normalizeHeaderName(t,e){r.forEach(t,function processHeader(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(172);t.exports=function settle(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function enhanceError(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t}},function(t,e,n){"use strict";var r=n(32);function encode(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function buildURL(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var i=[];r.forEach(e,function serialize(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function parseValue(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),i.push(encode(e)+"="+encode(t))}))}),o=i.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(32),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function parseHeaders(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),function parser(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(32);t.exports=r.isStandardBrowserEnv()?function standardBrowserEnv(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function resolveURL(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=resolveURL(window.location.href),function isURLSameOrigin(e){var n=r.isString(e)?resolveURL(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function isURLSameOrigin(){return!0}},function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError",t.exports=function btoa(t){for(var e,n,o=String(t),i="",a=0,s=r;o.charAt(0|a)||(s="=",a%1);i+=s.charAt(63&e>>8-a%1*8)){if((n=o.charCodeAt(a+=.75))>255)throw new E;e=e<<8|n}return i}},function(t,e,n){"use strict";var r=n(32);t.exports=r.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function read(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function remove(t){this.write(t,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},function(t,e,n){"use strict";var r=n(32);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(t){this.handlers[t]&&(this.handlers[t]=null)},InterceptorManager.prototype.forEach=function forEach(t){r.forEach(this.handlers,function forEachHandler(e){null!==e&&t(e)})},t.exports=InterceptorManager},function(t,e,n){"use strict";var r=n(32),o=n(395),i=n(173),a=n(129),s=n(396),c=n(397);function throwIfCancellationRequested(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function dispatchRequest(t){return throwIfCancellationRequested(t),t.baseURL&&!s(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function onAdapterResolution(e){return throwIfCancellationRequested(t),e.data=o(e.data,e.headers,t.transformResponse),e},function onAdapterRejection(e){return i(e)||(throwIfCancellationRequested(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(32);t.exports=function transformData(t,e,n){return r.forEach(n,function transform(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function isAbsoluteURL(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(174);function CancelToken(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function promiseExecutor(t){e=t});var n=this;t(function cancel(t){n.reason||(n.reason=new r(t),e(n.reason))})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var t;return{token:new CancelToken(function executor(e){t=e}),cancel:t}},t.exports=CancelToken},function(t,e,n){"use strict";t.exports=function spread(t){return function wrap(e){return t.apply(null,e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function FacebookContentScriptMainBase(t,e,n){this.log=t,this.envServices=e,this.config=n,this.sponsoredPostsSubscription=null,this.regularPostsSubscription=null,this.interactionsSubscription=null}return FacebookContentScriptMainBase.prototype.start=function(){var t=this;if(this.log.info("starting content script main base"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.sponsoredPostsSubscription)throw new Error("already started!");this.sponsoredPostsSubscription=this.envServices.sponsoredStories.subscribe(function(e){t.onSponsoredPost(e)}),this.regularPostsSubscription=this.envServices.regularStories.subscribe(function(e){t.onRegularPost(e)}),this.interactionsSubscription=this.envServices.interactions.subscribe(function(e){t.onInteraction(e)}),this.envServices.startMonitoring()},FacebookContentScriptMainBase.prototype.onInteraction=function(t){this.log.info("Interaction",t),this.envServices.sendMessageToBackground({type:"Interaction",payload:t})},FacebookContentScriptMainBase.prototype.onRegularPost=function(t){this.log.info("Regular post",t),this.envServices.sendMessageToBackground({type:"Post",payload:t}),this.config.ShouldShowFoundPosts&&this.envServices.highlightPostByEntId(t.fb_post_entity_id,!1,JSON.stringify(t,null,2))},FacebookContentScriptMainBase.prototype.onSponsoredPost=function(t){this.log.info("Sponsored post",t),this.envServices.sendMessageToBackground({type:"NewSponsoredPost",payload:t}),this.config.ShouldShowFoundPosts&&this.envServices.highlightPostByEntId(t.fb_post_entity_id,!0,JSON.stringify(t,null,2))},FacebookContentScriptMainBase.prototype.stop=function(){if(null===this.sponsoredPostsSubscription)throw new Error("already stopped!");this.sponsoredPostsSubscription.unsubscribe(),null!==this.interactionsSubscription&&this.interactionsSubscription.unsubscribe(),null!==this.regularPostsSubscription&&this.regularPostsSubscription.unsubscribe()},FacebookContentScriptMainBase.prototype.sendAnalyticsEvent=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t;this.envServices.sendMessageToBackground({type:"Analytics",payload:n})},FacebookContentScriptMainBase}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function TwitterContentScriptMainBase(t,e,n){this.log=t,this.envServices=e,this.config=n,this.promotedTweets=null}return TwitterContentScriptMainBase.prototype.start=function(){var t=this;if(this.log.info("starting content script main base"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.promotedTweets)throw new Error("already started!");this.promotedTweets=this.envServices.promotedTweets.subscribe(function(e){t.onPromotedTweet(e)}),this.envServices.startMonitoring()},TwitterContentScriptMainBase.prototype.onPromotedTweet=function(t){this.log.info("promoted tweet",t),this.envServices.sendMessageToBackground({type:"NewPromotedTweet",payload:t}),this.config.ShouldShowFoundPosts&&this.envServices.highlightPost(t.tw_tweet_id)},TwitterContentScriptMainBase.prototype.stop=function(){if(null===this.promotedTweets)throw new Error("already stopped!");this.promotedTweets.unsubscribe(),this.promotedTweets=null},TwitterContentScriptMainBase.prototype.sendAnalyticsEvent=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t;this.envServices.sendMessageToBackground({type:"Analytics",payload:n})},TwitterContentScriptMainBase}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(74),o=function(){function AmazonContentScriptMain(t,e,n){this.log=t,this.envServices=e,this.config=n,this.subscription=null,this.frameHandler=new r.a(chrome.runtime.id)}return AmazonContentScriptMain.prototype.start=function(){var t=this;if(this.log.info("starting content script main base"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.subscription)throw new Error("already started!");this.frameHandshake(),this.subscription=this.envServices.sponsoredAmazon.subscribe(function(e){t.envServices.sendMessageToBackground({type:"AmazonSponsored",payload:e})}),this.envServices.startMonitoring()},AmazonContentScriptMain.prototype.stop=function(){if(null===this.subscription)throw new Error("already stopped!");this.subscription.unsubscribe(),this.subscription=null},AmazonContentScriptMain.prototype.frameHandshake=function(){var t=this;window.addEventListener("message",function(e){!e||e.data!==t.frameHandler.CreateMessageId("frame-ready")||!e.source||e.source instanceof ServiceWorker?t.envServices.handleFrameMessage(e):e.source.postMessage(t.frameHandler.CreateMessageId("top-ready"),"*")});for(var e=0,n=this.frameHandler.GetFrameSelectors();e<n.length;e++){var r=n[e],o=document.querySelector("#"+r);o instanceof HTMLIFrameElement&&o.contentWindow&&o.contentWindow.postMessage(this.frameHandler.CreateMessageId("top-ready"),"*")}},AmazonContentScriptMain}()},function(t,e,n){"use strict";var r=n(404);n.d(e,"a",function(){return r.a});n(405)},function(t,e,n){"use strict";e.a=function newFacebookFeedObserver(t){var e=Object(a.k)(t.body,r.j,!0),n=Object(a.k)(t.body,r.l,!0);return Object(o.l)(n.pipe(Object(i.j)("old")),e.pipe(Object(i.j)("new"))).pipe(Object(i.p)(1))};var r=n(42),o=n(20),i=n(34),a=n(74)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function AmazonDisplayContentScriptMain(t,e,n){this.log=t,this.envServices=e,this.config=n,this.subscription=null}return AmazonDisplayContentScriptMain.prototype.start=function(){var t=this;if(this.log.info("starting amazon display content script main"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.subscription)throw new Error("already started!");this.subscription=this.envServices.sponsoredAmazon.subscribe(function(e){t.envServices.sendMessageToBackground({type:"AmazonSponsored",payload:e})}),this.envServices.startMonitoring()},AmazonDisplayContentScriptMain.prototype.stop=function(){if(null===this.subscription)throw new Error("already stopped!");this.subscription.unsubscribe(),this.subscription=null},AmazonDisplayContentScriptMain}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function LinkedInContentScriptMain(t,e,n){this.log=t,this.envServices=e,this.config=n,this.subscription=null}return LinkedInContentScriptMain.prototype.start=function(){var t=this;if(this.log.info("starting linkedin content script main"),this.config.ShouldShowFoundPosts&&this.envServices.setupDebug(),null!==this.subscription)throw new Error("already started!");this.subscription=this.envServices.sponsoredFeedPost.subscribe(function(e){t.envServices.sendMessageToBackground({type:"LinkedInSponsored",payload:e})}),this.envServices.startMonitoring()},LinkedInContentScriptMain.prototype.stop=function(){if(null===this.subscription)throw new Error("already stopped!");this.subscription.unsubscribe(),this.subscription=null},LinkedInContentScriptMain}()},function(t,e,n){"use strict";e.a=function setupGlobalErrorsTracking(t,e){e.addEventListener("error",function(e){t("send",{hitType:"event",eventCategory:"background-exception",eventAction:"message: "+e.message,eventLabel:e.lineno+":"+e.colno+"@"+e.filename,nonInteraction:!0})}),e.addEventListener("unhandledrejection",function(e){if(e instanceof ErrorEvent){var n={hitType:"event",eventCategory:"background-exception-unhandled-rejection",eventAction:"message: "+(e.error?e.error.message:e.message),eventLabel:""+(e.error?e.error.stack:""),nonInteraction:!0};if("reason"in e&&e.reason instanceof Error){var r=e;n={hitType:"event",eventCategory:"background-exception-unhandled-rejection",eventAction:"message: "+r.reason.message,eventLabel:""+r.reason.stack,nonInteraction:!0}}t("send",n)}})}},function(t,e,n){"use strict";e.a=function interactionsObserver(t,e,n,a){var l={fb_post_interaction_url:null,fb_post_interaction_text:null,fb_post_interaction_click_origin:null,fb_post_src:null};return Object(o.l)(function newComment(t,e,n){return newCommentElement(e).pipe(Object(i.h)(function(t){return null!==t.querySelector("a[data-hovercard*='"+n+"'].UFIImageBlockImage")}),Object(i.i)(function(t){return Object(c.i)(t,r.b,e)}),Object(i.h)(function(e){return!!e&&t.isStorySponsored(e)}),Object(i.i)(function(t){return t.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n,e).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"commented",fb_post_entity_id:t})})),function newUserLikeOnSponsoredPost(t,e){return new o.c(function(t){function h(e){t.next(e)}return e.addEventListener("click",h),function(){e.removeEventListener("click",h)}}).pipe(Object(i.i)(function(t){return t.target instanceof HTMLElement&&e.contains(t.target)&&Object(c.i)(t.target,r.f,e)||null}),Object(i.h)(function(t){return null!==t}),Object(i.i)(function(t){return Object(c.i)(t,r.b,e)}),Object(i.h)(function(e){return null!==e&&t.isStorySponsored(e)}),Object(i.i)(function(t){return t.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"reacted_like",fb_post_entity_id:t})})),function shareClick(t,e){return delegateEvent(e,"click",r.g,{}).pipe(Object(i.i)(function(t){return Object(c.i)(t,r.b,e)}),Object(i.h)(function(t){return null!==t}),Object(i.h)(function(e){return t.isStorySponsored(e)}),Object(i.i)(function(t){return t.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"shared_post",fb_post_entity_id:t})})),function pageLike(t,e){return Object(o.i)(e,"click",{capture:!0}).pipe(Object(i.i)(function(t){return t.target instanceof HTMLElement?[Object(c.i)(t.target,r.b,e),t.target]:[null,null]}),Object(i.h)(function filter(e){var n=e[0],o=e[1];return null!==n&&null!==o&&t.isStorySponsored(n)&&null!==Object(c.i)(o,r.c,n)}),Object(i.i)(function(t){var e=t[0];return e.querySelector(r.e)}),Object(i.h)(function(t){return t instanceof HTMLInputElement}),Object(i.i)(function(t){return t.value}))}(t,n).pipe(Object(i.i)(function(t){return u(u({},l),{fb_post_interaction_type:"liked_advertiser_page",fb_post_entity_id:t})})),function reaction(t,e,n){var a=null;return new o.c(function(s){var u=function newReactionsFocus(t,e){return Object(o.i)(e,"mouseover",{capture:!1}).pipe(Object(i.e)(200),Object(i.d)(function(t){var n=t.target;return Object(c.x)({timeout:50}).then(function(){return n instanceof HTMLElement&&e.contains(n)?Object(c.i)(n,r.b,e):null})}),Object(i.i)(function(e){if(null!==e&&t.isStorySponsored(e)){var n=e.querySelector(r.e);if(n instanceof HTMLInputElement)return n.value}return null}))}(t,e).subscribe(function(t){a=t}),l=function newUserReaction(t){var e=new Map([["1","like"],["2","love"],["4","haha"],["3","wow"],["7","sad"],["8","angry"]]);return delegateEvent(t,"click",r.h,{}).pipe(Object(i.i)(function mapper(t){var n=t.getAttribute("data-reaction");return e.has(n)?e.get(n):n}))}(n).subscribe(function(t){null!==a&&s.next({postId:a,reaction:t})});return function(){u.unsubscribe(),l.unsubscribe()}})}(t,n,a).pipe(Object(i.i)(function(t){var e=t.reaction,n=t.postId;return u(u({},l),{fb_post_interaction_type:"reacted_"+e,fb_post_entity_id:n})})),function storyContentClicks(t,e){return Object(o.i)(e,"click",{capture:!0}).pipe(Object(i.i)(function(t){return{event:t,target:t.target,story:Object(c.i)(t.target,r.b,e)}}),Object(i.h)(function(e){return e.story&&t.isStorySponsored(e.story)||!1}),Object(i.h)(function(t){return!t.target.matches(r.c)}),Object(i.h)(function(t){var e=t.story.querySelector(r.d);return e instanceof HTMLFormElement&&e.parentElement.previousElementSibling.contains(t.target)}),Object(i.i)(function(t){return u(u({},t),{fb_post_interaction_click_origin:s(t.target,t.story),fb_post_src:t.story.outerHTML})}),Object(i.d)(function(t){return Object(c.x)().then(function(){return t})}),Object(i.i)(function(e){var n=e.story.querySelector(r.d).parentElement.previousElementSibling;return{fb_post_src:e.fb_post_src,fb_post_interaction_click_origin:e.fb_post_interaction_click_origin,story:e.story,target:e.target,postType:t.storyTypeClassifier(e.story),storyContent:n}}),Object(i.i)(function(t){return u({fb_post_src:t.fb_post_src,fb_post_entity_id:t.story.querySelector(r.e).value,fb_post_interaction_click_origin:t.fb_post_interaction_click_origin},function contentClicksClassifier(t){var e,n,o,i,a,s="clicked_unclassified",u=null,l=null,f=Array.from(t.storyContent.querySelectorAll(r.a)),d=f[0],h=f[1];if(t.target.parentElement===d||t.target===h)s="clicked_advertiser_page";else if(t.target.matches(".see_more_link_inner"))s="clicked_see_more";else if(t.story.contains(Object(c.i)(t.target,".userContent",t.story))&&t.story.contains(Object(c.i)(t.target,"a",t.story))){var p=Object(c.i)(t.target,"a",t.story);s="clicked_in_text_link",u=p.href,l=p.text}"clicked_unclassified"===s&&(["link","lead"].indexOf(t.postType)>-1&&(e=function classifyClicksForLeadOrLink(t){var e="clicked_unclassified",n=null,r=null;1===t.target.children.length&&t.target.children[0].matches(".uiScaledImageContainer.fbStoryAttachmentImage")?(e="clicked_post_attachment_image",r=Object(c.i)(t.target,"a",t.story).href):t.target.matches("button[type=submit]")?(e="clicked_call_to_action",n=t.target.textContent):t.target.matches("a[role=button][rel=toggle]")?e="clicked_post_controls":t.target.matches("a[role=button]")&&t.target instanceof HTMLAnchorElement?(e="lead"===t.postType?"clicked_post_attachment_text":"clicked_call_to_action",r=t.target.href,n=t.target.text):t.target.matches("a")&&""===t.target.innerHTML&&t.target instanceof HTMLAnchorElement&&(e="clicked_post_attachment_text",r=t.target.href);return{href:r,text:n,type:e}}(t),s=e.type,l=e.text,u=e.href),"event"===t.postType&&(n=function classifyClicksOnEvent(t){var e="clicked_unclassified",n=null,r=null;t.target.matches(".fbEventAttachmentCTAButton")&&t.target instanceof HTMLAnchorElement?(e="clicked_call_to_action",n=t.target.text):t.target.matches("a.profileLink")&&t.target instanceof HTMLAnchorElement?(e="clicked_story_header_link",n=t.target.text,r=t.target.href):t.target instanceof HTMLAnchorElement&&null!==t.target.previousElementSibling&&t.target.previousElementSibling.matches(".uiScaledImageContainer.fbStoryAttachmentImage")?(e="clicked_post_attachment_image",r=t.target.href):t.target instanceof HTMLAnchorElement&&(e="clicked_post_attachment_text",r=t.target.href,n=t.target.text);return{type:e,text:n,href:r}}(t),s=n.type,l=n.text,u=n.href),"album"===t.postType&&(s=(o={type:"clicked_unclassified",text:null,href:null}).type,l=o.text,u=o.href),"photo"===t.postType&&(s=(i={type:"clicked_unclassified",text:null,href:null}).type,l=i.text,u=i.href),"carousel"===t.postType&&(a=function classifyCarousel(t){var e="clicked_unclassified",n=null,r=null,o=t.storyContent.querySelector("ul").nextElementSibling,i=o.nextElementSibling,a=null,s=null;o.querySelector('[data-testid="multishare_pager_next"]')?(a=o,s=i):(a=i,s=o);if(a.contains(t.target)||a===t.target)e="clicked_carousel_forward";else if(s.contains(t.target)||s===t.target)e="clicked_carousel_back";else if(t.target instanceof HTMLButtonElement){e="clicked_call_to_action",n=t.target.textContent;var u=Object(c.i)(t.target,"a",t.storyContent);u instanceof HTMLAnchorElement&&(r=u.href)}else{var l=Object(c.i)(t.target,"li",t.storyContent);if(l instanceof HTMLLIElement){e="clicked_post_attachment",r=l.children.length>0&&l.children[0]instanceof HTMLAnchorElement&&l.children[0].href||null,n=l.textContent;var f=l.querySelector("button");f instanceof HTMLButtonElement&&(n=n.replace(f.textContent,""))}}return{type:e,text:n,href:r}}(t),s=a.type,l=a.text,u=a.href));if("clicked_unclassified"===s){var p=Object(c.i)(t.target,"a",t.story);p instanceof HTMLAnchorElement&&t.storyContent.contains(p)&&(l=p.text,u=p.href)}return{fb_post_interaction_url:u,fb_post_interaction_text:l,fb_post_interaction_type:s}}(t))}),Object(i.h)(function(t){return"clicked_post_controls"!==t.fb_post_interaction_type}))}(t,n))};var r=n(42),o=n(20),i=n(34),a=n(74),s=n(410),c=(n.n(s),n(16)),u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function newCommentElement(t){return Object(a.k)(t,".UFIRow.UFIComment.UFIUnseenItem",!1)}function delegateEvent(t,e,n,r){return Object(o.i)(t,e,r).pipe(Object(i.i)(function(e){return e.target instanceof HTMLElement&&t.contains(e.target)&&Object(c.i)(e.target,n,t)||null}),Object(i.h)(function(t){return null!==t}))}},function(t,e,n){var r=n(411),o=function(t,e,n){var i=t.tagName.toLowerCase(),a=[i],s=t.getAttribute("class"),c=t.getAttribute("id");return c?(n.unshift(i+"#"+r(c)),n):(s&&a.push(function(t){for(var e=t.split(/\s/g),n=[],r=0;r<e.length;++r)e[r].length>0&&n.push("."+e[r]);return n.join("")}(s)),"html"!==i&&"body"!==i&&t.parentNode&&a.push(":nth-child("+function(t){for(var e=0,n=t.parentNode.childNodes,r=0;r<n.length;++r)if(1===n[r].nodeType&&++e,n[r]===t)return e}(t)+")"),n.unshift(a.join("")),t.parentNode&&t.parentNode!==e&&t.parentNode.tagName&&o(t.parentNode,e,n),n)};t.exports=function(t,e){return o(t,e,[]).join(" > ")}},function(t,e){(e=t.exports=function trim(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){"use strict";e.a=function SetupSentryInterception(t,e){return Object(r.b)(function(e){if(e.requestHeaders){for(var n=null,r=0,o=e.requestHeaders;r<o.length;r++){var i=o[r];if("origin"===i.name.toLowerCase()){n=i;break}}n||(t.info("Missing origin field! adding it now!."),n={name:"Origin",value:location.href},e.requestHeaders.push(n)),n.value=location.href}return{requestHeaders:e.requestHeaders}},{urls:["*://sentry.io/api/"+e+"*"]},["blocking","requestHeaders","extraHeaders"])};var r=n(175)},function(t,e,n){"use strict";e.a=function setUpHeartbeatAudit(t,e){r.a&&e&&Object(o.l)(r.a.tabs.onUpdated.pipe(Object(i.h)(function(t){var e=t.changeInfo;return"loading"===e.status||"complete"===e.status})),r.a.tabs.onCreated).pipe(Object(i.i)(function(t){return t.tab}),Object(i.h)(function(t){var e;return void 0!==(null===(e=t)||void 0===e?void 0:e.url)}),Object(i.i)(function(t){return new URL(t.url).hostname}),Object(i.f)(),Object(i.i)(function(t){var e=t.split(".");return e.length<2?null:e[e.length-2]}),Object(i.h)(a.d),Object(i.r)(function(e){return t.crossMessage.pipe(Object(i.h)(function(t){return"AdBlockerStatus"===t.type}),Object(i.i)(function(t){return t.payload.ad_blocker_enabled}),Object(i.t)(1),Object(i.v)(2e3,Object(o.m)(null)),Object(i.i)(function(t){return{type:"Navigation",payload:{channel:e,isAdBlockEnabled:t}}}))})).subscribe(t.auditEvents);Object(o.o)(0,36e5).pipe(Object(i.j)({type:"Heartbeat"})).subscribe(t.auditEvents)};var r=n(177),o=n(20),i=n(34),a=n(60)},function(t,e,n){"use strict";e.a=function extractSponsoredFromTwitterHomePayload(t){var e=function getSponsoredTimelineEntriesFromPayload(t){return Object(r.p)(function(){return t.timeline.instructions.flatMap(function(t){var e;return(null===(e=t.addEntries)||void 0===e?void 0:e.entries)?t.addEntries.entries.filter(function(t){return Object(r.p)(function(){return t.entryId.startsWith("promotedTweet-")||"item"in t.content&&"tweet"in t.content.item.content&&"promotedMetadata"in t.content.item.content.tweet},!1)}).map(function(t){return Object(r.p)(function(){return t.content.item.content.tweet},null)}):[]}).filter(r.q)},[]).filter(r.q)}(t),n=new Set(e.map(function(t){return t.id}));return Object.entries(t.globalObjects.tweets).filter(function(t){var e=t[0];return n.has(e)}).map(function(t){var n=t[0],r=t[1];return{tweet:r,timelineData:e.find(function(t){return t.id===n})}}).map(function(e){var n=e.tweet,o=e.timelineData,i=Object(r.p)(function(){return t.globalObjects.users[n.user_id_str]},{name:"default N/A",screen_name:"default N/A"}),a=i.name,s=i.screen_name;return{tw_perma_link:"https://twitter.com/"+s+"/status/"+n.id_str,tw_user_screen_name:s,tw_user_display_name:a,tw_tweet_id:n.id_str,tw_user_id:n.user_id_str,tw_tweet_display_type:o.displayType}})};var r=n(16)},function(t,e,n){"use strict"},function(t,e,n){(function(e){var r=n(417),o="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},i=o.Raven,a=new r;a.noConflict=function(){return o.Raven=i,a},a.afterLoad(),t.exports=a,t.exports.Client=r}).call(e,n(36))},function(t,e,n){(function(e){var r=n(418),o=n(178),i=n(419),a=n(420),s=n(130),c=s.isErrorEvent,u=s.isDOMError,l=s.isDOMException,f=s.isError,d=s.isObject,h=s.isPlainObject,p=s.isUndefined,b=s.isFunction,v=s.isString,_=s.isArray,y=s.isEmptyObject,m=s.each,g=s.objectMerge,w=s.truncate,S=s.objectFrozen,x=s.hasKey,O=s.joinRegExp,E=s.urlencode,k=s.uuid4,j=s.htmlTreeAsString,T=s.isSameException,P=s.isSameStacktrace,I=s.parseUrl,A=s.fill,C=s.supportsFetch,F=s.supportsReferrerPolicy,M=s.serializeKeysForMessage,R=s.serializeException,L=s.sanitize,D=n(421).wrapMethod,N="source protocol user pass host port path".split(" "),B=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function now(){return+new Date}var q="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},U=q.document,H=q.navigator;function keepOriginalCallback(t,e){return b(e)?function(n){return e(n,t)}:e}function Raven(){for(var t in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!p(U),this._hasNavigator=!p(H),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:q.SENTRY_RELEASE&&q.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",keepalive:!0,referrerPolicy:F()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=q.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=now(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=q.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[t]=this._originalConsole[t]}Raven.prototype={VERSION:"3.25.2",debug:!1,TraceKit:r,config:function(t,e){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!t)return n;var o=n._globalOptions;e&&m(e,function(t,e){"tags"===t||"extra"===t||"user"===t?n._globalContext[t]=e:o[t]=e}),n.setDSN(t),o.ignoreErrors.push(/^Script error\.?$/),o.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),o.ignoreErrors=O(o.ignoreErrors),o.ignoreUrls=!!o.ignoreUrls.length&&O(o.ignoreUrls),o.whitelistUrls=!!o.whitelistUrls.length&&O(o.whitelistUrls),o.includePaths=O(o.includePaths),o.maxBreadcrumbs=Math.max(0,Math.min(o.maxBreadcrumbs||100,100));var i={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},a=o.autoBreadcrumbs;"[object Object]"==={}.toString.call(a)?a=g(i,a):!1!==a&&(a=i),o.autoBreadcrumbs=a;var s={tryCatch:!0},c=o.instrument;return"[object Object]"==={}.toString.call(c)?c=g(s,c):!1!==c&&(c=s),o.instrument=c,r.collectWindowErrors=!!o.collectWindowErrors,n},install:function(){var t=this;return t.isSetup()&&!t._isRavenInstalled&&(r.report.subscribe(function(){t._handleOnErrorStackInfo.apply(t,arguments)}),t._globalOptions.captureUnhandledRejections&&t._attachPromiseRejectionHandler(),t._patchFunctionToString(),t._globalOptions.instrument&&t._globalOptions.instrument.tryCatch&&t._instrumentTryCatch(),t._globalOptions.autoBreadcrumbs&&t._instrumentBreadcrumbs(),t._drainPlugins(),t._isRavenInstalled=!0),Error.stackTraceLimit=t._globalOptions.stackTraceLimit,this},setDSN:function(t){var e=this._parseDSN(t),n=e.path.lastIndexOf("/"),r=e.path.substr(1,n);this._dsn=t,this._globalKey=e.user,this._globalSecret=e.pass&&e.pass.substr(1),this._globalProject=e.path.substr(n+1),this._globalServer=this._getGlobalServer(e),this._globalEndpoint=this._globalServer+"/"+r+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function(t,e,n){return b(t)&&(n=e||[],e=t,t=void 0),this.wrap(t,e).apply(this,n)},wrap:function(t,e,n){var r=this;if(p(e)&&!b(t))return t;if(b(t)&&(e=t,t=void 0),!b(e))return e;try{if(e.__raven__)return e;if(e.__raven_wrapper__)return e.__raven_wrapper__}catch(t){return e}function wrapped(){var o=[],i=arguments.length,a=!t||t&&!1!==t.deep;for(n&&b(n)&&n.apply(this,arguments);i--;)o[i]=a?r.wrap(t,arguments[i]):arguments[i];try{return e.apply(this,o)}catch(e){throw r._ignoreNextOnError(),r.captureException(e,t),e}}for(var o in e)x(e,o)&&(wrapped[o]=e[o]);return wrapped.prototype=e.prototype,e.__raven_wrapper__=wrapped,wrapped.__raven__=!0,wrapped.__orig__=e,wrapped},uninstall:function(){return r.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(t){this._logDebug("debug","Raven caught unhandled promise rejection:",t),this.captureException(t.reason,{extra:{unhandledPromiseRejection:!0}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),q.addEventListener&&q.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return q.removeEventListener&&q.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(t,e){if(e=g({trimHeadFrames:0},e||{}),c(t)&&t.error)t=t.error;else{if(u(t)||l(t)){var n=t.name||(u(t)?"DOMError":"DOMException"),o=t.message?n+": "+t.message:n;return this.captureMessage(o,g(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}))}if(f(t))t=t;else{if(!h(t))return this.captureMessage(t,g(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}));e=this._getCaptureExceptionOptionsFromPlainObject(e,t),t=new Error(e.message)}}this._lastCapturedException=t;try{var i=r.computeStackTrace(t);this._handleStackInfo(i,e)}catch(e){if(t!==e)throw e}return this},_getCaptureExceptionOptionsFromPlainObject:function(t,e){var n=Object.keys(e).sort(),r=g(t,{message:"Non-Error exception captured with keys: "+M(n),fingerprint:[i(n)],extra:t.extra||{}});return r.extra.__serialized__=R(e),r},captureMessage:function(t,e){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)){var n,o=g({message:t+=""},e=e||{});try{throw new Error(t)}catch(t){n=t}n.name=null;var i=r.computeStackTrace(n),a=_(i.stack)&&i.stack[1];a&&"Raven.captureException"===a.func&&(a=i.stack[2]);var s=a&&a.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(s))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(s))){if(this._globalOptions.stacktrace||e&&e.stacktrace){o.fingerprint=null==o.fingerprint?t:o.fingerprint,(e=g({trimHeadFrames:0},e)).trimHeadFrames+=1;var c=this._prepareFrames(i,e);o.stacktrace={frames:c.reverse()}}return o.fingerprint&&(o.fingerprint=_(o.fingerprint)?o.fingerprint:[o.fingerprint]),this._send(o),this}}},captureBreadcrumb:function(t){var e=g({timestamp:now()/1e3},t);if(b(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(e);if(d(n)&&!y(n))e=n;else if(!1===n)return this}return this._breadcrumbs.push(e),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(t){var e=[].slice.call(arguments,1);return this._plugins.push([t,e]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(t){return this._globalContext.user=t,this},setExtraContext:function(t){return this._mergeContext("extra",t),this},setTagsContext:function(t){return this._mergeContext("tags",t),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(o(this._globalContext))},setEnvironment:function(t){return this._globalOptions.environment=t,this},setRelease:function(t){return this._globalOptions.release=t,this},setDataCallback:function(t){var e=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=keepOriginalCallback(e,t),this},setBreadcrumbCallback:function(t){var e=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=keepOriginalCallback(e,t),this},setShouldSendCallback:function(t){var e=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=keepOriginalCallback(e,t),this},setTransport:function(t){return this._globalOptions.transport=t,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var t=q.RavenConfig;t&&this.config(t.dsn,t.config).install()},showReportDialog:function(t){if(U){var e=(t=t||{}).eventId||this.lastEventId();if(!e)throw new a("Missing eventId");var n=t.dsn||this._dsn;if(!n)throw new a("Missing DSN");var r=encodeURIComponent,o="";o+="?eventId="+r(e),o+="&dsn="+r(n);var i=t.user||this._globalContext.user;i&&(i.name&&(o+="&name="+r(i.name)),i.email&&(o+="&email="+r(i.email)));var s=this._getGlobalServer(this._parseDSN(n)),c=U.createElement("script");c.async=!0,c.src=s+"/api/embed/error-page/"+o,(U.head||U.body).appendChild(c)}},_ignoreNextOnError:function(){var t=this;this._ignoreOnError+=1,setTimeout(function(){t._ignoreOnError-=1})},_triggerEvent:function(t,e){var n,r;if(this._hasDocument){for(r in e=e||{},t="raven"+t.substr(0,1).toUpperCase()+t.substr(1),U.createEvent?(n=U.createEvent("HTMLEvents")).initEvent(t,!0,!0):(n=U.createEventObject()).eventType=t,e)x(e,r)&&(n[r]=e[r]);if(U.createEvent)U.dispatchEvent(n);else try{U.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(t){}}},_breadcrumbEventHandler:function(t){var e=this;return function(n){if(e._keypressTimeout=null,e._lastCapturedEvent!==n){var r;e._lastCapturedEvent=n;try{r=j(n.target)}catch(t){r="<unknown>"}e.captureBreadcrumb({category:"ui."+t,message:r})}}},_keypressEventHandler:function(){var t=this;return function(e){var n;try{n=e.target}catch(t){return}var r=n&&n.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)){var o=t._keypressTimeout;o||t._breadcrumbEventHandler("input")(e),clearTimeout(o),t._keypressTimeout=setTimeout(function(){t._keypressTimeout=null},1e3)}}},_captureUrlChange:function(t,e){var n=I(this._location.href),r=I(e),o=I(t);this._lastHref=e,n.protocol===r.protocol&&n.host===r.host&&(e=r.relative),n.protocol===o.protocol&&n.host===o.host&&(t=o.relative),this.captureBreadcrumb({category:"navigation",data:{to:e,from:t}})},_patchFunctionToString:function(){var t=this;t._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?t._originalFunctionToString.apply(this.__orig__,arguments):t._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var t=this,e=t._wrappedBuiltIns;function wrapTimeFn(e){return function(n,r){for(var o=new Array(arguments.length),i=0;i<o.length;++i)o[i]=arguments[i];var a=o[0];return b(a)&&(o[0]=t.wrap(a)),e.apply?e.apply(this,o):e(o[0],o[1])}}var n=this._globalOptions.autoBreadcrumbs;function wrapEventTarget(r){var o=q[r]&&q[r].prototype;o&&o.hasOwnProperty&&o.hasOwnProperty("addEventListener")&&(A(o,"addEventListener",function(e){return function(o,i,a,s){try{i&&i.handleEvent&&(i.handleEvent=t.wrap(i.handleEvent))}catch(t){}var c,u,l;return n&&n.dom&&("EventTarget"===r||"Node"===r)&&(u=t._breadcrumbEventHandler("click"),l=t._keypressEventHandler(),c=function(t){if(t){var e;try{e=t.type}catch(t){return}return"click"===e?u(t):"keypress"===e?l(t):void 0}}),e.call(this,o,t.wrap(i,void 0,c),a,s)}},e),A(o,"removeEventListener",function(t){return function(e,n,r,o){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(t){}return t.call(this,e,n,r,o)}},e))}A(q,"setTimeout",wrapTimeFn,e),A(q,"setInterval",wrapTimeFn,e),q.requestAnimationFrame&&A(q,"requestAnimationFrame",function(e){return function(n){return e(t.wrap(n))}},e);for(var r=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],o=0;o<r.length;o++)wrapEventTarget(r[o])},_instrumentBreadcrumbs:function(){var t=this,e=this._globalOptions.autoBreadcrumbs,n=t._wrappedBuiltIns;function wrapProp(e,n){e in n&&b(n[e])&&A(n,e,function(e){return t.wrap(e)})}if(e.xhr&&"XMLHttpRequest"in q){var r=q.XMLHttpRequest&&q.XMLHttpRequest.prototype;A(r,"open",function(e){return function(n,r){return v(r)&&-1===r.indexOf(t._globalKey)&&(this.__raven_xhr={method:n,url:r,status_code:null}),e.apply(this,arguments)}},n),A(r,"send",function(e){return function(){var n=this;function onreadystatechangeHandler(){if(n.__raven_xhr&&4===n.readyState){try{n.__raven_xhr.status_code=n.status}catch(t){}t.captureBreadcrumb({type:"http",category:"xhr",data:n.__raven_xhr})}}for(var r=["onload","onerror","onprogress"],o=0;o<r.length;o++)wrapProp(r[o],n);return"onreadystatechange"in n&&b(n.onreadystatechange)?A(n,"onreadystatechange",function(e){return t.wrap(e,void 0,onreadystatechangeHandler)}):n.onreadystatechange=onreadystatechangeHandler,e.apply(this,arguments)}},n)}e.xhr&&C()&&A(q,"fetch",function(e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];var o,i=n[0],a="GET";if("string"==typeof i?o=i:"Request"in q&&i instanceof q.Request?(o=i.url,i.method&&(a=i.method)):o=""+i,-1!==o.indexOf(t._globalKey))return e.apply(this,n);n[1]&&n[1].method&&(a=n[1].method);var s={method:a,url:o,status_code:null};return e.apply(this,n).then(function(e){return s.status_code=e.status,t.captureBreadcrumb({type:"http",category:"fetch",data:s}),e}).catch(function(e){throw t.captureBreadcrumb({type:"http",category:"fetch",data:s,level:"error"}),e})}},n),e.dom&&this._hasDocument&&(U.addEventListener?(U.addEventListener("click",t._breadcrumbEventHandler("click"),!1),U.addEventListener("keypress",t._keypressEventHandler(),!1)):U.attachEvent&&(U.attachEvent("onclick",t._breadcrumbEventHandler("click")),U.attachEvent("onkeypress",t._keypressEventHandler())));var o=q.chrome,i=!(o&&o.app&&o.app.runtime)&&q.history&&q.history.pushState&&q.history.replaceState;if(e.location&&i){var a=q.onpopstate;q.onpopstate=function(){var e=t._location.href;if(t._captureUrlChange(t._lastHref,e),a)return a.apply(this,arguments)};var s=function(e){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&t._captureUrlChange(t._lastHref,n+""),e.apply(this,arguments)}};A(q.history,"pushState",s,n),A(q.history,"replaceState",s,n)}if(e.console&&"console"in q&&console.log){var c=function(e,n){t.captureBreadcrumb({message:e,level:n.level,category:"console"})};m(["debug","info","warn","error","log"],function(t,e){D(console,e,c)})}},_restoreBuiltIns:function(){for(var t;this._wrappedBuiltIns.length;){var e=(t=this._wrappedBuiltIns.shift())[0],n=t[1],r=t[2];e[n]=r}},_restoreConsole:function(){for(var t in this._originalConsoleMethods)this._originalConsole[t]=this._originalConsoleMethods[t]},_drainPlugins:function(){var t=this;m(this._plugins,function(e,n){var r=n[0],o=n[1];r.apply(t,[t].concat(o))})},_parseDSN:function(t){var e=B.exec(t),n={},r=7;try{for(;r--;)n[N[r]]=e[r]||""}catch(e){throw new a("Invalid DSN: "+t)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new a("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(t){var e="//"+t.host+(t.port?":"+t.port:"");return t.protocol&&(e=t.protocol+":"+e),e},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(t,e){var n=this._prepareFrames(t,e);this._triggerEvent("handle",{stackInfo:t,options:e}),this._processException(t.name,t.message,t.url,t.lineno,n,e)},_prepareFrames:function(t,e){var n=this,r=[];if(t.stack&&t.stack.length&&(m(t.stack,function(e,o){var i=n._normalizeFrame(o,t.url);i&&r.push(i)}),e&&e.trimHeadFrames))for(var o=0;o<e.trimHeadFrames&&o<r.length;o++)r[o].in_app=!1;return r=r.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(t,e){var n={filename:t.url,lineno:t.line,colno:t.column,function:t.func||"?"};return t.url||(n.filename=e),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function(t,e,n,r,o,i){var a,s=(t?t+": ":"")+(e||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)&&!this._globalOptions.ignoreErrors.test(s))&&(o&&o.length?(n=o[0].filename||n,o.reverse(),a={frames:o}):n&&(a={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var c=g({exception:{values:[{type:t,value:e,stacktrace:a}]},transaction:n},i);this._send(c)}},_trimPacket:function(t){var e=this._globalOptions.maxMessageLength;if(t.message&&(t.message=w(t.message,e)),t.exception){var n=t.exception.values[0];n.value=w(n.value,e)}var r=t.request;return r&&(r.url&&(r.url=w(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=w(r.Referer,this._globalOptions.maxUrlLength))),t.breadcrumbs&&t.breadcrumbs.values&&this._trimBreadcrumbs(t.breadcrumbs),t},_trimBreadcrumbs:function(t){for(var e,n,r,o=["to","from","url"],i=0;i<t.values.length;++i)if((n=t.values[i]).hasOwnProperty("data")&&d(n.data)&&!S(n.data)){r=g({},n.data);for(var a=0;a<o.length;++a)e=o[a],r.hasOwnProperty(e)&&r[e]&&(r[e]=w(r[e],this._globalOptions.maxUrlLength));t.values[i].data=r}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var t={};return this._hasNavigator&&H.userAgent&&(t.headers={"User-Agent":H.userAgent}),q.location&&q.location.href&&(t.url=q.location.href),this._hasDocument&&U.referrer&&(t.headers||(t.headers={}),t.headers.Referer=U.referrer),t}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&now()-this._backoffStart<this._backoffDuration},_isRepeatData:function(t){var e=this._lastData;return!(!e||t.message!==e.message||t.transaction!==e.transaction)&&(t.stacktrace||e.stacktrace?P(t.stacktrace,e.stacktrace):!t.exception&&!e.exception||T(t.exception,e.exception))},_setBackoffState:function(t){if(!this._shouldBackoff()){var e=t.status;if(400===e||401===e||429===e){var n;try{n=C()?t.headers.get("Retry-After"):t.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(t){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=now()}}},_send:function(t){var e=this._globalOptions,n={project:this._globalProject,logger:e.logger,platform:"javascript"},r=this._getHttpData();r&&(n.request=r),t.trimHeadFrames&&delete t.trimHeadFrames,(t=g(n,t)).tags=g(g({},this._globalContext.tags),t.tags),t.extra=g(g({},this._globalContext.extra),t.extra),t.extra["session:duration"]=now()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(t.user=this._globalContext.user),e.environment&&(t.environment=e.environment),e.release&&(t.release=e.release),e.serverName&&(t.server_name=e.serverName),t=this._sanitizeData(t),Object.keys(t).forEach(function(e){(null==t[e]||""===t[e]||y(t[e]))&&delete t[e]}),b(e.dataCallback)&&(t=e.dataCallback(t)||t),t&&!y(t)&&(b(e.shouldSendCallback)&&!e.shouldSendCallback(t)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",t):"number"==typeof e.sampleRate?Math.random()<e.sampleRate&&this._sendProcessedPayload(t):this._sendProcessedPayload(t)))},_sanitizeData:function(t){return L(t,this._globalOptions.sanitizeKeys)},_getUuid:function(){return k()},_sendProcessedPayload:function(t,e){var n=this,r=this._globalOptions;if(this.isSetup())if(t=this._trimPacket(t),this._globalOptions.allowDuplicates||!this._isRepeatData(t)){this._lastEventId=t.event_id||(t.event_id=this._getUuid()),this._lastData=t,this._logDebug("debug","Raven about to send:",t);var o={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(o.sentry_secret=this._globalSecret);var i=t.exception&&t.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:i?(i.type?i.type+": ":"")+i.value:t.message,event_id:t.event_id,level:t.level||"error"});var a=this._globalEndpoint;(r.transport||this._makeRequest).call(this,{url:a,auth:o,data:t,options:r,onSuccess:function success(){n._resetBackoff(),n._triggerEvent("success",{data:t,src:a}),e&&e()},onError:function failure(r){n._logDebug("error","Raven transport failed to send: ",r),r.request&&n._setBackoffState(r.request),n._triggerEvent("failure",{data:t,src:a}),r=r||new Error("Raven send failed (no additional details provided)"),e&&e(r)}})}else this._logDebug("warn","Raven dropped repeat event: ",t)},_makeRequest:function(t){var e=t.url+"?"+E(t.auth),n=null,r={};if(t.options.headers&&(n=this._evaluateHash(t.options.headers)),t.options.fetchParameters&&(r=this._evaluateHash(t.options.fetchParameters)),C()){r.body=o(t.data);var i=g({},this._fetchDefaults),a=g(i,r);return n&&(a.headers=n),q.fetch(e,a).then(function(e){if(e.ok)t.onSuccess&&t.onSuccess();else{var n=new Error("Sentry error code: "+e.status);n.request=e,t.onError&&t.onError(n)}}).catch(function(){t.onError&&t.onError(new Error("Sentry error code: network unavailable"))})}var s=q.XMLHttpRequest&&new q.XMLHttpRequest;s&&(("withCredentials"in s||"undefined"!=typeof XDomainRequest)&&("withCredentials"in s?s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)t.onSuccess&&t.onSuccess();else if(t.onError){var e=new Error("Sentry error code: "+s.status);e.request=s,t.onError(e)}}:(s=new XDomainRequest,e=e.replace(/^https?:/,""),t.onSuccess&&(s.onload=t.onSuccess),t.onError&&(s.onerror=function(){var e=new Error("Sentry error code: XDomainRequest");e.request=s,t.onError(e)})),s.open("POST",e),n&&m(n,function(t,e){s.setRequestHeader(t,e)}),s.send(o(t.data))))},_evaluateHash:function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e[n]="function"==typeof r?r():r}return e},_logDebug:function(t){this._originalConsoleMethods[t]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[t],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(t,e){p(e)?delete this._globalContext[t]:this._globalContext[t]=g(this._globalContext[t]||{},e)}},Raven.prototype.setUser=Raven.prototype.setUserContext,Raven.prototype.setReleaseContext=Raven.prototype.setRelease,t.exports=Raven}).call(e,n(36))},function(t,e,n){(function(e){var r=n(130),o={collectWindowErrors:!0,debug:!1},i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},a=[].slice,s="?",c=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function getLocationHref(){return"undefined"==typeof document||null==document.location?"":document.location.href}o.report=function reportModuleWrapper(){var t,e,n=[],u=null,l=null,f=null;function notifyHandlers(t,e){var r=null;if(!e||o.collectWindowErrors){for(var i in n)if(n.hasOwnProperty(i))try{n[i].apply(null,[t].concat(a.call(arguments,2)))}catch(t){r=t}if(r)throw r}}function traceKitWindowOnError(e,n,i,a,u){var l=r.isErrorEvent(u)?u.error:u,d=r.isErrorEvent(e)?e.message:e;if(f)o.computeStackTrace.augmentStackTraceWithInitialElement(f,n,i,d),processLastException();else if(l&&r.isError(l))notifyHandlers(o.computeStackTrace(l),!0);else{var h,p={url:n,line:i,column:a},b=void 0;if("[object String]"==={}.toString.call(d))(h=d.match(c))&&(b=h[1],d=h[2]);p.func=s,notifyHandlers({name:b,message:d,url:getLocationHref(),stack:[p]},!0)}return!!t&&t.apply(this,arguments)}function processLastException(){var t=f,e=u;u=null,f=null,l=null,notifyHandlers.apply(null,[t,!1].concat(e))}function report(t,e){var n=a.call(arguments,1);if(f){if(l===t)return;processLastException()}var r=o.computeStackTrace(t);if(f=r,l=t,u=n,setTimeout(function(){l===t&&processLastException()},r.incomplete?2e3:0),!1!==e)throw t}return report.subscribe=function subscribe(r){!function installGlobalHandler(){e||(t=i.onerror,i.onerror=traceKitWindowOnError,e=!0)}(),n.push(r)},report.unsubscribe=function unsubscribe(t){for(var e=n.length-1;e>=0;--e)n[e]===t&&n.splice(e,1)},report.uninstall=function unsubscribeAll(){!function uninstallGlobalHandler(){e&&(i.onerror=t,e=!1,t=void 0)}(),n=[]},report}(),o.computeStackTrace=function computeStackTraceWrapper(){function computeStackTraceFromStackProp(t){if(void 0!==t.stack&&t.stack){for(var e,n,r,o=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,l=t.stack.split("\n"),f=[],d=(/^(.*) is undefined$/.exec(t.message),0),h=l.length;d<h;++d){if(n=o.exec(l[d])){var p=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=u.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:p?null:n[2],func:n[1]||s,args:p?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=i.exec(l[d]))r={url:n[2],func:n[1]||s,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(l[d])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=c.exec(n[3]))?(n[3]=e[1],n[4]=e[2],n[5]=null):0!==d||n[5]||void 0===t.columnNumber||(f[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||s,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!r.func&&r.line&&(r.func=s),r.url&&"blob:"===r.url.substr(0,5)){var b=new XMLHttpRequest;if(b.open("GET",r.url,!1),b.send(null),200===b.status){var v=b.responseText||"",_=(v=v.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(_){var y=_[1];"~"===y.charAt(0)&&(y=("undefined"==typeof document||null==document.location?"":(document.location.origin||(document.location.origin=document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:"")),document.location.origin))+y.slice(1)),r.url=y.slice(0,-4)}}}f.push(r)}return f.length?{name:t.name,message:t.message,url:getLocationHref(),stack:f}:null}}function augmentStackTraceWithInitialElement(t,e,n,r){var o={url:e,line:n};if(o.url&&o.line){if(t.incomplete=!1,o.func||(o.func=s),t.stack.length>0&&t.stack[0].url===o.url){if(t.stack[0].line===o.line)return!1;if(!t.stack[0].line&&t.stack[0].func===o.func)return t.stack[0].line=o.line,!1}return t.stack.unshift(o),t.partial=!0,!0}return t.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(t,e){for(var n,r,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],c={},u=!1,l=computeStackTraceByWalkingCallerChain.caller;l&&!u;l=l.caller)if(l!==computeStackTrace&&l!==o.report){if(r={url:null,func:s,line:null,column:null},l.name?r.func=l.name:(n=i.exec(l.toString()))&&(r.func=n[1]),void 0===r.func)try{r.func=n.input.substring(0,n.input.indexOf("{"))}catch(t){}c[""+l]?u=!0:c[""+l]=!0,a.push(r)}e&&a.splice(0,e);var f={name:t.name,message:t.message,url:getLocationHref(),stack:a};return augmentStackTraceWithInitialElement(f,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),f}function computeStackTrace(t,e){var n=null;e=null==e?0:+e;try{if(n=computeStackTraceFromStackProp(t))return n}catch(t){if(o.debug)throw t}try{if(n=computeStackTraceByWalkingCallerChain(t,e+1))return n}catch(t){if(o.debug)throw t}return{name:t.name,message:t.message,url:getLocationHref()}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace}(),t.exports=o}).call(e,n(36))},function(t,e){function safeAdd(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function md5cmn(t,e,n,r,o,i){return safeAdd(function bitRotateLeft(t,e){return t<<e|t>>>32-e}(safeAdd(safeAdd(e,t),safeAdd(r,i)),o),n)}function md5ff(t,e,n,r,o,i,a){return md5cmn(e&n|~e&r,t,e,o,i,a)}function md5gg(t,e,n,r,o,i,a){return md5cmn(e&r|n&~r,t,e,o,i,a)}function md5hh(t,e,n,r,o,i,a){return md5cmn(e^n^r,t,e,o,i,a)}function md5ii(t,e,n,r,o,i,a){return md5cmn(n^(e|~r),t,e,o,i,a)}function binlMD5(t,e){var n,r,o,i,a;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var s=1732584193,c=-271733879,u=-1732584194,l=271733878;for(n=0;n<t.length;n+=16)r=s,o=c,i=u,a=l,s=md5ff(s,c,u,l,t[n],7,-680876936),l=md5ff(l,s,c,u,t[n+1],12,-389564586),u=md5ff(u,l,s,c,t[n+2],17,606105819),c=md5ff(c,u,l,s,t[n+3],22,-1044525330),s=md5ff(s,c,u,l,t[n+4],7,-176418897),l=md5ff(l,s,c,u,t[n+5],12,1200080426),u=md5ff(u,l,s,c,t[n+6],17,-1473231341),c=md5ff(c,u,l,s,t[n+7],22,-45705983),s=md5ff(s,c,u,l,t[n+8],7,1770035416),l=md5ff(l,s,c,u,t[n+9],12,-1958414417),u=md5ff(u,l,s,c,t[n+10],17,-42063),c=md5ff(c,u,l,s,t[n+11],22,-1990404162),s=md5ff(s,c,u,l,t[n+12],7,1804603682),l=md5ff(l,s,c,u,t[n+13],12,-40341101),u=md5ff(u,l,s,c,t[n+14],17,-1502002290),s=md5gg(s,c=md5ff(c,u,l,s,t[n+15],22,1236535329),u,l,t[n+1],5,-165796510),l=md5gg(l,s,c,u,t[n+6],9,-1069501632),u=md5gg(u,l,s,c,t[n+11],14,643717713),c=md5gg(c,u,l,s,t[n],20,-373897302),s=md5gg(s,c,u,l,t[n+5],5,-701558691),l=md5gg(l,s,c,u,t[n+10],9,38016083),u=md5gg(u,l,s,c,t[n+15],14,-660478335),c=md5gg(c,u,l,s,t[n+4],20,-405537848),s=md5gg(s,c,u,l,t[n+9],5,568446438),l=md5gg(l,s,c,u,t[n+14],9,-1019803690),u=md5gg(u,l,s,c,t[n+3],14,-187363961),c=md5gg(c,u,l,s,t[n+8],20,1163531501),s=md5gg(s,c,u,l,t[n+13],5,-1444681467),l=md5gg(l,s,c,u,t[n+2],9,-51403784),u=md5gg(u,l,s,c,t[n+7],14,1735328473),s=md5hh(s,c=md5gg(c,u,l,s,t[n+12],20,-1926607734),u,l,t[n+5],4,-378558),l=md5hh(l,s,c,u,t[n+8],11,-2022574463),u=md5hh(u,l,s,c,t[n+11],16,1839030562),c=md5hh(c,u,l,s,t[n+14],23,-35309556),s=md5hh(s,c,u,l,t[n+1],4,-1530992060),l=md5hh(l,s,c,u,t[n+4],11,1272893353),u=md5hh(u,l,s,c,t[n+7],16,-155497632),c=md5hh(c,u,l,s,t[n+10],23,-1094730640),s=md5hh(s,c,u,l,t[n+13],4,681279174),l=md5hh(l,s,c,u,t[n],11,-358537222),u=md5hh(u,l,s,c,t[n+3],16,-722521979),c=md5hh(c,u,l,s,t[n+6],23,76029189),s=md5hh(s,c,u,l,t[n+9],4,-640364487),l=md5hh(l,s,c,u,t[n+12],11,-421815835),u=md5hh(u,l,s,c,t[n+15],16,530742520),s=md5ii(s,c=md5hh(c,u,l,s,t[n+2],23,-995338651),u,l,t[n],6,-198630844),l=md5ii(l,s,c,u,t[n+7],10,1126891415),u=md5ii(u,l,s,c,t[n+14],15,-1416354905),c=md5ii(c,u,l,s,t[n+5],21,-57434055),s=md5ii(s,c,u,l,t[n+12],6,1700485571),l=md5ii(l,s,c,u,t[n+3],10,-1894986606),u=md5ii(u,l,s,c,t[n+10],15,-1051523),c=md5ii(c,u,l,s,t[n+1],21,-2054922799),s=md5ii(s,c,u,l,t[n+8],6,1873313359),l=md5ii(l,s,c,u,t[n+15],10,-30611744),u=md5ii(u,l,s,c,t[n+6],15,-1560198380),c=md5ii(c,u,l,s,t[n+13],21,1309151649),s=md5ii(s,c,u,l,t[n+4],6,-145523070),l=md5ii(l,s,c,u,t[n+11],10,-1120210379),u=md5ii(u,l,s,c,t[n+2],15,718787259),c=md5ii(c,u,l,s,t[n+9],21,-343485551),s=safeAdd(s,r),c=safeAdd(c,o),u=safeAdd(u,i),l=safeAdd(l,a);return[s,c,u,l]}function binl2rstr(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function rstr2binl(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function rstr2hex(t){var e,n,r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return r}function str2rstrUTF8(t){return unescape(encodeURIComponent(t))}function rawMD5(t){return function rstrMD5(t){return binl2rstr(binlMD5(rstr2binl(t),8*t.length))}(str2rstrUTF8(t))}function rawHMACMD5(t,e){return function rstrHMACMD5(t,e){var n,r,o=rstr2binl(t),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=binlMD5(o,8*t.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=binlMD5(i.concat(rstr2binl(e)),512+8*e.length),binl2rstr(binlMD5(a.concat(r),640))}(str2rstrUTF8(t),str2rstrUTF8(e))}t.exports=function md5(t,e,n){return e?n?rawHMACMD5(e,t):function hexHMACMD5(t,e){return rstr2hex(rawHMACMD5(t,e))}(e,t):n?rawMD5(t):function hexMD5(t){return rstr2hex(rawMD5(t))}(t)}},function(t,e){function RavenConfigError(t){this.name="RavenConfigError",this.message=t}RavenConfigError.prototype=new Error,RavenConfigError.prototype.constructor=RavenConfigError,t.exports=RavenConfigError},function(t,e,n){var r=n(130);t.exports={wrapMethod:function(t,e,n){var o=t[e],i=t;if(e in t){var a="warn"===e?"warning":e;t[e]=function(){var t=[].slice.call(arguments),s=r.safeJoin(t," "),c={level:a,logger:"console",extra:{arguments:t}};"assert"===e?!1===t[0]&&(s="Assertion failed: "+(r.safeJoin(t.slice(1)," ")||"console.assert"),c.extra.arguments=t.slice(1),n&&n(s,c)):n&&n(s,c),o&&Function.prototype.apply.call(o,i,t)}}}}},function(t,e,n){var r=n(423),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(49),o=n(270),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,n){var r=n(71),o=n(40),i=n(425);t.exports=!r&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(49),o=n(72),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(273),o=n(423);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.1",mode:r?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){"use strict";var r=n(18),o=n(494),i=n(434),a=n(500),s=n(437),c=n(102),u=n(430),l=n(37),f=n(273),d=n(132),h=n(433),p=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,v=l("iterator"),_=function(){return this};t.exports=function(t,e,n,l,h,y,m){o(n,e,l);var g,w,S,x=function(t){if(t===h&&T)return T;if(!b&&t in k)return k[t];switch(t){case"keys":return function keys(){return new n(this,t)};case"values":return function values(){return new n(this,t)};case"entries":return function entries(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",E=!1,k=t.prototype,j=k[v]||k["@@iterator"]||h&&k[h],T=!b&&j||x(h),P="Array"==e&&k.entries||j;if(P&&(g=i(P.call(new t)),p!==Object.prototype&&g.next&&(f||i(g)===p||(a?a(g,p):"function"!=typeof g[v]&&c(g,v,_)),s(g,O,!0,!0),f&&(d[O]=_))),"values"==h&&j&&"values"!==j.name&&(E=!0,T=function values(){return j.call(this)}),f&&!m||k[v]===T||c(k,v,T),d[e]=T,h)if(w={values:x("values"),keys:y?T:x("keys"),entries:x("entries")},m)for(S in w)!b&&!E&&S in k||u(k,S,w[S]);else r({target:e,proto:!0,forced:b||E},w);return w}},function(t,e,n){var r=n(71),o=n(488),i=n(155),a=n(85),s=n(271),c=n(63),u=n(424),l=Object.getOwnPropertyDescriptor;e.f=r?l:function getOwnPropertyDescriptor(t,e){if(t=a(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,n){var r=n(49),o=n(102),i=n(63),a=n(270),s=n(422),c=n(269),u=c.get,l=c.enforce,f=String(String).split("String");(t.exports=function(t,e,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),l(n).source=f.join("string"==typeof e?e:"")),t!==r?(c?!d&&t[e]&&(u=!0):delete t[e],u?t[e]=n:o(t,e,n)):u?t[e]=n:a(e,n)})(Function.prototype,"toString",function toString(){return"function"==typeof this&&u(this).source||s(this)})},function(t,e,n){var r=n(49);t.exports=r},function(t,e,n){var r=n(63),o=n(85),i=n(276).indexOf,a=n(274);t.exports=function(t,e){var n,s=o(t),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){"use strict";var r,o,i,a=n(434),s=n(102),c=n(63),u=n(37),l=n(273),f=u("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):d=!0),null==r&&(r={}),l||c(r,f)||s(r,f,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(t,e,n){var r=n(63),o=n(41),i=n(272),a=n(495),s=i("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,n){var r=n(40);t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},function(t,e,n){var r,o=n(103),i=n(497),a=n(277),s=n(274),c=n(499),u=n(425),l=n(272),f=l("IE_PROTO"),d=function(){},h=function(t){return"<script>"+t+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(h("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(h("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[f]=!0,t.exports=Object.create||function create(t,e){var n;return null!==t?(d.prototype=o(t),n=new d,d.prototype=null,n[f]=t):n=p(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(62).f,o=n(63),i=n(37)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r,o,i=n(49),a=n(513),s=i.process,c=s&&s.versions,u=c&&c.v8;u?o=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o},function(t,e,n){"use strict";var r=n(86),o=n(33),i=n(278),a=function(t,e,n,s,c,u,l,f){for(var d,h=c,p=0,b=!!l&&i(l,f,3);p<s;){if(p in n){if(d=b?b(n[p],p,e):n[p],u>0&&r(d))h=a(t,e,d,o(d.length),h,u-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[h]=d}h++}p++}return h};t.exports=a},function(t,e,n){var r=n(158),o=n(41),i=n(156),a=n(33),s=function(t){return function(e,n,s,c){r(n);var u=o(e),l=i(u),f=a(u.length),d=t?f-1:0,h=t?-1:1;if(s<2)for(;;){if(d in l){c=l[d],d+=h;break}if(d+=h,t?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=h)d in l&&(c=n(c,l[d],d,u));return c}};t.exports={left:s(!1),right:s(!0)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",function(){return s}),e.b=function getUserMetaData(t,e,n,s){return i(this,void 0,void 0,function(){var i,c,u,l,f;return a(this,function(a){switch(a.label){case 0:return i=new r.d(e,o.l,t,n),c=new r.c(o.m,e,s),[4,Promise.all([i.getLocation().catch(function(){return null}),c.getCurrentUserId().then(function(t){return c.getForUser(t)}).catch(function(){return null})])];case 1:return u=a.sent(),l=u[0],f=u[1],[2,{geo:l,fb:f}]}})})};var r=n(148),o=n(16),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(r.next(t))}catch(t){i(t)}}function rejected(t){try{step(r.throw(t))}catch(t){i(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(fulfilled,rejected)}step((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s="trackingid123ours"},function(t,e,n){"use strict";var r,o=n(479),i=n(482),a=n(187),s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t){function PostsDb(){var e=t.call(this,"PostsDb")||this;return e.version(1).stores({fbPosts:""}),e.version(2).stores({fbPosts:null}),e.version(3).stores({fbPosts:null}),e.version(4).stores({fbPosts:null}),e.version(5).stores({fbPosts:["++id","fb_post_advertiser_page_id","date","fb_post_entity_id","[fb_post_advertiser_page_id+date]"].join(",")}),e.version(6).stores({fbPosts:["++id","fb_post_advertiser_page_id","date","fb_post_entity_id","[fb_post_advertiser_page_id+date]"].join(","),ytVideos:["++id","date","videoId"].join(",")}),e.version(7).stores({fbPosts:["++id","fb_post_advertiser_page_id","date","fb_post_entity_id","[fb_post_advertiser_page_id+date]"].join(","),ytVideos:["++id","date","videoId"].join(",")}).upgrade(function(t){t.db.table("fbPosts").toCollection().modify({fb_post_src:null})}),e.version(8).stores({fbPosts:["++id","fb_post_advertiser_page_id","date","fb_post_entity_id","[fb_post_advertiser_page_id+date]"].join(","),ytVideos:["++id","date","videoId"].join(","),twTweets:["++id","date","tw_tweet_id"].join(",")}),e.version(9).stores({fbPosts:["++id","fb_post_advertiser_page_id","date","fb_post_entity_id","[fb_post_advertiser_page_id+date]"].join(","),ytVideos:["++id","date","videoId"].join(","),twTweets:["++id","date","tw_tweet_id"].join(","),igMedias:["++id","date","ig_media_shortcode","ig_media_id","ig_media_user_id"].join(",")}),e.version(10).stores({fbPosts:["++id","fb_post_advertiser_page_id","date","fb_post_entity_id","[fb_post_advertiser_page_id+date]"].join(","),ytVideos:["++id","date","videoId"].join(","),twTweets:["++id","date","tw_tweet_id"].join(","),igMedias:["++id","date","ig_media_shortcode","ig_media_id","ig_media_user_id"].join(","),azHeadlines:["++id","az_headline_id","date"].join(",")}),e.version(11).stores({azAds:["++id","date","type"].join(",")}).upgrade(function(t){var e=t.table("azHeadlines"),n=t.table("azAds");e.toCollection().toArray(function(t){return t.map(function(t){return c(c({},t),{type:"headline"})})}).then(function(t){n.bulkAdd(t).then(function(){a.b.info("Done moving "+t.length+" Amazon ads to the AzAds table.")}).catch(o.a.BulkError,function(e){a.b.error("Amazon headlines db migration failed. Items moved successfully: ("+(t.length-e.failures.length)+"/"+t.length+")")})})}),e.fbPosts.mapToClass(i.a),e}return s(PostsDb,t),PostsDb}(o.a);e.a=u},function(t,e,n){"use strict";(function(t,n){var r=Object.keys,o=Array.isArray,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:t;function extend(t,e){return"object"!=typeof e?t:(r(e).forEach(function(n){t[n]=e[n]}),t)}var a=Object.getPrototypeOf,s={}.hasOwnProperty;function hasOwn(t,e){return s.call(t,e)}function props(t,e){"function"==typeof e&&(e=e(a(t))),r(e).forEach(function(n){setProp(t,n,e[n])})}var c=Object.defineProperty;function setProp(t,e,n,r){c(t,e,extend(n&&hasOwn(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function derive(t){return{from:function(e){return t.prototype=Object.create(e.prototype),setProp(t.prototype,"constructor",t),{extend:props.bind(null,t.prototype)}}}}var u=Object.getOwnPropertyDescriptor;var l=[].slice;function slice(t,e,n){return l.call(t,e,n)}function override(t,e){return e(t)}function assert(t){if(!t)throw new Error("Assertion Failed")}function asap(t){i.setImmediate?n(t):setTimeout(t,0)}function arrayToObject(t,e){return t.reduce(function(t,n,r){var o=e(n,r);return o&&(t[o[0]]=o[1]),t},{})}function trycatcher(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}function tryCatch(t,e,n){try{t.apply(null,n)}catch(t){e&&e(t)}}function getByKeyPath(t,e){if(hasOwn(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,o=e.length;r<o;++r){var i=getByKeyPath(t,e[r]);n.push(i)}return n}var a=e.indexOf(".");if(-1!==a){var s=t[e.substr(0,a)];return void 0===s?void 0:getByKeyPath(s,e.substr(a+1))}}function setByKeyPath(t,e,n){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){assert("string"!=typeof n&&"length"in n);for(var r=0,o=e.length;r<o;++r)setByKeyPath(t,e[r],n[r])}else{var i=e.indexOf(".");if(-1!==i){var a=e.substr(0,i),s=e.substr(i+1);if(""===s)void 0===n?delete t[a]:t[a]=n;else{var c=t[a];c||(c=t[a]={}),setByKeyPath(c,s,n)}}else void 0===n?delete t[e]:t[e]=n}}function shallowClone(t){var e={};for(var n in t)hasOwn(t,n)&&(e[n]=t[n]);return e}var f=[].concat;function flatten(t){return f.apply([],t)}var d="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(flatten([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return i[t]}).map(function(t){return i[t]});function deepClone(t){if(!t||"object"!=typeof t)return t;var e;if(o(t)){e=[];for(var n=0,r=t.length;n<r;++n)e.push(deepClone(t[n]))}else if(d.indexOf(t.constructor)>=0)e=t;else for(var i in e=t.constructor?Object.create(t.constructor.prototype):{},t)hasOwn(t,i)&&(e[i]=deepClone(t[i]));return e}function getObjectDiff(t,e,n,o){return n=n||{},o=o||"",r(t).forEach(function(r){if(hasOwn(e,r)){var i=t[r],a=e[r];"object"==typeof i&&"object"==typeof a&&i&&a&&""+i.constructor==""+a.constructor?getObjectDiff(i,a,n,o+r+"."):i!==a&&(n[o+r]=e[r])}else n[o+r]=void 0}),r(e).forEach(function(r){hasOwn(t,r)||(n[o+r]=e[r])}),n}var h="undefined"!=typeof Symbol&&Symbol.iterator,p=h?function(t){var e;return null!=t&&(e=t[h])&&e.apply(t)}:function(){return null},b={};function getArrayOf(t){var e,n,r,i;if(1===arguments.length){if(o(t))return t.slice();if(this===b&&"string"==typeof t)return[t];if(i=p(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var v="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(t,e){v=t,_=e}var _=function(){return!0},y=!new Error("").stack;function getErrorWithStack(){if(y)try{throw getErrorWithStack.arguments,new Error}catch(t){return t}return new Error}function prettyStack(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(_).map(function(t){return"\n"+t}).join("")):""}var m=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],g=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(m),w={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function DexieError(t,e){this._e=getErrorWithStack(),this.name=t,this.message=e}function ModifyError(t,e,n,r){this._e=getErrorWithStack(),this.failures=e,this.failedKeys=r,this.successCount=n}function BulkError(t,e){this._e=getErrorWithStack(),this.name="BulkError",this.failures=e,this.message=function getMultiErrorMessage(t,e){return t+". Errors: "+e.map(function(t){return t.toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}(t,e)}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}}),derive(ModifyError).from(DexieError),derive(BulkError).from(DexieError);var S=g.reduce(function(t,e){return t[e]=e+"Error",t},{}),x=DexieError,O=g.reduce(function(t,e){var n=e+"Error";function DexieError(t,r){this._e=getErrorWithStack(),this.name=n,t?"string"==typeof t?(this.message=t,this.inner=r||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=w[e]||n,this.inner=null)}return derive(DexieError).from(x),t[e]=DexieError,t},{});O.Syntax=SyntaxError,O.Type=TypeError,O.Range=RangeError;var E=m.reduce(function(t,e){return t[e+"Error"]=O[e],t},{});var k=g.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=O[e]),t},{});function nop(){}function mirror(t){return t}function pureFunctionChain(t,e){return null==t||t===mirror?e:function(n){return e(t(n))}}function callBoth(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function hookCreatingChain(t,e){return t===nop?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?callBoth(r,this.onsuccess):r),o&&(this.onerror=this.onerror?callBoth(o,this.onerror):o),void 0!==i?i:n}}function hookDeletingChain(t,e){return t===nop?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?callBoth(n,this.onsuccess):n),r&&(this.onerror=this.onerror?callBoth(r,this.onerror):r)}}function hookUpdatingChain(t,e){return t===nop?e:function(n){var r=t.apply(this,arguments);extend(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?callBoth(o,this.onsuccess):o),i&&(this.onerror=this.onerror?callBoth(i,this.onerror):i),void 0===r?void 0===a?void 0:a:extend(r,a)}}function reverseStoppableEventChain(t,e){return t===nop?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function promisableChain(t,e){return t===nop?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}k.ModifyError=ModifyError,k.DexieError=DexieError,k.BulkError=BulkError;var j={},T=100,P=7,I=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=i.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),A=I[0],C=I[1],F=I[2],M=C&&C.then,R=A&&A.constructor,L=I[3],D=!!F,N=!1,B=F?function(){F.then(physicalTick)}:i.setImmediate?n.bind(null,physicalTick):i.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){physicalTick(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)},q=function(t,e){Y.push([t,e]),H&&(B(),H=!1)},U=!0,H=!0,V=[],z=[],W=null,K=mirror,G={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:globalError,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{globalError(t[0],t[1])}catch(t){}})}},J=G,Y=[],$=0,Z=[];function Promise(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=nop,this._lib=!1;var e=this._PSD=J;if(v&&(this._stackHolder=getErrorWithStack(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==j)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&handleRejection(this,this._value))}this._state=null,this._value=null,++e.ref,function executePromiseTask(t,e){try{e(function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&beginMicroTickScope();e&&"function"==typeof e.then?executePromiseTask(t,function(t,n){e instanceof Promise?e._then(t,n):e.then(t,n)}):(t._state=!0,t._value=e,propagateAllListeners(t)),n&&endMicroTickScope()}},handleRejection.bind(null,t))}catch(e){handleRejection(t,e)}}(this,t)}var Q={get:function(){var t=J,e=rt;function then(n,r){var o=this,i=!t.global&&(t!==J||e!==rt);i&&decrementExpectedAwaits();var a=new Promise(function(e,a){propagateToListener(o,new Listener(nativeAwaitCompatibleWrap(n,t,i),nativeAwaitCompatibleWrap(r,t,i),e,a,t))});return v&&linkToPreviousPromise(a,this),a}return then.prototype=j,then},set:function(t){setProp(this,"then",t&&t.prototype===j?Q:{get:function(){return t},set:Q.set})}};function Listener(t,e,n,r,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=o}function handleRejection(t,e){if(z.push(e),null===t._state){var n=t._lib&&beginMicroTickScope();e=K(e),t._state=!1,t._value=e,v&&null!==e&&"object"==typeof e&&!e._promise&&tryCatch(function(){var n=function getPropertyDescriptor(t,e){var n;return u(t,e)||(n=a(t))&&getPropertyDescriptor(n,e)}(e,"stack");e._promise=t,setProp(e,"stack",{get:function(){return N?n&&(n.get?n.get.apply(e):n.value):t.stack}})}),function addPossiblyUnhandledError(t){V.some(function(e){return e._value===t._value})||V.push(t)}(t),propagateAllListeners(t),n&&endMicroTickScope()}}function propagateAllListeners(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)propagateToListener(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),0===$&&(++$,q(function(){0==--$&&finalizePhysicalTick()},[]))}function propagateToListener(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++$,q(callListener,[n,t,e])}else t._listeners.push(e)}function callListener(t,e,n){try{W=e;var r,o=e._value;e._state?r=t(o):(z.length&&(z=[]),r=t(o),-1===z.indexOf(o)&&function markErrorAsHandled(t){var e=V.length;for(;e;)if(V[--e]._value===t._value)return void V.splice(e,1)}(e)),n.resolve(r)}catch(t){n.reject(t)}finally{W=null,0==--$&&finalizePhysicalTick(),--n.psd.ref||n.psd.finalize()}}function linkToPreviousPromise(t,e){var n=e?e._numPrev+1:0;n<T&&(t._prev=e,t._numPrev=n)}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var t=U;return U=!1,H=!1,t}function endMicroTickScope(){var t,e,n;do{for(;Y.length>0;)for(t=Y,Y=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Y.length>0);U=!0,H=!0}function finalizePhysicalTick(){var t=V;V=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Z.slice(0),n=e.length;n;)e[--n]()}function PromiseReject(t){return new Promise(j,!1,t)}function wrap(t,e){var n=J;return function(){var r=beginMicroTickScope(),o=J;try{return switchToZone(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{switchToZone(o,!1),r&&endMicroTickScope()}}}props(Promise.prototype,{then:Q,_then:function(t,e){propagateToListener(this,new Listener(null,null,t,e,J))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):PromiseReject(t)}):this.then(null,function(t){return t&&t.name===e?n(t):PromiseReject(t)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),PromiseReject(e)})},stack:{get:function(){if(this._stack)return this._stack;try{N=!0;var t=function getStack(t,e,n){if(e.length===n)return e;var r="";if(!1===t._state){var o,i,a=t._value;null!=a?(o=a.name||"Error",i=a.message||a,r=prettyStack(a,0)):(o=a,i=""),e.push(o+(i?": "+i:"")+r)}v&&((r=prettyStack(t._stackHolder,2))&&-1===e.indexOf(r)&&e.push(r),t._prev&&getStack(t._prev,e,n));return e}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{N=!1}}},timeout:function(t,e){var n=this;return t<1/0?new Promise(function(r,o){var i=setTimeout(function(){return o(new O.Timeout(e))},t);n.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&setProp(Promise.prototype,Symbol.toStringTag,"Promise"),G.env=snapShot(),props(Promise,{all:function(){var t=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new Promise(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach(function(o,i){return Promise.resolve(o).then(function(n){t[i]=n,--r||e(t)},n)})})},resolve:function(t){if(t instanceof Promise)return t;if(t&&"function"==typeof t.then)return new Promise(function(e,n){t.then(e,n)});var e=new Promise(j,!0,t);return linkToPreviousPromise(e,W),e},reject:PromiseReject,race:function(){var t=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new Promise(function(e,n){t.map(function(t){return Promise.resolve(t).then(e,n)})})},PSD:{get:function(){return J},set:function(t){return J=t}},newPSD:newScope,usePSD:usePSD,scheduler:{get:function(){return q},set:function(t){q=t}},rejectionMapper:{get:function(){return K},set:function(t){K=t}},follow:function(t,e){return new Promise(function(n,r){return newScope(function(e,n){var r=J;r.unhandleds=[],r.onunhandled=n,r.finalize=callBoth(function(){var t=this;!function run_at_end_of_this_or_next_physical_tick(t){Z.push(function finalizer(){t();Z.splice(Z.indexOf(finalizer),1)}),++$,q(function(){0==--$&&finalizePhysicalTick()},[])}(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},r.finalize),t()},e,n,r)})}});var X={awaits:0,echoes:0,id:0},tt=0,et=[],nt=0,rt=0,ot=0;function newScope(t,e,n,r){var o=J,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++ot;var a=G.env;i.env=D?{Promise:Promise,PromiseProp:{value:Promise,configurable:!0,writable:!0},all:Promise.all,race:Promise.race,resolve:Promise.resolve,reject:Promise.reject,nthen:getPatchedPromiseThen(a.nthen,i),gthen:getPatchedPromiseThen(a.gthen,i)}:{},e&&extend(i,e),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=usePSD(i,t,n,r);return 0===i.ref&&i.finalize(),s}function incrementExpectedAwaits(){return X.id||(X.id=++tt),++X.awaits,X.echoes+=P,X.id}function decrementExpectedAwaits(t){!X.awaits||t&&t!==X.id||(0==--X.awaits&&(X.id=0),X.echoes=X.awaits*P)}function onPossibleParallellAsync(t){return X.echoes&&t&&t.constructor===R?(incrementExpectedAwaits(),t.then(function(t){return decrementExpectedAwaits(),t},function(t){return decrementExpectedAwaits(),at(t)})):t}function zoneLeaveEcho(){var t=et[et.length-1];et.pop(),switchToZone(t,!1)}function switchToZone(t,e){var n=J;if((e?!X.echoes||nt++&&t===J:!nt||--nt&&t===J)||function enqueueNativeMicroTask(t){M.call(A,t)}(e?function zoneEnterEcho(t){++rt,X.echoes&&0!=--X.echoes||(X.echoes=X.id=0),et.push(J),switchToZone(t,!0)}.bind(null,t):zoneLeaveEcho),t!==J&&(J=t,n===G&&(G.env=snapShot()),D)){var r=G.env.Promise,o=t.env;C.then=o.nthen,r.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty(i,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject)}}function snapShot(){var t=i.Promise;return D?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:C.then,gthen:t.prototype.then}:{}}function usePSD(t,e,n,r,o){var i=J;try{return switchToZone(t,!0),e(n,r,o)}finally{switchToZone(i,!1)}}function nativeAwaitCompatibleWrap(t,e,n){return"function"!=typeof t?t:function(){var r=J;n&&incrementExpectedAwaits(),switchToZone(e,!0);try{return t.apply(this,arguments)}finally{switchToZone(r,!1)}}}function getPatchedPromiseThen(t,e){return function(n,r){return t.call(this,nativeAwaitCompatibleWrap(n,e,!1),nativeAwaitCompatibleWrap(r,e,!1))}}var it="unhandledrejection";function globalError(t,e){var n;try{n=e.onuncatched(t)}catch(t){}if(!1!==n)try{var r,o={promise:e,reason:t};if(i.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(it,!0,!0),extend(r,o)):i.CustomEvent&&extend(r=new CustomEvent(it,{detail:o}),o),r&&i.dispatchEvent&&(dispatchEvent(r),!i.PromiseRejectionEvent&&i.onunhandledrejection))try{i.onunhandledrejection(r)}catch(t){}r.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var at=Promise.reject;function Events(t){var e={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return e[n].subscribe.apply(null,i),t}if("string"==typeof n)return e[n]};n.addEventType=add;for(var i=1,a=arguments.length;i<a;++i)add(arguments[i]);return n;function add(t,i,a){if("object"==typeof t)return function addConfiguredEvents(t){r(t).forEach(function(e){var n=t[e];if(o(n))add(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new O.InvalidArgument("Invalid event config");var r=add(e,mirror,function fire(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach(function(t){asap(function fireEvent(){t.apply(null,e)})})})}})}(t);i||(i=reverseStoppableEventChain),a||(a=nop);var s={subscribers:[],fire:a,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=i(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter(function(e){return e!==t}),s.fire=s.subscribers.reduce(i,a)}};return e[t]=n[t]=s,s}}var st,ct=String.fromCharCode(65535),ut=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return ct}}(),lt=-1/0,ft="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",dt="String expected.",ht=[],pt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bt=pt,vt=pt,_t=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function Dexie(t,e){var n,a,s,c,u,l=Dexie.dependencies,f=extend({addons:Dexie.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},e),d=f.addons,h=f.autoOpen,p=f.indexedDB,_=f.IDBKeyRange,y=this._dbSchema={},m=[],g=[],w={},S=null,x=null,E=!1,k=null,j=!1,T="readwrite",P=this,I=new Promise(function(t){n=t}),A=new Promise(function(t,e){a=e}),C=!0,F=!!getNativeGetDatabaseNamesFn(p);function Version(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function runUpgraders(t,e,n){var o=P._createTransaction(T,g,y);o.create(e),o._completion.catch(n);var i=o._reject.bind(o);newScope(function(){J.trans=o,0===t?(r(y).forEach(function(t){createTable(e,t,y[t].primKey,y[t].indexes)}),Promise.follow(function(){return P.on.populate.fire(o)}).catch(i)):function updateTablesAndIndexes(t,e,n){var o=[],i=m.filter(function(e){return e._cfg.version===t})[0];if(!i)throw new O.Upgrade("Dexie specification of currently installed DB version is missing");y=P._dbSchema=i._cfg.dbschema;var a=!1;return m.filter(function(e){return e._cfg.version>t}).forEach(function(t){o.push(function(){var r=y,o=t._cfg.dbschema;adjustToExistingIndexNames(r,n),adjustToExistingIndexNames(o,n),y=P._dbSchema=o;var i=function getSchemaDiff(t,e){var n={del:[],add:[],change:[]};for(var r in t)e[r]||n.del.push(r);for(r in e){var o=t[r],i=e[r];if(o){var a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)a.recreate=!0,n.change.push(a);else{var s=o.idxByName,c=i.idxByName;for(var u in s)c[u]||a.del.push(u);for(u in c){var l=s[u],f=c[u];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,i])}return n}(r,o);if(i.add.forEach(function(t){createTable(n,t[0],t[1].primKey,t[1].indexes)}),i.change.forEach(function(t){if(t.recreate)throw new O.Upgrade("Not yet support for changing primary key");var e=n.objectStore(t.name);t.add.forEach(function(t){addIndex(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),addIndex(e,t)}),t.del.forEach(function(t){e.deleteIndex(t)})}),t._cfg.contentUpgrade)return a=!0,Promise.follow(function(){t._cfg.contentUpgrade(e)})}),o.push(function(e){a&&bt||function deleteRemovedTables(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(t._cfg.dbschema,e)})}),function runQueue(){return o.length?Promise.resolve(o.shift()(e.idbtrans)).then(runQueue):Promise.resolve()}().then(function(){!function createMissingTables(t,e){r(t).forEach(function(n){e.db.objectStoreNames.contains(n)||createTable(e,n,t[n].primKey,t[n].indexes)})}(y,n)})}(t,o,e).catch(i)})}function createTable(t,e,n,r){var o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(t){addIndex(o,t)}),o}function addIndex(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Table(t,e,n){this.name=t,this.schema=e,this._tx=n,this.hook=w[t]?w[t].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})}function BulkErrorHandlerCatchAll(t,e,n){return(n?hookedEventRejectHandler:eventRejectHandler)(function(n){t.push(n),e&&e()})}function bulkDelete(t,e,n,r,o){return new Promise(function(i,a){var s=n.length,c=s-1;if(0===s)return i();if(r){var u,l=hookedEventRejectHandler(a),f=hookedEventSuccessHandler(null);tryCatch(function(){for(var r=0;r<s;++r){u={onsuccess:null,onerror:null};var a=n[r];o.call(u,a[0],a[1],e);var d=t.delete(a[0]);d._hookCtx=u,d.onerror=l,d.onsuccess=r===c?hookedEventSuccessHandler(i):f}},function(t){throw u.onerror&&u.onerror(t),t})}else for(var d=0;d<s;++d){var h=t.delete(n[d]);h.onerror=eventRejectHandler(a),d===c&&(h.onsuccess=wrap(function(){return i()}))}})}function Transaction(t,e,n,r){var o=this;this.db=P,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=Events(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Promise(function(t,e){o._resolve=t,o._reject=e}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),at(t)})}function WhereClause(t,e,n){this._ctx={table:t,index:":id"===e?null:e,or:n}}function Collection(t,e){var n=null,r=null;if(e)try{n=e()}catch(t){r=t}var o=t._ctx,i=o.table;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:i.hook.reading.fire}}function isPlainKeyRange(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function lowerVersionFirst(t,e){return t._cfg.version-e._cfg.version}function setApiOnPlace(t,e,n){e.forEach(function(e){var r=n[e];t.forEach(function(t){e in t||(t===Transaction.prototype||t instanceof Transaction?setProp(t,e,{get:function(){return this.table(e)}}):t[e]=new Table(e,r))})})}function iterate(t,e,n,r,o,i){var a=wrap(i?function(t,e,r){return n(i(t),e,r)}:n,o);t.onerror||(t.onerror=eventRejectHandler(o)),t.onsuccess=trycatcher(e?function filter_record(){var n=t.result;if(n){var i=function(){n.continue()};e(n,function(t){i=t},r,o)&&a(n.value,n,function(t){i=t}),i()}else r()}:function filter_record(){var e=t.result;if(e){var n=function(){e.continue()};a(e.value,e,function(t){n=t}),n()}else r()},o)}function cmp(t,e){return p.cmp(t,e)}function max(t,e){return cmp(t,e)>0?t:e}function ascending(t,e){return p.cmp(t,e)}function descending(t,e){return p.cmp(e,t)}function simpleCompare(t,e){return t<e?-1:t===e?0:1}function simpleCompareReverse(t,e){return t>e?-1:t===e?0:1}function combine(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function adjustToExistingIndexNames(t,e){for(var n=e.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],a=e.objectStore(o);s="getAll"in a;for(var c=0;c<a.indexNames.length;++c){var u=a.indexNames[c],l=a.index(u).keyPath,f="string"==typeof l?l:"["+slice(l).join("+")+"]";if(t[o]){var d=t[o].idxByName[f];d&&(d.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s=!1)}function fireOnBlocked(t){P.on("blocked").fire(t),ht.filter(function(t){return t.name===P.name&&t!==P&&!t._vcFired}).map(function(e){return e.on("versionchange").fire(t)})}this.version=function(t){if(S||E)throw new O.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=m.filter(function(e){return e._cfg.version===t})[0];return e||(e=new Version(t),m.push(e),m.sort(lowerVersionFirst),C=!1,e)},extend(Version.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,t):t;var e={};m.forEach(function(t){extend(e,t._cfg.storesSource)});var n=this._cfg.dbschema={};return this._parseStoresSpec(e,n),y=P._dbSchema=n,function removeTablesApi(t){t.forEach(function(t){for(var e in t)t[e]instanceof Table&&delete t[e]})}([w,P,Transaction.prototype]),setApiOnPlace([w,P,Transaction.prototype,this._cfg.tables],r(n),n),g=r(n),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,e){r(t).forEach(function(n){if(null!==t[n]){var r={},i=function parseIndexSyntax(t){var e=[];return t.split(",").forEach(function(t){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;e.push(new IndexSpec(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),o(r),/\./.test(t)))}),e}(t[n]),a=i.shift();if(a.multi)throw new O.Schema("Primary key cannot be multi-valued");a.keyPath&&setByKeyPath(r,a.keyPath,a.auto?0:a.keyPath),i.forEach(function(t){if(t.auto)throw new O.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new O.Schema("Index must have a name and cannot be an empty string");setByKeyPath(r,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),e[n]=new TableSchema(n,a,i,r)}})}}),this._allTables=w,this._createTransaction=function(t,e,n,r){return new Transaction(t,e,n,r)},this._whenReady=function(t){return j||J.letThrough?t():new Promise(function(t,e){if(!E){if(!h)return void e(new O.DatabaseClosed);P.open().catch(nop)}I.then(t,e)}).then(t)},this.verno=0,this.open=function(){if(E||S)return I.then(function(){return x?at(x):P});v&&(A._stackHolder=getErrorWithStack()),E=!0,x=null,j=!1;var e=n,o=null;return Promise.race([A,new Promise(function(e,n){if(!p)throw new O.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=C?p.open(t):p.open(t,Math.round(10*P.verno));if(!i)throw new O.MissingAPI("IndexedDB API not available");i.onerror=eventRejectHandler(n),i.onblocked=wrap(fireOnBlocked),i.onupgradeneeded=wrap(function(e){if(o=i.transaction,C&&!P._allowEmptyDB){i.onerror=preventDefault,o.abort(),i.result.close();var r=p.deleteDatabase(t);r.onsuccess=r.onerror=wrap(function(){n(new O.NoSuchDatabase("Database "+t+" doesnt exist"))})}else{o.onerror=eventRejectHandler(n),runUpgraders((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,o,n)}},n),i.onsuccess=wrap(function(){if(o=null,S=i.result,ht.push(P),C)!function readGlobalSchema(){if(P.verno=S.version/10,P._dbSchema=y={},0===(g=slice(S.objectStoreNames,0)).length)return;var t=S.transaction(safariMultiStoreFix(g),"readonly");g.forEach(function(e){for(var n=t.objectStore(e),r=n.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new IndexSpec(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,o),a=[],s=0;s<n.indexNames.length;++s){var c=n.index(n.indexNames[s]);r=c.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf(".");var u=new IndexSpec(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,o);a.push(u)}y[e]=new TableSchema(e,i,a,{})}),setApiOnPlace([w],r(y),y)}();else if(S.objectStoreNames.length>0)try{adjustToExistingIndexNames(y,S.transaction(safariMultiStoreFix(S.objectStoreNames),"readonly"))}catch(t){}S.onversionchange=wrap(function(t){P._vcFired=!0,P.on("versionchange").fire(t)}),F||"__dbnames"===t||st.dbnames.put({name:t}).catch(nop),e()},n)})]).then(function(){return k=[],Promise.resolve(Dexie.vip(P.on.ready.fire)).then(function fireRemainders(){if(k.length>0){var t=k.reduce(promisableChain,nop);return k=[],Promise.resolve(Dexie.vip(t)).then(fireRemainders)}})}).finally(function(){k=null}).then(function(){return E=!1,P}).catch(function(t){try{o&&o.abort()}catch(t){}return E=!1,P.close(),at(x=t)}).finally(function(){j=!0,e()})},this.close=function(){var t=ht.indexOf(P);if(t>=0&&ht.splice(t,1),S){try{S.close()}catch(t){}S=null}h=!1,x=new O.DatabaseClosed,E&&a(x),I=new Promise(function(t){n=t}),A=new Promise(function(t,e){a=e})},this.delete=function(){var e=arguments.length>0;return new Promise(function(n,r){if(e)throw new O.InvalidArgument("Arguments not allowed in db.delete()");function doDelete(){P.close();var e=p.deleteDatabase(t);e.onsuccess=wrap(function(){F||st.dbnames.delete(t).catch(nop),n()}),e.onerror=eventRejectHandler(r),e.onblocked=fireOnBlocked}E?I.then(doDelete):doDelete()})},this.backendDB=function(){return S},this.isOpen=function(){return null!==S},this.hasBeenClosed=function(){return x&&x instanceof O.DatabaseClosed},this.hasFailed=function(){return null!==x},this.dynamicallyOpened=function(){return C},this.name=t,props(this,{tables:{get:function(){return r(w).map(function(t){return w[t]})}}}),this.on=Events(this,"populate","blocked","versionchange",{ready:[promisableChain,nop]}),this.on.ready.subscribe=override(this.on.ready.subscribe,function(t){return function(e,n){Dexie.vip(function(){j?(x||Promise.resolve().then(e),n&&t(e)):k?(k.push(e),n&&t(e)):(t(e),n||t(function unsubscribe(){P.on.ready.unsubscribe(e),P.on.ready.unsubscribe(unsubscribe)}))})}}),this.transaction=function(){var t=function extractTransactionArgs(t,e,n){var r=arguments.length;if(r<2)throw new O.InvalidArgument("Too few arguments");var o=new Array(r-1);for(;--r;)o[r-1]=arguments[r];n=o.pop();var i=flatten(o);return[t,i,n]}.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(t,e,n){var r=J.trans;r&&r.db===P&&-1===t.indexOf("!")||(r=null);var o=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var i=e.map(function(t){var e=t instanceof Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e});if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=T)throw new O.InvalidArgument("Invalid transaction mode: "+t);t=T}if(r){if("readonly"===r.mode&&t===T){if(!o)throw new O.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&i.forEach(function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!o)throw new O.SubTransaction("Table "+t+" not included in parent transaction.");r=null}}),o&&r&&!r.active&&(r=null)}}catch(t){return r?r._promise(null,function(e,n){n(t)}):at(t)}return r?r._promise(t,enterTransactionScope,"lock"):J.trans?usePSD(J.transless,function(){return P._whenReady(enterTransactionScope)}):P._whenReady(enterTransactionScope);function enterTransactionScope(){return Promise.resolve().then(function(){var e,o=J.transless||J,a=P._createTransaction(t,i,y,r),s={trans:a,transless:o};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===L&&incrementExpectedAwaits();var c=Promise.follow(function(){if(e=n.call(a,a))if(e.constructor===R){var t=decrementExpectedAwaits.bind(null,null);e.then(t,t)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=awaitIterator(e))},s);return(e&&"function"==typeof e.then?Promise.resolve(e).then(function(t){return a.active?t:at(new O.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return e})).then(function(t){return r&&a._resolve(),a._completion.then(function(){return t})}).catch(function(t){return a._reject(t),at(t)})})}},this.table=function(t){if(!hasOwn(w,t))throw new O.InvalidTable("Table "+t+" does not exist");return w[t]},props(Table.prototype,{_trans:function getTransaction(t,e,n){var r=this._tx||J.trans;return r&&r.db===P?r===J.trans?r._promise(t,e,n):newScope(function(){return r._promise(t,e,n)},{trans:r,transless:J.transless||J}):function tempTransaction(t,e,n){if(j||J.letThrough){var r=P._createTransaction(t,e,y);try{r.create()}catch(t){return at(t)}return r._promise(t,function(t,e){return newScope(function(){return J.trans=r,n(t,e,r)})}).then(function(t){return r._completion.then(function(){return t})})}if(!E){if(!h)return at(new O.DatabaseClosed);P.open().catch(nop)}return I.then(function(){return tempTransaction(t,e,n)})}(t,[this.name],e)},_idbstore:function getIDBObjectStore(t,e,n){var r=this.name;return this._trans(t,function supplyIdbStore(t,n,o){if(-1===o.storeNames.indexOf(r))throw new O.NotFound("Table"+r+" not part of transaction");return e(t,n,o.idbtrans.objectStore(r),o)},n)},get:function(t,e){if(t&&t.constructor===Object)return this.where(t).first(e);var n=this;return this._idbstore("readonly",function(e,r,o){var i=o.get(t);i.onerror=eventRejectHandler(r),i.onsuccess=wrap(function(){e(n.hook.reading.fire(i.result))},r)}).then(e)},where:function(t){if("string"==typeof t)return new WhereClause(this,t);if(o(t))return new WhereClause(this,"["+t.join("+")+"]");var e=r(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){return t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})&&t.keyPath.every(function(t){return e.indexOf(t)>=0})})[0];if(n&&ut!==ct)return this.where(n.name).equals(n.keyPath.map(function(e){return t[e]}));n||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var i=this.schema.idxByName,a=e.reduce(function(e,n){return[e[0]||i[n],e[0]||!i[n]?combine(e[1],function(e){return""+getByKeyPath(e,n)==""+t[n]}):e[1]]},[null,null]),s=a[0];return s?this.where(s.name).equals(t[s.keyPath]).filter(a[1]):n?this.filter(a[1]):this.where(e).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new Collection(new WhereClause(this,o(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new Collection(new WhereClause(this))},mapToClass:function(t,e){this.schema.mappedClass=t;var n=Object.create(t.prototype);e&&applyStructure(n,e),this.schema.instanceTemplate=n;var r=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(hasOwn(e,r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(Dexie.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===nop?this._idbstore(T,function(e,n,r,o){e(bulkDelete(r,o,t,!1,nop))}):this.where(":id").anyOf(t).delete().then(function(){})},bulkPut:function(t,e){var n=this;return this._idbstore(T,function(r,o,i){if(!i.keyPath&&!n.schema.primKey.auto&&!e)throw new O.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&e)throw new O.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var a,s,c=function(t){0===u.length?r(t):o(new BulkError(n.name+".bulkPut(): "+u.length+" of "+l+" operations failed",u))},u=[],l=t.length,f=n;if(n.hook.creating.fire===nop&&n.hook.updating.fire===nop){s=BulkErrorHandlerCatchAll(u);for(var d=0,h=t.length;d<h;++d)(a=e?i.put(t[d],e[d]):i.put(t[d])).onerror=s;a.onerror=BulkErrorHandlerCatchAll(u,c),a.onsuccess=eventSuccessHandler(c)}else{var p=e||i.keyPath&&t.map(function(t){return getByKeyPath(t,i.keyPath)}),b=p&&arrayToObject(p,function(e,n){return null!=e&&[e,t[n]]});(p?f.where(":id").anyOf(p.filter(function(t){return null!=t})).modify(function(){this.value=b[this.primKey],b[this.primKey]=null}).catch(ModifyError,function(t){u=t.failures}).then(function(){for(var n=[],r=e&&[],o=p.length-1;o>=0;--o){var i=p[o];(null==i||b[i])&&(n.push(t[o]),e&&r.push(i),null!=i&&(b[i]=null))}return n.reverse(),e&&r.reverse(),f.bulkAdd(n,r)}).then(function(t){var e=p[p.length-1];return null!=e?e:t}):f.bulkAdd(t)).then(c).catch(BulkError,function(t){u=u.concat(t.failures),c()}).catch(o)}},"locked")},bulkAdd:function(t,e){var n=this,r=this.hook.creating.fire;return this._idbstore(T,function(o,i,a,s){if(!a.keyPath&&!n.schema.primKey.auto&&!e)throw new O.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&e)throw new O.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return o();function done(t){0===f.length?o(t):i(new BulkError(n.name+".bulkAdd(): "+f.length+" of "+d+" operations failed",f))}var c,u,l,f=[],d=t.length;if(r!==nop){var h,p=a.keyPath;u=BulkErrorHandlerCatchAll(f,null,!0),l=hookedEventSuccessHandler(null),tryCatch(function(){for(var n=0,o=t.length;n<o;++n){h={onerror:null,onsuccess:null};var i=e&&e[n],f=t[n],d=e?i:p?getByKeyPath(f,p):void 0,b=r.call(h,d,f,s);null==d&&null!=b&&(p?setByKeyPath(f=deepClone(f),p,b):i=b),(c=null!=i?a.add(f,i):a.add(f))._hookCtx=h,n<o-1&&(c.onerror=u,h.onsuccess&&(c.onsuccess=l))}},function(t){throw h.onerror&&h.onerror(t),t}),c.onerror=BulkErrorHandlerCatchAll(f,done,!0),c.onsuccess=hookedEventSuccessHandler(done)}else{u=BulkErrorHandlerCatchAll(f);for(var b=0,v=t.length;b<v;++b)(c=e?a.add(t[b],e[b]):a.add(t[b])).onerror=u;c.onerror=BulkErrorHandlerCatchAll(f,done),c.onsuccess=eventSuccessHandler(done)}})},add:function(t,e){var n=this.hook.creating.fire;return this._idbstore(T,function(r,o,i,a){var s={onsuccess:null,onerror:null};if(n!==nop){var c=null!=e?e:i.keyPath?getByKeyPath(t,i.keyPath):void 0,u=n.call(s,c,t,a);null==c&&null!=u&&(i.keyPath?setByKeyPath(t,i.keyPath,u):e=u)}try{var l=null!=e?i.add(t,e):i.add(t);l._hookCtx=s,l.onerror=hookedEventRejectHandler(o),l.onsuccess=hookedEventSuccessHandler(function(e){var n=i.keyPath;n&&setByKeyPath(t,n,e),r(e)})}catch(t){throw s.onerror&&s.onerror(t),t}})},put:function(t,e){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;if(r!==nop||o!==nop){var i=this.schema.primKey.keyPath,a=void 0!==e?e:i&&getByKeyPath(t,i);return null==a?this.add(t):(t=deepClone(t),this._trans(T,function(){return n.where(":id").equals(a).modify(function(){this.value=t}).then(function(r){return 0===r?n.add(t,e):a})},"locked"))}return this._idbstore(T,function(n,r,o){var i=void 0!==e?o.put(t,e):o.put(t);i.onerror=eventRejectHandler(r),i.onsuccess=wrap(function(e){var r=o.keyPath;r&&setByKeyPath(t,r,e.target.result),n(i.result)})})},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(T,function(e,n,r){var o=r.delete(t);o.onerror=eventRejectHandler(n),o.onsuccess=wrap(function(){e(o.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(T,function(t,e,n){var r=n.clear();r.onerror=eventRejectHandler(e),r.onsuccess=wrap(function(){t(r.result)})})},update:function(t,e){if("object"!=typeof e||o(e))throw new O.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||o(t))return this.where(":id").equals(t).modify(e);r(e).forEach(function(n){setByKeyPath(t,n,e[n])});var n=getByKeyPath(t,this.schema.primKey.keyPath);return void 0===n?at(new O.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)}}),props(Transaction.prototype,{_lock:function(){return assert(!J.global),++this._reculock,1!==this._reculock||J.global||(J.lockOwnerFor=this),this},_unlock:function(){if(assert(!J.global),0==--this._reculock)for(J.global||(J.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{usePSD(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&J.lockOwnerFor!==this},create:function(t){var e=this;if(!this.mode)return this;if(assert(!this.idbtrans),!t&&!S)switch(x&&x.name){case"DatabaseClosedError":throw new O.DatabaseClosed(x);case"MissingAPIError":throw new O.MissingAPI(x.message,x);default:throw new O.OpenFailed(x)}if(!this.active)throw new O.TransactionInactive;return assert(null===this._completion._state),(t=this.idbtrans=t||S.transaction(safariMultiStoreFix(this.storeNames),this.mode)).onerror=wrap(function(n){preventDefault(n),e._reject(t.error)}),t.onabort=wrap(function(n){preventDefault(n),e.active&&e._reject(new O.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=wrap(function(){e.active=!1,e._resolve()}),this},_promise:function(t,e,n){var r=this;if(t===T&&this.mode!==T)return at(new O.ReadOnly("Transaction is readonly"));if(!this.active)return at(new O.TransactionInactive);if(this._locked())return new Promise(function(o,i){r._blockedFuncs.push([function(){r._promise(t,e,n).then(o,i)},J])});if(n)return newScope(function(){var t=new Promise(function(t,n){r._lock();var o=e(t,n,r);o&&o.then&&o.then(t,n)});return t.finally(function(){return r._unlock()}),t._lib=!0,t});var o=new Promise(function(t,n){var o=e(t,n,r);o&&o.then&&o.then(t,n)});return o._lib=!0,o},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var e=this._root();if(t=Promise.resolve(t),e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return t});else{e._waitingFor=t,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function spin(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=spin)}()}var r=e._waitingFor;return new Promise(function(n,o){t.then(function(t){return e._waitingQueue.push(wrap(n.bind(null,t)))},function(t){return e._waitingQueue.push(wrap(o.bind(null,t)))}).finally(function(){e._waitingFor===r&&(e._waitingFor=null)})})},abort:function(){this.active&&this._reject(new O.Abort),this.active=!1},tables:{get:(c="Transaction.tables",u=function(){return w},function(){return console.warn(c+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+prettyStack(getErrorWithStack(),1)),u.apply(this,arguments)})},table:function(t){return new Table(t,P.table(t).schema,this)}}),props(WhereClause.prototype,function(){function fail(t,e,n){var r=t instanceof WhereClause?new Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function emptyCollection(t){return new Collection(t,function(){return _.only("")}).limit(0)}function nextCasing(t,e,n,r,o,i){for(var a=Math.min(t.length,r.length),s=-1,c=0;c<a;++c){var u=e[c];if(u!==r[c])return o(t[c],n[c])<0?t.substr(0,c)+n[c]+n.substr(c+1):o(t[c],r[c])<0?t.substr(0,c)+r[c]+n.substr(c+1):s>=0?t.substr(0,s)+e[s]+n.substr(s+1):null;o(t[c],u)<0&&(s=c)}return a<r.length&&"next"===i?t+n.substr(t.length):a<t.length&&"prev"===i?t.substr(0,n.length):s<0?null:t.substr(0,s)+r[s]+n.substr(s+1)}function addIgnoreCaseAlgorithm(t,e,n,r){var o,i,a,s,c,u,l,f=n.length;if(!n.every(function(t){return"string"==typeof t}))return fail(t,dt);function initDirection(t){o=function upperFactory(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),i=function lowerFactory(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),a="next"===t?simpleCompare:simpleCompareReverse;var e=n.map(function(t){return{lower:i(t),upper:o(t)}}).sort(function(t,e){return a(t.lower,e.lower)});s=e.map(function(t){return t.upper}),c=e.map(function(t){return t.lower}),u=t,l="next"===t?"":r}initDirection("next");var d=new Collection(t,function(){return _.bound(s[0],c[f-1]+r)});d._ondirectionchange=function(t){initDirection(t)};var h=0;return d._addAlgorithm(function(t,n,r){var o=t.key;if("string"!=typeof o)return!1;var d=i(o);if(e(d,c,h))return!0;for(var p=null,b=h;b<f;++b){var v=nextCasing(o,d,s[b],c[b],a,u);null===v&&null===p?h=b+1:(null===p||a(p,v)>0)&&(p=v)}return n(null!==p?function(){t.continue(p+l)}:r),!1}),d}return{between:function(t,e,n,r){n=!1!==n,r=!0===r;try{return cmp(t,e)>0||0===cmp(t,e)&&(n||r)&&(!n||!r)?emptyCollection(this):new Collection(this,function(){return _.bound(t,e,!n,!r)})}catch(t){return fail(this,ft)}},equals:function(t){return new Collection(this,function(){return _.only(t)})},above:function(t){return new Collection(this,function(){return _.lowerBound(t,!0)})},aboveOrEqual:function(t){return new Collection(this,function(){return _.lowerBound(t)})},below:function(t){return new Collection(this,function(){return _.upperBound(t,!0)})},belowOrEqual:function(t){return new Collection(this,function(){return _.upperBound(t)})},startsWith:function(t){return"string"!=typeof t?fail(this,dt):this.between(t,t+ct,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):addIgnoreCaseAlgorithm(this,function(t,e){return 0===t.indexOf(e[0])},[t],ct)},equalsIgnoreCase:function(t){return addIgnoreCaseAlgorithm(this,function(t,e){return t===e[0]},[t],"")},anyOfIgnoreCase:function(){var t=getArrayOf.apply(b,arguments);return 0===t.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,function(t,e){return-1!==e.indexOf(t)},t,"")},startsWithAnyOfIgnoreCase:function(){var t=getArrayOf.apply(b,arguments);return 0===t.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,ct)},anyOf:function(){var t=getArrayOf.apply(b,arguments),e=ascending;try{t.sort(e)}catch(t){return fail(this,ft)}if(0===t.length)return emptyCollection(this);var n=new Collection(this,function(){return _.bound(t[0],t[t.length-1])});n._ondirectionchange=function(n){e="next"===n?ascending:descending,t.sort(e)};var r=0;return n._addAlgorithm(function(n,o,i){for(var a=n.key;e(a,t[r])>0;)if(++r===t.length)return o(i),!1;return 0===e(a,t[r])||(o(function(){n.continue(t[r])}),!1)}),n},notEqual:function(t){return this.inAnyRange([[lt,t],[t,ut]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=getArrayOf.apply(b,arguments);if(0===t.length)return new Collection(this);try{t.sort(ascending)}catch(t){return fail(this,ft)}var e=t.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[lt,e]]},null);return e.push([t[t.length-1],ut]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(t,e){if(0===t.length)return emptyCollection(this);if(!t.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&ascending(t[0],t[1])<=0}))return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",O.InvalidArgument);var n=!e||!1!==e.includeLowers,r=e&&!0===e.includeUppers;var o,i=ascending;function rangeSorter(t,e){return i(t[0],e[0])}try{(o=t.reduce(function addRange(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(cmp(e[0],o[1])<0&&cmp(e[1],o[0])>0){o[0]=(i=o[0],a=e[0],cmp(i,a)<0?i:a),o[1]=max(o[1],e[1]);break}}var i,a;return n===r&&t.push(e),t},[])).sort(rangeSorter)}catch(t){return fail(this,ft)}var a=0,s=r?function(t){return ascending(t,o[a][1])>0}:function(t){return ascending(t,o[a][1])>=0},c=n?function(t){return descending(t,o[a][0])>0}:function(t){return descending(t,o[a][0])>=0};var u=s,l=new Collection(this,function(){return _.bound(o[0][0],o[o.length-1][1],!n,!r)});return l._ondirectionchange=function(t){"next"===t?(u=s,i=ascending):(u=c,i=descending),o.sort(rangeSorter)},l._addAlgorithm(function(t,e,n){for(var r=t.key;u(r);)if(++a===o.length)return e(n),!1;return!!function keyWithinCurrentRange(t){return!s(t)&&!c(t)}(r)||0!==cmp(r,o[a][1])&&0!==cmp(r,o[a][0])&&(e(function(){i===ascending?t.continue(o[a][0]):t.continue(o[a][1])}),!1)}),l},startsWithAnyOf:function(){var t=getArrayOf.apply(b,arguments);return t.every(function(t){return"string"==typeof t})?0===t.length?emptyCollection(this):this.inAnyRange(t.map(function(t){return[t,t+ct]})):fail(this,"startsWithAnyOf() only works with strings")}}}),props(Collection.prototype,function(){function addFilter(t,e){t.filter=combine(t.filter,e)}function addReplayFilter(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return combine(r(),e())}:e,t.justLimit=n&&!r}function getIndexOrStore(t,e){if(t.isPrimKey)return e;var n=t.table.schema.idxByName[t.index];if(!n)throw new O.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(n.name)}function openCursor(t,e){var n=getIndexOrStore(t,e);return t.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(t.range||null,t.dir+t.unique):n.openCursor(t.range||null,t.dir+t.unique)}function iter(t,e,n,r,o){var i=t.replayFilter?combine(t.filter,t.replayFilter()):t.filter;t.or?function(){var a={},s=0;function resolveboth(){2==++s&&n()}function union(t,n,o){if(!i||i(n,o,resolveboth,r)){var s=n.primaryKey,c=""+s;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(s)),hasOwn(a,c)||(a[c]=!0,e(t,n,o))}}t.or._iterate(union,resolveboth,r,o),iterate(openCursor(t,o),t.algorithm,union,resolveboth,r,!t.keysOnly&&t.valueMapper)}():iterate(openCursor(t,o),combine(t.algorithm,i),e,n,r,!t.keysOnly&&t.valueMapper)}return{_read:function(t,e){var n=this._ctx;return n.error?n.table._trans(null,at.bind(null,n.error)):n.table._idbstore("readonly",t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,at.bind(null,e.error)):e.table._idbstore(T,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=combine(e.algorithm,t)},_iterate:function(t,e,n,r){return iter(this._ctx,t,e,n,r)},clone:function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&extend(n,t),e._ctx=n,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var e=this._ctx;return this._read(function(n,r,o){iter(e,t,n,r,o)})},count:function(t){var e=this._ctx;if(isPlainKeyRange(e,!0))return this._read(function(t,n,r){var o=getIndexOrStore(e,r),i=e.range?o.count(e.range):o.count();i.onerror=eventRejectHandler(n),i.onsuccess=function(n){t(Math.min(n.target.result,e.limit))}},t);var n=0;return this._read(function(t,r,o){iter(e,function(){return++n,!1},function(){t(n)},r,o)},t)},sortBy:function(t,e){var n=t.split(".").reverse(),r=n[0],o=n.length-1;function getval(t,e){return e?getval(t[n[e]],e-1):t[r]}var i="next"===this._ctx.dir?1:-1;function sorter(t,e){var n=getval(t,o),r=getval(e,o);return n<r?-i:n>r?i:0}return this.toArray(function(t){return t.sort(sorter)}).then(e)},toArray:function(t){var e=this._ctx;return this._read(function(t,n,r){if(s&&"next"===e.dir&&isPlainKeyRange(e,!0)&&e.limit>0){var o=e.table.hook.reading.fire,i=getIndexOrStore(e,r),a=e.limit<1/0?i.getAll(e.range,e.limit):i.getAll(e.range);a.onerror=eventRejectHandler(n),a.onsuccess=eventSuccessHandler(o===mirror?t:function(e){try{t(e.map(o))}catch(t){n(t)}})}else{var c=[];iter(e,function(t){c.push(t)},function arrayComplete(){t(c)},n,r)}},t)},offset:function(t){var e=this._ctx;return t<=0?this:(e.offset+=t,isPlainKeyRange(e)?addReplayFilter(e,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):addReplayFilter(e,function(){var e=t;return function(){return--e<0}}),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),addReplayFilter(this._ctx,function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}},!0),this},until:function(t,e){return addFilter(this._ctx,function(n,r,o){return!t(n.value)||(r(o),e)}),this},first:function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},filter:function(t){return addFilter(this._ctx,function(e){return t(e.value)}),function addMatchFilter(t,e){t.isMatch=combine(t.isMatch,e)}(this._ctx,t),this},and:function(t){return this.filter(t)},or:function(t){return new WhereClause(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},primaryKeys:function(t){var e=this._ctx;if(s&&"next"===e.dir&&isPlainKeyRange(e,!0)&&e.limit>0)return this._read(function(t,n,r){var o=getIndexOrStore(e,r),i=e.limit<1/0?o.getAllKeys(e.range,e.limit):o.getAllKeys(e.range);i.onerror=eventRejectHandler(n),i.onsuccess=eventSuccessHandler(t)}).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.primaryKey)}).then(function(){return n}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return addFilter(this._ctx,function(t){var e=t.primaryKey.toString(),r=hasOwn(n,e);return n[e]=!0,!r}),this},modify:function(t){var e=this,n=this._ctx.table.hook,o=n.updating.fire,i=n.deleting.fire;return this._write(function(n,a,s,c){var u;if("function"==typeof t)u=o===nop&&i===nop?t:function(e){var n=deepClone(e);if(!1===t.call(this,e,this))return!1;if(hasOwn(this,"value")){var a=getObjectDiff(n,this.value),s=o.call(this,a,this.primKey,n,c);s&&(e=this.value,r(s).forEach(function(t){setByKeyPath(e,t,s[t])}))}else i.call(this,this.primKey,e,c)};else if(o===nop){var l=r(t),f=l.length;u=function(e){for(var n=!1,r=0;r<f;++r){var o=l[r],i=t[o];getByKeyPath(e,o)!==i&&(setByKeyPath(e,o,i),n=!0)}return n}}else{var d=t;t=shallowClone(d),u=function(e){var n=!1,i=o.call(this,t,this.primKey,deepClone(e),c);return i&&extend(t,i),r(t).forEach(function(r){var o=t[r];getByKeyPath(e,r)!==o&&(setByKeyPath(e,r,o),n=!0)}),i&&(t=shallowClone(d)),n}}var h=0,p=0,b=!1,v=[],_=[],y=null;function doReject(t){return t&&(v.push(t),_.push(y)),a(new ModifyError("Error modifying one or more objects",v,p,_))}function checkFinished(){b&&p+v.length===h&&(v.length>0?doReject():n(p))}e.clone().raw()._iterate(function modifyItem(t,e){y=e.primaryKey;var n={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};function onerror(t){return v.push(t),_.push(n.primKey),checkFinished(),!0}if(!1!==u.call(n,t,n)){var r=!hasOwn(n,"value");++h,tryCatch(function(){var t=r?e.delete():e.update(n.value);t._hookCtx=n,t.onerror=hookedEventRejectHandler(onerror),t.onsuccess=hookedEventSuccessHandler(function(){++p,checkFinished()})},onerror)}else n.onsuccess&&n.onsuccess(n.value)},function(){b=!0,checkFinished()},doReject,s)})},delete:function(){var t=this,e=this._ctx,n=e.range,r=e.table.hook.deleting.fire,o=r!==nop;if(!o&&isPlainKeyRange(e)&&(e.isPrimKey&&!vt||!n))return this._write(function(t,e,r){var o=eventRejectHandler(e),i=n?r.count(n):r.count();i.onerror=o,i.onsuccess=function(){var a=i.result;tryCatch(function(){var e=n?r.delete(n):r.clear();e.onerror=o,e.onsuccess=function(){return t(a)}},function(t){return e(t)})}});var i=o?2e3:1e4;return this._write(function(n,a,s,c){var u=0,l=t.clone({keysOnly:!e.isMatch&&!o}).distinct().limit(i).raw(),f=[],d=function(){return l.each(o?function(t,e){f.push([e.primaryKey,e.value])}:function(t,e){f.push(e.primaryKey)}).then(function(){return o?f.sort(function(t,e){return ascending(t[0],e[0])}):f.sort(ascending),bulkDelete(s,c,f,o,r)}).then(function(){var t=f.length;return u+=t,f=[],t<i?u:d()})};n(d())})}}}),extend(this,{Collection:Collection,Table:Table,Transaction:Transaction,Version:Version,WhereClause:WhereClause}),function init(){P.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+P.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+P.name+"'. Closing db now to resume the delete request."),P.close()}),P.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+P.name+"') was blocked"):console.warn("Upgrade '"+P.name+"' blocked by other connection holding version "+t.oldVersion/10)})}(),d.forEach(function(t){t(P)})}function applyStructure(t,e){return r(e).forEach(function(n){var r=function parseType(t){if("function"==typeof t)return new t;if(o(t))return[parseType(t[0])];if(t&&"object"==typeof t){var e={};return applyStructure(e,t),e}return t}(e[n]);t[n]=r}),t}function hookedEventSuccessHandler(t){return wrap(function(e){var n=e.target,r=n._hookCtx,o=r.value||n.result,i=r&&r.onsuccess;i&&i(o),t&&t(o)},t)}function eventRejectHandler(t){return wrap(function(e){return preventDefault(e),t(e.target.error),!1})}function eventSuccessHandler(t){return wrap(function(e){t(e.target.result)})}function hookedEventRejectHandler(t){return wrap(function(e){var n=e.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),preventDefault(e),t(r),!1})}function preventDefault(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function awaitIterator(t){var e=function(e){return t.next(e)},n=step(e),r=step(function(e){return t.throw(e)});function step(t){return function(e){var i=t(e),a=i.value;return i.done?a:a&&"function"==typeof a.then?a.then(n,r):o(a)?Promise.all(a).then(n,r):n(a)}}return step(e)()}function IndexSpec(t,e,n,r,o,i,a){this.name=t,this.keyPath=e,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=a;var s="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+s}function TableSchema(t,e,n,r){this.name=t,this.primKey=e||new IndexSpec,this.indexes=n||[new IndexSpec],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=arrayToObject(n,function(t){return[t.name,t]})}function safariMultiStoreFix(t){return 1===t.length?t[0]:t}function getNativeGetDatabaseNamesFn(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}setDebug(v,_t),props(Dexie,k),props(Dexie,{delete:function(t){var e=new Dexie(t),n=e.delete();return n.onblocked=function(t){return e.on("blocked",t),this},n},exists:function(t){return new Dexie(t).open().then(function(t){return t.close(),!0}).catch(Dexie.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(t){var e=getNativeGetDatabaseNamesFn(Dexie.dependencies.indexedDB);return e?new Promise(function(t,n){var r=e();r.onsuccess=function(e){t(slice(e.target.result,0))},r.onerror=eventRejectHandler(n)}).then(t):st.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function Class(t){t&&extend(this,t)}},applyStructure:applyStructure,ignoreTransaction:function(t){return J.trans?usePSD(J.transless,t):t()},vip:function(t){return newScope(function(){return J.letThrough=!0,t()})},async:function(t){return function(){try{var e=awaitIterator(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Promise.resolve(e)}catch(t){return at(t)}}},spawn:function(t,e,n){try{var r=awaitIterator(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:Promise.resolve(r)}catch(t){return at(t)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(t,e){var n=Promise.resolve("function"==typeof t?Dexie.ignoreTransaction(t):t).timeout(e||6e4);return J.trans?J.trans.waitFor(n):n},Promise:Promise,debug:{get:function(){return v},set:function(t){setDebug(t,"dexie"===t?function(){return!0}:_t)}},derive:derive,extend:extend,props:props,override:override,Events:Events,getByKeyPath:getByKeyPath,setByKeyPath:setByKeyPath,delByKeyPath:function delByKeyPath(t,e){"string"==typeof e?setByKeyPath(t,e,void 0):"length"in e&&[].map.call(e,function(e){setByKeyPath(t,e,void 0)})},shallowClone:shallowClone,deepClone:deepClone,getObjectDiff:getObjectDiff,asap:asap,maxKey:ut,minKey:lt,addons:[],connections:ht,MultiModifyError:O.Modify,errnames:S,IndexSpec:IndexSpec,TableSchema:TableSchema,dependencies:function(){try{return{indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)}),default:Dexie,Dexie:Dexie}),Promise.rejectionMapper=function mapError(t,e){if(!t||t instanceof DexieError||t instanceof TypeError||t instanceof SyntaxError||!t.name||!E[t.name])return t;var n=new E[t.name](e||t.message,t);return"stack"in t&&setProp(n,"stack",{get:function(){return this.inner.stack}}),n},(st=new Dexie("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==i.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(t){return st.dbnames.put({name:t}).catch(nop)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(t){}}(),e.a=Dexie}).call(e,n(36),n(480).setImmediate)},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function Timeout(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new Timeout(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new Timeout(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function onTimeout(){t._onTimeout&&t._onTimeout()},e))},n(481),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(36))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o=1,i={},a=!1,s=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?function installNextTickImplementation(){r=function(t){e.nextTick(function(){runIfPresent(t)})}}():!function canUsePostMessage(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?function installMessageChannelImplementation(){var t=new MessageChannel;t.port1.onmessage=function(t){runIfPresent(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function installReadyStateChangeImplementation(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){runIfPresent(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function installSetTimeoutImplementation(){r=function(t){setTimeout(runIfPresent,0,t)}}():function installPostMessageImplementation(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&runIfPresent(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}(),c.setImmediate=function setImmediate(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return i[o]=a,r(o),o++},c.clearImmediate=clearImmediate}function clearImmediate(t){delete i[t]}function runIfPresent(t){if(a)setTimeout(runIfPresent,0,t);else{var e=i[t];if(e){a=!0;try{!function run(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{clearImmediate(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(36),n(4))},function(t,e,n){"use strict";var r=function(){return function FbPost(){}}();e.a=r},function(t,e,n){var r=n(484);n(544),n(545),n(546),t.exports=r},function(t,e,n){n(485),n(502),n(510),n(511),n(512),n(514),n(516),n(517),n(519),n(520),n(521),n(522),n(523),n(524),n(526),n(527),n(528),n(529),n(530),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(541),n(542),n(543);var r=n(431);t.exports=r.Array},function(t,e,n){"use strict";var r=n(486).charAt,o=n(269),i=n(428),a=o.set,s=o.getterFor("String Iterator");i(String,"String",function(t){a(this,{type:"String Iterator",string:String(t),index:0})},function next(){var t,e=s(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(101),o=n(268),i=function(t){return function(e,n){var i,a,s=String(o(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,n){var r=n(49),o=n(422),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function propertyIsEnumerable(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(63),o=n(490),i=n(429),a=n(62);t.exports=function(t,e){for(var n=o(e),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||s(t,l,c(e,l))}}},function(t,e,n){var r=n(157),o=n(491),i=n(492),a=n(103);t.exports=r("Reflect","ownKeys")||function ownKeys(t){var e=o.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(432),o=n(277).concat("length","prototype");e.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return r(t,o)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(40),o=/#|\.prototype\./,i=function(t,e){var n=s[a(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,n){"use strict";var r=n(433).IteratorPrototype,o=n(436),i=n(155),a=n(437),s=n(132),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),a(t,u,!1,!0),s[u]=c,t}},function(t,e,n){var r=n(40);t.exports=!r(function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype})},function(t,e,n){var r=n(435);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(71),o=n(62),i=n(103),a=n(498);t.exports=r?Object.defineProperties:function defineProperties(t,e){i(t);for(var n,r=a(e),s=r.length,c=0;s>c;)o.f(t,n=r[c++],e[n]);return t}},function(t,e,n){var r=n(432),o=n(277);t.exports=Object.keys||function keys(t){return r(t,o)}},function(t,e,n){var r=n(157);t.exports=r("document","documentElement")},function(t,e,n){var r=n(103),o=n(501);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function setPrototypeOf(n,i){return r(n),o(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){var r=n(72);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){var r=n(18),o=n(503);r({target:"Array",stat:!0,forced:!n(509)(function(t){Array.from(t)})},{from:o})},function(t,e,n){"use strict";var r=n(278),o=n(41),i=n(504),a=n(505),s=n(33),c=n(133),u=n(506);t.exports=function from(t){var e,n,l,f,d,h=o(t),p="function"==typeof this?this:Array,b=arguments.length,v=b>1?arguments[1]:void 0,_=void 0!==v,y=0,m=u(h);if(_&&(v=r(v,b>2?arguments[2]:void 0,2)),null==m||p==Array&&a(m))for(n=new p(e=s(h.length));e>y;y++)c(n,y,_?v(h[y],y):h[y]);else for(d=(f=m.call(h)).next,n=new p;!(l=d.call(f)).done;y++)c(n,y,_?i(f,v,[l.value,y],!0):l.value);return n.length=y,n}},function(t,e,n){var r=n(103);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(37),o=n(132),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,e,n){var r=n(507),o=n(132),i=n(37)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(508),o=n(275),i=n(37)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r={};r[n(37)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(37)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},function(t,e,n){n(18)({target:"Array",stat:!0},{isArray:n(86)})},function(t,e,n){"use strict";var r=n(18),o=n(40),i=n(133);r({target:"Array",stat:!0,forced:o(function(){function F(){}return!(Array.of.call(F)instanceof F)})},{of:function of(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(18),o=n(40),i=n(86),a=n(72),s=n(41),c=n(33),u=n(133),l=n(134),f=n(135),d=n(37),h=n(438),p=d("isConcatSpreadable"),b=h>=51||!o(function(){var t=[];return t[p]=!1,t.concat()[0]!==t}),v=f("concat"),_=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,forced:!b||!v},{concat:function concat(t){var e,n,r,o,i,a=s(this),f=l(a,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?a:arguments[e],_(i)){if(d+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,d++)n in i&&u(f,d,i[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(f,d++,i)}return f.length=d,f}})},function(t,e,n){var r=n(157);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(18),o=n(515),i=n(52);r({target:"Array",proto:!0},{copyWithin:o}),i("copyWithin")},function(t,e,n){"use strict";var r=n(41),o=n(131),i=n(33),a=Math.min;t.exports=[].copyWithin||function copyWithin(t,e){var n=r(this),s=i(n.length),c=o(t,s),u=o(e,s),l=arguments.length>2?arguments[2]:void 0,f=a((void 0===l?s:o(l,s))-u,s-c),d=1;for(u<c&&c<u+f&&(d=-1,u+=f-1,c+=f-1);f-- >0;)u in n?n[c]=n[u]:delete n[c],c+=d,u+=d;return n}},function(t,e,n){"use strict";var r=n(18),o=n(87).every;r({target:"Array",proto:!0,forced:n(64)("every")},{every:function every(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(18),o=n(518),i=n(52);r({target:"Array",proto:!0},{fill:o}),i("fill")},function(t,e,n){"use strict";var r=n(41),o=n(131),i=n(33);t.exports=function fill(t){for(var e=r(this),n=i(e.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(18),o=n(87).filter,i=n(40),a=n(135)("filter"),s=a&&!i(function(){[].filter.call({length:-1,0:1},function(t){throw t})});r({target:"Array",proto:!0,forced:!a||!s},{filter:function filter(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(18),o=n(87).find,i=n(52),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),r({target:"Array",proto:!0,forced:a},{find:function find(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(t,e,n){"use strict";var r=n(18),o=n(87).findIndex,i=n(52),a=!0;"findIndex"in[]&&Array(1).findIndex(function(){a=!1}),r({target:"Array",proto:!0,forced:a},{findIndex:function findIndex(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(t,e,n){"use strict";var r=n(18),o=n(439),i=n(41),a=n(33),s=n(101),c=n(134);r({target:"Array",proto:!0},{flat:function flat(){var t=arguments.length?arguments[0]:void 0,e=i(this),n=a(e.length),r=c(e,0);return r.length=o(r,e,e,n,0,void 0===t?1:s(t)),r}})},function(t,e,n){"use strict";var r=n(18),o=n(439),i=n(41),a=n(33),s=n(158),c=n(134);r({target:"Array",proto:!0},{flatMap:function flatMap(t){var e,n=i(this),r=a(n.length);return s(t),(e=c(n,0)).length=o(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},function(t,e,n){"use strict";var r=n(18),o=n(525);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,e,n){"use strict";var r=n(87).forEach,o=n(64);t.exports=o("forEach")?function forEach(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(t,e,n){"use strict";var r=n(18),o=n(276).includes,i=n(52);r({target:"Array",proto:!0},{includes:function includes(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(t,e,n){"use strict";var r=n(18),o=n(276).indexOf,i=n(64),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,c=i("indexOf");r({target:"Array",proto:!0,forced:s||c},{indexOf:function indexOf(t){return s?a.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(85),o=n(52),i=n(132),a=n(269),s=n(428),c=a.set,u=a.getterFor("Array Iterator");t.exports=s(Array,"Array",function(t,e){c(this,{type:"Array Iterator",target:r(t),index:0,kind:e})},function(){var t=u(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){"use strict";var r=n(18),o=n(156),i=n(85),a=n(64),s=[].join,c=o!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:c||u},{join:function join(t){return s.call(i(this),void 0===t?",":t)}})},function(t,e,n){var r=n(18),o=n(531);r({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},function(t,e,n){"use strict";var r=n(85),o=n(101),i=n(33),a=n(64),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,l=a("lastIndexOf");t.exports=u||l?function lastIndexOf(t){if(u)return c.apply(this,arguments)||0;var e=r(this),n=i(e.length),a=n-1;for(arguments.length>1&&(a=s(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},function(t,e,n){"use strict";var r=n(18),o=n(87).map,i=n(40),a=n(135)("map"),s=a&&!i(function(){[].map.call({length:-1,0:1},function(t){throw t})});r({target:"Array",proto:!0,forced:!a||!s},{map:function map(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(18),o=n(440).left;r({target:"Array",proto:!0,forced:n(64)("reduce")},{reduce:function reduce(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(18),o=n(440).right;r({target:"Array",proto:!0,forced:n(64)("reduceRight")},{reduceRight:function reduceRight(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(18),o=n(86),i=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function reverse(){return o(this)&&(this.length=this.length),i.call(this)}})},function(t,e,n){"use strict";var r=n(18),o=n(72),i=n(86),a=n(131),s=n(33),c=n(85),u=n(133),l=n(135),f=n(37)("species"),d=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!l("slice")},{slice:function slice(t,e){var n,r,l,p=c(this),b=s(p.length),v=a(t,b),_=a(void 0===e?b:e,b);if(i(p)&&("function"!=typeof(n=p.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[f])&&(n=void 0):n=void 0,n===Array||void 0===n))return d.call(p,v,_);for(r=new(void 0===n?Array:n)(h(_-v,0)),l=0;v<_;v++,l++)v in p&&u(r,l,p[v]);return r.length=l,r}})},function(t,e,n){"use strict";var r=n(18),o=n(87).some;r({target:"Array",proto:!0,forced:n(64)("some")},{some:function some(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(18),o=n(158),i=n(41),a=n(40),s=n(64),c=[],u=c.sort,l=a(function(){c.sort(void 0)}),f=a(function(){c.sort(null)}),d=s("sort");r({target:"Array",proto:!0,forced:l||!f||d},{sort:function sort(t){return void 0===t?u.call(i(this)):u.call(i(this),o(t))}})},function(t,e,n){n(540)("Array")},function(t,e,n){"use strict";var r=n(157),o=n(62),i=n(37),a=n(71),s=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(18),o=n(131),i=n(101),a=n(33),s=n(41),c=n(134),u=n(133),l=n(135),f=Math.max,d=Math.min;r({target:"Array",proto:!0,forced:!l("splice")},{splice:function splice(t,e){var n,r,l,h,p,b,v=s(this),_=a(v.length),y=o(t,_),m=arguments.length;if(0===m?n=r=0:1===m?(n=0,r=_-y):(n=m-2,r=d(f(i(e),0),_-y)),_+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=c(v,r),h=0;h<r;h++)(p=y+h)in v&&u(l,h,v[p]);if(l.length=r,n<r){for(h=y;h<_-r;h++)b=h+n,(p=h+r)in v?v[b]=v[p]:delete v[b];for(h=_;h>_-r+n;h--)delete v[h-1]}else if(n>r)for(h=_-r;h>y;h--)b=h+n-1,(p=h+r-1)in v?v[b]=v[p]:delete v[b];for(h=0;h<n;h++)v[h+y]=arguments[h+2];return v.length=_-r+n,l}})},function(t,e,n){n(52)("flat")},function(t,e,n){n(52)("flatMap")},function(t,e,n){var r=n(18),o=n(86),i=Object.isFrozen,a=function(t,e){if(!i||!o(t)||!i(t))return!1;for(var n,r=0,a=t.length;r<a;)if(!("string"==typeof(n=t[r++])||e&&void 0===n))return!1;return 0!==a};r({target:"Array",stat:!0},{isTemplateObject:function isTemplateObject(t){if(!a(t,!0))return!1;var e=t.raw;return!(e.length!==t.length||!a(e,!1))}})},function(t,e,n){"use strict";var r=n(71),o=n(52),i=n(41),a=n(33),s=n(62).f;!r||"lastItem"in[]||(s(Array.prototype,"lastItem",{configurable:!0,get:function lastItem(){var t=i(this),e=a(t.length);return 0==e?void 0:t[e-1]},set:function lastItem(t){var e=i(this),n=a(e.length);return e[0==n?0:n-1]=t}}),o("lastItem"))},function(t,e,n){"use strict";var r=n(71),o=n(52),i=n(41),a=n(33),s=n(62).f;!r||"lastIndex"in[]||(s(Array.prototype,"lastIndex",{configurable:!0,get:function lastIndex(){var t=i(this),e=a(t.length);return 0==e?0:e-1}}),o("lastIndex"))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(187),o=n(671),i=n(16),a=n(60),s=n(148),c=n(168),u=n(286),l=n.n(u),f=n(416),d=(n.n(f),n(20),n(34),n(477)),h=n(478),p=n(673),b=n(483),v=(n.n(b),this&&this.__assign||function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)}),_=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};chrome.browserAction.onClicked.addListener(function(t){chrome.tabs.create({url:chrome.extension.getURL("tab.html")},function(t){})});var y=new s.g(window.localStorage,window.crypto),m=new Date;m.setMonth(m.getMonth()-3),window.Sha1=i.e,window.smartStorage=y,window.GetOptOutStatus=function(){return y.user_opted_out};var g=new URL("https://5c12a1d2279b480c99efa5ff04dd5b82@sentry.io/1219099").pathname.substr(1);Object(c.g)(r.b,g),Object(r.c)(r.a.None),f.setUserContext({id:y.deviceId});var w={release:chrome.runtime.getManifest().version+"-ab75204-rof",environment:"master",tags:{git_commit:"ab75204"},autoBreadcrumbs:{xhr:!0,console:!1,dom:!1,location:!1},ignoreErrors:["The user is not logged in to facebook","profile image selector has no results","Not a feedback target","Bad verb! verb::false","can't parse fb_post_entity_id, expected selector not found","profile image selector has no results",".fbInternPreview","The user is probably not logged in to facebook"]};f.setExtraContext({extensionId:chrome.runtime.id}),f.config("https://5c12a1d2279b480c99efa5ff04dd5b82@sentry.io/1219099",w).install(),Object(i.a)(f,"chrome-extension://fakeidforchromeextension/",chrome.runtime.getURL("/"));var S=Object(s.j)(window,document,!1),x=new s.e(r.b,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];S.then(function(e){e.apply(null,t)}),r.b.info("will send to analytics",t)},f),O=new c.d(chrome,y,n(674),chrome.runtime.onInstalled,r.b);function startBackground(){r.b.info(chrome.runtime.getManifest().version);var t=function setUpYtTracker(t){var e=new s.h(r.b,function(t,e){return Object(c.k)(t,{urls:e})});return e.sponsoredYTVideosSubscription.subscribe(function(e){t.ytVideos.where("date").belowOrEqual(m).delete().then(function(){return t.ytVideos.add({videoId:e.id,date:new Date})})}),e}(function setUpDb(){var t=new h.a;return O.crossMessage.subscribe(function(e){var n=new Date;if("NewSponsoredPost"===e.type){var o=e.payload,i=(o.fb_user_id,_(o,["fb_user_id"])),s=v(v({},i),{date:n,fb_post_src:null});t.fbPosts.where("date").belowOrEqual(m).delete().then(function(){return t.fbPosts.add(s)})}if("NewPromotedTweet"===e.type&&t.twTweets.where("date").belowOrEqual(m).delete().then(function(){return t.twTweets.add(v({date:n},e.payload))}),"AmazonSponsored"===e.type){var c;if(r.b.info("AmazonSponsored",{message:e}),e.payload.sponsored_type===a.a.Headline){var u=(d=e.payload).az_headline,l=d.az_products.map(extractAmazonHeadlineProduct);c=v(v({},u),{products:l,type:"headline"})}else if(e.payload.sponsored_type===a.a.Product){var f=(d=e.payload).az_product;c=v(v({},f),{type:"product"})}else{if(e.payload.sponsored_type!==a.a.Banner)throw new Error("Unexpected Amazon ad type: "+JSON.stringify(e.payload));var d,h=(d=e.payload).az_banner;c=v(v({},h),{type:"banner"})}t.azAds.where("date").belowOrEqual(m).delete().then(function(){return t.azAds.add(v({date:n},c))})}}),t}()),e=new s.c(i.m,x,Object(p.a)());!function setUpEnvironmentServices(){O.envEvents.subscribe(function(t){"install"===t&&chrome.tabs.query({url:"*://*.facebook.com/*"},function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];r.id&&chrome.tabs.reload(r.id)}})}),O.hideOrigin("https://www.facebook.com/*","https://www.facebook.com")}(),Object(c.l)(O,!1);var n=l.a.create(),u=new s.a(x,{get:function(t){return n.get(t).then(function(t){return t.data})},post:function(t,e){return n.post(t,e).then(function(t){return t.data})}},Object(s.i)(function(t,e){return chrome.webRequest.onBeforeRequest.addListener(t,e,["requestBody"]),function(){chrome.webRequest.onBeforeRequest.removeListener(t)}}),!0),b=new s.d(x,i.l,"https://prod-collection.socialpanel.co/getGeoLocationCity",y.deviceId);b.start();var g=new s.b(b,e,y.deviceId,chrome.runtime.id,chrome.runtime.getManifest().version,window.navigator.userAgent,y.thirdPartyIdIS,y.thirdPartyCookie,function(t){x.error("eventsEnricher-facebook metadata is null",t)},y.secret_random_salt,"desktop"),w=Object(o.a)("UrlSigner","https://prod-collection.socialpanel.co/getSignedUrl","https://prod-collection.socialpanel.co/auditEvents",y.deviceId,chrome.runtime.id,{get thirdPartyCookie(){return y.thirdPartyCookie},get thirdPartyId(){return y.thirdPartyIdIS}},l.a.create(),x,window.navigator.userAgent,window.navigator.platform,function captureException(t,e){f.captureBreadcrumb({message:e,level:"info",category:"console"}),f.captureException(t),x.error(e,t)}),E=new s.f(l.a.create(),y.deviceId,chrome.runtime.id,x,y,function(){return Promise.resolve("NA")});new c.c(chrome.runtime.id,"ab75204","master",chrome.runtime.getManifest().version,x,O,S,g,w,e,b,y,E,i.z,i.y,t,u,!1).start(),Object(c.k)(function(t){if(t.url.includes(d.a)){if(t.requestHeaders)for(var e=0,n=t.requestHeaders;e<n.length;e++){"referer"===n[e].name.toLowerCase()&&!0}return t.requestHeaders||(t.requestHeaders=[]),t.requestHeaders.push({name:"referer",value:"https://www.facebook.com/"}),{requestHeaders:t.requestHeaders}}},{urls:["https://www.facebook.com/plugins/*"]},["blocking","requestHeaders"])}function extractAmazonHeadlineProduct(t){return{az_product_full_url:t.az_product_full_url,az_product_image_url:t.az_product_image_url,az_product_title:t.az_product_title}}Object(i.g)(window,!0,function(t){t&&t.reason instanceof Error?x.error(t.reason):t&&t.error instanceof Error?x.error(t.error):x.error(t)}),S.then(function(t){t("create","UA-120225139-1","auto"),t("set","checkProtocolTask",null),Object(c.m)(t,"ab75204","master",chrome.runtime.id,y.deviceId,chrome.runtime.getManifest().version,y.thirdPartyIdIS,y.thirdPartyCookie),Object(c.n)(t,window),t("send","pageview","background")}),function registerUninstallPage(){var t=new URL("https://prod-collection.socialpanel.co/extensionUninstallEvent");t.searchParams.append("forwardUrl","http://1128388c1b05c2347c44e5a36-20a1b7ec802a5.webflow.io"),t.searchParams.append("uuid",y.deviceId),t.searchParams.append("extensionId",chrome.runtime.id),chrome.runtime.setUninstallURL(t.toString()),x.info("registered uninstallURL: '"+t+"'")}(),function shouldStartBackground(t){return Promise.resolve(!t.user_opted_out)}(y).then(function(t){t?f.context(startBackground):r.b.info("User has opted out.")}),window.ChangeOptOutStatus=function(t){y.user_opted_out!=t&&(y.user_opted_out=t,t?location.reload():f.context(startBackground))}},function(t,e,n){"use strict";var r=n(672);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";e.a=function GetSender(t,e,n,r,o,i,a,s,c,u,f){var p=e+t;if(!l.has(p))if(s.info("Creating new message sender of type "+t),"S3ThroughProxy"===t)l.set(p,new d(e,n,r,o,i,a,s,c,u,f));else{if("UrlSigner"!==t)throw"Invalid sender type!";l.set(p,new h(e,n,r,o,i,a,s,c,u,f))}return l.get(p)};var r,o=n(285),i=n(20),a=n(34),s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=1e4,u=10,l=new Map;var f=function(){function MessageSenderBase(t,e,n,r,s,l,f,d,h,p){var b=this;this.endpoint=t,this.auditEndpoint=e,this.seed=n,this.extensionId=r,this.thirdPartyInfo=s,this.httpClient=l,this.log=f,this.userAgent=d,this.platform=h,this.captureException=p,this.queue=new i.d,this.queue.pipe(Object(a.b)(c,null,u),Object(a.h)(function(t){return 0!==t.length}),Object(a.l)(function(t){return Object(i.g)(function(){return b.uploadEvents(t)}).pipe(Object(o.a)({initialInterval:3e4,maxRetries:3}))})).subscribe(),this.auditQueue=new i.d,this.auditQueue.pipe(Object(a.b)(c,null,u),Object(a.h)(function(t){return 0!==t.length}),Object(a.l)(function(t){return Object(i.h)(b.uploadAuditEvent(t)).pipe(Object(o.a)({initialInterval:3e4,maxRetries:3}))})).subscribe()}return MessageSenderBase.prototype.uploadAuditEvent=function(t){var e=new URL(this.auditEndpoint);return e.searchParams.append("seed",this.seed),e.searchParams.append("extensionId",this.extensionId),this.uploadToEndPoint(e.toString(),"POST",t)},MessageSenderBase.prototype.uploadToEndPoint=function(t,e,n){var r=this,o={seed:this.seed,third_party_id:this.thirdPartyInfo.thirdPartyId,third_party_cookie:this.thirdPartyInfo.thirdPartyCookie,user_agent:this.userAgent,events:n,platform:this.platform},i={url:t,method:e,data:JSON.stringify(o),headers:{"Content-Type":"application/json"}},a=this.httpClient.request(i).catch(function(){return sleep(500).then(function(){return r.httpClient.request(i)})});return a.catch(function(t){r.log.error(t),r.captureException(t,"uploadToEndPoint request failed")}),a.then(function(){r.log.info("Success sending!")}),a.then(function(){})},MessageSenderBase.prototype.SendEvent=function(t){this.queue.next(t)},MessageSenderBase.prototype.SendAuditEvent=function(t){this.auditQueue.next(t)},MessageSenderBase.prototype.SendEventImmediate=function(t){return this.uploadEvents([t])},MessageSenderBase}(),d=function(t){function S3MessageSender(e,n,r,o,i,a,s,c,u,l){return t.call(this,e,n,r,o,i,a,s,c,u,l)||this}return s(S3MessageSender,t),S3MessageSender.prototype.uploadEvents=function(t){return this.uploadToEndPoint(this.endpoint,"POST",t)},S3MessageSender}(f),h=function(t){function SignedUrlUploader(e,n,r,o,i,a,s,c,u,l){return t.call(this,e,n,r,o,i,a,s,c,u,l)||this}return s(SignedUrlUploader,t),SignedUrlUploader.prototype.getSignedUrl=function(){var t=this,e=new URL(this.endpoint);return e.searchParams.append("date",Date.now().toString()),e.searchParams.append("seed",this.seed),e.searchParams.append("extensionId",this.extensionId),this.httpClient.get(e.toString()).catch(function(n){if(IsAxiosError(n)&&n.response&&429===n.response.status)throw n;return sleep(500).then(function(){return t.httpClient.get(e.toString())})}).then(function(e){return t.log.info("New signed url! "+e.data),decodeURI(e.data)},function(e){if(IsAxiosError(e)&&e.response&&429===e.response.status)return t.log.log("Got rate limit from the server."),null;throw t.log.error("Couldn't get a signed url!"),t.captureException(e,"Couldn't get a signed url!"),e})},SignedUrlUploader.prototype.uploadEvents=function(t){var e=this;return this.getSignedUrl().then(function(n){if(n)return e.uploadToEndPoint(n,"PUT",t)})},SignedUrlUploader}(f);function sleep(t){return new Promise(function(e){return setTimeout(e,t)})}function IsAxiosError(t){return t&&t.config&&!0}},function(t,e,n){"use strict";e.a=function createChromeTrafficRegisterFunctionAdapter(){return function(t,e,n){var i,a,s;return Object(o.k)(t,e,[(null===(i=n)||void 0===i?void 0:i.blocking)&&"blocking",(null===(a=n)||void 0===a?void 0:a.requestHeaders)&&"requestHeaders",(null===(s=n)||void 0===s?void 0:s.extraHeaders)&&"extraHeaders"].filter(r.q).filter(function(t){return!!t}))}};var r=n(16),o=n(168)},function(t,e,n){t.exports=n.p+"static/generic-icon-828555.png"}]);
//# sourceMappingURL=background.js.map